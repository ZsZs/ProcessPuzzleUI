(function(){this.MooTools={version:"1.4.5",build:"ab8ea8824dc3b24b6666867a2c4ed58ebb762cf0"};var f=this.typeOf=function(i){if(i==null){return"null"}if(i.$family!=null){return i.$family()}if(i.nodeName){if(i.nodeType==1){return"element"}if(i.nodeType==3){return(/\S/).test(i.nodeValue)?"textnode":"whitespace"}}else{if(typeof i.length=="number"){if(i.callee){return"arguments"}if("item" in i){return"collection"}}}return typeof i};var v=this.instanceOf=function(z,i){if(z==null){return false}var y=z.$constructor||z.constructor;while(y){if(y===i){return true}y=y.parent}if(!z.hasOwnProperty){return false}return z instanceof i};var g=this.Function;var s=true;for(var r in {toString:1}){s=null}if(s){s=["hasOwnProperty","valueOf","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","constructor"]}g.prototype.overloadSetter=function(y){var i=this;return function(B,z){if(B==null){return this}if(y||typeof B!="string"){for(var D in B){i.call(this,D,B[D])}if(s){for(var E=s.length;E--;){D=s[E];if(B.hasOwnProperty(D)){i.call(this,D,B[D])}}}}else{i.call(this,B,z)}return this}};g.prototype.overloadGetter=function(y){var i=this;return function(B){var D,z;if(typeof B!="string"){D=B}else{if(arguments.length>1){D=arguments}else{if(y){D=[B]}}}if(D){z={};for(var E=0;E<D.length;E++){z[D[E]]=i.call(this,D[E])}}else{z=i.call(this,B)}return z}};g.prototype.extend=function(i,y){this[i]=y}.overloadSetter();g.prototype.implement=function(i,y){this.prototype[i]=y}.overloadSetter();var p=Array.prototype.slice;g.from=function(i){return(f(i)=="function")?i:function(){return i}};Array.from=function(i){if(i==null){return[]}return(l.isEnumerable(i)&&typeof i!="string")?(f(i)=="array")?i:p.call(i):[i]};Number.from=function(y){var i=parseFloat(y);return isFinite(i)?i:null};String.from=function(i){return i+""};g.implement({hide:function(){this.$hidden=true;return this},protect:function(){this.$protected=true;return this}});var l=this.Type=function(B,z){if(B){var y=B.toLowerCase();var i=function(D){return(f(D)==y)};l["is"+B]=i;if(z!=null){z.prototype.$family=(function(){return y}).hide();z.type=i}}if(z==null){return null}z.extend(this);z.$constructor=l;z.prototype.$constructor=z;return z};var q=Object.prototype.toString;l.isEnumerable=function(i){return(i!=null&&typeof i.length=="number"&&q.call(i)!="[object Function]")};var b={};var d=function(i){var y=f(i.prototype);return b[y]||(b[y]=[])};var j=function(z,G){if(G&&G.$hidden){return}var y=d(this);for(var B=0;B<y.length;B++){var E=y[B];if(f(E)=="type"){j.call(E,z,G)}else{E.call(this,z,G)}}var D=this.prototype[z];if(D==null||!D.$protected){this.prototype[z]=G}if(this[z]==null&&f(G)=="function"){u.call(this,z,function(i){return G.apply(i,p.call(arguments,1))})}};var u=function(i,z){if(z&&z.$hidden){return}var y=this[i];if(y==null||!y.$protected){this[i]=z}};l.implement({implement:j.overloadSetter(),extend:u.overloadSetter(),alias:function(i,y){j.call(this,i,this.prototype[y])}.overloadSetter(),mirror:function(i){d(this).push(i);return this}});new l("Type",l);var c=function(y,G,D){var B=(G!=Object),K=G.prototype;if(B){G=new l(y,G)}for(var H=0,E=D.length;H<E;H++){var L=D[H],J=G[L],I=K[L];if(J){J.protect()}if(B&&I){G.implement(L,I.protect())}}if(B){var z=K.propertyIsEnumerable(D[0]);G.forEachMethod=function(P){if(!z){for(var O=0,M=D.length;O<M;O++){P.call(K,K[D[O]],D[O])}}for(var N in K){P.call(K,K[N],N)}}}return c};c("String",String,["charAt","charCodeAt","concat","indexOf","lastIndexOf","match","quote","replace","search","slice","split","substr","substring","trim","toLowerCase","toUpperCase"])("Array",Array,["pop","push","reverse","shift","sort","splice","unshift","concat","join","slice","indexOf","lastIndexOf","filter","forEach","every","map","some","reduce","reduceRight"])("Number",Number,["toExponential","toFixed","toLocaleString","toPrecision"])("Function",g,["apply","call","bind"])("RegExp",RegExp,["exec","test"])("Object",Object,["create","defineProperty","defineProperties","keys","getPrototypeOf","getOwnPropertyDescriptor","getOwnPropertyNames","preventExtensions","isExtensible","seal","isSealed","freeze","isFrozen"])("Date",Date,["now"]);Object.extend=u.overloadSetter();Date.extend("now",function(){return +(new Date)});new l("Boolean",Boolean);Number.prototype.$family=function(){return isFinite(this)?"number":"null"}.hide();Number.extend("random",function(y,i){return Math.floor(Math.random()*(i-y+1)+y)});var m=Object.prototype.hasOwnProperty;Object.extend("forEach",function(i,z,B){for(var y in i){if(m.call(i,y)){z.call(B,i[y],y,i)}}});Object.each=Object.forEach;Array.implement({forEach:function(B,D){for(var z=0,y=this.length;z<y;z++){if(z in this){B.call(D,this[z],z,this)}}},each:function(i,y){Array.forEach(this,i,y);return this}});var t=function(i){switch(f(i)){case"array":return i.clone();case"object":return Object.clone(i);default:return i}};Array.implement("clone",function(){var y=this.length,z=new Array(y);while(y--){z[y]=t(this[y])}return z});var a=function(y,i,z){switch(f(z)){case"object":if(f(y[i])=="object"){Object.merge(y[i],z)}else{y[i]=Object.clone(z)}break;case"array":y[i]=z.clone();break;default:y[i]=z}return y};Object.extend({merge:function(H,B,z){if(f(B)=="string"){return a(H,B,z)}for(var G=1,y=arguments.length;G<y;G++){var D=arguments[G];for(var E in D){a(H,E,D[E])}}return H},clone:function(i){var z={};for(var y in i){z[y]=t(i[y])}return z},append:function(E){for(var D=1,z=arguments.length;D<z;D++){var y=arguments[D]||{};for(var B in y){E[B]=y[B]}}return E}});["Object","WhiteSpace","TextNode","Collection","Arguments"].each(function(i){new l(i)});var k=Date.now();String.extend("uniqueID",function(){return(k++).toString(36)});var h=this.Hash=new l("Hash",function(i){if(f(i)=="hash"){i=Object.clone(i.getClean())}for(var y in i){this[y]=i[y]}return this});h.implement({forEach:function(i,y){Object.forEach(this,i,y)},getClean:function(){var y={};for(var i in this){if(this.hasOwnProperty(i)){y[i]=this[i]}}return y},getLength:function(){var y=0;for(var i in this){if(this.hasOwnProperty(i)){y++}}return y}});h.alias("each","forEach");Object.type=l.isObject;var o=this.Native=function(i){return new l(i.name,i.initialize)};o.type=l.type;o.implement=function(B,y){for(var z=0;z<B.length;z++){B[z].implement(y)}return o};var n=Array.type;Array.type=function(i){return v(i,Array)||n(i)};this.$A=function(i){return Array.from(i).slice()};this.$arguments=function(y){return function(){return arguments[y]}};this.$chk=function(i){return !!(i||i===0)};this.$clear=function(i){clearTimeout(i);clearInterval(i);return null};this.$defined=function(i){return(i!=null)};this.$each=function(z,y,B){var i=f(z);((i=="arguments"||i=="collection"||i=="array"||i=="elements")?Array:Object).each(z,y,B)};this.$empty=function(){};this.$extend=function(y,i){return Object.append(y,i)};this.$H=function(i){return new h(i)};this.$merge=function(){var i=Array.slice(arguments);i.unshift({});return Object.merge.apply(null,i)};this.$lambda=g.from;this.$mixin=Object.merge;this.$random=Number.random;this.$splat=Array.from;this.$time=Date.now;this.$type=function(i){var y=f(i);if(y=="elements"){return"array"}return(y=="null")?false:y};this.$unlink=function(i){switch(f(i)){case"object":return Object.clone(i);case"array":return Array.clone(i);case"hash":return new h(i);default:return i}}})();Array.implement({every:function(c,d){for(var b=0,a=this.length>>>0;b<a;b++){if((b in this)&&!c.call(d,this[b],b,this)){return false}}return true},filter:function(d,g){var c=[];for(var f,b=0,a=this.length>>>0;b<a;b++){if(b in this){f=this[b];if(d.call(g,f,b,this)){c.push(f)}}}return c},indexOf:function(c,d){var b=this.length>>>0;for(var a=(d<0)?Math.max(0,b+d):d||0;a<b;a++){if(this[a]===c){return a}}return -1},map:function(c,f){var d=this.length>>>0,b=Array(d);for(var a=0;a<d;a++){if(a in this){b[a]=c.call(f,this[a],a,this)}}return b},some:function(c,d){for(var b=0,a=this.length>>>0;b<a;b++){if((b in this)&&c.call(d,this[b],b,this)){return true}}return false},clean:function(){return this.filter(function(a){return a!=null})},invoke:function(a){var b=Array.slice(arguments,1);return this.map(function(c){return c[a].apply(c,b)})},associate:function(c){var d={},b=Math.min(this.length,c.length);for(var a=0;a<b;a++){d[c[a]]=this[a]}return d},link:function(c){var a={};for(var f=0,b=this.length;f<b;f++){for(var d in c){if(c[d](this[f])){a[d]=this[f];delete c[d];break}}}return a},contains:function(a,b){return this.indexOf(a,b)!=-1},append:function(a){this.push.apply(this,a);return this},getLast:function(){return(this.length)?this[this.length-1]:null},getRandom:function(){return(this.length)?this[Number.random(0,this.length-1)]:null},include:function(a){if(!this.contains(a)){this.push(a)}return this},combine:function(c){for(var b=0,a=c.length;b<a;b++){this.include(c[b])}return this},erase:function(b){for(var a=this.length;a--;){if(this[a]===b){this.splice(a,1)}}return this},empty:function(){this.length=0;return this},flatten:function(){var d=[];for(var b=0,a=this.length;b<a;b++){var c=typeOf(this[b]);if(c=="null"){continue}d=d.concat((c=="array"||c=="collection"||c=="arguments"||instanceOf(this[b],Array))?Array.flatten(this[b]):this[b])}return d},pick:function(){for(var b=0,a=this.length;b<a;b++){if(this[b]!=null){return this[b]}}return null},hexToRgb:function(b){if(this.length!=3){return null}var a=this.map(function(c){if(c.length==1){c+=c}return c.toInt(16)});return(b)?a:"rgb("+a+")"},rgbToHex:function(d){if(this.length<3){return null}if(this.length==4&&this[3]==0&&!d){return"transparent"}var b=[];for(var a=0;a<3;a++){var c=(this[a]-0).toString(16);b.push((c.length==1)?"0"+c:c)}return(d)?b:"#"+b.join("")}});Array.alias("extend","append");var $pick=function(){return Array.from(arguments).pick()};String.implement({test:function(a,b){return((typeOf(a)=="regexp")?a:new RegExp(""+a,b)).test(this)},contains:function(a,b){return(b)?(b+this+b).indexOf(b+a+b)>-1:String(this).indexOf(a)>-1},trim:function(){return String(this).replace(/^\s+|\s+$/g,"")},clean:function(){return String(this).replace(/\s+/g," ").trim()},camelCase:function(){return String(this).replace(/-\D/g,function(a){return a.charAt(1).toUpperCase()})},hyphenate:function(){return String(this).replace(/[A-Z]/g,function(a){return("-"+a.charAt(0).toLowerCase())})},capitalize:function(){return String(this).replace(/\b[a-z]/g,function(a){return a.toUpperCase()})},escapeRegExp:function(){return String(this).replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")},toInt:function(a){return parseInt(this,a||10)},toFloat:function(){return parseFloat(this)},hexToRgb:function(b){var a=String(this).match(/^#?(\w{1,2})(\w{1,2})(\w{1,2})$/);return(a)?a.slice(1).hexToRgb(b):null},rgbToHex:function(b){var a=String(this).match(/\d{1,3}/g);return(a)?a.rgbToHex(b):null},substitute:function(a,b){return String(this).replace(b||(/\\?\{([^{}]+)\}/g),function(d,c){if(d.charAt(0)=="\\"){return d.slice(1)}return(a[c]!=null)?a[c]:""})}});Number.implement({limit:function(b,a){return Math.min(a,Math.max(b,this))},round:function(a){a=Math.pow(10,a||0).toFixed(a<0?-a:0);return Math.round(this*a)/a},times:function(b,c){for(var a=0;a<this;a++){b.call(c,a,this)}},toFloat:function(){return parseFloat(this)},toInt:function(a){return parseInt(this,a||10)}});Number.alias("each","times");(function(b){var a={};b.each(function(c){if(!Number[c]){a[c]=function(){return Math[c].apply(null,[this].concat(Array.from(arguments)))}}});Number.implement(a)})(["abs","acos","asin","atan","atan2","ceil","cos","exp","floor","log","max","min","pow","sin","sqrt","tan"]);Function.extend({attempt:function(){for(var b=0,a=arguments.length;b<a;b++){try{return arguments[b]()}catch(c){}}return null}});Function.implement({attempt:function(a,c){try{return this.apply(c,Array.from(a))}catch(b){}return null},bind:function(f){var a=this,b=arguments.length>1?Array.slice(arguments,1):null,d=function(){};var c=function(){var h=f,i=arguments.length;if(this instanceof c){d.prototype=a.prototype;h=new d}var g=(!b&&!i)?a.call(h):a.apply(h,b&&i?b.concat(Array.slice(arguments)):b||arguments);return h==f?g:h};return c},pass:function(b,c){var a=this;if(b!=null){b=Array.from(b)}return function(){return a.apply(c,b||arguments)}},delay:function(b,c,a){return setTimeout(this.pass((a==null?[]:a),c),b)},periodical:function(c,b,a){return setInterval(this.pass((a==null?[]:a),b),c)}});delete Function.prototype.bind;Function.implement({create:function(b){var a=this;b=b||{};return function(d){var c=b.arguments;c=(c!=null)?Array.from(c):Array.slice(arguments,(b.event)?1:0);if(b.event){c=[d||window.event].extend(c)}var f=function(){return a.apply(b.bind||null,c)};if(b.delay){return setTimeout(f,b.delay)}if(b.periodical){return setInterval(f,b.periodical)}if(b.attempt){return Function.attempt(f)}return f()}},bind:function(c,b){var a=this;if(b!=null){b=Array.from(b)}return function(){return a.apply(c,b||arguments)}},bindWithEvent:function(c,b){var a=this;if(b!=null){b=Array.from(b)}return function(d){return a.apply(c,(b==null)?arguments:[d].concat(b))}},run:function(a,b){return this.apply(b,Array.from(a))}});if(Object.create==Function.prototype.create){Object.create=null}var $try=Function.attempt;(function(){var a=Object.prototype.hasOwnProperty;Object.extend({subset:function(d,h){var g={};for(var f=0,b=h.length;f<b;f++){var c=h[f];if(c in d){g[c]=d[c]}}return g},map:function(b,f,g){var d={};for(var c in b){if(a.call(b,c)){d[c]=f.call(g,b[c],c,b)}}return d},filter:function(b,f,h){var d={};for(var c in b){var g=b[c];if(a.call(b,c)&&f.call(h,g,c,b)){d[c]=g}}return d},every:function(b,d,f){for(var c in b){if(a.call(b,c)&&!d.call(f,b[c],c)){return false}}return true},some:function(b,d,f){for(var c in b){if(a.call(b,c)&&d.call(f,b[c],c)){return true}}return false},keys:function(b){var d=[];for(var c in b){if(a.call(b,c)){d.push(c)}}return d},values:function(c){var b=[];for(var d in c){if(a.call(c,d)){b.push(c[d])}}return b},getLength:function(b){return Object.keys(b).length},keyOf:function(b,d){for(var c in b){if(a.call(b,c)&&b[c]===d){return c}}return null},contains:function(b,c){return Object.keyOf(b,c)!=null},toQueryString:function(b,c){var d=[];Object.each(b,function(i,h){if(c){h=c+"["+h+"]"}var g;switch(typeOf(i)){case"object":g=Object.toQueryString(i,h);break;case"array":var f={};i.each(function(k,j){f[j]=k});g=Object.toQueryString(f,h);break;default:g=h+"="+encodeURIComponent(i)}if(i!=null){d.push(g)}});return d.join("&")}})})();Hash.implement({has:Object.prototype.hasOwnProperty,keyOf:function(a){return Object.keyOf(this,a)},hasValue:function(a){return Object.contains(this,a)},extend:function(a){Hash.each(a||{},function(c,b){Hash.set(this,b,c)},this);return this},combine:function(a){Hash.each(a||{},function(c,b){Hash.include(this,b,c)},this);return this},erase:function(a){if(this.hasOwnProperty(a)){delete this[a]}return this},get:function(a){return(this.hasOwnProperty(a))?this[a]:null},set:function(a,b){if(!this[a]||this.hasOwnProperty(a)){this[a]=b}return this},empty:function(){Hash.each(this,function(b,a){delete this[a]},this);return this},include:function(a,b){if(this[a]==null){this[a]=b}return this},map:function(a,b){return new Hash(Object.map(this,a,b))},filter:function(a,b){return new Hash(Object.filter(this,a,b))},every:function(a,b){return Object.every(this,a,b)},some:function(a,b){return Object.some(this,a,b)},getKeys:function(){return Object.keys(this)},getValues:function(){return Object.values(this)},toQueryString:function(a){return Object.toQueryString(this,a)}});Hash.extend=Object.append;Hash.alias({indexOf:"keyOf",contains:"hasValue"});(function(){var k=this.document;var h=k.window=this;var a=navigator.userAgent.toLowerCase(),b=navigator.platform.toLowerCase(),i=a.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0],f=i[1]=="ie"&&k.documentMode;var o=this.Browser={extend:Function.prototype.extend,name:(i[1]=="version")?i[3]:i[1],version:f||parseFloat((i[1]=="opera"&&i[4])?i[4]:i[2]),Platform:{name:a.match(/ip(?:ad|od|hone)/)?"ios":(a.match(/(?:webos|android)/)||b.match(/mac|win|linux/)||["other"])[0]},Features:{xpath:!!(k.evaluate),air:!!(h.runtime),query:!!(k.querySelector),json:!!(h.JSON)},Plugins:{}};o[o.name]=true;o[o.name+parseInt(o.version,10)]=true;o.Platform[o.Platform.name]=true;o.Request=(function(){var r=function(){return new XMLHttpRequest()};var q=function(){return new ActiveXObject("MSXML2.XMLHTTP")};var p=function(){return new ActiveXObject("Microsoft.XMLHTTP")};return Function.attempt(function(){r();return r},function(){q();return q},function(){p();return p})})();o.Features.xhr=!!(o.Request);var j=(Function.attempt(function(){return navigator.plugins["Shockwave Flash"].description},function(){return new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")})||"0 r0").match(/\d+/g);o.Plugins.Flash={version:Number(j[0]||"0."+j[1])||0,build:Number(j[2])||0};o.exec=function(q){if(!q){return q}if(h.execScript){h.execScript(q)}else{var p=k.createElement("script");p.setAttribute("type","text/javascript");p.text=q;k.head.appendChild(p);k.head.removeChild(p)}return q};String.implement("stripScripts",function(q){var p="";var r=this.replace(/<script[^>]*>([\s\S]*?)<\/script>/gi,function(s,t){p+=t+"\n";return""});if(q===true){o.exec(p)}else{if(typeOf(q)=="function"){q(p,r)}}return r});o.extend({Document:this.Document,Window:this.Window,Element:this.Element,Event:this.Event});this.Window=this.$constructor=new Type("Window",function(){});this.$family=Function.from("window").hide();Window.mirror(function(p,q){h[p]=q});this.Document=k.$constructor=new Type("Document",function(){});k.$family=Function.from("document").hide();Document.mirror(function(p,q){k[p]=q});k.html=k.documentElement;if(!k.head){k.head=k.getElementsByTagName("head")[0]}if(k.execCommand){try{k.execCommand("BackgroundImageCache",false,true)}catch(g){}}if(this.attachEvent&&!this.addEventListener){var c=function(){this.detachEvent("onunload",c);k.head=k.html=k.window=null};this.attachEvent("onunload",c)}var m=Array.from;try{m(k.html.childNodes)}catch(g){Array.from=function(q){if(typeof q!="string"&&Type.isEnumerable(q)&&typeOf(q)!="array"){var p=q.length,r=new Array(p);while(p--){r[p]=q[p]}return r}return m(q)};var l=Array.prototype,n=l.slice;["pop","push","reverse","shift","sort","splice","unshift","concat","join","slice"].each(function(p){var q=l[p];Array[p]=function(r){return q.apply(Array.from(r),n.call(arguments,1))}})}if(o.Platform.ios){o.Platform.ipod=true}o.Engine={};var d=function(q,p){o.Engine.name=q;o.Engine[q+p]=true;o.Engine.version=p};if(o.ie){o.Engine.trident=true;switch(o.version){case 6:d("trident",4);break;case 7:d("trident",5);break;case 8:d("trident",6)}}if(o.firefox){o.Engine.gecko=true;if(o.version>=3){d("gecko",19)}else{d("gecko",18)}}if(o.safari||o.chrome){o.Engine.webkit=true;switch(o.version){case 2:d("webkit",419);break;case 3:d("webkit",420);break;case 4:d("webkit",525)}}if(o.opera){o.Engine.presto=true;if(o.version>=9.6){d("presto",960)}else{if(o.version>=9.5){d("presto",950)}else{d("presto",925)}}}if(o.name=="unknown"){switch((a.match(/(?:webkit|khtml|gecko)/)||[])[0]){case"webkit":case"khtml":o.Engine.webkit=true;break;case"gecko":o.Engine.gecko=true}}this.$exec=o.exec})();(function(){var b={};var a=this.DOMEvent=new Type("DOMEvent",function(c,h){if(!h){h=window}c=c||h.event;if(c.$extended){return c}this.event=c;this.$extended=true;this.shift=c.shiftKey;this.control=c.ctrlKey;this.alt=c.altKey;this.meta=c.metaKey;var j=this.type=c.type;var i=c.target||c.srcElement;while(i&&i.nodeType==3){i=i.parentNode}this.target=document.id(i);if(j.indexOf("key")==0){var d=this.code=(c.which||c.keyCode);this.key=b[d]||Object.keyOf(Event.Keys,d);if(j=="keydown"){if(d>111&&d<124){this.key="f"+(d-111)}else{if(d>95&&d<106){this.key=d-96}}}if(this.key==null){this.key=String.fromCharCode(d).toLowerCase()}}else{if(j=="click"||j=="dblclick"||j=="contextmenu"||j=="DOMMouseScroll"||j.indexOf("mouse")==0){var k=h.document;k=(!k.compatMode||k.compatMode=="CSS1Compat")?k.html:k.body;this.page={x:(c.pageX!=null)?c.pageX:c.clientX+k.scrollLeft,y:(c.pageY!=null)?c.pageY:c.clientY+k.scrollTop};this.client={x:(c.pageX!=null)?c.pageX-h.pageXOffset:c.clientX,y:(c.pageY!=null)?c.pageY-h.pageYOffset:c.clientY};if(j=="DOMMouseScroll"||j=="mousewheel"){this.wheel=(c.wheelDelta)?c.wheelDelta/120:-(c.detail||0)/3}this.rightClick=(c.which==3||c.button==2);if(j=="mouseover"||j=="mouseout"){var l=c.relatedTarget||c[(j=="mouseover"?"from":"to")+"Element"];while(l&&l.nodeType==3){l=l.parentNode}this.relatedTarget=document.id(l)}}else{if(j.indexOf("touch")==0||j.indexOf("gesture")==0){this.rotation=c.rotation;this.scale=c.scale;this.targetTouches=c.targetTouches;this.changedTouches=c.changedTouches;var g=this.touches=c.touches;if(g&&g[0]){var f=g[0];this.page={x:f.pageX,y:f.pageY};this.client={x:f.clientX,y:f.clientY}}}}}if(!this.client){this.client={}}if(!this.page){this.page={}}});a.implement({stop:function(){return this.preventDefault().stopPropagation()},stopPropagation:function(){if(this.event.stopPropagation){this.event.stopPropagation()}else{this.event.cancelBubble=true}return this},preventDefault:function(){if(this.event.preventDefault){this.event.preventDefault()}else{this.event.returnValue=false}return this}});a.defineKey=function(d,c){b[d]=c;return this};a.defineKeys=a.defineKey.overloadSetter(true);a.defineKeys({"38":"up","40":"down","37":"left","39":"right","27":"esc","32":"space","8":"backspace","9":"tab","46":"delete","13":"enter"})})();var Event=DOMEvent;Event.Keys={};Event.Keys=new Hash(Event.Keys);(function(){var a=this.Class=new Type("Class",function(i){if(instanceOf(i,Function)){i={initialize:i}}var h=function(){f(this);if(h.$prototyping){return this}this.$caller=null;var j=(this.initialize)?this.initialize.apply(this,arguments):this;this.$caller=this.caller=null;return j}.extend(this).implement(i);h.$constructor=a;h.prototype.$constructor=h;h.prototype.parent=c;return h});var c=function(){if(!this.$caller){throw new Error('The method "parent" cannot be called.')}var h=this.$caller.$name,i=this.$caller.$owner.parent,j=(i)?i.prototype[h]:null;if(!j){throw new Error('The method "'+h+'" has no parent.')}return j.apply(this,arguments)};var f=function(h){for(var i in h){var k=h[i];switch(typeOf(k)){case"object":var j=function(){};j.prototype=k;h[i]=f(new j);break;case"array":h[i]=k.clone();break}}return h};var b=function(h,i,k){if(k.$origin){k=k.$origin}var j=function(){if(k.$protected&&this.$caller==null){throw new Error('The method "'+i+'" cannot be called.')}var m=this.caller,n=this.$caller;this.caller=n;this.$caller=j;var l=k.apply(this,arguments);this.$caller=n;this.caller=m;return l}.extend({$owner:h,$origin:k,$name:i});return j};var g=function(i,j,h){if(a.Mutators.hasOwnProperty(i)){j=a.Mutators[i].call(this,j);if(j==null){return this}}if(typeOf(j)=="function"){if(j.$hidden){return this}this.prototype[i]=(h)?j:b(this,i,j)}else{Object.merge(this.prototype,i,j)}return this};var d=function(h){h.$prototyping=true;var i=new h;delete h.$prototyping;return i};a.implement("implement",g.overloadSetter());a.Mutators={Extends:function(h){this.parent=h;this.prototype=d(h)},Implements:function(h){Array.from(h).each(function(k){var i=new k;for(var j in i){g.call(this,j,i[j],true)}},this)}}})();(function(){this.Chain=new Class({$chain:[],chain:function(){this.$chain.append(Array.flatten(arguments));return this},callChain:function(){return(this.$chain.length)?this.$chain.shift().apply(this,arguments):false},clearChain:function(){this.$chain.empty();return this}});var a=function(b){return b.replace(/^on([A-Z])/,function(c,d){return d.toLowerCase()})};this.Events=new Class({$events:{},addEvent:function(d,c,b){d=a(d);if(c==$empty){return this}this.$events[d]=(this.$events[d]||[]).include(c);if(b){c.internal=true}return this},addEvents:function(b){for(var c in b){this.addEvent(c,b[c])}return this},fireEvent:function(f,c,b){f=a(f);var d=this.$events[f];if(!d){return this}c=Array.from(c);d.each(function(g){if(b){g.delay(b,this,c)}else{g.apply(this,c)}},this);return this},removeEvent:function(f,d){f=a(f);var c=this.$events[f];if(c&&!d.internal){var b=c.indexOf(d);if(b!=-1){delete c[b]}}return this},removeEvents:function(d){var f;if(typeOf(d)=="object"){for(f in d){this.removeEvent(f,d[f])}return this}if(d){d=a(d)}for(f in this.$events){if(d&&d!=f){continue}var c=this.$events[f];for(var b=c.length;b--;){if(b in c){this.removeEvent(f,c[b])}}}return this}});this.Options=new Class({setOptions:function(){var b=this.options=Object.merge.apply(null,[{},this.options].append(arguments));if(this.addEvent){for(var c in b){if(typeOf(b[c])!="function"||!(/^on[A-Z]/).test(c)){continue}this.addEvent(c,b[c]);delete b[c]}}return this}})})();(function(){var l,o,m,h,a={},c={},n=/\\/g;var f=function(r,q){if(r==null){return null}if(r.Slick===true){return r}r=(""+r).replace(/^\s+|\s+$/g,"");h=!!q;var p=(h)?c:a;if(p[r]){return p[r]}l={Slick:true,expressions:[],raw:r,reverse:function(){return f(this.raw,true)}};o=-1;while(r!=(r=r.replace(k,b))){}l.length=l.expressions.length;return p[l.raw]=(h)?i(l):l};var j=function(p){if(p==="!"){return" "}else{if(p===" "){return"!"}else{if((/^!/).test(p)){return p.replace(/^!/,"")}else{return"!"+p}}}};var i=function(v){var s=v.expressions;for(var q=0;q<s.length;q++){var u=s[q];var r={parts:[],tag:"*",combinator:j(u[0].combinator)};for(var p=0;p<u.length;p++){var t=u[p];if(!t.reverseCombinator){t.reverseCombinator=" "}t.combinator=t.reverseCombinator;delete t.reverseCombinator}u.reverse().push(r)}return v};var g=function(p){return p.replace(/[-[\]{}()*+?.\\^$|,#\s]/g,function(q){return"\\"+q})};var k=new RegExp("^(?:\\s*(,)\\s*|\\s*(<combinator>+)\\s*|(\\s+)|(<unicode>+|\\*)|\\#(<unicode>+)|\\.(<unicode>+)|\\[\\s*(<unicode1>+)(?:\\s*([*^$!~|]?=)(?:\\s*(?:([\"']?)(.*?)\\9)))?\\s*\\](?!\\])|(:+)(<unicode>+)(?:\\((?:(?:([\"'])([^\\13]*)\\13)|((?:\\([^)]+\\)|[^()]*)+))\\))?)".replace(/<combinator>/,"["+g(">+~`!@$%^&={}\\;</")+"]").replace(/<unicode>/g,"(?:[\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])").replace(/<unicode1>/g,"(?:[:\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])"));function b(B,t,J,E,s,I,r,H,G,D,v,L,M,y,q,z){if(t||o===-1){l.expressions[++o]=[];m=-1;if(t){return""}}if(J||E||m===-1){J=J||" ";var u=l.expressions[o];if(h&&u[m]){u[m].reverseCombinator=j(J)}u[++m]={combinator:J,tag:"*"}}var p=l.expressions[o][m];if(s){p.tag=s.replace(n,"")}else{if(I){p.id=I.replace(n,"")}else{if(r){r=r.replace(n,"");if(!p.classList){p.classList=[]}if(!p.classes){p.classes=[]}p.classList.push(r);p.classes.push({value:r,regexp:new RegExp("(^|\\s)"+g(r)+"(\\s|$)")})}else{if(M){z=z||q;z=z?z.replace(n,""):null;if(!p.pseudos){p.pseudos=[]}p.pseudos.push({key:M.replace(n,""),value:z,type:L.length==1?"class":"element"})}else{if(H){H=H.replace(n,"");v=(v||"").replace(n,"");var K,N;switch(G){case"^=":N=new RegExp("^"+g(v));break;case"$=":N=new RegExp(g(v)+"$");break;case"~=":N=new RegExp("(^|\\s)"+g(v)+"(\\s|$)");break;case"|=":N=new RegExp("^"+g(v)+"(-|$)");break;case"=":K=function(O){return v==O};break;case"*=":K=function(O){return O&&O.indexOf(v)>-1};break;case"!=":K=function(O){return v!=O};break;default:K=function(O){return !!O}}if(v==""&&(/^[*$^]=$/).test(G)){K=function(){return false}}if(!K){K=function(O){return O&&N.test(O)}}if(!p.attributes){p.attributes=[]}p.attributes.push({key:H,operator:G,value:v,test:K})}}}}}return""}var d=(this.Slick||{});d.parse=function(p){return f(p)};d.escapeRegExp=g;if(!this.Slick){this.Slick=d}}).apply((typeof exports!="undefined")?exports:this);(function(){var l={},n={},d=Object.prototype.toString;l.isNativeCode=function(c){return(/\{\s*\[native code\]\s*\}/).test(""+c)};l.isXML=function(c){return(!!c.xmlVersion)||(!!c.xml)||(d.call(c)=="[object XMLDocument]")||(c.nodeType==9&&c.documentElement.nodeName!="HTML")};l.setDocument=function(z){var q=z.nodeType;if(q==9){}else{if(q){z=z.ownerDocument}else{if(z.navigator){z=z.document}else{return}}}if(this.document===z){return}this.document=z;var G=z.documentElement,p=this.getUIDXML(G),t=n[p],s;if(t){for(s in t){this[s]=t[s]}return}t=n[p]={};t.root=G;t.isXMLDocument=this.isXML(z);t.brokenStarGEBTN=t.starSelectsClosedQSA=t.idGetsName=t.brokenMixedCaseQSA=t.brokenGEBCN=t.brokenCheckedQSA=t.brokenEmptyAttributeQSA=t.isHTMLDocument=t.nativeMatchesSelector=false;var r,v,D,E,u;var B,y="slick_uniqueid";var c=z.createElement("div");var o=z.body||z.getElementsByTagName("body")[0]||G;o.appendChild(c);try{c.innerHTML='<a id="'+y+'"></a>';t.isHTMLDocument=!!z.getElementById(y)}catch(I){}if(t.isHTMLDocument){c.style.display="none";c.appendChild(z.createComment(""));v=(c.getElementsByTagName("*").length>1);try{c.innerHTML="foo</foo>";B=c.getElementsByTagName("*");r=(B&&!!B.length&&B[0].nodeName.charAt(0)=="/")}catch(I){}t.brokenStarGEBTN=v||r;try{c.innerHTML='<a name="'+y+'"></a><b id="'+y+'"></b>';t.idGetsName=z.getElementById(y)===c.firstChild}catch(I){}if(c.getElementsByClassName){try{c.innerHTML='<a class="f"></a><a class="b"></a>';c.getElementsByClassName("b").length;c.firstChild.className="b";E=(c.getElementsByClassName("b").length!=2)}catch(I){}try{c.innerHTML='<a class="a"></a><a class="f b a"></a>';D=(c.getElementsByClassName("a").length!=2)}catch(I){}t.brokenGEBCN=E||D}if(c.querySelectorAll){try{c.innerHTML="foo</foo>";B=c.querySelectorAll("*");t.starSelectsClosedQSA=(B&&!!B.length&&B[0].nodeName.charAt(0)=="/")}catch(I){}try{c.innerHTML='<a class="MiX"></a>';t.brokenMixedCaseQSA=!c.querySelectorAll(".MiX").length}catch(I){}try{c.innerHTML='<select><option selected="selected">a</option></select>';t.brokenCheckedQSA=(c.querySelectorAll(":checked").length==0)}catch(I){}try{c.innerHTML='<a class=""></a>';t.brokenEmptyAttributeQSA=(c.querySelectorAll('[class*=""]').length!=0)}catch(I){}}try{c.innerHTML='<form action="s"><input id="action"/></form>';u=(c.firstChild.getAttribute("action")!="s")}catch(I){}t.nativeMatchesSelector=G.matchesSelector||G.mozMatchesSelector||G.webkitMatchesSelector;if(t.nativeMatchesSelector){try{t.nativeMatchesSelector.call(G,":slick");t.nativeMatchesSelector=null}catch(I){}}}try{G.slick_expando=1;delete G.slick_expando;t.getUID=this.getUIDHTML}catch(I){t.getUID=this.getUIDXML}o.removeChild(c);c=B=o=null;t.getAttribute=(t.isHTMLDocument&&u)?function(M,K){var N=this.attributeGetters[K];if(N){return N.call(M)}var L=M.getAttributeNode(K);return(L)?L.nodeValue:null}:function(L,K){var M=this.attributeGetters[K];return(M)?M.call(L):L.getAttribute(K)};t.hasAttribute=(G&&this.isNativeCode(G.hasAttribute))?function(L,K){return L.hasAttribute(K)}:function(L,K){L=L.getAttributeNode(K);return !!(L&&(L.specified||L.nodeValue))};var J=G&&this.isNativeCode(G.contains),H=z&&this.isNativeCode(z.contains);t.contains=(J&&H)?function(K,L){return K.contains(L)}:(J&&!H)?function(K,L){return K===L||((K===z)?z.documentElement:K).contains(L)}:(G&&G.compareDocumentPosition)?function(K,L){return K===L||!!(K.compareDocumentPosition(L)&16)}:function(K,L){if(L){do{if(L===K){return true}}while((L=L.parentNode))}return false};t.documentSorter=(G.compareDocumentPosition)?function(L,K){if(!L.compareDocumentPosition||!K.compareDocumentPosition){return 0}return L.compareDocumentPosition(K)&4?-1:L===K?0:1}:("sourceIndex" in G)?function(L,K){if(!L.sourceIndex||!K.sourceIndex){return 0}return L.sourceIndex-K.sourceIndex}:(z.createRange)?function(N,L){if(!N.ownerDocument||!L.ownerDocument){return 0}var M=N.ownerDocument.createRange(),K=L.ownerDocument.createRange();M.setStart(N,0);M.setEnd(N,0);K.setStart(L,0);K.setEnd(L,0);return M.compareBoundaryPoints(Range.START_TO_END,K)}:null;G=null;for(s in t){this[s]=t[s]}};var g=/^([#.]?)((?:[\w-]+|\*))$/,i=/\[.+[*$^]=(?:""|'')?\]/,h={};l.search=function(Z,D,M,s){var p=this.found=(s)?null:(M||[]);if(!Z){return p}else{if(Z.navigator){Z=Z.document}else{if(!Z.nodeType){return p}}}var K,T,aa=this.uniques={},N=!!(M&&M.length),B=(Z.nodeType==9);if(this.document!==(B?Z:Z.ownerDocument)){this.setDocument(Z)}if(N){for(T=p.length;T--;){aa[this.getUID(p[T])]=true}}if(typeof D=="string"){var r=D.match(g);simpleSelectors:if(r){var u=r[1],v=r[2],E,J;if(!u){if(v=="*"&&this.brokenStarGEBTN){break simpleSelectors}J=Z.getElementsByTagName(v);if(s){return J[0]||null}for(T=0;E=J[T++];){if(!(N&&aa[this.getUID(E)])){p.push(E)}}}else{if(u=="#"){if(!this.isHTMLDocument||!B){break simpleSelectors}E=Z.getElementById(v);if(!E){return p}if(this.idGetsName&&E.getAttributeNode("id").nodeValue!=v){break simpleSelectors}if(s){return E||null}if(!(N&&aa[this.getUID(E)])){p.push(E)}}else{if(u=="."){if(!this.isHTMLDocument||((!Z.getElementsByClassName||this.brokenGEBCN)&&Z.querySelectorAll)){break simpleSelectors}if(Z.getElementsByClassName&&!this.brokenGEBCN){J=Z.getElementsByClassName(v);if(s){return J[0]||null}for(T=0;E=J[T++];){if(!(N&&aa[this.getUID(E)])){p.push(E)}}}else{var Y=new RegExp("(^|\\s)"+f.escapeRegExp(v)+"(\\s|$)");J=Z.getElementsByTagName("*");for(T=0;E=J[T++];){className=E.className;if(!(className&&Y.test(className))){continue}if(s){return E}if(!(N&&aa[this.getUID(E)])){p.push(E)}}}}}}if(N){this.sort(p)}return(s)?null:p}querySelector:if(Z.querySelectorAll){if(!this.isHTMLDocument||h[D]||this.brokenMixedCaseQSA||(this.brokenCheckedQSA&&D.indexOf(":checked")>-1)||(this.brokenEmptyAttributeQSA&&i.test(D))||(!B&&D.indexOf(",")>-1)||f.disableQSA){break querySelector}var X=D,z=Z;if(!B){var H=z.getAttribute("id"),t="slickid__";z.setAttribute("id",t);X="#"+t+" "+X;Z=z.parentNode}try{if(s){return Z.querySelector(X)||null}else{J=Z.querySelectorAll(X)}}catch(V){h[D]=1;break querySelector}finally{if(!B){if(H){z.setAttribute("id",H)}else{z.removeAttribute("id")}Z=z}}if(this.starSelectsClosedQSA){for(T=0;E=J[T++];){if(E.nodeName>"@"&&!(N&&aa[this.getUID(E)])){p.push(E)}}}else{for(T=0;E=J[T++];){if(!(N&&aa[this.getUID(E)])){p.push(E)}}}if(N){this.sort(p)}return p}K=this.Slick.parse(D);if(!K.length){return p}}else{if(D==null){return p}else{if(D.Slick){K=D}else{if(this.contains(Z.documentElement||Z,D)){(p)?p.push(D):p=D;return p}else{return p}}}}this.posNTH={};this.posNTHLast={};this.posNTHType={};this.posNTHTypeLast={};this.push=(!N&&(s||(K.length==1&&K.expressions[0].length==1)))?this.pushArray:this.pushUID;if(p==null){p=[]}var R,Q,P;var G,O,I,c,q,L,ab;var S,U,o,y,W=K.expressions;search:for(T=0;(U=W[T]);T++){for(R=0;(o=U[R]);R++){G="combinator:"+o.combinator;if(!this[G]){continue search}O=(this.isXMLDocument)?o.tag:o.tag.toUpperCase();I=o.id;c=o.classList;q=o.classes;L=o.attributes;ab=o.pseudos;y=(R===(U.length-1));this.bitUniques={};if(y){this.uniques=aa;this.found=p}else{this.uniques={};this.found=[]}if(R===0){this[G](Z,O,I,q,L,ab,c);if(s&&y&&p.length){break search}}else{if(s&&y){for(Q=0,P=S.length;Q<P;Q++){this[G](S[Q],O,I,q,L,ab,c);if(p.length){break search}}}else{for(Q=0,P=S.length;Q<P;Q++){this[G](S[Q],O,I,q,L,ab,c)}}}S=this.found}}if(N||(K.expressions.length>1)){this.sort(p)}return(s)?(p[0]||null):p};l.uidx=1;l.uidk="slick-uniqueid";l.getUIDXML=function(o){var c=o.getAttribute(this.uidk);if(!c){c=this.uidx++;o.setAttribute(this.uidk,c)}return c};l.getUIDHTML=function(c){return c.uniqueNumber||(c.uniqueNumber=this.uidx++)};l.sort=function(c){if(!this.documentSorter){return c}c.sort(this.documentSorter);return c};l.cacheNTH={};l.matchNTH=/^([+-]?\d*)?([a-z]+)?([+-]\d+)?$/;l.parseNTHArgument=function(r){var p=r.match(this.matchNTH);if(!p){return false}var q=p[2]||false;var o=p[1]||1;if(o=="-"){o=-1}var c=+p[3]||0;p=(q=="n")?{a:o,b:c}:(q=="odd")?{a:2,b:1}:(q=="even")?{a:2,b:0}:{a:0,b:o};return(this.cacheNTH[r]=p)};l.createNTHPseudo=function(q,o,c,p){return function(t,r){var v=this.getUID(t);if(!this[c][v]){var G=t.parentNode;if(!G){return false}var s=G[q],u=1;if(p){var E=t.nodeName;do{if(s.nodeName!=E){continue}this[c][this.getUID(s)]=u++}while((s=s[o]))}else{do{if(s.nodeType!=1){continue}this[c][this.getUID(s)]=u++}while((s=s[o]))}}r=r||"n";var y=this.cacheNTH[r]||this.parseNTHArgument(r);if(!y){return false}var D=y.a,B=y.b,z=this[c][v];if(D==0){return B==z}if(D>0){if(z<B){return false}}else{if(B<z){return false}}return((z-B)%D)==0}};l.pushArray=function(q,c,s,p,o,r){if(this.matchSelector(q,c,s,p,o,r)){this.found.push(q)}};l.pushUID=function(r,c,t,q,o,s){var p=this.getUID(r);if(!this.uniques[p]&&this.matchSelector(r,c,t,q,o,s)){this.uniques[p]=true;this.found.push(r)}};l.matchNode=function(o,p){if(this.isHTMLDocument&&this.nativeMatchesSelector){try{return this.nativeMatchesSelector.call(o,p.replace(/\[([^=]+)=\s*([^'"\]]+?)\s*\]/g,'[$1="$2"]'))}catch(v){}}var u=this.Slick.parse(p);if(!u){return true}var s=u.expressions,t=0,r;for(r=0;(currentExpression=s[r]);r++){if(currentExpression.length==1){var q=currentExpression[0];if(this.matchSelector(o,(this.isXMLDocument)?q.tag:q.tag.toUpperCase(),q.id,q.classes,q.attributes,q.pseudos)){return true}t++}}if(t==u.length){return false}var c=this.search(this.document,u),y;for(r=0;y=c[r++];){if(y===o){return true}}return false};l.matchPseudo=function(r,c,q){var o="pseudo:"+c;if(this[o]){return this[o](r,q)}var p=this.getAttribute(r,c);return(q)?q==p:!!p};l.matchSelector=function(p,y,c,q,r,t){if(y){var u=(this.isXMLDocument)?p.nodeName:p.nodeName.toUpperCase();if(y=="*"){if(u<"@"){return false}}else{if(u!=y){return false}}}if(c&&p.getAttribute("id")!=c){return false}var s,o,v;if(q){for(s=q.length;s--;){v=this.getAttribute(p,"class");if(!(v&&q[s].regexp.test(v))){return false}}}if(r){for(s=r.length;s--;){o=r[s];if(o.operator?!o.test(this.getAttribute(p,o.key)):!this.hasAttribute(p,o.key)){return false}}}if(t){for(s=t.length;s--;){o=t[s];if(!this.matchPseudo(p,o.key,o.value)){return false}}}return true};var k={" ":function(r,z,o,s,t,v,q){var u,y,p;if(this.isHTMLDocument){getById:if(o){y=this.document.getElementById(o);if((!y&&r.all)||(this.idGetsName&&y&&y.getAttributeNode("id").nodeValue!=o)){p=r.all[o];if(!p){return}if(!p[0]){p=[p]}for(u=0;y=p[u++];){var c=y.getAttributeNode("id");if(c&&c.nodeValue==o){this.push(y,z,null,s,t,v);break}}return}if(!y){if(this.contains(this.root,r)){return}else{break getById}}else{if(this.document!==r&&!this.contains(r,y)){return}}this.push(y,z,null,s,t,v);return}getByClass:if(s&&r.getElementsByClassName&&!this.brokenGEBCN){p=r.getElementsByClassName(q.join(" "));if(!(p&&p.length)){break getByClass}for(u=0;y=p[u++];){this.push(y,z,o,null,t,v)}return}}getByTag:{p=r.getElementsByTagName(z);if(!(p&&p.length)){break getByTag}if(!this.brokenStarGEBTN){z=null}for(u=0;y=p[u++];){this.push(y,z,o,s,t,v)}}},">":function(q,c,s,p,o,r){if((q=q.firstChild)){do{if(q.nodeType==1){this.push(q,c,s,p,o,r)}}while((q=q.nextSibling))}},"+":function(q,c,s,p,o,r){while((q=q.nextSibling)){if(q.nodeType==1){this.push(q,c,s,p,o,r);break}}},"^":function(q,c,s,p,o,r){q=q.firstChild;if(q){if(q.nodeType==1){this.push(q,c,s,p,o,r)}else{this["combinator:+"](q,c,s,p,o,r)}}},"~":function(r,c,t,q,o,s){while((r=r.nextSibling)){if(r.nodeType!=1){continue}var p=this.getUID(r);if(this.bitUniques[p]){break}this.bitUniques[p]=true;this.push(r,c,t,q,o,s)}},"++":function(q,c,s,p,o,r){this["combinator:+"](q,c,s,p,o,r);this["combinator:!+"](q,c,s,p,o,r)},"~~":function(q,c,s,p,o,r){this["combinator:~"](q,c,s,p,o,r);this["combinator:!~"](q,c,s,p,o,r)},"!":function(q,c,s,p,o,r){while((q=q.parentNode)){if(q!==this.document){this.push(q,c,s,p,o,r)}}},"!>":function(q,c,s,p,o,r){q=q.parentNode;if(q!==this.document){this.push(q,c,s,p,o,r)}},"!+":function(q,c,s,p,o,r){while((q=q.previousSibling)){if(q.nodeType==1){this.push(q,c,s,p,o,r);break}}},"!^":function(q,c,s,p,o,r){q=q.lastChild;if(q){if(q.nodeType==1){this.push(q,c,s,p,o,r)}else{this["combinator:!+"](q,c,s,p,o,r)}}},"!~":function(r,c,t,q,o,s){while((r=r.previousSibling)){if(r.nodeType!=1){continue}var p=this.getUID(r);if(this.bitUniques[p]){break}this.bitUniques[p]=true;this.push(r,c,t,q,o,s)}}};for(var j in k){l["combinator:"+j]=k[j]}var m={empty:function(c){var o=c.firstChild;return !(o&&o.nodeType==1)&&!(c.innerText||c.textContent||"").length},not:function(c,o){return !this.matchNode(c,o)},contains:function(c,o){return(c.innerText||c.textContent||"").indexOf(o)>-1},"first-child":function(c){while((c=c.previousSibling)){if(c.nodeType==1){return false}}return true},"last-child":function(c){while((c=c.nextSibling)){if(c.nodeType==1){return false}}return true},"only-child":function(p){var o=p;while((o=o.previousSibling)){if(o.nodeType==1){return false}}var c=p;while((c=c.nextSibling)){if(c.nodeType==1){return false}}return true},"nth-child":l.createNTHPseudo("firstChild","nextSibling","posNTH"),"nth-last-child":l.createNTHPseudo("lastChild","previousSibling","posNTHLast"),"nth-of-type":l.createNTHPseudo("firstChild","nextSibling","posNTHType",true),"nth-last-of-type":l.createNTHPseudo("lastChild","previousSibling","posNTHTypeLast",true),index:function(o,c){return this["pseudo:nth-child"](o,""+(c+1))},even:function(c){return this["pseudo:nth-child"](c,"2n")},odd:function(c){return this["pseudo:nth-child"](c,"2n+1")},"first-of-type":function(c){var o=c.nodeName;while((c=c.previousSibling)){if(c.nodeName==o){return false}}return true},"last-of-type":function(c){var o=c.nodeName;while((c=c.nextSibling)){if(c.nodeName==o){return false}}return true},"only-of-type":function(p){var o=p,q=p.nodeName;while((o=o.previousSibling)){if(o.nodeName==q){return false}}var c=p;while((c=c.nextSibling)){if(c.nodeName==q){return false}}return true},enabled:function(c){return !c.disabled},disabled:function(c){return c.disabled},checked:function(c){return c.checked||c.selected},focus:function(c){return this.isHTMLDocument&&this.document.activeElement===c&&(c.href||c.type||this.hasAttribute(c,"tabindex"))},root:function(c){return(c===this.root)},selected:function(c){return c.selected}};for(var b in m){l["pseudo:"+b]=m[b]}var a=l.attributeGetters={"for":function(){return("htmlFor" in this)?this.htmlFor:this.getAttribute("for")},href:function(){return("href" in this)?this.getAttribute("href",2):this.getAttribute("href")},style:function(){return(this.style)?this.style.cssText:this.getAttribute("style")},tabindex:function(){var c=this.getAttributeNode("tabindex");return(c&&c.specified)?c.nodeValue:null},type:function(){return this.getAttribute("type")},maxlength:function(){var c=this.getAttributeNode("maxLength");return(c&&c.specified)?c.nodeValue:null}};a.MAXLENGTH=a.maxLength=a.maxlength;var f=l.Slick=(this.Slick||{});f.version="1.1.7";f.search=function(o,p,c){return l.search(o,p,c)};f.find=function(c,o){return l.search(c,o,null,true)};f.contains=function(c,o){l.setDocument(c);return l.contains(c,o)};f.getAttribute=function(o,c){l.setDocument(o);return l.getAttribute(o,c)};f.hasAttribute=function(o,c){l.setDocument(o);return l.hasAttribute(o,c)};f.match=function(o,c){if(!(o&&c)){return false}if(!c||c===o){return true}l.setDocument(o);return l.matchNode(o,c)};f.defineAttributeGetter=function(c,o){l.attributeGetters[c]=o;return this};f.lookupAttributeGetter=function(c){return l.attributeGetters[c]};f.definePseudo=function(c,o){l["pseudo:"+c]=function(q,p){return o.call(q,p)};return this};f.lookupPseudo=function(c){var o=l["pseudo:"+c];if(o){return function(p){return o.call(this,p)}}return null};f.override=function(o,c){l.override(o,c);return this};f.isXML=l.isXML;f.uidOf=function(c){return l.getUIDHTML(c)};if(!this.Slick){this.Slick=f}}).apply((typeof exports!="undefined")?exports:this);var Element=function(b,h){var j=Element.Constructors[b];if(j){return j(h)}if(typeof b!="string"){return document.id(b).set(h)}if(!h){h={}}if(!(/^[\w-]+$/).test(b)){var f=Slick.parse(b).expressions[0][0];b=(f.tag=="*")?"div":f.tag;if(f.id&&h.id==null){h.id=f.id}var d=f.attributes;if(d){for(var a,g=0,c=d.length;g<c;g++){a=d[g];if(h[a.key]!=null){continue}if(a.value!=null&&a.operator=="="){h[a.key]=a.value}else{if(!a.value&&!a.operator){h[a.key]=true}}}}if(f.classList&&h["class"]==null){h["class"]=f.classList.join(" ")}}return document.newElement(b,h)};if(Browser.Element){Element.prototype=Browser.Element.prototype;Element.prototype._fireEvent=(function(a){return function(b,c){return a.call(this,b,c)}})(Element.prototype.fireEvent)}new Type("Element",Element).mirror(function(a){if(Array.prototype[a]){return}var b={};b[a]=function(){var j=[],f=arguments,k=true;for(var h=0,d=this.length;h<d;h++){var g=this[h],c=j[h]=g[a].apply(g,f);k=(k&&typeOf(c)=="element")}return(k)?new Elements(j):j};Elements.implement(b)});if(!Browser.Element){Element.parent=Object;Element.Prototype={"$constructor":Element,"$family":Function.from("element").hide()};Element.mirror(function(a,b){Element.Prototype[a]=b})}Element.Constructors={};Element.Constructors=new Hash;var IFrame=new Type("IFrame",function(){var f=Array.link(arguments,{properties:Type.isObject,iframe:function(g){return(g!=null)}});var c=f.properties||{},b;if(f.iframe){b=document.id(f.iframe)}var d=c.onload||function(){};delete c.onload;c.id=c.name=[c.id,c.name,b?(b.id||b.name):"IFrame_"+String.uniqueID()].pick();b=new Element(b||"iframe",c);var a=function(){d.call(b.contentWindow)};if(window.frames[c.id]){a()}else{b.addListener("load",a)}return b});var Elements=this.Elements=function(a){if(a&&a.length){var f={},d;for(var c=0;d=a[c++];){var b=Slick.uidOf(d);if(!f[b]){f[b]=true;this.push(d)}}}};Elements.prototype={length:0};Elements.parent=Array;new Type("Elements",Elements).implement({filter:function(a,b){if(!a){return this}return new Elements(Array.filter(this,(typeOf(a)=="string")?function(c){return c.match(a)}:a,b))}.protect(),push:function(){var d=this.length;for(var b=0,a=arguments.length;b<a;b++){var c=document.id(arguments[b]);if(c){this[d++]=c}}return(this.length=d)}.protect(),unshift:function(){var b=[];for(var c=0,a=arguments.length;c<a;c++){var d=document.id(arguments[c]);if(d){b.push(d)}}return Array.prototype.unshift.apply(this,b)}.protect(),concat:function(){var b=new Elements(this);for(var c=0,a=arguments.length;c<a;c++){var d=arguments[c];if(Type.isEnumerable(d)){b.append(d)}else{b.push(d)}}return b}.protect(),append:function(c){for(var b=0,a=c.length;b<a;b++){this.push(c[b])}return this}.protect(),empty:function(){while(this.length){delete this[--this.length]}return this}.protect()});Elements.alias("extend","append");(function(){var f=Array.prototype.splice,a={"0":0,"1":1,length:2};f.call(a,1,1);if(a[1]==1){Elements.implement("splice",function(){var h=this.length;var g=f.apply(this,arguments);while(h>=this.length){delete this[h--]}return g}.protect())}Array.forEachMethod(function(h,g){Elements.implement(g,h)});Array.mirror(Elements);var d;try{d=(document.createElement("<input name=x>").name=="x")}catch(b){}var c=function(g){return(""+g).replace(/&/g,"&amp;").replace(/"/g,"&quot;")};Document.implement({newElement:function(g,h){if(h&&h.checked!=null){h.defaultChecked=h.checked}if(d&&h){g="<"+g;if(h.name){g+=' name="'+c(h.name)+'"'}if(h.type){g+=' type="'+c(h.type)+'"'}g+=">";delete h.name;delete h.type}return this.id(this.createElement(g)).set(h)}})})();(function(){Slick.uidOf(window);Slick.uidOf(document);Document.implement({newTextNode:function(l){return this.createTextNode(l)},getDocument:function(){return this},getWindow:function(){return this.window},id:(function(){var l={string:function(K,J,I){K=Slick.find(I,"#"+K.replace(/(\W)/g,"\\$1"));return(K)?l.element(K,J):null},element:function(J,K){Slick.uidOf(J);if(!K&&!J.$family&&!(/^(?:object|embed)$/i).test(J.tagName)){var I=J.fireEvent;J._fireEvent=function(L,M){return I(L,M)};Object.append(J,Element.Prototype)}return J},object:function(J,K,I){if(J.toElement){return l.element(J.toElement(I),K)}return null}};l.textnode=l.whitespace=l.window=l.document=function(I){return I};return function(J,L,K){if(J&&J.$family&&J.uniqueNumber){return J}var I=typeOf(J);return(l[I])?l[I](J,L,K||document):null}})()});if(window.$==null){Window.implement("$",function(l,I){return document.id(l,I,this.document)})}Window.implement({getDocument:function(){return this.document},getWindow:function(){return this}});[Document,Element].invoke("implement",{getElements:function(l){return Slick.search(this,l,new Elements)},getElement:function(l){return document.id(Slick.find(this,l))}});var m={contains:function(l){return Slick.contains(this,l)}};if(!document.contains){Document.implement(m)}if(!document.createElement("div").contains){Element.implement(m)}Element.implement("hasChild",function(l){return this!==l&&this.contains(l)});(function(I,K,l){this.Selectors={};var L=this.Selectors.Pseudo=new Hash();var J=function(){for(var M in L){if(L.hasOwnProperty(M)){Slick.definePseudo(M,L[M]);delete L[M]}}};Slick.search=function(N,O,M){J();return I.call(this,N,O,M)};Slick.find=function(M,N){J();return K.call(this,M,N)};Slick.match=function(N,M){J();return l.call(this,N,M)}})(Slick.search,Slick.find,Slick.match);var r=function(K,J){if(!K){return J}K=Object.clone(Slick.parse(K));var I=K.expressions;for(var l=I.length;l--;){I[l][0].combinator=J}return K};Object.forEach({getNext:"~",getPrevious:"!~",getParent:"!"},function(l,I){Element.implement(I,function(J){return this.getElement(r(J,l))})});Object.forEach({getAllNext:"~",getAllPrevious:"!~",getSiblings:"~~",getChildren:">",getParents:"!"},function(l,I){Element.implement(I,function(J){return this.getElements(r(J,l))})});Element.implement({getFirst:function(l){return document.id(Slick.search(this,r(l,">"))[0])},getLast:function(l){return document.id(Slick.search(this,r(l,">")).getLast())},getWindow:function(){return this.ownerDocument.window},getDocument:function(){return this.ownerDocument},getElementById:function(l){return document.id(Slick.find(this,"#"+(""+l).replace(/(\W)/g,"\\$1")))},match:function(l){return !l||Slick.match(this,l)}});if(window.$$==null){Window.implement("$$",function(I){var N=new Elements;if(arguments.length==1&&typeof I=="string"){return Slick.search(this.document,I,N)}var K=Array.flatten(arguments);for(var L=0,J=K.length;L<J;L++){var M=K[L];switch(typeOf(M)){case"element":N.push(M);break;case"string":Slick.search(this.document,M,N)}}return N})}if(window.$$==null){Window.implement("$$",function(l){if(arguments.length==1){if(typeof l=="string"){return Slick.search(this.document,l,new Elements)}else{if(Type.isEnumerable(l)){return new Elements(l)}}}return new Elements(arguments)})}var y={before:function(I,l){var J=l.parentNode;if(J){J.insertBefore(I,l)}},after:function(I,l){var J=l.parentNode;if(J){J.insertBefore(I,l.nextSibling)}},bottom:function(I,l){l.appendChild(I)},top:function(I,l){l.insertBefore(I,l.firstChild)}};y.inside=y.bottom;Object.each(y,function(I,J){J=J.capitalize();var l={};l["inject"+J]=function(K){I(this,document.id(K,true));return this};l["grab"+J]=function(K){I(document.id(K,true),this);return this};Element.implement(l)});var j={},d={};var k={};Array.forEach(["type","value","defaultValue","accessKey","cellPadding","cellSpacing","colSpan","frameBorder","rowSpan","tabIndex","useMap"],function(l){k[l.toLowerCase()]=l});k.html="innerHTML";k.text=(document.createElement("div").textContent==null)?"innerText":"textContent";Object.forEach(k,function(I,l){d[l]=function(J,K){J[I]=K};j[l]=function(J){return J[I]}});var z=["compact","nowrap","ismap","declare","noshade","checked","disabled","readOnly","multiple","selected","noresize","defer","defaultChecked","autofocus","controls","autoplay","loop"];var h={};Array.forEach(z,function(l){var I=l.toLowerCase();h[I]=l;d[I]=function(J,K){J[l]=!!K};j[I]=function(J){return !!J[l]}});Object.append(d,{"class":function(l,I){("className" in l)?l.className=(I||""):l.setAttribute("class",I)},"for":function(l,I){("htmlFor" in l)?l.htmlFor=I:l.setAttribute("for",I)},style:function(l,I){(l.style)?l.style.cssText=I:l.setAttribute("style",I)},value:function(l,I){l.value=(I!=null)?I:""}});j["class"]=function(l){return("className" in l)?l.className||null:l.getAttribute("class")};var f=document.createElement("button");try{f.type="button"}catch(D){}if(f.type!="button"){d.type=function(l,I){l.setAttribute("type",I)}}f=null;var p=document.createElement("input");p.value="t";p.type="submit";if(p.value!="t"){d.type=function(I,l){var J=I.value;I.type=l;I.value=J}}p=null;var q=(function(l){l.random="attribute";return(l.getAttribute("random")=="attribute")})(document.createElement("div"));Element.implement({setProperty:function(I,J){var K=d[I.toLowerCase()];if(K){K(this,J)}else{if(q){var l=this.retrieve("$attributeWhiteList",{})}if(J==null){this.removeAttribute(I);if(q){delete l[I]}}else{this.setAttribute(I,""+J);if(q){l[I]=true}}}return this},setProperties:function(l){for(var I in l){this.setProperty(I,l[I])}return this},getProperty:function(L){var J=j[L.toLowerCase()];if(J){return J(this)}if(q){var I=this.getAttributeNode(L),K=this.retrieve("$attributeWhiteList",{});if(!I){return null}if(I.expando&&!K[L]){var M=this.outerHTML;if(M.substr(0,M.search(/\/?['"]?>(?![^<]*<['"])/)).indexOf(L)<0){return null}K[L]=true}}var l=Slick.getAttribute(this,L);return(!l&&!Slick.hasAttribute(this,L))?null:l},getProperties:function(){var l=Array.from(arguments);return l.map(this.getProperty,this).associate(l)},removeProperty:function(l){return this.setProperty(l,null)},removeProperties:function(){Array.each(arguments,this.removeProperty,this);return this},set:function(J,I){var l=Element.Properties[J];(l&&l.set)?l.set.call(this,I):this.setProperty(J,I)}.overloadSetter(),get:function(I){var l=Element.Properties[I];return(l&&l.get)?l.get.apply(this):this.getProperty(I)}.overloadGetter(),erase:function(I){var l=Element.Properties[I];(l&&l.erase)?l.erase.apply(this):this.removeProperty(I);return this},hasClass:function(l){return this.className.clean().contains(l," ")},addClass:function(l){if(!this.hasClass(l)){this.className=(this.className+" "+l).clean()}return this},removeClass:function(l){this.className=this.className.replace(new RegExp("(^|\\s)"+l+"(?:\\s|$)"),"$1");return this},toggleClass:function(l,I){if(I==null){I=!this.hasClass(l)}return(I)?this.addClass(l):this.removeClass(l)},adopt:function(){var K=this,l,M=Array.flatten(arguments),L=M.length;if(L>1){K=l=document.createDocumentFragment()}for(var J=0;J<L;J++){var I=document.id(M[J],true);if(I){K.appendChild(I)}}if(l){this.appendChild(l)}return this},appendText:function(I,l){return this.grab(this.getDocument().newTextNode(I),l)},grab:function(I,l){y[l||"bottom"](document.id(I,true),this);return this},inject:function(I,l){y[l||"bottom"](this,document.id(I,true));return this},replaces:function(l){l=document.id(l,true);l.parentNode.replaceChild(this,l);return this},wraps:function(I,l){I=document.id(I,true);return this.replaces(I).grab(I,l)},getSelected:function(){this.selectedIndex;return new Elements(Array.from(this.options).filter(function(l){return l.selected}))},toQueryString:function(){var l=[];this.getElements("input, select, textarea").each(function(J){var I=J.type;if(!J.name||J.disabled||I=="submit"||I=="reset"||I=="file"||I=="image"){return}var K=(J.get("tag")=="select")?J.getSelected().map(function(L){return document.id(L).get("value")}):((I=="radio"||I=="checkbox")&&!J.checked)?null:J.get("value");Array.from(K).each(function(L){if(typeof L!="undefined"){l.push(encodeURIComponent(J.name)+"="+encodeURIComponent(L))}})});return l.join("&")}});var i={},E={};var G=function(l){return(E[l]||(E[l]={}))};var v=function(I){var l=I.uniqueNumber;if(I.removeEvents){I.removeEvents()}if(I.clearAttributes){I.clearAttributes()}if(l!=null){delete i[l];delete E[l]}return I};var H={input:"checked",option:"selected",textarea:"value"};Element.implement({destroy:function(){var l=v(this).getElementsByTagName("*");Array.each(l,v);Element.dispose(this);return null},empty:function(){Array.from(this.childNodes).each(Element.dispose);return this},dispose:function(){return(this.parentNode)?this.parentNode.removeChild(this):this},clone:function(M,K){M=M!==false;var R=this.cloneNode(M),J=[R],L=[this],P;if(M){J.append(Array.from(R.getElementsByTagName("*")));L.append(Array.from(this.getElementsByTagName("*")))}for(P=J.length;P--;){var N=J[P],Q=L[P];if(!K){N.removeAttribute("id")}if(N.clearAttributes){N.clearAttributes();N.mergeAttributes(Q);N.removeAttribute("uniqueNumber");if(N.options){var U=N.options,l=Q.options;for(var O=U.length;O--;){U[O].selected=l[O].selected}}}var I=H[Q.tagName.toLowerCase()];if(I&&Q[I]){N[I]=Q[I]}}if(Browser.ie){var S=R.getElementsByTagName("object"),T=this.getElementsByTagName("object");for(P=S.length;P--;){S[P].outerHTML=T[P].outerHTML}}return document.id(R)}});[Element,Window,Document].invoke("implement",{addListener:function(K,J){if(K=="unload"){var l=J,I=this;J=function(){I.removeListener("unload",J);l()}}else{i[Slick.uidOf(this)]=this}if(this.addEventListener){this.addEventListener(K,J,!!arguments[2])}else{this.attachEvent("on"+K,J)}return this},removeListener:function(I,l){if(this.removeEventListener){this.removeEventListener(I,l,!!arguments[2])}else{this.detachEvent("on"+I,l)}return this},retrieve:function(I,l){var K=G(Slick.uidOf(this)),J=K[I];if(l!=null&&J==null){J=K[I]=l}return J!=null?J:null},store:function(I,l){var J=G(Slick.uidOf(this));J[I]=l;return this},eliminate:function(l){var I=G(Slick.uidOf(this));delete I[l];return this}});if(window.attachEvent&&!window.addEventListener){window.addListener("unload",function(){Object.each(i,v);if(window.CollectGarbage){CollectGarbage()}})}Element.Properties={};Element.Properties=new Hash;Element.Properties.style={set:function(l){this.style.cssText=l},get:function(){return this.style.cssText},erase:function(){this.style.cssText=""}};Element.Properties.tag={get:function(){return this.tagName.toLowerCase()}};Element.Properties.html={set:function(l){if(l==null){l=""}else{if(typeOf(l)=="array"){l=l.join("")}}this.innerHTML=l},erase:function(){this.innerHTML=""}};var t=document.createElement("div");t.innerHTML="<nav></nav>";var a=(t.childNodes.length==1);if(!a){var s="abbr article aside audio canvas datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video".split(" "),b=document.createDocumentFragment(),u=s.length;while(u--){b.createElement(s[u])}}t=null;var g=Function.attempt(function(){var l=document.createElement("table");l.innerHTML="<tr><td></td></tr>";return true});var c=document.createElement("tr"),o="<td></td>";c.innerHTML=o;var B=(c.innerHTML==o);c=null;if(!g||!B||!a){Element.Properties.html.set=(function(I){var l={table:[1,"<table>","</table>"],select:[1,"<select>","</select>"],tbody:[2,"<table><tbody>","</tbody></table>"],tr:[3,"<table><tbody><tr>","</tr></tbody></table>"]};l.thead=l.tfoot=l.tbody;return function(J){var K=l[this.get("tag")];if(!K&&!a){K=[0,"",""]}if(!K){return I.call(this,J)}var N=K[0],M=document.createElement("div"),L=M;if(!a){b.appendChild(M)}M.innerHTML=[K[1],J,K[2]].flatten().join("");while(N--){L=L.firstChild}this.empty().adopt(L.childNodes);if(!a){b.removeChild(M)}M=null}})(Element.Properties.html.set)}var n=document.createElement("form");n.innerHTML="<select><option>s</option></select>";if(n.firstChild.value!="s"){Element.Properties.value={set:function(M){var I=this.get("tag");if(I!="select"){return this.setProperty("value",M)}var J=this.getElements("option");for(var K=0;K<J.length;K++){var L=J[K],l=L.getAttributeNode("value"),N=(l&&l.specified)?L.value:L.get("text");if(N==M){return L.selected=true}}},get:function(){var J=this,I=J.get("tag");if(I!="select"&&I!="option"){return this.getProperty("value")}if(I=="select"&&!(J=J.getSelected()[0])){return""}var l=J.getAttributeNode("value");return(l&&l.specified)?J.value:J.get("text")}}}n=null;if(document.createElement("div").getAttributeNode("id")){Element.Properties.id={set:function(l){this.id=this.getAttributeNode("id").value=l},get:function(){return this.id||null},erase:function(){this.id=this.getAttributeNode("id").value=""}}}})();(function(){var j=document.html;var d=document.createElement("div");d.style.color="red";d.style.color=null;var c=d.style.color=="red";d=null;Element.Properties.styles={set:function(l){this.setStyles(l)}};var i=(j.style.opacity!=null),f=(j.style.filter!=null),k=/alpha\(opacity=([\d.]+)\)/i;var a=function(m,l){m.store("$opacity",l);m.style.visibility=l>0||l==null?"visible":"hidden"};var g=(i?function(m,l){m.style.opacity=l}:(f?function(m,l){var o=m.style;if(!m.currentStyle||!m.currentStyle.hasLayout){o.zoom=1}if(l==null||l==1){l=""}else{l="alpha(opacity="+(l*100).limit(0,100).round()+")"}var n=o.filter||m.getComputedStyle("filter")||"";o.filter=k.test(n)?n.replace(k,l):n+l;if(!o.filter){o.removeAttribute("filter")}}:a));var h=(i?function(m){var l=m.style.opacity||m.getComputedStyle("opacity");return(l=="")?1:l.toFloat()}:(f?function(m){var n=(m.style.filter||m.getComputedStyle("filter")),l;if(n){l=n.match(k)}return(l==null||n==null)?1:(l[1]/100)}:function(m){var l=m.retrieve("$opacity");if(l==null){l=(m.style.visibility=="hidden"?0:1)}return l}));var b=(j.style.cssFloat==null)?"styleFloat":"cssFloat";Element.implement({getComputedStyle:function(n){if(this.currentStyle){return this.currentStyle[n.camelCase()]}var m=Element.getDocument(this).defaultView,l=m?m.getComputedStyle(this,null):null;return(l)?l.getPropertyValue((n==b)?"float":n.hyphenate()):null},setStyle:function(m,l){if(m=="opacity"){if(l!=null){l=parseFloat(l)}g(this,l);return this}m=(m=="float"?b:m).camelCase();if(typeOf(l)!="string"){var n=(Element.Styles[m]||"@").split(" ");l=Array.from(l).map(function(p,o){if(!n[o]){return""}return(typeOf(p)=="number")?n[o].replace("@",Math.round(p)):p}).join(" ")}else{if(l==String(Number(l))){l=Math.round(l)}}this.style[m]=l;if((l==""||l==null)&&c&&this.style.removeAttribute){this.style.removeAttribute(m)}return this},getStyle:function(r){if(r=="opacity"){return h(this)}r=(r=="float"?b:r).camelCase();var l=this.style[r];if(!l||r=="zIndex"){l=[];for(var q in Element.ShortStyles){if(r!=q){continue}for(var p in Element.ShortStyles[q]){l.push(this.getStyle(p))}return l.join(" ")}l=this.getComputedStyle(r)}if(l){l=String(l);var n=l.match(/rgba?\([\d\s,]+\)/);if(n){l=l.replace(n[0],n[0].rgbToHex())}}if(Browser.opera||Browser.ie){if((/^(height|width)$/).test(r)&&!(/px$/.test(l))){var m=(r=="width")?["left","right"]:["top","bottom"],o=0;m.each(function(s){o+=this.getStyle("border-"+s+"-width").toInt()+this.getStyle("padding-"+s).toInt()},this);return this["offset"+r.capitalize()]-o+"px"}if(Browser.ie&&(/^border(.+)Width|margin|padding/).test(r)&&isNaN(parseFloat(l))){return"0px"}}return l},setStyles:function(m){for(var l in m){this.setStyle(l,m[l])}return this},getStyles:function(){var l={};Array.flatten(arguments).each(function(m){l[m]=this.getStyle(m)},this);return l}});Element.Styles={left:"@px",top:"@px",bottom:"@px",right:"@px",width:"@px",height:"@px",maxWidth:"@px",maxHeight:"@px",minWidth:"@px",minHeight:"@px",backgroundColor:"rgb(@, @, @)",backgroundPosition:"@px @px",color:"rgb(@, @, @)",fontSize:"@px",letterSpacing:"@px",lineHeight:"@px",clip:"rect(@px @px @px @px)",margin:"@px @px @px @px",padding:"@px @px @px @px",border:"@px @ rgb(@, @, @) @px @ rgb(@, @, @) @px @ rgb(@, @, @)",borderWidth:"@px @px @px @px",borderStyle:"@ @ @ @",borderColor:"rgb(@, @, @) rgb(@, @, @) rgb(@, @, @) rgb(@, @, @)",zIndex:"@",zoom:"@",fontWeight:"@",textIndent:"@px",opacity:"@"};Element.implement({setOpacity:function(l){g(this,l);return this},getOpacity:function(){return h(this)}});Element.Properties.opacity={set:function(l){g(this,l);a(this,l)},get:function(){return h(this)}};Element.Styles=new Hash(Element.Styles);Element.ShortStyles={margin:{},padding:{},border:{},borderWidth:{},borderStyle:{},borderColor:{}};["Top","Right","Bottom","Left"].each(function(r){var q=Element.ShortStyles;var m=Element.Styles;["margin","padding"].each(function(s){var t=s+r;q[s][t]=m[t]="@px"});var p="border"+r;q.border[p]=m[p]="@px @ rgb(@, @, @)";var o=p+"Width",l=p+"Style",n=p+"Color";q[p]={};q.borderWidth[o]=q[p][o]=m[o]="@px";q.borderStyle[l]=q[p][l]=m[l]="@";q.borderColor[n]=q[p][n]=m[n]="rgb(@, @, @)"})})();(function(){Element.Properties.events={set:function(b){this.addEvents(b)}};[Element,Window,Document].invoke("implement",{addEvent:function(g,i){var j=this.retrieve("events",{});if(!j[g]){j[g]={keys:[],values:[]}}if(j[g].keys.contains(i)){return this}j[g].keys.push(i);var h=g,b=Element.Events[g],d=i,k=this;if(b){if(b.onAdd){b.onAdd.call(this,i,g)}if(b.condition){d=function(l){if(b.condition.call(this,l,g)){return i.call(this,l)}return true}}if(b.base){h=Function.from(b.base).call(this,g)}}var f=function(){return i.call(k)};var c=Element.NativeEvents[h];if(c){if(c==2){f=function(l){l=new DOMEvent(l,k.getWindow());if(d.call(k,l)===false){l.stop()}}}this.addListener(h,f,arguments[2])}j[g].values.push(f);return this},removeEvent:function(f,d){var c=this.retrieve("events");if(!c||!c[f]){return this}var i=c[f];var b=i.keys.indexOf(d);if(b==-1){return this}var h=i.values[b];delete i.keys[b];delete i.values[b];var g=Element.Events[f];if(g){if(g.onRemove){g.onRemove.call(this,d,f)}if(g.base){f=Function.from(g.base).call(this,f)}}return(Element.NativeEvents[f])?this.removeListener(f,h,arguments[2]):this},addEvents:function(b){for(var c in b){this.addEvent(c,b[c])}return this},removeEvents:function(b){var d;if(typeOf(b)=="object"){for(d in b){this.removeEvent(d,b[d])}return this}var c=this.retrieve("events");if(!c){return this}if(!b){for(d in c){this.removeEvents(d)}this.eliminate("events")}else{if(c[b]){c[b].keys.each(function(f){this.removeEvent(b,f)},this);delete c[b]}}return this},fireEvent:function(f,c,b){var d=this.retrieve("events");if(!d||!d[f]){return this}c=Array.from(c);d[f].keys.each(function(g){if(b){g.delay(b,this,c)}else{g.apply(this,c)}},this);return this},cloneEvents:function(f,d){f=document.id(f);var c=f.retrieve("events");if(!c){return this}if(!d){for(var b in c){this.cloneEvents(f,b)}}else{if(c[d]){c[d].keys.each(function(g){this.addEvent(d,g)},this)}}return this}});Element.NativeEvents={click:2,dblclick:2,mouseup:2,mousedown:2,contextmenu:2,mousewheel:2,DOMMouseScroll:2,mouseover:2,mouseout:2,mousemove:2,selectstart:2,selectend:2,keydown:2,keypress:2,keyup:2,orientationchange:2,touchstart:2,touchmove:2,touchend:2,touchcancel:2,gesturestart:2,gesturechange:2,gestureend:2,focus:2,blur:2,change:2,reset:2,select:2,submit:2,paste:2,input:2,load:2,unload:1,beforeunload:2,resize:1,move:1,DOMContentLoaded:1,readystatechange:1,error:1,abort:1,scroll:1};Element.Events={mousewheel:{base:(Browser.firefox)?"DOMMouseScroll":"mousewheel"}};if("onmouseenter" in document.documentElement){Element.NativeEvents.mouseenter=Element.NativeEvents.mouseleave=2}else{var a=function(b){var c=b.relatedTarget;if(c==null){return true}if(!c){return false}return(c!=this&&c.prefix!="xul"&&typeOf(this)!="document"&&!this.contains(c))};Element.Events.mouseenter={base:"mouseover",condition:a};Element.Events.mouseleave={base:"mouseout",condition:a}}if(!window.addEventListener){Element.NativeEvents.propertychange=2;Element.Events.change={base:function(){var b=this.type;return(this.get("tag")=="input"&&(b=="radio"||b=="checkbox"))?"propertychange":"change"},condition:function(b){return this.type!="radio"||(b.event.propertyName=="checked"&&this.checked)}}}Element.Events=new Hash(Element.Events)})();(function(){var c=!!window.addEventListener;Element.NativeEvents.focusin=Element.NativeEvents.focusout=2;var l=function(m,n,o,p,q){while(q&&q!=m){if(n(q,p)){return o.call(q,p,q)}q=document.id(q.parentNode)}};var a={mouseenter:{base:"mouseover"},mouseleave:{base:"mouseout"},focus:{base:"focus"+(c?"":"in"),capture:true},blur:{base:c?"blur":"focusout",capture:true}};var b="$delegation:";var j=function(m){return{base:"focusin",remove:function(n,p){var q=n.retrieve(b+m+"listeners",{})[p];if(q&&q.forms){for(var o=q.forms.length;o--;){q.forms[o].removeEvent(m,q.fns[o])}}},listen:function(B,s,y,o,u,t){var p=(u.get("tag")=="form")?u:o.target.getParent("form");if(!p){return}var v=B.retrieve(b+m+"listeners",{}),q=v[t]||{forms:[],fns:[]},n=q.forms,z=q.fns;if(n.indexOf(p)!=-1){return}n.push(p);var r=function(D){l(B,s,y,D,u)};p.addEvent(m,r);z.push(r);v[t]=q;B.store(b+m+"listeners",v)}}};var d=function(m){return{base:"focusin",listen:function(n,o,q,r,s){var p={blur:function(){this.removeEvents(p)}};p[m]=function(t){l(n,o,q,t,s)};r.target.addEvents(p)}}};if(!c){Object.append(a,{submit:j("submit"),reset:j("reset"),change:d("change"),select:d("select")})}var i=Element.prototype,g=i.addEvent,k=i.removeEvent;var f=function(m,n){return function(s,r,o){if(s.indexOf(":relay")==-1){return m.call(this,s,r,o)}var p=Slick.parse(s).expressions[0][0];if(p.pseudos[0].key!="relay"){return m.call(this,s,r,o)}var q=p.tag;p.pseudos.slice(1).each(function(t){q+=":"+t.key+(t.value?"("+t.value+")":"")});m.call(this,s,r);return n.call(this,q,p.pseudos[0].value,r)}};var h={addEvent:function(y,r,B){var u=this.retrieve("$delegates",{}),s=u[y];if(s){for(var D in s){if(s[D].fn==B&&s[D].match==r){return this}}}var q=y,v=r,p=B,o=a[y]||{};y=o.base||q;r=function(H){return Slick.match(H,v)};var z=Element.Events[q];if(z&&z.condition){var m=r,n=z.condition;r=function(I,H){return m(I,H)&&n.call(I,H,y)}}var E=this,t=String.uniqueID();var G=o.listen?function(H,I){if(!I&&H&&H.target){I=H.target}if(I){o.listen(E,r,B,H,I,t)}}:function(H,I){if(!I&&H&&H.target){I=H.target}if(I){l(E,r,B,H,I)}};if(!s){s={}}s[t]={match:v,fn:p,delegator:G};u[q]=s;return g.call(this,y,G,o.capture)},removeEvent:function(t,o,u,v){var r=this.retrieve("$delegates",{}),q=r[t];if(!q){return this}if(v){var n=t,z=q[v].delegator,m=a[t]||{};t=m.base||n;if(m.remove){m.remove(this,v)}delete q[v];r[n]=q;return k.call(this,t,z)}var p,y;if(u){for(p in q){y=q[p];if(y.match==o&&y.fn==u){return h.removeEvent.call(this,t,o,u,p)}}}else{for(p in q){y=q[p];if(y.match==o){h.removeEvent.call(this,t,o,y.fn,p)}}}return this}};[Element,Window,Document].invoke("implement",{addEvent:f(g,h.addEvent),removeEvent:f(k,h.removeEvent)})})();(function(){var i=document.createElement("div"),f=document.createElement("div");i.style.height="0";i.appendChild(f);var d=(f.offsetParent===i);i=f=null;var m=function(n){return l(n,"position")!="static"||a(n)};var j=function(n){return m(n)||(/^(?:table|td|th)$/i).test(n.tagName)};Element.implement({scrollTo:function(n,o){if(a(this)){this.getWindow().scrollTo(n,o)}else{this.scrollLeft=n;this.scrollTop=o}return this},getSize:function(){if(a(this)){return this.getWindow().getSize()}return{x:this.offsetWidth,y:this.offsetHeight}},getScrollSize:function(){if(a(this)){return this.getWindow().getScrollSize()}return{x:this.scrollWidth,y:this.scrollHeight}},getScroll:function(){if(a(this)){return this.getWindow().getScroll()}return{x:this.scrollLeft,y:this.scrollTop}},getScrolls:function(){var o=this.parentNode,n={x:0,y:0};while(o&&!a(o)){n.x+=o.scrollLeft;n.y+=o.scrollTop;o=o.parentNode}return n},getOffsetParent:d?function(){var n=this;if(a(n)||l(n,"position")=="fixed"){return null}var o=(l(n,"position")=="static")?j:m;while((n=n.parentNode)){if(o(n)){return n}}return null}:function(){var n=this;if(a(n)||l(n,"position")=="fixed"){return null}try{return n.offsetParent}catch(o){}return null},getOffsets:function(){if(this.getBoundingClientRect&&!Browser.Platform.ios){var s=this.getBoundingClientRect(),p=document.id(this.getDocument().documentElement),r=p.getScroll(),u=this.getScrolls(),t=(l(this,"position")=="fixed");return{x:s.left.toInt()+u.x+((t)?0:r.x)-p.clientLeft,y:s.top.toInt()+u.y+((t)?0:r.y)-p.clientTop}}var o=this,n={x:0,y:0};if(a(this)){return n}while(o&&!a(o)){n.x+=o.offsetLeft;n.y+=o.offsetTop;if(Browser.firefox){if(!c(o)){n.x+=b(o);n.y+=h(o)}var q=o.parentNode;if(q&&l(q,"overflow")!="visible"){n.x+=b(q);n.y+=h(q)}}else{if(o!=this&&Browser.safari){n.x+=b(o);n.y+=h(o)}}o=o.offsetParent}if(Browser.firefox&&!c(this)){n.x-=b(this);n.y-=h(this)}return n},getPosition:function(q){var r=this.getOffsets(),o=this.getScrolls();var n={x:r.x-o.x,y:r.y-o.y};if(q&&(q=document.id(q))){var p=q.getPosition();return{x:n.x-p.x-b(q),y:n.y-p.y-h(q)}}return n},getCoordinates:function(p){if(a(this)){return this.getWindow().getCoordinates()}var n=this.getPosition(p),o=this.getSize();var q={left:n.x,top:n.y,width:o.x,height:o.y};q.right=q.left+q.width;q.bottom=q.top+q.height;return q},computePosition:function(n){return{left:n.x-k(this,"margin-left"),top:n.y-k(this,"margin-top")}},setPosition:function(n){return this.setStyles(this.computePosition(n))}});[Document,Window].invoke("implement",{getSize:function(){var n=g(this);return{x:n.clientWidth,y:n.clientHeight}},getScroll:function(){var o=this.getWindow(),n=g(this);return{x:o.pageXOffset||n.scrollLeft,y:o.pageYOffset||n.scrollTop}},getScrollSize:function(){var p=g(this),o=this.getSize(),n=this.getDocument().body;return{x:Math.max(p.scrollWidth,n.scrollWidth,o.x),y:Math.max(p.scrollHeight,n.scrollHeight,o.y)}},getPosition:function(){return{x:0,y:0}},getCoordinates:function(){var n=this.getSize();return{top:0,left:0,bottom:n.y,right:n.x,height:n.y,width:n.x}}});var l=Element.getComputedStyle;function k(n,o){return l(n,o).toInt()||0}function c(n){return l(n,"-moz-box-sizing")=="border-box"}function h(n){return k(n,"border-top-width")}function b(n){return k(n,"border-left-width")}function a(n){return(/^(?:body|html)$/i).test(n.tagName)}function g(n){var o=n.getDocument();return(!o.compatMode||o.compatMode=="CSS1Compat")?o.html:o.body}})();Element.alias({position:"setPosition"});[Window,Document,Element].invoke("implement",{getHeight:function(){return this.getSize().y},getWidth:function(){return this.getSize().x},getScrollTop:function(){return this.getScroll().y},getScrollLeft:function(){return this.getScroll().x},getScrollHeight:function(){return this.getScrollSize().y},getScrollWidth:function(){return this.getScrollSize().x},getTop:function(){return this.getPosition().y},getLeft:function(){return this.getPosition().x}});(function(){var g=this.Fx=new Class({Implements:[Chain,Events,Options],options:{fps:60,unit:false,duration:500,frames:null,frameSkip:true,link:"ignore"},initialize:function(h){this.subject=this.subject||this;this.setOptions(h)},getTransition:function(){return function(h){return -(Math.cos(Math.PI*h)-1)/2}},step:function(h){if(this.options.frameSkip){var i=(this.time!=null)?(h-this.time):0,j=i/this.frameInterval;this.time=h;this.frame+=j}else{this.frame++}if(this.frame<this.frames){var k=this.transition(this.frame/this.frames);this.set(this.compute(this.from,this.to,k))}else{this.frame=this.frames;this.set(this.compute(this.from,this.to,1));this.stop()}},set:function(h){return h},compute:function(j,i,h){return g.compute(j,i,h)},check:function(){if(!this.isRunning()){return true}switch(this.options.link){case"cancel":this.cancel();return true;case"chain":this.chain(this.caller.pass(arguments,this));return false}return false},start:function(l,k){if(!this.check(l,k)){return this}this.from=l;this.to=k;this.frame=(this.options.frameSkip)?0:-1;this.time=null;this.transition=this.getTransition();var j=this.options.frames,i=this.options.fps,h=this.options.duration;this.duration=g.Durations[h]||h.toInt();this.frameInterval=1000/i;this.frames=j||Math.round(this.duration/this.frameInterval);this.fireEvent("start",this.subject);b.call(this,i);return this},stop:function(){if(this.isRunning()){this.time=null;d.call(this,this.options.fps);if(this.frames==this.frame){this.fireEvent("complete",this.subject);if(!this.callChain()){this.fireEvent("chainComplete",this.subject)}}else{this.fireEvent("stop",this.subject)}}return this},cancel:function(){if(this.isRunning()){this.time=null;d.call(this,this.options.fps);this.frame=this.frames;this.fireEvent("cancel",this.subject).clearChain()}return this},pause:function(){if(this.isRunning()){this.time=null;d.call(this,this.options.fps)}return this},resume:function(){if((this.frame<this.frames)&&!this.isRunning()){b.call(this,this.options.fps)}return this},isRunning:function(){var h=f[this.options.fps];return h&&h.contains(this)}});g.compute=function(j,i,h){return(i-j)*h+j};g.Durations={"short":250,normal:500,"long":1000};var f={},c={};var a=function(){var j=Date.now();for(var k=this.length;k--;){var h=this[k];if(h){h.step(j)}}};var b=function(i){var h=f[i]||(f[i]=[]);h.push(this);if(!c[i]){c[i]=a.periodical(Math.round(1000/i),h)}};var d=function(i){var h=f[i];if(h){h.erase(this);if(!h.length&&c[i]){delete f[i];c[i]=clearInterval(c[i])}}}})();Fx.CSS=new Class({Extends:Fx,prepare:function(b,f,a){a=Array.from(a);var i=a[0],h=a[1];if(h==null){h=i;i=b.getStyle(f);var c=this.options.unit;if(c&&i.slice(-c.length)!=c&&parseFloat(i)!=0){b.setStyle(f,h+c);var d=b.getComputedStyle(f);if(!(/px$/.test(d))){d=b.style[("pixel-"+f).camelCase()];if(d==null){var g=b.style.left;b.style.left=h+c;d=b.style.pixelLeft;b.style.left=g}}i=(h||1)/(parseFloat(d)||1)*(parseFloat(i)||0);b.setStyle(f,i+c)}}return{from:this.parse(i),to:this.parse(h)}},parse:function(a){a=Function.from(a)();a=(typeof a=="string")?a.split(" "):Array.from(a);return a.map(function(c){c=String(c);var b=false;Object.each(Fx.CSS.Parsers,function(g,f){if(b){return}var d=g.parse(c);if(d||d===0){b={value:d,parser:g}}});b=b||{value:c,parser:Fx.CSS.Parsers.String};return b})},compute:function(d,c,b){var a=[];(Math.min(d.length,c.length)).times(function(f){a.push({value:d[f].parser.compute(d[f].value,c[f].value,b),parser:d[f].parser})});a.$family=Function.from("fx:css:value");return a},serve:function(c,b){if(typeOf(c)!="fx:css:value"){c=this.parse(c)}var a=[];c.each(function(d){a=a.concat(d.parser.serve(d.value,b))});return a},render:function(a,d,c,b){a.setStyle(d,this.serve(c,b))},search:function(a){if(Fx.CSS.Cache[a]){return Fx.CSS.Cache[a]}var c={},b=new RegExp("^"+a.escapeRegExp()+"$");Array.each(document.styleSheets,function(g,f){var d=g.href;if(d&&d.contains("://")&&!d.contains(document.domain)){return}var h=g.rules||g.cssRules;Array.each(h,function(l,j){if(!l.style){return}var k=(l.selectorText)?l.selectorText.replace(/^\w+/,function(i){return i.toLowerCase()}):null;if(!k||!b.test(k)){return}Object.each(Element.Styles,function(m,i){if(!l.style[i]||Element.ShortStyles[i]){return}m=String(l.style[i]);c[i]=((/^rgb/).test(m))?m.rgbToHex():m})})});return Fx.CSS.Cache[a]=c}});Fx.CSS.Cache={};Fx.CSS.Parsers={Color:{parse:function(a){if(a.match(/^#[0-9a-f]{3,6}$/i)){return a.hexToRgb(true)}return((a=a.match(/(\d+),\s*(\d+),\s*(\d+)/)))?[a[1],a[2],a[3]]:false},compute:function(c,b,a){return c.map(function(f,d){return Math.round(Fx.compute(c[d],b[d],a))})},serve:function(a){return a.map(Number)}},Number:{parse:parseFloat,compute:Fx.compute,serve:function(b,a){return(a)?b+a:b}},String:{parse:Function.from(false),compute:function(b,a){return a},serve:function(a){return a}}};Fx.CSS.Parsers=new Hash(Fx.CSS.Parsers);Fx.Tween=new Class({Extends:Fx.CSS,initialize:function(b,a){this.element=this.subject=document.id(b);this.parent(a)},set:function(b,a){if(arguments.length==1){a=b;b=this.property||this.options.property}this.render(this.element,b,a,this.options.unit);return this},start:function(c,f,d){if(!this.check(c,f,d)){return this}var b=Array.flatten(arguments);this.property=this.options.property||b.shift();var a=this.prepare(this.element,this.property,b);return this.parent(a.from,a.to)}});Element.Properties.tween={set:function(a){this.get("tween").cancel().setOptions(a);return this},get:function(){var a=this.retrieve("tween");if(!a){a=new Fx.Tween(this,{link:"cancel"});this.store("tween",a)}return a}};Element.implement({tween:function(a,c,b){this.get("tween").start(a,c,b);return this},fade:function(d){var f=this.get("tween"),h,c=["opacity"].append(arguments),a;if(c[1]==null){c[1]="toggle"}switch(c[1]){case"in":h="start";c[1]=1;break;case"out":h="start";c[1]=0;break;case"show":h="set";c[1]=1;break;case"hide":h="set";c[1]=0;break;case"toggle":var b=this.retrieve("fade:flag",this.getStyle("opacity")==1);h="start";c[1]=b?0:1;this.store("fade:flag",!b);a=true;break;default:h="start"}if(!a){this.eliminate("fade:flag")}f[h].apply(f,c);var g=c[c.length-1];if(h=="set"||g!=0){this.setStyle("visibility",g==0?"hidden":"visible")}else{f.chain(function(){this.element.setStyle("visibility","hidden");this.callChain()})}return this},highlight:function(c,a){if(!a){a=this.retrieve("highlight:original",this.getStyle("background-color"));a=(a=="transparent")?"#fff":a}var b=this.get("tween");b.start("background-color",c||"#ffff88",a).chain(function(){this.setStyle("background-color",this.retrieve("highlight:original"));b.callChain()}.bind(this));return this}});Fx.Morph=new Class({Extends:Fx.CSS,initialize:function(b,a){this.element=this.subject=document.id(b);this.parent(a)},set:function(a){if(typeof a=="string"){a=this.search(a)}for(var b in a){this.render(this.element,b,a[b],this.options.unit)}return this},compute:function(f,d,c){var a={};for(var b in f){a[b]=this.parent(f[b],d[b],c)}return a},start:function(b){if(!this.check(b)){return this}if(typeof b=="string"){b=this.search(b)}var f={},d={};for(var c in b){var a=this.prepare(this.element,c,b[c]);f[c]=a.from;d[c]=a.to}return this.parent(f,d)}});Element.Properties.morph={set:function(a){this.get("morph").cancel().setOptions(a);return this},get:function(){var a=this.retrieve("morph");if(!a){a=new Fx.Morph(this,{link:"cancel"});this.store("morph",a)}return a}};Element.implement({morph:function(a){this.get("morph").start(a);return this}});Fx.implement({getTransition:function(){var a=this.options.transition||Fx.Transitions.Sine.easeInOut;if(typeof a=="string"){var b=a.split(":");a=Fx.Transitions;a=a[b[0]]||a[b[0].capitalize()];if(b[1]){a=a["ease"+b[1].capitalize()+(b[2]?b[2].capitalize():"")]}}return a}});Fx.Transition=function(c,b){b=Array.from(b);var a=function(d){return c(d,b)};return Object.append(a,{easeIn:a,easeOut:function(d){return 1-c(1-d,b)},easeInOut:function(d){return(d<=0.5?c(2*d,b):(2-c(2*(1-d),b)))/2}})};Fx.Transitions={linear:function(a){return a}};Fx.Transitions=new Hash(Fx.Transitions);Fx.Transitions.extend=function(a){for(var b in a){Fx.Transitions[b]=new Fx.Transition(a[b])}};Fx.Transitions.extend({Pow:function(b,a){return Math.pow(b,a&&a[0]||6)},Expo:function(a){return Math.pow(2,8*(a-1))},Circ:function(a){return 1-Math.sin(Math.acos(a))},Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Back:function(b,a){a=a&&a[0]||1.618;return Math.pow(b,2)*((a+1)*b-a)},Bounce:function(g){var f;for(var d=0,c=1;1;d+=c,c/=2){if(g>=(7-4*d)/11){f=c*c-Math.pow((11-6*d-11*g)/4,2);break}}return f},Elastic:function(b,a){return Math.pow(2,10*--b)*Math.cos(20*b*Math.PI*(a&&a[0]||1)/3)}});["Quad","Cubic","Quart","Quint"].each(function(b,a){Fx.Transitions[b]=new Fx.Transition(function(c){return Math.pow(c,a+2)})});(function(){var d=function(){},a=("onprogress" in new Browser.Request);var c=this.Request=new Class({Implements:[Chain,Events,Options],options:{url:"",data:"",headers:{"X-Requested-With":"XMLHttpRequest",Accept:"text/javascript, text/html, application/xml, text/xml, */*"},async:true,format:false,method:"post",link:"ignore",isSuccess:null,emulation:true,urlEncoded:true,encoding:"utf-8",evalScripts:false,evalResponse:false,timeout:0,noCache:false},initialize:function(f){this.xhr=new Browser.Request();this.setOptions(f);this.headers=this.options.headers},onStateChange:function(){var f=this.xhr;if(f.readyState!=4||!this.running){return}this.running=false;this.status=0;Function.attempt(function(){var g=f.status;this.status=(g==1223)?204:g}.bind(this));f.onreadystatechange=d;if(a){f.onprogress=f.onloadstart=d}clearTimeout(this.timer);this.response={text:this.xhr.responseText||"",xml:this.xhr.responseXML};if(this.options.isSuccess.call(this,this.status)){this.success(this.response.text,this.response.xml)}else{this.failure()}},isSuccess:function(){var f=this.status;return(f>=200&&f<300)},isRunning:function(){return !!this.running},processScripts:function(f){if(this.options.evalResponse||(/(ecma|java)script/).test(this.getHeader("Content-type"))){return Browser.exec(f)}return f.stripScripts(this.options.evalScripts)},success:function(g,f){this.onSuccess(this.processScripts(g),f)},onSuccess:function(){this.fireEvent("complete",arguments).fireEvent("success",arguments).callChain()},failure:function(){this.onFailure()},onFailure:function(){this.fireEvent("complete").fireEvent("failure",this.xhr)},loadstart:function(f){this.fireEvent("loadstart",[f,this.xhr])},progress:function(f){this.fireEvent("progress",[f,this.xhr])},timeout:function(){this.fireEvent("timeout",this.xhr)},setHeader:function(f,g){this.headers[f]=g;return this},getHeader:function(f){return Function.attempt(function(){return this.xhr.getResponseHeader(f)}.bind(this))},check:function(){if(!this.running){return true}switch(this.options.link){case"cancel":this.cancel();return true;case"chain":this.chain(this.caller.pass(arguments,this));return false}return false},send:function(p){if(!this.check(p)){return this}this.options.isSuccess=this.options.isSuccess||this.isSuccess;this.running=true;var m=typeOf(p);if(m=="string"||m=="element"){p={data:p}}var i=this.options;p=Object.append({data:i.data,url:i.url,method:i.method},p);var k=p.data,g=String(p.url),f=p.method.toLowerCase();switch(typeOf(k)){case"element":k=document.id(k).toQueryString();break;case"object":case"hash":k=Object.toQueryString(k)}if(this.options.format){var n="format="+this.options.format;k=(k)?n+"&"+k:n}if(this.options.emulation&&!["get","post"].contains(f)){var l="_method="+f;k=(k)?l+"&"+k:l;f="post"}if(this.options.urlEncoded&&["post","put"].contains(f)){var h=(this.options.encoding)?"; charset="+this.options.encoding:"";this.headers["Content-type"]="application/x-www-form-urlencoded"+h}if(!g){g=document.location.pathname}var j=g.lastIndexOf("/");if(j>-1&&(j=g.indexOf("#"))>-1){g=g.substr(0,j)}if(this.options.noCache){g+=(g.contains("?")?"&":"?")+String.uniqueID()}if(k&&f=="get"){g+=(g.contains("?")?"&":"?")+k;k=null}var o=this.xhr;if(a){o.onloadstart=this.loadstart.bind(this);o.onprogress=this.progress.bind(this)}o.open(f.toUpperCase(),g,this.options.async,this.options.user,this.options.password);if(this.options.user&&"withCredentials" in o){o.withCredentials=true}o.onreadystatechange=this.onStateChange.bind(this);Object.each(this.headers,function(r,q){try{o.setRequestHeader(q,r)}catch(s){this.fireEvent("exception",[q,r])}},this);this.fireEvent("request");o.send(k);if(!this.options.async){this.onStateChange()}else{if(this.options.timeout){this.timer=this.timeout.delay(this.options.timeout,this)}}return this},cancel:function(){if(!this.running){return this}this.running=false;var f=this.xhr;f.abort();clearTimeout(this.timer);f.onreadystatechange=d;if(a){f.onprogress=f.onloadstart=d}this.xhr=new Browser.Request();this.fireEvent("cancel");return this}});var b={};["get","post","put","delete","GET","POST","PUT","DELETE"].each(function(f){b[f]=function(h){var g={method:f};if(h!=null){g.data=h}return this.send(g)}});c.implement(b);Element.Properties.send={set:function(f){var g=this.get("send").cancel();g.setOptions(f);return this},get:function(){var f=this.retrieve("send");if(!f){f=new c({data:this,link:"cancel",method:this.get("method")||"post",url:this.get("action")});this.store("send",f)}return f}};Element.implement({send:function(f){var g=this.get("send");g.send({data:this,url:f||g.options.url});return this}})})();Request.HTML=new Class({Extends:Request,options:{update:false,append:false,evalScripts:true,filter:false,headers:{Accept:"text/html, application/xml, text/xml, */*"}},success:function(g){var f=this.options,c=this.response;c.html=g.stripScripts(function(i){c.javascript=i});var d=c.html.match(/<body[^>]*>([\s\S]*?)<\/body>/i);if(d){c.html=d[1]}var b=new Element("div").set("html",c.html);c.tree=b.childNodes;c.elements=b.getElements(f.filter||"*");if(f.filter){c.tree=c.elements}if(f.update){var h=document.id(f.update).empty();if(f.filter){h.adopt(c.elements)}else{h.set("html",c.html)}}else{if(f.append){var a=document.id(f.append);if(f.filter){c.elements.reverse().inject(a)}else{a.adopt(b.getChildren())}}}if(f.evalScripts){Browser.exec(c.javascript)}this.onSuccess(c.tree,c.elements,c.html,c.javascript)}});Element.Properties.load={set:function(a){var b=this.get("load").cancel();b.setOptions(a);return this},get:function(){var a=this.retrieve("load");if(!a){a=new Request.HTML({data:this,link:"cancel",update:this,method:"get"});this.store("load",a)}return a}};Element.implement({load:function(){this.get("load").send(Array.link(arguments,{data:Type.isObject,url:Type.isString}));return this}});if(typeof JSON=="undefined"){this.JSON={}}JSON=new Hash({stringify:JSON.stringify,parse:JSON.parse});(function(){var special={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};var escape=function(chr){return special[chr]||"\\u"+("0000"+chr.charCodeAt(0).toString(16)).slice(-4)};JSON.validate=function(string){string=string.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"");return(/^[\],:{}\s]*$/).test(string)};JSON.encode=JSON.stringify?function(obj){return JSON.stringify(obj)}:function(obj){if(obj&&obj.toJSON){obj=obj.toJSON()}switch(typeOf(obj)){case"string":return'"'+obj.replace(/[\x00-\x1f\\"]/g,escape)+'"';case"array":return"["+obj.map(JSON.encode).clean()+"]";case"object":case"hash":var string=[];Object.each(obj,function(value,key){var json=JSON.encode(value);if(json){string.push(JSON.encode(key)+":"+json)}});return"{"+string+"}";case"number":case"boolean":return""+obj;case"null":return"null"}return null};JSON.decode=function(string,secure){if(!string||typeOf(string)!="string"){return null}if(secure||JSON.secure){if(JSON.parse){return JSON.parse(string)}if(!JSON.validate(string)){throw new Error("JSON could not decode the input; security is enabled and the value is not secure.")}}return eval("("+string+")")}})();Request.JSON=new Class({Extends:Request,options:{secure:true},initialize:function(a){this.parent(a);Object.append(this.headers,{Accept:"application/json","X-Request":"JSON"})},success:function(c){var b;try{b=this.response.json=JSON.decode(c,this.options.secure)}catch(a){this.fireEvent("error",[c,a]);return}if(b==null){this.onFailure()}else{this.onSuccess(b,c)}}});var Cookie=new Class({Implements:Options,options:{path:"/",domain:false,duration:false,secure:false,document:document,encode:true},initialize:function(b,a){this.key=b;this.setOptions(a)},write:function(b){if(this.options.encode){b=encodeURIComponent(b)}if(this.options.domain){b+="; domain="+this.options.domain}if(this.options.path){b+="; path="+this.options.path}if(this.options.duration){var a=new Date();a.setTime(a.getTime()+this.options.duration*24*60*60*1000);b+="; expires="+a.toGMTString()}if(this.options.secure){b+="; secure"}this.options.document.cookie=this.key+"="+b;return this},read:function(){var a=this.options.document.cookie.match("(?:^|;)\\s*"+this.key.escapeRegExp()+"=([^;]*)");return(a)?decodeURIComponent(a[1]):null},dispose:function(){new Cookie(this.key,Object.merge({},this.options,{duration:-1})).write("");return this}});Cookie.write=function(b,c,a){return new Cookie(b,a).write(c)};Cookie.read=function(a){return new Cookie(a).read()};Cookie.dispose=function(b,a){return new Cookie(b,a).dispose()};(function(j,l){var m,g,f=[],c,b,d=l.createElement("div");var h=function(){clearTimeout(b);if(m){return}Browser.loaded=m=true;l.removeListener("DOMContentLoaded",h).removeListener("readystatechange",a);l.fireEvent("domready");j.fireEvent("domready")};var a=function(){for(var n=f.length;n--;){if(f[n]()){h();return true}}return false};var k=function(){clearTimeout(b);if(!a()){b=setTimeout(k,10)}};l.addListener("DOMContentLoaded",h);var i=function(){try{d.doScroll();return true}catch(n){}return false};if(d.doScroll&&!i()){f.push(i);c=true}if(l.readyState){f.push(function(){var n=l.readyState;return(n=="loaded"||n=="complete")})}if("onreadystatechange" in l){l.addListener("readystatechange",a)}else{c=true}if(c){k()}Element.Events.domready={onAdd:function(n){if(m){n.call(this)}}};Element.Events.load={base:"load",onAdd:function(n){if(g&&this==j){n.call(this)}},condition:function(){if(this==j){h();delete Element.Events.load}return true}};j.addEvent("load",function(){g=true})})(window,document);(function(){var Swiff=this.Swiff=new Class({Implements:Options,options:{id:null,height:1,width:1,container:null,properties:{},params:{quality:"high",allowScriptAccess:"always",wMode:"window",swLiveConnect:true},callBacks:{},vars:{}},toElement:function(){return this.object},initialize:function(path,options){this.instance="Swiff_"+String.uniqueID();this.setOptions(options);options=this.options;var id=this.id=options.id||this.instance;var container=document.id(options.container);Swiff.CallBacks[this.instance]={};var params=options.params,vars=options.vars,callBacks=options.callBacks;var properties=Object.append({height:options.height,width:options.width},options.properties);var self=this;for(var callBack in callBacks){Swiff.CallBacks[this.instance][callBack]=(function(option){return function(){return option.apply(self.object,arguments)}})(callBacks[callBack]);vars[callBack]="Swiff.CallBacks."+this.instance+"."+callBack}params.flashVars=Object.toQueryString(vars);if(Browser.ie){properties.classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000";params.movie=path}else{properties.type="application/x-shockwave-flash"}properties.data=path;var build='<object id="'+id+'"';for(var property in properties){build+=" "+property+'="'+properties[property]+'"'}build+=">";for(var param in params){if(params[param]){build+='<param name="'+param+'" value="'+params[param]+'" />'}}build+="</object>";this.object=((container)?container.empty():new Element("div")).set("html",build).firstChild},replaces:function(element){element=document.id(element,true);element.parentNode.replaceChild(this.toElement(),element);return this},inject:function(element){document.id(element,true).appendChild(this.toElement());return this},remote:function(){return Swiff.remote.apply(Swiff,[this.toElement()].append(arguments))}});Swiff.CallBacks={};Swiff.remote=function(obj,fn){var rs=obj.CallFunction('<invoke name="'+fn+'" returntype="javascript">'+__flash__argumentsToXML(arguments,2)+"</invoke>");return eval(rs)}})();MooTools.More={version:"1.4.0.1",build:"a4244edf2aa97ac8a196fc96082dd35af1abab87"};(function(){Events.Pseudos=function(i,f,g){var d="_monitorEvents:";var c=function(j){return{store:j.store?function(k,l){j.store(d+k,l)}:function(k,l){(j._monitorEvents||(j._monitorEvents={}))[k]=l},retrieve:j.retrieve?function(k,l){return j.retrieve(d+k,l)}:function(k,l){if(!j._monitorEvents){return l}return j._monitorEvents[k]||l}}};var h=function(m){if(m.indexOf(":")==-1||!i){return null}var k=Slick.parse(m).expressions[0][0],q=k.pseudos,j=q.length,p=[];while(j--){var o=q[j].key,n=i[o];if(n!=null){p.push({event:k.tag,value:q[j].value,pseudo:o,original:m,listener:n})}}return p.length?p:null};return{addEvent:function(n,q,k){var o=h(n);if(!o){return f.call(this,n,q,k)}var l=c(this),s=l.retrieve(n,[]),j=o[0].event,m=Array.slice(arguments,2),p=q,r=this;o.each(function(t){var u=t.listener,v=p;if(u==false){j+=":"+t.pseudo+"("+t.value+")"}else{p=function(){u.call(r,t,v,arguments,p)}}});s.include({type:j,event:q,monitor:p});l.store(n,s);if(n!=j){f.apply(this,[n,q].concat(m))}return f.apply(this,[j,p].concat(m))},removeEvent:function(n,m){var l=h(n);if(!l){return g.call(this,n,m)}var o=c(this),k=o.retrieve(n);if(!k){return this}var j=Array.slice(arguments,2);g.apply(this,[n,m].concat(j));k.each(function(p,q){if(!m||p.event==m){g.apply(this,[p.type,p.monitor].concat(j))}delete k[q]},this);o.store(n,k);return this}}};var b={once:function(f,g,d,c){g.apply(this,d);this.removeEvent(f.event,c).removeEvent(f.original,g)},throttle:function(d,f,c){if(!f._throttled){f.apply(this,c);f._throttled=setTimeout(function(){f._throttled=false},d.value||250)}},pause:function(d,f,c){clearTimeout(f._pause);f._pause=f.delay(d.value||250,this,c)}};Events.definePseudo=function(c,d){b[c]=d;return this};Events.lookupPseudo=function(c){return b[c]};var a=Events.prototype;Events.implement(Events.Pseudos(b,a.addEvent,a.removeEvent));["Request","Fx"].each(function(c){if(this[c]){this[c].implement(Events.prototype)}})})();Class.refactor=function(b,a){Object.each(a,function(f,d){var c=b.prototype[d];c=(c&&c.$origin)||c||function(){};b.implement(d,(typeof f=="function")?function(){var g=this.previous;this.previous=c;var h=f.apply(this,arguments);this.previous=g;return h}:f)});return b};Class.Mutators.Binds=function(a){if(!this.prototype.initialize){this.implement("initialize",function(){})}return Array.from(a).concat(this.prototype.Binds||[])};Class.Mutators.initialize=function(a){return function(){Array.from(this.Binds).each(function(b){var c=this[b];if(c){this[b]=c.bind(this)}},this);return a.apply(this,arguments)}};Class.Occlude=new Class({occlude:function(c,b){b=document.id(b||this.element);var a=b.retrieve(c||this.property);if(a&&!this.occluded){return(this.occluded=a)}this.occluded=false;b.store(c||this.property,this);return this.occluded}});(function(){var a={wait:function(b){return this.chain(function(){this.callChain.delay(b==null?500:b,this);return this}.bind(this))}};Chain.implement(a);if(this.Fx){Fx.implement(a)}if(this.Element&&Element.implement&&this.Fx){Element.implement({chains:function(b){Array.from(b||["tween","morph","reveal"]).each(function(c){c=this.get(c);if(!c){return}c.setOptions({link:"chain"})},this);return this},pauseFx:function(c,b){this.chains(b).get(b||"tween").wait(c);return this}})}})();(function(a){Array.implement({min:function(){return Math.min.apply(null,this)},max:function(){return Math.max.apply(null,this)},average:function(){return this.length?this.sum()/this.length:0},sum:function(){var b=0,c=this.length;if(c){while(c--){b+=this[c]}}return b},unique:function(){return[].combine(this)},shuffle:function(){for(var c=this.length;c&&--c;){var b=this[c],d=Math.floor(Math.random()*(c+1));this[c]=this[d];this[d]=b}return this},reduce:function(d,f){for(var c=0,b=this.length;c<b;c++){if(c in this){f=f===a?this[c]:d.call(null,f,this[c],c,this)}}return f},reduceRight:function(c,d){var b=this.length;while(b--){if(b in this){d=d===a?this[b]:c.call(null,d,this[b],b,this)}}return d}})})();(function(){var b=function(c){return c!=null};var a=Object.prototype.hasOwnProperty;Object.extend({getFromPath:function(f,g){if(typeof g=="string"){g=g.split(".")}for(var d=0,c=g.length;d<c;d++){if(a.call(f,g[d])){f=f[g[d]]}else{return null}}return f},cleanValues:function(c,f){f=f||b;for(var d in c){if(!f(c[d])){delete c[d]}}return c},erase:function(c,d){if(a.call(c,d)){delete c[d]}return c},run:function(d){var c=Array.slice(arguments,1);for(var f in d){if(d[f].apply){d[f].apply(d,c)}}return d}})})();(function(){var b=null,a={},d={};var c=function(g){if(instanceOf(g,f.Set)){return g}else{return a[g]}};var f=this.Locale={define:function(g,k,i,j){var h;if(instanceOf(g,f.Set)){h=g.name;if(h){a[h]=g}}else{h=g;if(!a[h]){a[h]=new f.Set(h)}g=a[h]}if(k){g.define(k,i,j)}if(!b){b=g}return g},use:function(g){g=c(g);if(g){b=g;this.fireEvent("change",g)}return this},getCurrent:function(){return b},get:function(h,g){return(b)?b.get(h,g):""},inherit:function(g,h,i){g=c(g);if(g){g.inherit(h,i)}return this},list:function(){return Object.keys(a)}};Object.append(f,new Events);f.Set=new Class({sets:{},inherits:{locales:[],sets:{}},initialize:function(g){this.name=g||""},define:function(j,h,i){var g=this.sets[j];if(!g){g={}}if(h){if(typeOf(h)=="object"){g=Object.merge(g,h)}else{g[h]=i}}this.sets[j]=g;return this},get:function(s,k,r){var q=Object.getFromPath(this.sets,s);if(q!=null){var n=typeOf(q);if(n=="function"){q=q.apply(null,Array.from(k))}else{if(n=="object"){q=Object.clone(q)}}return q}var j=s.indexOf("."),p=j<0?s:s.substr(0,j),m=(this.inherits.sets[p]||[]).combine(this.inherits.locales).include("en-US");if(!r){r=[]}for(var h=0,g=m.length;h<g;h++){if(r.contains(m[h])){continue}r.include(m[h]);var o=a[m[h]];if(!o){continue}q=o.get(s,k,r);if(q!=null){return q}}return""},inherit:function(h,i){h=Array.from(h);if(i&&!this.inherits.sets[i]){this.inherits.sets[i]=[]}var g=h.length;while(g--){(i?this.inherits.sets[i]:this.inherits.locales).unshift(h[g])}return this}})})();Locale.define("en-US","Date",{months:["January","February","March","April","May","June","July","August","September","October","November","December"],months_abbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],days_abbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dateOrder:["month","date","year"],shortDate:"%m/%d/%Y",shortTime:"%I:%M%p",AM:"AM",PM:"PM",firstDayOfWeek:0,ordinal:function(a){return(a>3&&a<21)?"th":["th","st","nd","rd","th"][Math.min(a%10,4)]},lessThanMinuteAgo:"less than a minute ago",minuteAgo:"about a minute ago",minutesAgo:"{delta} minutes ago",hourAgo:"about an hour ago",hoursAgo:"about {delta} hours ago",dayAgo:"1 day ago",daysAgo:"{delta} days ago",weekAgo:"1 week ago",weeksAgo:"{delta} weeks ago",monthAgo:"1 month ago",monthsAgo:"{delta} months ago",yearAgo:"1 year ago",yearsAgo:"{delta} years ago",lessThanMinuteUntil:"less than a minute from now",minuteUntil:"about a minute from now",minutesUntil:"{delta} minutes from now",hourUntil:"about an hour from now",hoursUntil:"about {delta} hours from now",dayUntil:"1 day from now",daysUntil:"{delta} days from now",weekUntil:"1 week from now",weeksUntil:"{delta} weeks from now",monthUntil:"1 month from now",monthsUntil:"{delta} months from now",yearUntil:"1 year from now",yearsUntil:"{delta} years from now"});(function(){var a=this.Date;var g=a.Methods={ms:"Milliseconds",year:"FullYear",min:"Minutes",mo:"Month",sec:"Seconds",hr:"Hours"};["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds","Time","TimezoneOffset","Week","Timezone","GMTOffset","DayOfYear","LastMonth","LastDayOfMonth","UTCDate","UTCDay","UTCFullYear","AMPM","Ordinal","UTCHours","UTCMilliseconds","UTCMinutes","UTCMonth","UTCSeconds","UTCMilliseconds"].each(function(t){a.Methods[t.toLowerCase()]=t});var q=function(v,u,t){if(u==1){return v}return v<Math.pow(10,u-1)?(t||"0")+q(v,u-1,t):v};a.implement({set:function(v,t){v=v.toLowerCase();var u=g[v]&&"set"+g[v];if(u&&this[u]){this[u](t)}return this}.overloadSetter(),get:function(u){u=u.toLowerCase();var t=g[u]&&"get"+g[u];if(t&&this[t]){return this[t]()}return null}.overloadGetter(),clone:function(){return new a(this.get("time"))},increment:function(t,v){t=t||"day";v=v!=null?v:1;switch(t){case"year":return this.increment("month",v*12);case"month":var u=this.get("date");this.set("date",1).set("mo",this.get("mo")+v);return this.set("date",u.min(this.get("lastdayofmonth")));case"week":return this.increment("day",v*7);case"day":return this.set("date",this.get("date")+v)}if(!a.units[t]){throw new Error(t+" is not a supported interval")}return this.set("time",this.get("time")+v*a.units[t]())},decrement:function(t,u){return this.increment(t,-1*(u!=null?u:1))},isLeapYear:function(){return a.isLeapYear(this.get("year"))},clearTime:function(){return this.set({hr:0,min:0,sec:0,ms:0})},diff:function(u,t){if(typeOf(u)=="string"){u=a.parse(u)}return((u-this)/a.units[t||"day"](3,3)).round()},getLastDayOfMonth:function(){return a.daysInMonth(this.get("mo"),this.get("year"))},getDayOfYear:function(){return(a.UTC(this.get("year"),this.get("mo"),this.get("date")+1)-a.UTC(this.get("year"),0,1))/a.units.day()},setDay:function(u,t){if(t==null){t=a.getMsg("firstDayOfWeek");if(t===""){t=1}}u=(7+a.parseDay(u,true)-t)%7;var v=(7+this.get("day")-t)%7;return this.increment("day",u-v)},getWeek:function(y){if(y==null){y=a.getMsg("firstDayOfWeek");if(y===""){y=1}}var B=this,v=(7+B.get("day")-y)%7,u=0,z;if(y==1){var D=B.get("month"),t=B.get("date")-v;if(D==11&&t>28){return 1}if(D==0&&t<-2){B=new a(B).decrement("day",v);v=0}z=new a(B.get("year"),0,1).get("day")||7;if(z>4){u=-7}}else{z=new a(B.get("year"),0,1).get("day")}u+=B.get("dayofyear");u+=6-v;u+=(7+z-y)%7;return(u/7)},getOrdinal:function(t){return a.getMsg("ordinal",t||this.get("date"))},getTimezone:function(){return this.toString().replace(/^.*? ([A-Z]{3}).[0-9]{4}.*$/,"$1").replace(/^.*?\(([A-Z])[a-z]+ ([A-Z])[a-z]+ ([A-Z])[a-z]+\)$/,"$1$2$3")},getGMTOffset:function(){var t=this.get("timezoneOffset");return((t>0)?"-":"+")+q((t.abs()/60).floor(),2)+q(t%60,2)},setAMPM:function(t){t=t.toUpperCase();var u=this.get("hr");if(u>11&&t=="AM"){return this.decrement("hour",12)}else{if(u<12&&t=="PM"){return this.increment("hour",12)}}return this},getAMPM:function(){return(this.get("hr")<12)?"AM":"PM"},parse:function(t){this.set("time",a.parse(t));return this},isValid:function(t){if(!t){t=this}return typeOf(t)=="date"&&!isNaN(t.valueOf())},format:function(t){if(!this.isValid()){return"invalid date"}if(!t){t="%x %X"}if(typeof t=="string"){t=h[t.toLowerCase()]||t}if(typeof t=="function"){return t(this)}var u=this;return t.replace(/%([a-z%])/gi,function(y,v){switch(v){case"a":return a.getMsg("days_abbr")[u.get("day")];case"A":return a.getMsg("days")[u.get("day")];case"b":return a.getMsg("months_abbr")[u.get("month")];case"B":return a.getMsg("months")[u.get("month")];case"c":return u.format("%a %b %d %H:%M:%S %Y");case"d":return q(u.get("date"),2);case"e":return q(u.get("date"),2," ");case"H":return q(u.get("hr"),2);case"I":return q((u.get("hr")%12)||12,2);case"j":return q(u.get("dayofyear"),3);case"k":return q(u.get("hr"),2," ");case"l":return q((u.get("hr")%12)||12,2," ");case"L":return q(u.get("ms"),3);case"m":return q((u.get("mo")+1),2);case"M":return q(u.get("min"),2);case"o":return u.get("ordinal");case"p":return a.getMsg(u.get("ampm"));case"s":return Math.round(u/1000);case"S":return q(u.get("seconds"),2);case"T":return u.format("%H:%M:%S");case"U":return q(u.get("week"),2);case"w":return u.get("day");case"x":return u.format(a.getMsg("shortDate"));case"X":return u.format(a.getMsg("shortTime"));case"y":return u.get("year").toString().substr(2);case"Y":return u.get("year");case"z":return u.get("GMTOffset");case"Z":return u.get("Timezone")}return v})},toISOString:function(){return this.format("iso8601")}}).alias({toJSON:"toISOString",compare:"diff",strftime:"format"});var l=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var h={db:"%Y-%m-%d %H:%M:%S",compact:"%Y%m%dT%H%M%S","short":"%d %b %H:%M","long":"%B %d, %Y %H:%M",rfc822:function(t){return l[t.get("day")]+t.format(", %d ")+i[t.get("month")]+t.format(" %Y %H:%M:%S %Z")},rfc2822:function(t){return l[t.get("day")]+t.format(", %d ")+i[t.get("month")]+t.format(" %Y %H:%M:%S %z")},iso8601:function(t){return(t.getUTCFullYear()+"-"+q(t.getUTCMonth()+1,2)+"-"+q(t.getUTCDate(),2)+"T"+q(t.getUTCHours(),2)+":"+q(t.getUTCMinutes(),2)+":"+q(t.getUTCSeconds(),2)+"."+q(t.getUTCMilliseconds(),3)+"Z")}};var c=[],o=a.parse;var s=function(y,B,v){var u=-1,z=a.getMsg(y+"s");switch(typeOf(B)){case"object":u=z[B.get(y)];break;case"number":u=z[B];if(!u){throw new Error("Invalid "+y+" index: "+B)}break;case"string":var t=z.filter(function(D){return this.test(D)},new RegExp("^"+B,"i"));if(!t.length){throw new Error("Invalid "+y+" string")}if(t.length>1){throw new Error("Ambiguous "+y)}u=t[0]}return(v)?z.indexOf(u):u};var j=1900,p=70;a.extend({getMsg:function(u,t){return Locale.get("Date."+u,t)},units:{ms:Function.from(1),second:Function.from(1000),minute:Function.from(60000),hour:Function.from(3600000),day:Function.from(86400000),week:Function.from(608400000),month:function(u,t){var v=new a;return a.daysInMonth(u!=null?u:v.get("mo"),t!=null?t:v.get("year"))*86400000},year:function(t){t=t||new a().get("year");return a.isLeapYear(t)?31622400000:31536000000}},daysInMonth:function(u,t){return[31,a.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][u]},isLeapYear:function(t){return((t%4===0)&&(t%100!==0))||(t%400===0)},parse:function(y){var v=typeOf(y);if(v=="number"){return new a(y)}if(v!="string"){return y}y=y.clean();if(!y.length){return null}var u;c.some(function(z){var t=z.re.exec(y);return(t)?(u=z.handler(t)):false});if(!(u&&u.isValid())){u=new a(o(y));if(!(u&&u.isValid())){u=new a(y.toInt())}}return u},parseDay:function(t,u){return s("day",t,u)},parseMonth:function(u,t){return s("month",u,t)},parseUTC:function(u){var t=new a(u);var v=a.UTC(t.get("year"),t.get("mo"),t.get("date"),t.get("hr"),t.get("min"),t.get("sec"),t.get("ms"));return new a(v)},orderIndex:function(t){return a.getMsg("dateOrder").indexOf(t)+1},defineFormat:function(t,u){h[t]=u;return this},defineParser:function(t){c.push((t.re&&t.handler)?t:m(t));return this},defineParsers:function(){Array.flatten(arguments).each(a.defineParser);return this},define2DigitYearStart:function(t){p=t%100;j=t-p;return this}}).extend({defineFormats:a.defineFormat.overloadSetter()});var d=function(t){return new RegExp("(?:"+a.getMsg(t).map(function(u){return u.substr(0,3)}).join("|")+")[a-z]*")};var n=function(t){switch(t){case"T":return"%H:%M:%S";case"x":return((a.orderIndex("month")==1)?"%m[-./]%d":"%d[-./]%m")+"([-./]%y)?";case"X":return"%H([.:]%M)?([.:]%S([.:]%s)?)? ?%p? ?%z?"}return null};var k={d:/[0-2]?[0-9]|3[01]/,H:/[01]?[0-9]|2[0-3]/,I:/0?[1-9]|1[0-2]/,M:/[0-5]?\d/,s:/\d+/,o:/[a-z]*/,p:/[ap]\.?m\.?/,y:/\d{2}|\d{4}/,Y:/\d{4}/,z:/Z|[+-]\d{2}(?::?\d{2})?/};k.m=k.I;k.S=k.M;var f;var b=function(t){f=t;k.a=k.A=d("days");k.b=k.B=d("months");c.each(function(v,u){if(v.format){c[u]=m(v.format)}})};var m=function(v){if(!f){return{format:v}}var t=[];var u=(v.source||v).replace(/%([a-z])/gi,function(z,y){return n(y)||z}).replace(/\((?!\?)/g,"(?:").replace(/ (?!\?|\*)/g,",? ").replace(/%([a-z%])/gi,function(z,y){var B=k[y];if(!B){return y}t.push(y);return"("+B.source+")"}).replace(/\[a-z\]/gi,"[a-z\\u00c0-\\uffff;&]");return{format:v,re:new RegExp("^"+u+"$","i"),handler:function(D){D=D.slice(1).associate(t);var y=new a().clearTime(),B=D.y||D.Y;if(B!=null){r.call(y,"y",B)}if("d" in D){r.call(y,"d",1)}if("m" in D||D.b||D.B){r.call(y,"m",1)}for(var z in D){r.call(y,z,D[z])}return y}}};var r=function(t,u){if(!u){return this}switch(t){case"a":case"A":return this.set("day",a.parseDay(u,true));case"b":case"B":return this.set("mo",a.parseMonth(u,true));case"d":return this.set("date",u);case"H":case"I":return this.set("hr",u);case"m":return this.set("mo",u-1);case"M":return this.set("min",u);case"p":return this.set("ampm",u.replace(/\./g,""));case"S":return this.set("sec",u);case"s":return this.set("ms",("0."+u)*1000);case"w":return this.set("day",u);case"Y":return this.set("year",u);case"y":u=+u;if(u<100){u+=j+(u<p?100:0)}return this.set("year",u);case"z":if(u=="Z"){u="+00"}var v=u.match(/([+-])(\d{2}):?(\d{2})?/);v=(v[1]+"1")*(v[2]*60+(+v[3]||0))+this.getTimezoneOffset();return this.set("time",this-v*60000)}return this};a.defineParsers("%Y([-./]%m([-./]%d((T| )%X)?)?)?","%Y%m%d(T%H(%M%S?)?)?","%x( %X)?","%d%o( %b( %Y)?)?( %X)?","%b( %d%o)?( %Y)?( %X)?","%Y %b( %d%o( %X)?)?","%o %b %d %X %z %Y","%T","%H:%M( ?%p)?");Locale.addEvent("change",function(t){if(Locale.get("Date")){b(t)}}).fireEvent("change",Locale.getCurrent())})();Date.implement({timeDiffInWords:function(a){return Date.distanceOfTimeInWords(this,a||new Date)},timeDiff:function(g,c){if(g==null){g=new Date}var i=((g-this)/1000).floor().abs();var f=[],a=[60,60,24,365,0],d=["s","m","h","d","y"],h,b;for(var j=0;j<a.length;j++){if(j&&!i){break}h=i;if((b=a[j])){h=(i%b);i=(i/b).floor()}f.unshift(h+(d[j]||""))}return f.join(c||":")}}).extend({distanceOfTimeInWords:function(b,a){return Date.getTimePhrase(((a-b)/1000).toInt())},getTimePhrase:function(g){var d=(g<0)?"Until":"Ago";if(g<0){g*=-1}var b={minute:60,hour:60,day:24,week:7,month:52/12,year:12,eon:Infinity};var f="lessThanMinute";for(var c in b){var a=b[c];if(g<1.5*a){if(g>0.75*a){f=c}break}g/=a;f=c+"s"}g=g.round();return Date.getMsg(f+d,g).substitute({delta:g})}}).defineParsers({re:/^(?:tod|tom|yes)/i,handler:function(a){var b=new Date().clearTime();switch(a[0]){case"tom":return b.increment();case"yes":return b.decrement();default:return b}}},{re:/^(next|last) ([a-z]+)$/i,handler:function(f){var g=new Date().clearTime();var b=g.getDay();var c=Date.parseDay(f[2],true);var a=c-b;if(c<=b){a+=7}if(f[1]=="last"){a-=7}return g.set("date",g.getDate()+a)}}).alias("timeAgoInWords","timeDiffInWords");Locale.define("en-US","Number",{decimal:".",group:",",currency:{prefix:"$ "}});Number.implement({format:function(r){var o=this;r=r?Object.clone(r):{};var a=function(i){if(r[i]!=null){return r[i]}return Locale.get("Number."+i)};var g=o<0,j=a("decimal"),l=a("precision"),p=a("group"),c=a("decimals");if(g){var f=a("negative")||{};if(f.prefix==null&&f.suffix==null){f.prefix="-"}["prefix","suffix"].each(function(i){if(f[i]){r[i]=a(i)+f[i]}});o=-o}var m=a("prefix"),q=a("suffix");if(c!==""&&c>=0&&c<=20){o=o.toFixed(c)}if(l>=1&&l<=21){o=(+o).toPrecision(l)}o+="";var n;if(a("scientific")===false&&o.indexOf("e")>-1){var k=o.split("e"),b=+k[1];o=k[0].replace(".","");if(b<0){b=-b-1;n=k[0].indexOf(".");if(n>-1){b-=n-1}while(b--){o="0"+o}o="0."+o}else{n=k[0].lastIndexOf(".");if(n>-1){b-=k[0].length-n-1}while(b--){o+="0"}}}if(j!="."){o=o.replace(".",j)}if(p){n=o.lastIndexOf(j);n=(n>-1)?n:o.length;var d=o.substring(n),h=n;while(h--){if((n-h-1)%3==0&&h!=(n-1)){d=p+d}d=o.charAt(h)+d}o=d}if(m){o=m+o}if(q){o+=q}return o},formatCurrency:function(b){var a=Locale.get("Number.currency")||{};if(a.scientific==null){a.scientific=false}a.decimals=b!=null?b:(a.decimals==null?2:a.decimals);return this.format(a)},formatPercentage:function(b){var a=Locale.get("Number.percentage")||{};if(a.suffix==null){a.suffix="%"}a.decimals=b!=null?b:(a.decimals==null?2:a.decimals);return this.format(a)}});(function(){var c={a:/[]/g,A:/[]/g,c:/[]/g,C:/[]/g,d:/[]/g,D:/[]/g,e:/[]/g,E:/[]/g,g:/[]/g,G:/[]/g,i:/[]/g,I:/[]/g,l:/[]/g,L:/[]/g,n:/[]/g,N:/[]/g,o:/[]/g,O:/[]/g,r:/[]/g,R:/[]/g,s:/[]/g,S:/[]/g,t:/[]/g,T:/[]/g,ue:/[]/g,UE:/[]/g,u:/[]/g,U:/[]/g,y:/[]/g,Y:/[]/g,z:/[]/g,Z:/[]/g,th:/[]/g,TH:/[]/g,dh:/[]/g,DH:/[]/g,ss:/[]/g,oe:/[]/g,OE:/[]/g,ae:/[]/g,AE:/[]/g},b={" ":/[\xa0\u2002\u2003\u2009]/g,"*":/[\xb7]/g,"'":/[\u2018\u2019]/g,'"':/[\u201c\u201d]/g,"...":/[\u2026]/g,"-":/[\u2013]/g,"&raquo;":/[\uFFFD]/g};var a=function(g,i){var f=g,h;for(h in i){f=f.replace(i[h],h)}return f};var d=function(f,h){f=f||"";var i=h?"<"+f+"(?!\\w)[^>]*>([\\s\\S]*?)</"+f+"(?!\\w)>":"</?"+f+"([^>]+)?>",g=new RegExp(i,"gi");return g};String.implement({standardize:function(){return a(this,c)},repeat:function(f){return new Array(f+1).join(this)},pad:function(f,i,h){if(this.length>=f){return this}var g=(i==null?" ":""+i).repeat(f-this.length).substr(0,f-this.length);if(!h||h=="right"){return this+g}if(h=="left"){return g+this}return g.substr(0,(g.length/2).floor())+this+g.substr(0,(g.length/2).ceil())},getTags:function(f,g){return this.match(d(f,g))||[]},stripTags:function(f,g){return this.replace(d(f,g),"")},tidy:function(){return a(this,b)},truncate:function(f,g,j){var i=this;if(g==null&&arguments.length==1){g=""}if(i.length>f){i=i.substring(0,f);if(j){var h=i.lastIndexOf(j);if(h!=-1){i=i.substr(0,h)}}if(g){i+=g}}return i}})})();String.implement({parseQueryString:function(d,a){if(d==null){d=true}if(a==null){a=true}var c=this.split(/[&;]/),b={};if(!c.length){return b}c.each(function(j){var f=j.indexOf("=")+1,h=f?j.substr(f):"",g=f?j.substr(0,f-1).match(/([^\]\[]+|(\B)(?=\]))/g):[j],i=b;if(!g){return}if(a){h=decodeURIComponent(h)}g.each(function(l,k){if(d){l=decodeURIComponent(l)}var m=i[l];if(k<g.length-1){i=i[l]=m||{}}else{if(typeOf(m)=="array"){m.push(h)}else{i[l]=m!=null?[m,h]:h}}})});return b},cleanQueryString:function(a){return this.split("&").filter(function(f){var b=f.indexOf("="),c=b<0?"":f.substr(0,b),d=f.substr(b+1);return a?a.call(null,c,d):(d||d===0)}).join("&")}});(function(){var b=function(){return this.get("value")};var a=this.URI=new Class({Implements:Options,options:{},regex:/^(?:(\w+):)?(?:\/\/(?:(?:([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)?(\.\.?$|(?:[^?#\/]*\/)*)([^?#]*)(?:\?([^#]*))?(?:#(.*))?/,parts:["scheme","user","password","host","port","directory","file","query","fragment"],schemes:{http:80,https:443,ftp:21,rtsp:554,mms:1755,file:0},initialize:function(d,c){this.setOptions(c);var f=this.options.base||a.base;if(!d){d=f}if(d&&d.parsed){this.parsed=Object.clone(d.parsed)}else{this.set("value",d.href||d.toString(),f?new a(f):false)}},parse:function(f,d){var c=f.match(this.regex);if(!c){return false}c.shift();return this.merge(c.associate(this.parts),d)},merge:function(d,c){if((!d||!d.scheme)&&(!c||!c.scheme)){return false}if(c){this.parts.every(function(f){if(d[f]){return false}d[f]=c[f]||"";return true})}d.port=d.port||this.schemes[d.scheme.toLowerCase()];d.directory=d.directory?this.parseDirectory(d.directory,c?c.directory:""):"/";return d},parseDirectory:function(d,f){d=(d.substr(0,1)=="/"?"":(f||"/"))+d;if(!d.test(a.regs.directoryDot)){return d}var c=[];d.replace(a.regs.endSlash,"").split("/").each(function(g){if(g==".."&&c.length>0){c.pop()}else{if(g!="."){c.push(g)}}});return c.join("/")+"/"},combine:function(c){return c.value||c.scheme+"://"+(c.user?c.user+(c.password?":"+c.password:"")+"@":"")+(c.host||"")+(c.port&&c.port!=this.schemes[c.scheme]?":"+c.port:"")+(c.directory||"/")+(c.file||"")+(c.query?"?"+c.query:"")+(c.fragment?"#"+c.fragment:"")},set:function(d,g,f){if(d=="value"){var c=g.match(a.regs.scheme);if(c){c=c[1]}if(c&&this.schemes[c.toLowerCase()]==null){this.parsed={scheme:c,value:g}}else{this.parsed=this.parse(g,(f||this).parsed)||(c?{scheme:c,value:g}:{value:g})}}else{if(d=="data"){this.setData(g)}else{this.parsed[d]=g}}return this},get:function(c,d){switch(c){case"value":return this.combine(this.parsed,d?d.parsed:false);case"data":return this.getData()}return this.parsed[c]||""},go:function(){document.location.href=this.toString()},toURI:function(){return this},getData:function(f,d){var c=this.get(d||"query");if(!(c||c===0)){return f?null:{}}var g=c.parseQueryString();return f?g[f]:g},setData:function(c,g,d){if(typeof c=="string"){var f=this.getData();f[arguments[0]]=arguments[1];c=f}else{if(g){c=Object.merge(this.getData(),c)}}return this.set(d||"query",Object.toQueryString(c))},clearData:function(c){return this.set(c||"query","")},toString:b,valueOf:b});a.regs={endSlash:/\/$/,scheme:/^(\w+):/,directoryDot:/\.\/|\.$/};a.base=new a(Array.from(document.getElements("base[href]",true)).getLast(),{base:document.location});String.implement({toURI:function(c){return new a(this,c)}})})();URI=Class.refactor(URI,{combine:function(g,f){if(!f||g.scheme!=f.scheme||g.host!=f.host||g.port!=f.port){return this.previous.apply(this,arguments)}var a=g.file+(g.query?"?"+g.query:"")+(g.fragment?"#"+g.fragment:"");if(!f.directory){return(g.directory||(g.file?"":"./"))+a}var d=f.directory.split("/"),c=g.directory.split("/"),h="",j;var b=0;for(j=0;j<d.length&&j<c.length&&d[j]==c[j];j++){}for(b=0;b<d.length-j-1;b++){h+="../"}for(b=j;b<c.length-1;b++){h+=c[b]+"/"}return(h||(g.file?"":"./"))+a},toAbsolute:function(a){a=new URI(a);if(a){a.set("directory","").set("file","")}return this.toRelative(a)},toRelative:function(a){return this.get("value",new URI(a))}});(function(){if(this.Hash){return}var a=this.Hash=new Type("Hash",function(b){if(typeOf(b)=="hash"){b=Object.clone(b.getClean())}for(var c in b){this[c]=b[c]}return this});this.$H=function(b){return new a(b)};a.implement({forEach:function(b,c){Object.forEach(this,b,c)},getClean:function(){var c={};for(var b in this){if(this.hasOwnProperty(b)){c[b]=this[b]}}return c},getLength:function(){var c=0;for(var b in this){if(this.hasOwnProperty(b)){c++}}return c}});a.alias("each","forEach");a.implement({has:Object.prototype.hasOwnProperty,keyOf:function(b){return Object.keyOf(this,b)},hasValue:function(b){return Object.contains(this,b)},extend:function(b){a.each(b||{},function(d,c){a.set(this,c,d)},this);return this},combine:function(b){a.each(b||{},function(d,c){a.include(this,c,d)},this);return this},erase:function(b){if(this.hasOwnProperty(b)){delete this[b]}return this},get:function(b){return(this.hasOwnProperty(b))?this[b]:null},set:function(b,c){if(!this[b]||this.hasOwnProperty(b)){this[b]=c}return this},empty:function(){a.each(this,function(c,b){delete this[b]},this);return this},include:function(b,c){if(this[b]==undefined){this[b]=c}return this},map:function(b,c){return new a(Object.map(this,b,c))},filter:function(b,c){return new a(Object.filter(this,b,c))},every:function(b,c){return Object.every(this,b,c)},some:function(b,c){return Object.some(this,b,c)},getKeys:function(){return Object.keys(this)},getValues:function(){return Object.values(this)},toQueryString:function(b){return Object.toQueryString(this,b)}});a.alias({indexOf:"keyOf",contains:"hasValue"})})();Hash.implement({getFromPath:function(a){return Object.getFromPath(this,a)},cleanValues:function(a){return new Hash(Object.cleanValues(this,a))},run:function(){Object.run(arguments)}});Element.implement({tidy:function(){this.set("value",this.get("value").tidy())},getTextInRange:function(b,a){return this.get("value").substring(b,a)},getSelectedText:function(){if(this.setSelectionRange){return this.getTextInRange(this.getSelectionStart(),this.getSelectionEnd())}return document.selection.createRange().text},getSelectedRange:function(){if(this.selectionStart!=null){return{start:this.selectionStart,end:this.selectionEnd}}var f={start:0,end:0};var a=this.getDocument().selection.createRange();if(!a||a.parentElement()!=this){return f}var c=a.duplicate();if(this.type=="text"){f.start=0-c.moveStart("character",-100000);f.end=f.start+a.text.length}else{var b=this.get("value");var d=b.length;c.moveToElementText(this);c.setEndPoint("StartToEnd",a);if(c.text.length){d-=b.match(/[\n\r]*$/)[0].length}f.end=d-c.text.length;c.setEndPoint("StartToStart",a);f.start=d-c.text.length}return f},getSelectionStart:function(){return this.getSelectedRange().start},getSelectionEnd:function(){return this.getSelectedRange().end},setCaretPosition:function(a){if(a=="end"){a=this.get("value").length}this.selectRange(a,a);return this},getCaretPosition:function(){return this.getSelectedRange().start},selectRange:function(f,a){if(this.setSelectionRange){this.focus();this.setSelectionRange(f,a)}else{var c=this.get("value");var d=c.substr(f,a-f).replace(/\r/g,"").length;f=c.substr(0,f).replace(/\r/g,"").length;var b=this.createTextRange();b.collapse(true);b.moveEnd("character",f+d);b.moveStart("character",f);b.select()}return this},insertAtCursor:function(b,a){var d=this.getSelectedRange();var c=this.get("value");this.set("value",c.substring(0,d.start)+b+c.substring(d.end,c.length));if(a!==false){this.selectRange(d.start,d.start+b.length)}else{this.setCaretPosition(d.start+b.length)}return this},insertAroundCursor:function(b,a){b=Object.append({before:"",defaultMiddle:"",after:""},b);var c=this.getSelectedText()||b.defaultMiddle;var h=this.getSelectedRange();var g=this.get("value");if(h.start==h.end){this.set("value",g.substring(0,h.start)+b.before+c+b.after+g.substring(h.end,g.length));this.selectRange(h.start+b.before.length,h.end+b.before.length+c.length)}else{var d=g.substring(h.start,h.end);this.set("value",g.substring(0,h.start)+b.before+d+b.after+g.substring(h.end,g.length));var f=h.start+b.before.length;if(a!==false){this.selectRange(f,f+d.length)}else{this.setCaretPosition(f+g.length)}}return this}});Elements.from=function(f,d){if(d||d==null){f=f.stripScripts()}var b,c=f.match(/^\s*<(t[dhr]|tbody|tfoot|thead)/i);if(c){b=new Element("table");var a=c[1].toLowerCase();if(["td","th","tr"].contains(a)){b=new Element("tbody").inject(b);if(a!="tr"){b=new Element("tr").inject(b)}}}return(b||new Element("div")).set("html",f).getChildren()};(function(){var d={relay:false},c=["once","throttle","pause"],b=c.length;while(b--){d[c[b]]=Events.lookupPseudo(c[b])}DOMEvent.definePseudo=function(f,g){d[f]=g;return this};var a=Element.prototype;[Element,Window,Document].invoke("implement",Events.Pseudos(d,a.addEvent,a.removeEvent))})();(function(){var a="$moo:keys-pressed",b="$moo:keys-keyup";DOMEvent.definePseudo("keys",function(d,f,c){var h=c[0],g=[],i=this.retrieve(a,[]);g.append(d.value.replace("++",function(){g.push("+");return""}).split("+"));i.include(h.key);if(g.every(function(k){return i.contains(k)})){f.apply(this,c)}this.store(a,i);if(!this.retrieve(b)){var j=function(k){(function(){i=this.retrieve(a,[]).erase(k.key);this.store(a,i)}).delay(0,this)};this.store(b,j).addEvent("keyup",j)}});DOMEvent.defineKeys({"16":"shift","17":"control","18":"alt","20":"capslock","33":"pageup","34":"pagedown","35":"end","36":"home","144":"numlock","145":"scrolllock","186":";","187":"=","188":",","190":".","191":"/","192":"`","219":"[","220":"\\","221":"]","222":"'","107":"+"}).defineKey(Browser.firefox?109:189,"-")})();(function(){var b=function(f,d){var g=[];Object.each(d,function(h){Object.each(h,function(i){f.each(function(j){g.push(j+"-"+i+(j=="border"?"-width":""))})})});return g};var c=function(g,f){var d=0;Object.each(f,function(i,h){if(h.test(g)){d=d+i.toInt()}});return d};var a=function(d){return !!(!d||d.offsetHeight||d.offsetWidth)};Element.implement({measure:function(i){if(a(this)){return i.call(this)}var h=this.getParent(),f=[];while(!a(h)&&h!=document.body){f.push(h.expose());h=h.getParent()}var g=this.expose(),d=i.call(this);g();f.each(function(j){j()});return d},expose:function(){if(this.getStyle("display")!="none"){return function(){}}var d=this.style.cssText;this.setStyles({display:"block",position:"absolute",visibility:"hidden"});return function(){this.style.cssText=d}.bind(this)},getDimensions:function(d){d=Object.merge({computeSize:false},d);var i={x:0,y:0};var h=function(k,j){return(j.computeSize)?k.getComputedSize(j):k.getSize()};var f=this.getParent("body");if(f&&this.getStyle("display")=="none"){i=this.measure(function(){return h(this,d)})}else{if(f){try{i=h(this,d)}catch(g){}}}return Object.append(i,(i.x||i.x===0)?{width:i.x,height:i.y}:{x:i.width,y:i.height})},getComputedSize:function(d){d=Object.merge({styles:["padding","border"],planes:{height:["top","bottom"],width:["left","right"]},mode:"both"},d);var h={},f={width:0,height:0},g;if(d.mode=="vertical"){delete f.width;delete d.planes.width}else{if(d.mode=="horizontal"){delete f.height;delete d.planes.height}}b(d.styles,d.planes).each(function(i){h[i]=this.getStyle(i).toInt()},this);Object.each(d.planes,function(j,i){var l=i.capitalize(),k=this.getStyle(i);if(k=="auto"&&!g){g=this.getDimensions()}k=h[i]=(k=="auto")?g[i]:k.toInt();f["total"+l]=k;j.each(function(n){var m=c(n,h);f["computed"+n.capitalize()]=m;f["total"+l]+=m})},this);return Object.append(f,h)}})})();(function(){var a=false,b=false;var c=function(){var d=new Element("div").setStyles({position:"fixed",top:0,right:0}).inject(document.body);a=(d.offsetTop===0);d.dispose();b=true};Element.implement({pin:function(i,g){if(!b){c()}if(this.getStyle("display")=="none"){return this}var k,l=window.getScroll(),m,f;if(i!==false){k=this.getPosition(a?document.body:this.getOffsetParent());if(!this.retrieve("pin:_pinned")){var h={top:k.y-l.y,left:k.x-l.x};if(a&&!g){this.setStyle("position","fixed").setStyles(h)}else{m=this.getOffsetParent();var j=this.getPosition(m),n=this.getStyles("left","top");if(m&&n.left=="auto"||n.top=="auto"){this.setPosition(j)}if(this.getStyle("position")=="static"){this.setStyle("position","absolute")}j={x:n.left.toInt()-l.x,y:n.top.toInt()-l.y};f=function(){if(!this.retrieve("pin:_pinned")){return}var o=window.getScroll();this.setStyles({left:j.x+o.x,top:j.y+o.y})}.bind(this);this.store("pin:_scrollFixer",f);window.addEvent("scroll",f)}this.store("pin:_pinned",true)}}else{if(!this.retrieve("pin:_pinned")){return this}m=this.getParent();var d=(m.getComputedStyle("position")!="static"?m:m.getOffsetParent());k=this.getPosition(d);this.store("pin:_pinned",false);f=this.retrieve("pin:_scrollFixer");if(!f){this.setStyles({position:"absolute",top:k.y+l.y,left:k.x+l.x})}else{this.store("pin:_scrollFixer",null);window.removeEvent("scroll",f)}this.removeClass("isPinned")}return this},unpin:function(){return this.pin(false)},togglePin:function(){return this.pin(!this.retrieve("pin:_pinned"))}})})();(function(b){var a=Element.Position={options:{relativeTo:document.body,position:{x:"center",y:"center"},offset:{x:0,y:0}},getOptions:function(d,c){c=Object.merge({},a.options,c);a.setPositionOption(c);a.setEdgeOption(c);a.setOffsetOption(d,c);a.setDimensionsOption(d,c);return c},setPositionOption:function(c){c.position=a.getCoordinateFromValue(c.position)},setEdgeOption:function(d){var c=a.getCoordinateFromValue(d.edge);d.edge=c?c:(d.position.x=="center"&&d.position.y=="center")?{x:"center",y:"center"}:{x:"left",y:"top"}},setOffsetOption:function(g,d){var c={x:0,y:0},h=g.measure(function(){return document.id(this.getOffsetParent())}),f=h.getScroll();if(!h||h==g.getDocument().body){return}c=h.measure(function(){var j=this.getPosition();if(this.getStyle("position")=="fixed"){var i=window.getScroll();j.x+=i.x;j.y+=i.y}return j});d.offset={parentPositioned:h!=document.id(d.relativeTo),x:d.offset.x-c.x+f.x,y:d.offset.y-c.y+f.y}},setDimensionsOption:function(d,c){c.dimensions=d.getDimensions({computeSize:true,styles:["padding","border","margin"]})},getPosition:function(f,d){var c={};d=a.getOptions(f,d);var g=document.id(d.relativeTo)||document.body;a.setPositionCoordinates(d,c,g);if(d.edge){a.toEdge(c,d)}var h=d.offset;c.left=((c.x>=0||h.parentPositioned||d.allowNegative)?c.x:0).toInt();c.top=((c.y>=0||h.parentPositioned||d.allowNegative)?c.y:0).toInt();a.toMinMax(c,d);if(d.relFixedPosition||g.getStyle("position")=="fixed"){a.toRelFixedPosition(g,c)}if(d.ignoreScroll){a.toIgnoreScroll(g,c)}if(d.ignoreMargins){a.toIgnoreMargins(c,d)}c.left=Math.ceil(c.left);c.top=Math.ceil(c.top);delete c.x;delete c.y;return c},setPositionCoordinates:function(l,h,d){var g=l.offset.y,i=l.offset.x,f=(d==document.body)?window.getScroll():d.getPosition(),k=f.y,c=f.x,j=window.getSize();switch(l.position.x){case"left":h.x=c+i;break;case"right":h.x=c+i+d.offsetWidth;break;default:h.x=c+((d==document.body?j.x:d.offsetWidth)/2)+i;break}switch(l.position.y){case"top":h.y=k+g;break;case"bottom":h.y=k+g+d.offsetHeight;break;default:h.y=k+((d==document.body?j.y:d.offsetHeight)/2)+g;break}},toMinMax:function(c,d){var g={left:"x",top:"y"},f;["minimum","maximum"].each(function(h){["left","top"].each(function(i){f=d[h]?d[h][g[i]]:null;if(f!=null&&((h=="minimum")?c[i]<f:c[i]>f)){c[i]=f}})})},toRelFixedPosition:function(f,c){var d=window.getScroll();c.top+=d.y;c.left+=d.x},toIgnoreScroll:function(f,d){var c=f.getScroll();d.top-=c.y;d.left-=c.x},toIgnoreMargins:function(c,d){c.left+=d.edge.x=="right"?d.dimensions["margin-right"]:(d.edge.x!="center"?-d.dimensions["margin-left"]:-d.dimensions["margin-left"]+((d.dimensions["margin-right"]+d.dimensions["margin-left"])/2));c.top+=d.edge.y=="bottom"?d.dimensions["margin-bottom"]:(d.edge.y!="center"?-d.dimensions["margin-top"]:-d.dimensions["margin-top"]+((d.dimensions["margin-bottom"]+d.dimensions["margin-top"])/2))},toEdge:function(c,d){var f={},h=d.dimensions,g=d.edge;switch(g.x){case"left":f.x=0;break;case"right":f.x=-h.x-h.computedRight-h.computedLeft;break;default:f.x=-(Math.round(h.totalWidth/2));break}switch(g.y){case"top":f.y=0;break;case"bottom":f.y=-h.y-h.computedTop-h.computedBottom;break;default:f.y=-(Math.round(h.totalHeight/2));break}c.x+=f.x;c.y+=f.y},getCoordinateFromValue:function(c){if(typeOf(c)!="string"){return c}c=c.toLowerCase();return{x:c.test("left")?"left":(c.test("right")?"right":"center"),y:c.test(/upper|top/)?"top":(c.test("bottom")?"bottom":"center")}}};Element.implement({position:function(d){if(d&&(d.x!=null||d.y!=null)){return(b?b.apply(this,arguments):this)}var c=this.setStyle("position","absolute").calculatePosition(d);return(d&&d.returnPos)?c:this.setStyles(c)},calculatePosition:function(c){return a.getPosition(this,c)}})})(Element.prototype.position);Element.implement({isDisplayed:function(){return this.getStyle("display")!="none"},isVisible:function(){var a=this.offsetWidth,b=this.offsetHeight;return(a==0&&b==0)?false:(a>0&&b>0)?true:this.style.display!="none"},toggle:function(){return this[this.isDisplayed()?"hide":"show"]()},hide:function(){var b;try{b=this.getStyle("display")}catch(a){}if(b=="none"){return this}return this.store("element:_originalDisplay",b||"").setStyle("display","none")},show:function(a){if(!a&&this.isDisplayed()){return this}a=a||this.retrieve("element:_originalDisplay")||"block";return this.setStyle("display",(a=="none")?"block":a)},swapClass:function(a,b){return this.removeClass(a).addClass(b)}});Document.implement({clearSelection:function(){if(window.getSelection){var a=window.getSelection();if(a&&a.removeAllRanges){a.removeAllRanges()}}else{if(document.selection&&document.selection.empty){try{document.selection.empty()}catch(b){}}}}});var IframeShim=new Class({Implements:[Options,Events,Class.Occlude],options:{className:"iframeShim",src:'javascript:false;document.write("");',display:false,zIndex:null,margin:0,offset:{x:0,y:0},browsers:(Browser.ie6||(Browser.firefox&&Browser.version<3&&Browser.Platform.mac))},property:"IframeShim",initialize:function(b,a){this.element=document.id(b);if(this.occlude()){return this.occluded}this.setOptions(a);this.makeShim();return this},makeShim:function(){if(this.options.browsers){var c=this.element.getStyle("zIndex").toInt();if(!c){c=1;var b=this.element.getStyle("position");if(b=="static"||!b){this.element.setStyle("position","relative")}this.element.setStyle("zIndex",c)}c=((this.options.zIndex!=null||this.options.zIndex===0)&&c>this.options.zIndex)?this.options.zIndex:c-1;if(c<0){c=1}this.shim=new Element("iframe",{src:this.options.src,scrolling:"no",frameborder:0,styles:{zIndex:c,position:"absolute",border:"none",filter:"progid:DXImageTransform.Microsoft.Alpha(style=0,opacity=0)"},"class":this.options.className}).store("IframeShim",this);var a=(function(){this.shim.inject(this.element,"after");this[this.options.display?"show":"hide"]();this.fireEvent("inject")}).bind(this);if(!IframeShim.ready){window.addEvent("load",a)}else{a()}}else{this.position=this.hide=this.show=this.dispose=Function.from(this)}},position:function(){if(!IframeShim.ready||!this.shim){return this}var a=this.element.measure(function(){return this.getSize()});if(this.options.margin!=undefined){a.x=a.x-(this.options.margin*2);a.y=a.y-(this.options.margin*2);this.options.offset.x+=this.options.margin;this.options.offset.y+=this.options.margin}this.shim.set({width:a.x,height:a.y}).position({relativeTo:this.element,offset:this.options.offset});return this},hide:function(){if(this.shim){this.shim.setStyle("display","none")}return this},show:function(){if(this.shim){this.shim.setStyle("display","block")}return this.position()},dispose:function(){if(this.shim){this.shim.dispose()}return this},destroy:function(){if(this.shim){this.shim.destroy()}return this}});window.addEvent("load",function(){IframeShim.ready=true});var Mask=new Class({Implements:[Options,Events],Binds:["position"],options:{style:{},"class":"mask",maskMargins:false,useIframeShim:true,iframeShimOptions:{}},initialize:function(b,a){this.target=document.id(b)||document.id(document.body);this.target.store("mask",this);this.setOptions(a);this.render();this.inject()},render:function(){this.element=new Element("div",{"class":this.options["class"],id:this.options.id||"mask-"+String.uniqueID(),styles:Object.merge({},this.options.style,{display:"none"}),events:{click:function(a){this.fireEvent("click",a);if(this.options.hideOnClick){this.hide()}}.bind(this)}});this.hidden=true},toElement:function(){return this.element},inject:function(b,a){a=a||(this.options.inject?this.options.inject.where:"")||this.target==document.body?"inside":"after";b=b||(this.options.inject&&this.options.inject.target)||this.target;this.element.inject(b,a);if(this.options.useIframeShim){this.shim=new IframeShim(this.element,this.options.iframeShimOptions);this.addEvents({show:this.shim.show.bind(this.shim),hide:this.shim.hide.bind(this.shim),destroy:this.shim.destroy.bind(this.shim)})}},position:function(){this.resize(this.options.width,this.options.height);this.element.position({relativeTo:this.target,position:"topLeft",ignoreMargins:!this.options.maskMargins,ignoreScroll:this.target==document.body});return this},resize:function(a,f){var b={styles:["padding","border"]};if(this.options.maskMargins){b.styles.push("margin")}var d=this.target.getComputedSize(b);if(this.target==document.body){this.element.setStyles({width:0,height:0});var c=window.getScrollSize();if(d.totalHeight<c.y){d.totalHeight=c.y}if(d.totalWidth<c.x){d.totalWidth=c.x}}this.element.setStyles({width:Array.pick([a,d.totalWidth,d.x]),height:Array.pick([f,d.totalHeight,d.y])});return this},show:function(){if(!this.hidden){return this}window.addEvent("resize",this.position);this.position();this.showMask.apply(this,arguments);return this},showMask:function(){this.element.setStyle("display","block");this.hidden=false;this.fireEvent("show")},hide:function(){if(this.hidden){return this}window.removeEvent("resize",this.position);this.hideMask.apply(this,arguments);if(this.options.destroyOnHide){return this.destroy()}return this},hideMask:function(){this.element.setStyle("display","none");this.hidden=true;this.fireEvent("hide")},toggle:function(){this[this.hidden?"show":"hide"]()},destroy:function(){this.hide();this.element.destroy();this.fireEvent("destroy");this.target.eliminate("mask")}});Element.Properties.mask={set:function(b){var a=this.retrieve("mask");if(a){a.destroy()}return this.eliminate("mask").store("mask:options",b)},get:function(){var a=this.retrieve("mask");if(!a){a=new Mask(this,this.retrieve("mask:options"));this.store("mask",a)}return a}};Element.implement({mask:function(a){if(a){this.set("mask",a)}this.get("mask").show();return this},unmask:function(){this.get("mask").hide();return this}});var Spinner=new Class({Extends:Mask,Implements:Chain,options:{"class":"spinner",containerPosition:{},content:{"class":"spinner-content"},messageContainer:{"class":"spinner-msg"},img:{"class":"spinner-img"},fxOptions:{link:"chain"}},initialize:function(c,a){this.target=document.id(c)||document.id(document.body);this.target.store("spinner",this);this.setOptions(a);this.render();this.inject();var b=function(){this.active=false}.bind(this);this.addEvents({hide:b,show:b})},render:function(){this.parent();this.element.set("id",this.options.id||"spinner-"+String.uniqueID());this.content=document.id(this.options.content)||new Element("div",this.options.content);this.content.inject(this.element);if(this.options.message){this.msg=document.id(this.options.message)||new Element("p",this.options.messageContainer).appendText(this.options.message);this.msg.inject(this.content)}if(this.options.img){this.img=document.id(this.options.img)||new Element("div",this.options.img);this.img.inject(this.content)}this.element.set("tween",this.options.fxOptions)},show:function(a){if(this.active){return this.chain(this.show.bind(this))}if(!this.hidden){this.callChain.delay(20,this);return this}this.active=true;return this.parent(a)},showMask:function(a){var b=function(){this.content.position(Object.merge({relativeTo:this.element},this.options.containerPosition))}.bind(this);if(a){this.parent();b()}else{if(!this.options.style.opacity){this.options.style.opacity=this.element.getStyle("opacity").toFloat()}this.element.setStyles({display:"block",opacity:0}).tween("opacity",this.options.style.opacity);b();this.hidden=false;this.fireEvent("show");this.callChain()}},hide:function(a){if(this.active){return this.chain(this.hide.bind(this))}if(this.hidden){this.callChain.delay(20,this);return this}this.active=true;return this.parent(a)},hideMask:function(a){if(a){return this.parent()}this.element.tween("opacity",0).get("tween").chain(function(){this.element.setStyle("display","none");this.hidden=true;this.fireEvent("hide");this.callChain()}.bind(this))},destroy:function(){this.content.destroy();this.parent();this.target.eliminate("spinner")}});Request=Class.refactor(Request,{options:{useSpinner:false,spinnerOptions:{},spinnerTarget:false},initialize:function(a){this._send=this.send;this.send=function(b){var c=this.getSpinner();if(c){c.chain(this._send.pass(b,this)).show()}else{this._send(b)}return this};this.previous(a)},getSpinner:function(){if(!this.spinner){var b=document.id(this.options.spinnerTarget)||document.id(this.options.update);if(this.options.useSpinner&&b){b.set("spinner",this.options.spinnerOptions);var a=this.spinner=b.get("spinner");["complete","exception","cancel"].each(function(c){this.addEvent(c,a.hide.bind(a))},this)}}return this.spinner}});Element.Properties.spinner={set:function(a){var b=this.retrieve("spinner");if(b){b.destroy()}return this.eliminate("spinner").store("spinner:options",a)},get:function(){var a=this.retrieve("spinner");if(!a){a=new Spinner(this,this.retrieve("spinner:options"));this.store("spinner",a)}return a}};Element.implement({spin:function(a){if(a){this.set("spinner",a)}this.get("spinner").show();return this},unspin:function(){this.get("spinner").hide();return this}});if(!window.Form){window.Form={}}(function(){Form.Request=new Class({Binds:["onSubmit","onFormValidate"],Implements:[Options,Events,Class.Occlude],options:{requestOptions:{evalScripts:true,useSpinner:true,emulation:false,link:"ignore"},sendButtonClicked:true,extraData:{},resetForm:true},property:"form.request",initialize:function(b,c,a){this.element=document.id(b);if(this.occlude()){return this.occluded}this.setOptions(a).setTarget(c).attach()},setTarget:function(a){this.target=document.id(a);if(!this.request){this.makeRequest()}else{this.request.setOptions({update:this.target})}return this},toElement:function(){return this.element},makeRequest:function(){var a=this;this.request=new Request.HTML(Object.merge({update:this.target,emulation:false,spinnerTarget:this.element,method:this.element.get("method")||"post"},this.options.requestOptions)).addEvents({success:function(c,f,d,b){["complete","success"].each(function(g){a.fireEvent(g,[a.target,c,f,d,b])})},failure:function(){a.fireEvent("complete",arguments).fireEvent("failure",arguments)},exception:function(){a.fireEvent("failure",arguments)}});return this.attachReset()},attachReset:function(){if(!this.options.resetForm){return this}this.request.addEvent("success",function(){Function.attempt(function(){this.element.reset()}.bind(this));if(window.OverText){OverText.update()}}.bind(this));return this},attach:function(a){var c=(a!=false)?"addEvent":"removeEvent";this.element[c]("click:relay(button, input[type=submit])",this.saveClickedButton.bind(this));var b=this.element.retrieve("validator");if(b){b[c]("onFormValidate",this.onFormValidate)}else{this.element[c]("submit",this.onSubmit)}return this},detach:function(){return this.attach(false)},enable:function(){return this.attach()},disable:function(){return this.detach()},onFormValidate:function(c,b,a){if(!a){return}var d=this.element.retrieve("validator");if(c||(d&&!d.options.stopOnFailure)){a.stop();this.send()}},onSubmit:function(a){var b=this.element.retrieve("validator");if(b){this.element.removeEvent("submit",this.onSubmit);b.addEvent("onFormValidate",this.onFormValidate);this.element.validate();return}if(a){a.stop()}this.send()},saveClickedButton:function(b,c){var a=c.get("name");if(!a||!this.options.sendButtonClicked){return}this.options.extraData[a]=c.get("value")||true;this.clickedCleaner=function(){delete this.options.extraData[a];this.clickedCleaner=function(){}}.bind(this)},clickedCleaner:function(){},send:function(){var b=this.element.toQueryString().trim(),a=Object.toQueryString(this.options.extraData);if(b){b+="&"+a}else{b=a}this.fireEvent("send",[this.element,b.parseQueryString()]);this.request.send({data:b,url:this.options.requestOptions.url||this.element.get("action")});this.clickedCleaner();return this}});Element.implement("formUpdate",function(c,b){var a=this.retrieve("form.request");if(!a){a=new Form.Request(this,c,b)}else{if(c){a.setTarget(c)}if(b){a.setOptions(b).makeRequest()}}a.send();return this})})();(function(){var a=function(d){var b=d.options.hideInputs;if(window.OverText){var c=[null];OverText.each(function(f){c.include("."+f.options.labelClass)});if(c){b+=c.join(", ")}}return(b)?d.element.getElements(b):null};Fx.Reveal=new Class({Extends:Fx.Morph,options:{link:"cancel",styles:["padding","border","margin"],transitionOpacity:!Browser.ie6,mode:"vertical",display:function(){return this.element.get("tag")!="tr"?"block":"table-row"},opacity:1,hideInputs:Browser.ie?"select, input, textarea, object, embed":null},dissolve:function(){if(!this.hiding&&!this.showing){if(this.element.getStyle("display")!="none"){this.hiding=true;this.showing=false;this.hidden=true;this.cssText=this.element.style.cssText;var d=this.element.getComputedSize({styles:this.options.styles,mode:this.options.mode});if(this.options.transitionOpacity){d.opacity=this.options.opacity}var c={};Object.each(d,function(g,f){c[f]=[g,0]});this.element.setStyles({display:Function.from(this.options.display).call(this),overflow:"hidden"});var b=a(this);if(b){b.setStyle("visibility","hidden")}this.$chain.unshift(function(){if(this.hidden){this.hiding=false;this.element.style.cssText=this.cssText;this.element.setStyle("display","none");if(b){b.setStyle("visibility","visible")}}this.fireEvent("hide",this.element);this.callChain()}.bind(this));this.start(c)}else{this.callChain.delay(10,this);this.fireEvent("complete",this.element);this.fireEvent("hide",this.element)}}else{if(this.options.link=="chain"){this.chain(this.dissolve.bind(this))}else{if(this.options.link=="cancel"&&!this.hiding){this.cancel();this.dissolve()}}}return this},reveal:function(){if(!this.showing&&!this.hiding){if(this.element.getStyle("display")=="none"){this.hiding=false;this.showing=true;this.hidden=false;this.cssText=this.element.style.cssText;var d;this.element.measure(function(){d=this.element.getComputedSize({styles:this.options.styles,mode:this.options.mode})}.bind(this));if(this.options.heightOverride!=null){d.height=this.options.heightOverride.toInt()}if(this.options.widthOverride!=null){d.width=this.options.widthOverride.toInt()}if(this.options.transitionOpacity){this.element.setStyle("opacity",0);d.opacity=this.options.opacity}var c={height:0,display:Function.from(this.options.display).call(this)};Object.each(d,function(g,f){c[f]=0});c.overflow="hidden";this.element.setStyles(c);var b=a(this);if(b){b.setStyle("visibility","hidden")}this.$chain.unshift(function(){this.element.style.cssText=this.cssText;this.element.setStyle("display",Function.from(this.options.display).call(this));if(!this.hidden){this.showing=false}if(b){b.setStyle("visibility","visible")}this.callChain();this.fireEvent("show",this.element)}.bind(this));this.start(d)}else{this.callChain();this.fireEvent("complete",this.element);this.fireEvent("show",this.element)}}else{if(this.options.link=="chain"){this.chain(this.reveal.bind(this))}else{if(this.options.link=="cancel"&&!this.showing){this.cancel();this.reveal()}}}return this},toggle:function(){if(this.element.getStyle("display")=="none"){this.reveal()}else{this.dissolve()}return this},cancel:function(){this.parent.apply(this,arguments);if(this.cssText!=null){this.element.style.cssText=this.cssText}this.hiding=false;this.showing=false;return this}});Element.Properties.reveal={set:function(b){this.get("reveal").cancel().setOptions(b);return this},get:function(){var b=this.retrieve("reveal");if(!b){b=new Fx.Reveal(this);this.store("reveal",b)}return b}};Element.Properties.dissolve=Element.Properties.reveal;Element.implement({reveal:function(b){this.get("reveal").setOptions(b).reveal();return this},dissolve:function(b){this.get("reveal").setOptions(b).dissolve();return this},nix:function(b){var c=Array.link(arguments,{destroy:Type.isBoolean,options:Type.isObject});this.get("reveal").setOptions(b).dissolve().chain(function(){this[c.destroy?"destroy":"dispose"]()}.bind(this));return this},wink:function(){var c=Array.link(arguments,{duration:Type.isNumber,options:Type.isObject});var b=this.get("reveal").setOptions(c.options);b.reveal().chain(function(){(function(){b.dissolve()}).delay(c.duration||2000)})}})})();Form.Request.Append=new Class({Extends:Form.Request,options:{useReveal:true,revealOptions:{},inject:"bottom"},makeRequest:function(){this.request=new Request.HTML(Object.merge({url:this.element.get("action"),method:this.element.get("method")||"post",spinnerTarget:this.element},this.options.requestOptions,{evalScripts:false})).addEvents({success:function(b,h,g,a){var c;var d=Elements.from(g);if(d.length==1){c=d[0]}else{c=new Element("div",{styles:{display:"none"}}).adopt(d)}c.inject(this.target,this.options.inject);if(this.options.requestOptions.evalScripts){Browser.exec(a)}this.fireEvent("beforeEffect",c);var f=function(){this.fireEvent("success",[c,this.target,b,h,g,a])}.bind(this);if(this.options.useReveal){c.set("reveal",this.options.revealOptions).get("reveal").chain(f);c.reveal()}else{f()}}.bind(this),failure:function(a){this.fireEvent("failure",a)}.bind(this)});this.attachReset()}});Locale.define("en-US","FormValidator",{required:"This field is required.",length:"Please enter {length} characters (you entered {elLength} characters)",minLength:"Please enter at least {minLength} characters (you entered {length} characters).",maxLength:"Please enter no more than {maxLength} characters (you entered {length} characters).",integer:"Please enter an integer in this field. Numbers with decimals (e.g. 1.25) are not permitted.",numeric:'Please enter only numeric values in this field (i.e. "1" or "1.1" or "-1" or "-1.1").',digits:"Please use numbers and punctuation only in this field (for example, a phone number with dashes or dots is permitted).",alpha:"Please use only letters (a-z) within this field. No spaces or other characters are allowed.",alphanum:"Please use only letters (a-z) or numbers (0-9) in this field. No spaces or other characters are allowed.",dateSuchAs:"Please enter a valid date such as {date}",dateInFormatMDY:'Please enter a valid date such as MM/DD/YYYY (i.e. "12/31/1999")',email:'Please enter a valid email address. For example "fred@domain.com".',url:"Please enter a valid URL such as http://www.example.com.",currencyDollar:"Please enter a valid $ amount. For example $100.00 .",oneRequired:"Please enter something for at least one of these inputs.",errorPrefix:"Error: ",warningPrefix:"Warning: ",noSpace:"There can be no spaces in this input.",reqChkByNode:"No items are selected.",requiredChk:"This field is required.",reqChkByName:"Please select a {label}.",match:"This field needs to match the {matchName} field",startDate:"the start date",endDate:"the end date",currendDate:"the current date",afterDate:"The date should be the same or after {label}.",beforeDate:"The date should be the same or before {label}.",startMonth:"Please select a start month",sameMonth:"These two dates must be in the same month - you must change one or the other.",creditcard:"The credit card number entered is invalid. Please check the number and try again. {length} digits entered."});if(!window.Form){window.Form={}}var InputValidator=this.InputValidator=new Class({Implements:[Options],options:{errorMsg:"Validation failed.",test:Function.from(true)},initialize:function(b,a){this.setOptions(a);this.className=b},test:function(b,a){b=document.id(b);return(b)?this.options.test(b,a||this.getProps(b)):false},getError:function(c,a){c=document.id(c);var b=this.options.errorMsg;if(typeOf(b)=="function"){b=b(c,a||this.getProps(c))}return b},getProps:function(a){a=document.id(a);return(a)?a.get("validatorProps"):{}}});Element.Properties.validators={get:function(){return(this.get("data-validators")||this.className).clean().split(" ")}};Element.Properties.validatorProps={set:function(a){return this.eliminate("$moo:validatorProps").store("$moo:validatorProps",a)},get:function(a){if(a){this.set(a)}if(this.retrieve("$moo:validatorProps")){return this.retrieve("$moo:validatorProps")}if(this.getProperty("data-validator-properties")||this.getProperty("validatorProps")){try{this.store("$moo:validatorProps",JSON.decode(this.getProperty("validatorProps")||this.getProperty("data-validator-properties")))}catch(c){return{}}}else{var b=this.get("validators").filter(function(d){return d.test(":")});if(!b.length){this.store("$moo:validatorProps",{})}else{a={};b.each(function(d){var f=d.split(":");if(f[1]){try{a[f[0]]=JSON.decode(f[1])}catch(g){}}});this.store("$moo:validatorProps",a)}}return this.retrieve("$moo:validatorProps")}};Form.Validator=new Class({Implements:[Options,Events],Binds:["onSubmit"],options:{fieldSelectors:"input, select, textarea",ignoreHidden:true,ignoreDisabled:true,useTitles:false,evaluateOnSubmit:true,evaluateFieldsOnBlur:true,evaluateFieldsOnChange:true,serial:true,stopOnFailure:true,warningPrefix:function(){return Form.Validator.getMsg("warningPrefix")||"Warning: "},errorPrefix:function(){return Form.Validator.getMsg("errorPrefix")||"Error: "}},initialize:function(b,a){this.setOptions(a);this.element=document.id(b);this.element.store("validator",this);this.warningPrefix=Function.from(this.options.warningPrefix)();this.errorPrefix=Function.from(this.options.errorPrefix)();if(this.options.evaluateOnSubmit){this.element.addEvent("submit",this.onSubmit)}if(this.options.evaluateFieldsOnBlur||this.options.evaluateFieldsOnChange){this.watchFields(this.getFields())}},toElement:function(){return this.element},getFields:function(){return(this.fields=this.element.getElements(this.options.fieldSelectors))},watchFields:function(a){a.each(function(b){if(this.options.evaluateFieldsOnBlur){b.addEvent("blur",this.validationMonitor.pass([b,false],this))}if(this.options.evaluateFieldsOnChange){b.addEvent("change",this.validationMonitor.pass([b,true],this))}},this)},validationMonitor:function(){clearTimeout(this.timer);this.timer=this.validateField.delay(50,this,arguments)},onSubmit:function(a){if(this.validate(a)){this.reset()}},reset:function(){this.getFields().each(this.resetField,this);return this},validate:function(b){var a=this.getFields().map(function(c){return this.validateField(c,true)},this).every(function(c){return c});this.fireEvent("formValidate",[a,this.element,b]);if(this.options.stopOnFailure&&!a&&b){b.preventDefault()}return a},validateField:function(k,b){if(this.paused){return true}k=document.id(k);var g=!k.hasClass("validation-failed");var h,j;if(this.options.serial&&!b){h=this.element.getElement(".validation-failed");j=this.element.getElement(".warning")}if(k&&(!h||b||k.hasClass("validation-failed")||(h&&!this.options.serial))){var a=k.get("validators");var d=a.some(function(l){return this.getValidator(l)},this);var i=[];a.each(function(l){if(l&&!this.test(l,k)){i.include(l)}},this);g=i.length===0;if(d&&!this.hasValidator(k,"warnOnly")){if(g){k.addClass("validation-passed").removeClass("validation-failed");this.fireEvent("elementPass",[k])}else{k.addClass("validation-failed").removeClass("validation-passed");this.fireEvent("elementFail",[k,i])}}if(!j){var f=a.some(function(l){if(l.test("^warn")){return this.getValidator(l.replace(/^warn-/,""))}else{return null}},this);k.removeClass("warning");var c=a.map(function(l){if(l.test("^warn")){return this.test(l.replace(/^warn-/,""),k,true)}else{return null}},this)}}return g},test:function(b,d,f){d=document.id(d);if((this.options.ignoreHidden&&!d.isVisible())||(this.options.ignoreDisabled&&d.get("disabled"))){return true}var a=this.getValidator(b);if(f!=null){f=false}if(this.hasValidator(d,"warnOnly")){f=true}var c=this.hasValidator(d,"ignoreValidation")||(a?a.test(d):true);if(a&&d.isVisible()){this.fireEvent("elementValidate",[c,d,b,f])}if(f){return true}return c},hasValidator:function(b,a){return b.get("validators").contains(a)},resetField:function(a){a=document.id(a);if(a){a.get("validators").each(function(b){if(b.test("^warn-")){b=b.replace(/^warn-/,"")}a.removeClass("validation-failed");a.removeClass("warning");a.removeClass("validation-passed")},this)}return this},stop:function(){this.paused=true;return this},start:function(){this.paused=false;return this},ignoreField:function(a,b){a=document.id(a);if(a){this.enforceField(a);if(b){a.addClass("warnOnly")}else{a.addClass("ignoreValidation")}}return this},enforceField:function(a){a=document.id(a);if(a){a.removeClass("warnOnly").removeClass("ignoreValidation")}return this}});Form.Validator.getMsg=function(a){return Locale.get("FormValidator."+a)};Form.Validator.adders={validators:{},add:function(b,a){this.validators[b]=new InputValidator(b,a);if(!this.initialize){this.implement({validators:this.validators})}},addAllThese:function(a){Array.from(a).each(function(b){this.add(b[0],b[1])},this)},getValidator:function(a){return this.validators[a.split(":")[0]]}};Object.append(Form.Validator,Form.Validator.adders);Form.Validator.implement(Form.Validator.adders);Form.Validator.add("IsEmpty",{errorMsg:false,test:function(a){if(a.type=="select-one"||a.type=="select"){return !(a.selectedIndex>=0&&a.options[a.selectedIndex].value!="")}else{return((a.get("value")==null)||(a.get("value").length==0))}}});Form.Validator.addAllThese([["required",{errorMsg:function(){return Form.Validator.getMsg("required")},test:function(a){return !Form.Validator.getValidator("IsEmpty").test(a)}}],["length",{errorMsg:function(a,b){if(typeOf(b.length)!="null"){return Form.Validator.getMsg("length").substitute({length:b.length,elLength:a.get("value").length})}else{return""}},test:function(a,b){if(typeOf(b.length)!="null"){return(a.get("value").length==b.length||a.get("value").length==0)}else{return true}}}],["minLength",{errorMsg:function(a,b){if(typeOf(b.minLength)!="null"){return Form.Validator.getMsg("minLength").substitute({minLength:b.minLength,length:a.get("value").length})}else{return""}},test:function(a,b){if(typeOf(b.minLength)!="null"){return(a.get("value").length>=(b.minLength||0))}else{return true}}}],["maxLength",{errorMsg:function(a,b){if(typeOf(b.maxLength)!="null"){return Form.Validator.getMsg("maxLength").substitute({maxLength:b.maxLength,length:a.get("value").length})}else{return""}},test:function(a,b){return a.get("value").length<=(b.maxLength||10000)}}],["validate-integer",{errorMsg:Form.Validator.getMsg.pass("integer"),test:function(a){return Form.Validator.getValidator("IsEmpty").test(a)||(/^(-?[1-9]\d*|0)$/).test(a.get("value"))}}],["validate-numeric",{errorMsg:Form.Validator.getMsg.pass("numeric"),test:function(a){return Form.Validator.getValidator("IsEmpty").test(a)||(/^-?(?:0$0(?=\d*\.)|[1-9]|0)\d*(\.\d+)?$/).test(a.get("value"))}}],["validate-digits",{errorMsg:Form.Validator.getMsg.pass("digits"),test:function(a){return Form.Validator.getValidator("IsEmpty").test(a)||(/^[\d() .:\-\+#]+$/.test(a.get("value")))}}],["validate-alpha",{errorMsg:Form.Validator.getMsg.pass("alpha"),test:function(a){return Form.Validator.getValidator("IsEmpty").test(a)||(/^[a-zA-Z]+$/).test(a.get("value"))}}],["validate-alphanum",{errorMsg:Form.Validator.getMsg.pass("alphanum"),test:function(a){return Form.Validator.getValidator("IsEmpty").test(a)||!(/\W/).test(a.get("value"))}}],["validate-date",{errorMsg:function(a,b){if(Date.parse){var c=b.dateFormat||"%x";return Form.Validator.getMsg("dateSuchAs").substitute({date:new Date().format(c)})}else{return Form.Validator.getMsg("dateInFormatMDY")}},test:function(f,h){if(Form.Validator.getValidator("IsEmpty").test(f)){return true}var a=Locale.getCurrent().sets.Date,b=new RegExp([a.days,a.days_abbr,a.months,a.months_abbr].flatten().join("|"),"i"),j=f.get("value"),g=j.match(/[a-z]+/gi);if(g&&!g.every(b.exec,b)){return false}var c=Date.parse(j),i=h.dateFormat||"%x",d=c.format(i);if(d!="invalid date"){f.set("value",d)}return c.isValid()}}],["validate-email",{errorMsg:Form.Validator.getMsg.pass("email"),test:function(a){return Form.Validator.getValidator("IsEmpty").test(a)||(/^(?:[a-z0-9!#$%&'*+\/=?^_`{|}~-]\.?){0,63}[a-z0-9!#$%&'*+\/=?^_`{|}~-]@(?:(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)*[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\])$/i).test(a.get("value"))}}],["validate-url",{errorMsg:Form.Validator.getMsg.pass("url"),test:function(a){return Form.Validator.getValidator("IsEmpty").test(a)||(/^(https?|ftp|rmtp|mms):\/\/(([A-Z0-9][A-Z0-9_-]*)(\.[A-Z0-9][A-Z0-9_-]*)+)(:(\d+))?\/?/i).test(a.get("value"))}}],["validate-currency-dollar",{errorMsg:Form.Validator.getMsg.pass("currencyDollar"),test:function(a){return Form.Validator.getValidator("IsEmpty").test(a)||(/^\$?\-?([1-9]{1}[0-9]{0,2}(\,[0-9]{3})*(\.[0-9]{0,2})?|[1-9]{1}\d*(\.[0-9]{0,2})?|0(\.[0-9]{0,2})?|(\.[0-9]{1,2})?)$/).test(a.get("value"))}}],["validate-one-required",{errorMsg:Form.Validator.getMsg.pass("oneRequired"),test:function(a,b){var c=document.id(b["validate-one-required"])||a.getParent(b["validate-one-required"]);return c.getElements("input").some(function(d){if(["checkbox","radio"].contains(d.get("type"))){return d.get("checked")}return d.get("value")})}}]]);Element.Properties.validator={set:function(a){this.get("validator").setOptions(a)},get:function(){var a=this.retrieve("validator");if(!a){a=new Form.Validator(this);this.store("validator",a)}return a}};Element.implement({validate:function(a){if(a){this.set("validator",a)}return this.get("validator").validate()}});Form.Validator.Inline=new Class({Extends:Form.Validator,options:{showError:function(a){if(a.reveal){a.reveal()}else{a.setStyle("display","block")}},hideError:function(a){if(a.dissolve){a.dissolve()}else{a.setStyle("display","none")}},scrollToErrorsOnSubmit:true,scrollToErrorsOnBlur:false,scrollToErrorsOnChange:false,scrollFxOptions:{transition:"quad:out",offset:{y:-20}}},initialize:function(b,a){this.parent(b,a);this.addEvent("onElementValidate",function(h,g,f,i){var d=this.getValidator(f);if(!h&&d.getError(g)){if(i){g.addClass("warning")}var c=this.makeAdvice(f,g,d.getError(g),i);this.insertAdvice(c,g);this.showAdvice(f,g)}else{this.hideAdvice(f,g)}})},makeAdvice:function(d,g,c,h){var f=(h)?this.warningPrefix:this.errorPrefix;f+=(this.options.useTitles)?g.title||c:c;var a=(h)?"warning-advice":"validation-advice";var b=this.getAdvice(d,g);if(b){b=b.set("html",f)}else{b=new Element("div",{html:f,styles:{display:"none"},id:"advice-"+d.split(":")[0]+"-"+this.getFieldId(g)}).addClass(a)}g.store("$moo:advice-"+d,b);return b},getFieldId:function(a){return a.id?a.id:a.id="input_"+a.name},showAdvice:function(b,c){var a=this.getAdvice(b,c);if(a&&!c.retrieve("$moo:"+this.getPropName(b))&&(a.getStyle("display")=="none"||a.getStyle("visiblity")=="hidden"||a.getStyle("opacity")==0)){c.store("$moo:"+this.getPropName(b),true);this.options.showError(a);this.fireEvent("showAdvice",[c,a,b])}},hideAdvice:function(b,c){var a=this.getAdvice(b,c);if(a&&c.retrieve("$moo:"+this.getPropName(b))){c.store("$moo:"+this.getPropName(b),false);this.options.hideError(a);this.fireEvent("hideAdvice",[c,a,b])}},getPropName:function(a){return"advice"+a},resetField:function(a){a=document.id(a);if(!a){return this}this.parent(a);a.get("validators").each(function(b){this.hideAdvice(b,a)},this);return this},getAllAdviceMessages:function(d,c){var b=[];if(d.hasClass("ignoreValidation")&&!c){return b}var a=d.get("validators").some(function(h){var f=h.test("^warn-")||d.hasClass("warnOnly");if(f){h=h.replace(/^warn-/,"")}var g=this.getValidator(h);if(!g){return}b.push({message:g.getError(d),warnOnly:f,passed:g.test(),validator:g})},this);return b},getAdvice:function(a,b){return b.retrieve("$moo:advice-"+a)},insertAdvice:function(a,c){var b=c.get("validatorProps");if(!b.msgPos||!document.id(b.msgPos)){if(c.type&&c.type.toLowerCase()=="radio"){c.getParent().adopt(a)}else{a.inject(document.id(c),"after")}}else{document.id(b.msgPos).grab(a)}},validateField:function(h,g,b){var a=this.parent(h,g);if(((this.options.scrollToErrorsOnSubmit&&b==null)||b)&&!a){var c=document.id(this).getElement(".validation-failed");var d=document.id(this).getParent();while(d!=document.body&&d.getScrollSize().y==d.getSize().y){d=d.getParent()}var f=d.retrieve("$moo:fvScroller");if(!f&&window.Fx&&Fx.Scroll){f=new Fx.Scroll(d,this.options.scrollFxOptions);d.store("$moo:fvScroller",f)}if(c){if(f){f.toElement(c)}else{d.scrollTo(d.getScroll().x,c.getPosition(d).y-20)}}}return a},watchFields:function(a){a.each(function(b){if(this.options.evaluateFieldsOnBlur){b.addEvent("blur",this.validationMonitor.pass([b,false,this.options.scrollToErrorsOnBlur],this))}if(this.options.evaluateFieldsOnChange){b.addEvent("change",this.validationMonitor.pass([b,true,this.options.scrollToErrorsOnChange],this))}},this)}});Form.Validator.addAllThese([["validate-enforce-oncheck",{test:function(a,b){var c=a.getParent("form").retrieve("validator");if(!c){return true}(b.toEnforce||document.id(b.enforceChildrenOf).getElements("input, select, textarea")).map(function(d){if(a.checked){c.enforceField(d)}else{c.ignoreField(d);c.resetField(d)}});return true}}],["validate-ignore-oncheck",{test:function(a,b){var c=a.getParent("form").retrieve("validator");if(!c){return true}(b.toIgnore||document.id(b.ignoreChildrenOf).getElements("input, select, textarea")).each(function(d){if(a.checked){c.ignoreField(d);c.resetField(d)}else{c.enforceField(d)}});return true}}],["validate-nospace",{errorMsg:function(){return Form.Validator.getMsg("noSpace")},test:function(a,b){return !a.get("value").test(/\s/)}}],["validate-toggle-oncheck",{test:function(b,c){var d=b.getParent("form").retrieve("validator");if(!d){return true}var a=c.toToggle||document.id(c.toToggleChildrenOf).getElements("input, select, textarea");if(!b.checked){a.each(function(f){d.ignoreField(f);d.resetField(f)})}else{a.each(function(f){d.enforceField(f)})}return true}}],["validate-reqchk-bynode",{errorMsg:function(){return Form.Validator.getMsg("reqChkByNode")},test:function(a,b){return(document.id(b.nodeId).getElements(b.selector||"input[type=checkbox], input[type=radio]")).some(function(c){return c.checked})}}],["validate-required-check",{errorMsg:function(a,b){return b.useTitle?a.get("title"):Form.Validator.getMsg("requiredChk")},test:function(a,b){return !!a.checked}}],["validate-reqchk-byname",{errorMsg:function(a,b){return Form.Validator.getMsg("reqChkByName").substitute({label:b.label||a.get("type")})},test:function(b,d){var c=d.groupName||b.get("name");var a=$$(document.getElementsByName(c)).some(function(h,g){return h.checked});var f=b.getParent("form").retrieve("validator");if(a&&f){f.resetField(b)}return a}}],["validate-match",{errorMsg:function(a,b){return Form.Validator.getMsg("match").substitute({matchName:b.matchName||document.id(b.matchInput).get("name")})},test:function(b,c){var d=b.get("value");var a=document.id(c.matchInput)&&document.id(c.matchInput).get("value");return d&&a?d==a:true}}],["validate-after-date",{errorMsg:function(a,b){return Form.Validator.getMsg("afterDate").substitute({label:b.afterLabel||(b.afterElement?Form.Validator.getMsg("startDate"):Form.Validator.getMsg("currentDate"))})},test:function(b,c){var d=document.id(c.afterElement)?Date.parse(document.id(c.afterElement).get("value")):new Date();var a=Date.parse(b.get("value"));return a&&d?a>=d:true}}],["validate-before-date",{errorMsg:function(a,b){return Form.Validator.getMsg("beforeDate").substitute({label:b.beforeLabel||(b.beforeElement?Form.Validator.getMsg("endDate"):Form.Validator.getMsg("currentDate"))})},test:function(b,c){var d=Date.parse(b.get("value"));var a=document.id(c.beforeElement)?Date.parse(document.id(c.beforeElement).get("value")):new Date();return a&&d?a>=d:true}}],["validate-custom-required",{errorMsg:function(){return Form.Validator.getMsg("required")},test:function(a,b){return a.get("value")!=b.emptyValue}}],["validate-same-month",{errorMsg:function(a,b){var c=document.id(b.sameMonthAs)&&document.id(b.sameMonthAs).get("value");var d=a.get("value");if(d!=""){return Form.Validator.getMsg(c?"sameMonth":"startMonth")}},test:function(a,b){var d=Date.parse(a.get("value"));var c=Date.parse(document.id(b.sameMonthAs)&&document.id(b.sameMonthAs).get("value"));return d&&c?d.format("%B")==c.format("%B"):true}}],["validate-cc-num",{errorMsg:function(a){var b=a.get("value").replace(/[^0-9]/g,"");return Form.Validator.getMsg("creditcard").substitute({length:b.length})},test:function(c){if(Form.Validator.getValidator("IsEmpty").test(c)){return true}var h=c.get("value");h=h.replace(/[^0-9]/g,"");var a=false;if(h.test(/^4[0-9]{12}([0-9]{3})?$/)){a="Visa"}else{if(h.test(/^5[1-5]([0-9]{14})$/)){a="Master Card"}else{if(h.test(/^3[47][0-9]{13}$/)){a="American Express"}else{if(h.test(/^6011[0-9]{12}$/)){a="Discover"}}}}if(a){var d=0;var f=0;for(var b=h.length-1;b>=0;--b){f=h.charAt(b).toInt();if(f==0){continue}if((h.length-b)%2==0){f+=f}if(f>9){f=f.toString().charAt(0).toInt()+f.toString().charAt(1).toInt()}d+=f}if((d%10)==0){return true}}var g="";while(h!=""){g+=" "+h.substr(0,4);h=h.substr(4)}c.getParent("form").retrieve("validator").ignoreField(c);c.set("value",g.clean());c.getParent("form").retrieve("validator").enforceField(c);return false}}]]);var OverText=new Class({Implements:[Options,Events,Class.Occlude],Binds:["reposition","assert","focus","hide"],options:{element:"label",labelClass:"overTxtLabel",positionOptions:{position:"upperLeft",edge:"upperLeft",offset:{x:4,y:2}},poll:false,pollInterval:250,wrap:false},property:"OverText",initialize:function(b,a){b=this.element=document.id(b);if(this.occlude()){return this.occluded}this.setOptions(a);this.attach(b);OverText.instances.push(this);if(this.options.poll){this.poll()}},toElement:function(){return this.element},attach:function(){var b=this.element,a=this.options,c=a.textOverride||b.get("alt")||b.get("title");if(!c){return this}var d=this.text=new Element(a.element,{"class":a.labelClass,styles:{lineHeight:"normal",position:"absolute",cursor:"text"},html:c,events:{click:this.hide.pass(a.element=="label",this)}}).inject(b,"after");if(a.element=="label"){if(!b.get("id")){b.set("id","input_"+String.uniqueID())}d.set("for",b.get("id"))}if(a.wrap){this.textHolder=new Element("div.overTxtWrapper",{styles:{lineHeight:"normal",position:"relative"}}).grab(d).inject(b,"before")}return this.enable()},destroy:function(){this.element.eliminate(this.property);this.disable();if(this.text){this.text.destroy()}if(this.textHolder){this.textHolder.destroy()}return this},disable:function(){this.element.removeEvents({focus:this.focus,blur:this.assert,change:this.assert});window.removeEvent("resize",this.reposition);this.hide(true,true);return this},enable:function(){this.element.addEvents({focus:this.focus,blur:this.assert,change:this.assert});window.addEvent("resize",this.reposition);this.reposition();return this},wrap:function(){if(this.options.element=="label"){if(!this.element.get("id")){this.element.set("id","input_"+String.uniqueID())}this.text.set("for",this.element.get("id"))}},startPolling:function(){this.pollingPaused=false;return this.poll()},poll:function(a){if(this.poller&&!a){return this}if(a){clearInterval(this.poller)}else{this.poller=(function(){if(!this.pollingPaused){this.assert(true)}}).periodical(this.options.pollInterval,this)}return this},stopPolling:function(){this.pollingPaused=true;return this.poll(true)},focus:function(){if(this.text&&(!this.text.isDisplayed()||this.element.get("disabled"))){return this}return this.hide()},hide:function(c,a){if(this.text&&(this.text.isDisplayed()&&(!this.element.get("disabled")||a))){this.text.hide();this.fireEvent("textHide",[this.text,this.element]);this.pollingPaused=true;if(!c){try{this.element.fireEvent("focus");this.element.focus()}catch(b){}}}return this},show:function(){if(this.text&&!this.text.isDisplayed()){this.text.show();this.reposition();this.fireEvent("textShow",[this.text,this.element]);this.pollingPaused=false}return this},test:function(){return !this.element.get("value")},assert:function(a){return this[this.test()?"show":"hide"](a)},reposition:function(){this.assert(true);if(!this.element.isVisible()){return this.stopPolling().hide()}if(this.text&&this.test()){this.text.position(Object.merge(this.options.positionOptions,{relativeTo:this.element}))}return this}});OverText.instances=[];Object.append(OverText,{each:function(a){return OverText.instances.each(function(c,b){if(c.element&&c.text){a.call(OverText,c,b)}})},update:function(){return OverText.each(function(a){return a.reposition()})},hideAll:function(){return OverText.each(function(a){return a.hide(true,true)})},showAll:function(){return OverText.each(function(a){return a.show()})}});Fx.Elements=new Class({Extends:Fx.CSS,initialize:function(b,a){this.elements=this.subject=$$(b);this.parent(a)},compute:function(h,j,k){var c={};for(var d in h){var a=h[d],f=j[d],g=c[d]={};for(var b in a){g[b]=this.parent(a[b],f[b],k)}}return c},set:function(b){for(var c in b){if(!this.elements[c]){continue}var a=b[c];for(var d in a){this.render(this.elements[c],d,a[d],this.options.unit)}}return this},start:function(c){if(!this.check(c)){return this}var j={},k={};for(var d in c){if(!this.elements[d]){continue}var g=c[d],a=j[d]={},h=k[d]={};for(var b in g){var f=this.prepare(this.elements[d],b,g[b]);a[b]=f.from;h[b]=f.to}}return this.parent(j,k)}});Fx.Accordion=new Class({Extends:Fx.Elements,options:{fixedHeight:false,fixedWidth:false,display:0,show:false,height:true,width:false,opacity:true,alwaysHide:false,trigger:"click",initialDisplayFx:true,resetHeight:true},initialize:function(){var h=function(i){return i!=null};var g=Array.link(arguments,{container:Type.isElement,options:Type.isObject,togglers:h,elements:h});this.parent(g.elements,g.options);var b=this.options,f=this.togglers=$$(g.togglers);this.previous=-1;this.internalChain=new Chain();if(b.alwaysHide){this.options.link="chain"}if(b.show||this.options.show===0){b.display=false;this.previous=b.show}if(b.start){b.display=false;b.show=false}var d=this.effects={};if(b.opacity){d.opacity="fullOpacity"}if(b.width){d.width=b.fixedWidth?"fullWidth":"offsetWidth"}if(b.height){d.height=b.fixedHeight?"fullHeight":"scrollHeight"}for(var c=0,a=f.length;c<a;c++){this.addSection(f[c],this.elements[c])}this.elements.each(function(k,j){if(b.show===j){this.fireEvent("active",[f[j],k])}else{for(var l in d){k.setStyle(l,0)}}},this);if(b.display||b.display===0||b.initialDisplayFx===false){this.display(b.display,b.initialDisplayFx)}if(b.fixedHeight!==false){b.resetHeight=false}this.addEvent("complete",this.internalChain.callChain.bind(this.internalChain))},addSection:function(h,d){h=document.id(h);d=document.id(d);this.togglers.include(h);this.elements.include(d);var g=this.togglers,c=this.options,i=g.contains(h),a=g.indexOf(h),b=this.display.pass(a,this);h.store("accordion:display",b).addEvent(c.trigger,b);if(c.height){d.setStyles({"padding-top":0,"border-top":"none","padding-bottom":0,"border-bottom":"none"})}if(c.width){d.setStyles({"padding-left":0,"border-left":"none","padding-right":0,"border-right":"none"})}d.fullOpacity=1;if(c.fixedWidth){d.fullWidth=c.fixedWidth}if(c.fixedHeight){d.fullHeight=c.fixedHeight}d.setStyle("overflow","hidden");if(!i){for(var f in this.effects){d.setStyle(f,0)}}return this},removeSection:function(g,b){var f=this.togglers,a=f.indexOf(g),c=this.elements[a];var d=function(){f.erase(g);this.elements.erase(c);this.detach(g)}.bind(this);if(this.now==a||b!=null){this.display(b!=null?b:(a-1>=0?a-1:0)).chain(d)}else{d()}return this},detach:function(b){var a=function(c){c.removeEvent(this.options.trigger,c.retrieve("accordion:display"))}.bind(this);if(!b){this.togglers.each(a)}else{a(b)}return this},display:function(b,c){if(!this.check(b,c)){return this}var i={},h=this.elements,a=this.options,g=this.effects;if(c==null){c=true}if(typeOf(b)=="element"){b=h.indexOf(b)}if(b==this.previous&&!a.alwaysHide){return this}if(a.resetHeight){var f=h[this.previous];if(f&&!this.selfHidden){for(var d in g){f.setStyle(d,f[g[d]])}}}if((this.timer&&a.link=="chain")||(b===this.previous&&!a.alwaysHide)){return this}this.previous=b;this.selfHidden=false;h.each(function(l,k){i[k]={};var j;if(k!=b){j=true}else{if(a.alwaysHide&&((l.offsetHeight>0&&a.height)||l.offsetWidth>0&&a.width)){j=true;this.selfHidden=true}}this.fireEvent(j?"background":"active",[this.togglers[k],l]);for(var m in g){i[k][m]=j?0:l[g[m]]}if(!c&&!j&&a.resetHeight){i[k].height="auto"}},this);this.internalChain.clearChain();this.internalChain.chain(function(){if(a.resetHeight&&!this.selfHidden){var j=h[b];if(j){j.setStyle("height","auto")}}}.bind(this));return c?this.start(i):this.set(i).internalChain.callChain()}});Fx.Move=new Class({Extends:Fx.Morph,options:{relativeTo:document.body,position:"center",edge:false,offset:{x:0,y:0}},start:function(a){var b=this.element,c=b.getStyles("top","left");if(c.top=="auto"||c.left=="auto"){b.setPosition(b.getPosition(b.getOffsetParent()))}return this.parent(b.position(Object.merge({},this.options,a,{returnPos:true})))}});Element.Properties.move={set:function(a){this.get("move").cancel().setOptions(a);return this},get:function(){var a=this.retrieve("move");if(!a){a=new Fx.Move(this,{link:"cancel"});this.store("move",a)}return a}};Element.implement({move:function(a){this.get("move").start(a);return this}});(function(){Fx.Scroll=new Class({Extends:Fx,options:{offset:{x:0,y:0},wheelStops:true},initialize:function(c,b){this.element=this.subject=document.id(c);this.parent(b);if(typeOf(this.element)!="element"){this.element=document.id(this.element.getDocument().body)}if(this.options.wheelStops){var d=this.element,f=this.cancel.pass(false,this);this.addEvent("start",function(){d.addEvent("mousewheel",f)},true);this.addEvent("complete",function(){d.removeEvent("mousewheel",f)},true)}},set:function(){var b=Array.flatten(arguments);if(Browser.firefox){b=[Math.round(b[0]),Math.round(b[1])]}this.element.scrollTo(b[0],b[1]);return this},compute:function(d,c,b){return[0,1].map(function(f){return Fx.compute(d[f],c[f],b)})},start:function(c,d){if(!this.check(c,d)){return this}var b=this.element.getScroll();return this.parent([b.x,b.y],[c,d])},calculateScroll:function(h,g){var d=this.element,b=d.getScrollSize(),i=d.getScroll(),k=d.getSize(),c=this.options.offset,j={x:h,y:g};for(var f in j){if(!j[f]&&j[f]!==0){j[f]=i[f]}if(typeOf(j[f])!="number"){j[f]=b[f]-k[f]}j[f]+=c[f]}return[j.x,j.y]},toTop:function(){return this.start.apply(this,this.calculateScroll(false,0))},toLeft:function(){return this.start.apply(this,this.calculateScroll(0,false))},toRight:function(){return this.start.apply(this,this.calculateScroll("right",false))},toBottom:function(){return this.start.apply(this,this.calculateScroll(false,"bottom"))},toElement:function(d,f){f=f?Array.from(f):["x","y"];var c=a(this.element)?{x:0,y:0}:this.element.getScroll();var b=Object.map(document.id(d).getPosition(this.element),function(h,g){return f.contains(g)?h+c[g]:false});return this.start.apply(this,this.calculateScroll(b.x,b.y))},toElementEdge:function(d,h,f){h=h?Array.from(h):["x","y"];d=document.id(d);var j={},g=d.getPosition(this.element),k=d.getSize(),i=this.element.getScroll(),b=this.element.getSize(),c={x:g.x+k.x,y:g.y+k.y};["x","y"].each(function(l){if(h.contains(l)){if(c[l]>i[l]+b[l]){j[l]=c[l]-b[l]}if(g[l]<i[l]){j[l]=g[l]}}if(j[l]==null){j[l]=i[l]}if(f&&f[l]){j[l]=j[l]+f[l]}},this);if(j.x!=i.x||j.y!=i.y){this.start(j.x,j.y)}return this},toElementCenter:function(f,g,i){g=g?Array.from(g):["x","y"];f=document.id(f);var j={},c=f.getPosition(this.element),d=f.getSize(),b=this.element.getScroll(),h=this.element.getSize();["x","y"].each(function(k){if(g.contains(k)){j[k]=c[k]-(h[k]-d[k])/2}if(j[k]==null){j[k]=b[k]}if(i&&i[k]){j[k]=j[k]+i[k]}},this);if(j.x!=b.x||j.y!=b.y){this.start(j.x,j.y)}return this}});function a(b){return(/^(?:body|html)$/i).test(b.tagName)}})();Fx.Slide=new Class({Extends:Fx,options:{mode:"vertical",wrapper:false,hideOverflow:true,resetHeight:false},initialize:function(b,a){b=this.element=this.subject=document.id(b);this.parent(a);a=this.options;var d=b.retrieve("wrapper"),c=b.getStyles("margin","position","overflow");if(a.hideOverflow){c=Object.append(c,{overflow:"hidden"})}if(a.wrapper){d=document.id(a.wrapper).setStyles(c)}if(!d){d=new Element("div",{styles:c}).wraps(b)}b.store("wrapper",d).setStyle("margin",0);if(b.getStyle("overflow")=="visible"){b.setStyle("overflow","hidden")}this.now=[];this.open=true;this.wrapper=d;this.addEvent("complete",function(){this.open=(d["offset"+this.layout.capitalize()]!=0);if(this.open&&this.options.resetHeight){d.setStyle("height","")}},true)},vertical:function(){this.margin="margin-top";this.layout="height";this.offset=this.element.offsetHeight},horizontal:function(){this.margin="margin-left";this.layout="width";this.offset=this.element.offsetWidth},set:function(a){this.element.setStyle(this.margin,a[0]);this.wrapper.setStyle(this.layout,a[1]);return this},compute:function(c,b,a){return[0,1].map(function(d){return Fx.compute(c[d],b[d],a)})},start:function(b,f){if(!this.check(b,f)){return this}this[f||this.options.mode]();var d=this.element.getStyle(this.margin).toInt(),c=this.wrapper.getStyle(this.layout).toInt(),a=[[d,c],[0,this.offset]],h=[[d,c],[-this.offset,0]],g;switch(b){case"in":g=a;break;case"out":g=h;break;case"toggle":g=(c==0)?a:h}return this.parent(g[0],g[1])},slideIn:function(a){return this.start("in",a)},slideOut:function(a){return this.start("out",a)},hide:function(a){this[a||this.options.mode]();this.open=false;return this.set([-this.offset,0])},show:function(a){this[a||this.options.mode]();this.open=true;return this.set([0,this.offset])},toggle:function(a){return this.start("toggle",a)}});Element.Properties.slide={set:function(a){this.get("slide").cancel().setOptions(a);return this},get:function(){var a=this.retrieve("slide");if(!a){a=new Fx.Slide(this,{link:"cancel"});this.store("slide",a)}return a}};Element.implement({slide:function(d,f){d=d||"toggle";var b=this.get("slide"),a;switch(d){case"hide":b.hide(f);break;case"show":b.show(f);break;case"toggle":var c=this.retrieve("slide:flag",b.open);b[c?"slideOut":"slideIn"](f);this.store("slide:flag",!c);a=true;break;default:b.start(d,f)}if(!a){this.eliminate("slide:flag")}return this}});Fx.SmoothScroll=new Class({Extends:Fx.Scroll,options:{axes:["x","y"]},initialize:function(c,d){d=d||document;this.doc=d.getDocument();this.parent(this.doc,c);var f=d.getWindow(),a=f.location.href.match(/^[^#]*/)[0]+"#",b=$$(this.options.links||this.doc.links);b.each(function(h){if(h.href.indexOf(a)!=0){return}var g=h.href.substr(a.length);if(g){this.useLink(h,g)}},this);this.addEvent("complete",function(){f.location.hash=this.anchor;this.element.scrollTo(this.to[0],this.to[1])},true)},useLink:function(b,a){b.addEvent("click",function(d){var c=document.id(a)||this.doc.getElement("a[name="+a+"]");if(!c){return}d.preventDefault();this.toElement(c,this.options.axes).chain(function(){this.fireEvent("scrolledTo",[b,c])}.bind(this));this.anchor=a}.bind(this));return this}});Fx.Sort=new Class({Extends:Fx.Elements,options:{mode:"vertical"},initialize:function(b,a){this.parent(b,a);this.elements.each(function(c){if(c.getStyle("position")=="static"){c.setStyle("position","relative")}});this.setDefaultOrder()},setDefaultOrder:function(){this.currentOrder=this.elements.map(function(b,a){return a})},sort:function(){if(!this.check(arguments)){return this}var f=Array.flatten(arguments);var j=0,a=0,c={},i={},d=this.options.mode=="vertical";var g=this.elements.map(function(n,l){var m=n.getComputedSize({styles:["border","padding","margin"]});var o;if(d){o={top:j,margin:m["margin-top"],height:m.totalHeight};j+=o.height-m["margin-top"]}else{o={left:a,margin:m["margin-left"],width:m.totalWidth};a+=o.width}var k=d?"top":"left";i[l]={};var p=n.getStyle(k).toInt();i[l][k]=p||0;return o},this);this.set(i);f=f.map(function(k){return k.toInt()});if(f.length!=this.elements.length){this.currentOrder.each(function(k){if(!f.contains(k)){f.push(k)}});if(f.length>this.elements.length){f.splice(this.elements.length-1,f.length-this.elements.length)}}var b=0;j=a=0;f.each(function(l){var k={};if(d){k.top=j-g[l].top-b;j+=g[l].height}else{k.left=a-g[l].left;a+=g[l].width}b=b+g[l].margin;c[l]=k},this);var h={};Array.clone(f).sort().each(function(k){h[k]=c[k]});this.start(h);this.currentOrder=f;return this},rearrangeDOM:function(a){a=a||this.currentOrder;var b=this.elements[0].getParent();var c=[];this.elements.setStyle("opacity",0);a.each(function(d){c.push(this.elements[d].inject(b).setStyles({top:0,left:0}))},this);this.elements.setStyle("opacity",1);this.elements=$$(c);this.setDefaultOrder();return this},getDefaultOrder:function(){return this.elements.map(function(b,a){return a})},getCurrentOrder:function(){return this.currentOrder},forward:function(){return this.sort(this.getDefaultOrder())},backward:function(){return this.sort(this.getDefaultOrder().reverse())},reverse:function(){return this.sort(this.currentOrder.reverse())},sortByElements:function(a){return this.sort(a.map(function(b){return this.elements.indexOf(b)},this))},swap:function(c,b){if(typeOf(c)=="element"){c=this.elements.indexOf(c)}if(typeOf(b)=="element"){b=this.elements.indexOf(b)}var a=Array.clone(this.currentOrder);a[this.currentOrder.indexOf(c)]=b;a[this.currentOrder.indexOf(b)]=c;return this.sort(a)}});var Drag=new Class({Implements:[Events,Options],options:{snap:6,unit:"px",grid:false,style:true,limit:false,handle:false,invert:false,preventDefault:false,stopPropagation:false,modifiers:{x:"left",y:"top"}},initialize:function(){var b=Array.link(arguments,{options:Type.isObject,element:function(c){return c!=null}});this.element=document.id(b.element);this.document=this.element.getDocument();this.setOptions(b.options||{});var a=typeOf(this.options.handle);this.handles=((a=="array"||a=="collection")?$$(this.options.handle):document.id(this.options.handle))||this.element;this.mouse={now:{},pos:{}};this.value={start:{},now:{}};this.selection=(Browser.ie)?"selectstart":"mousedown";if(Browser.ie&&!Drag.ondragstartFixed){document.ondragstart=Function.from(false);Drag.ondragstartFixed=true}this.bound={start:this.start.bind(this),check:this.check.bind(this),drag:this.drag.bind(this),stop:this.stop.bind(this),cancel:this.cancel.bind(this),eventStop:Function.from(false)};this.attach()},attach:function(){this.handles.addEvent("mousedown",this.bound.start);return this},detach:function(){this.handles.removeEvent("mousedown",this.bound.start);return this},start:function(a){var k=this.options;if(a.rightClick){return}if(k.preventDefault){a.preventDefault()}if(k.stopPropagation){a.stopPropagation()}this.mouse.start=a.page;this.fireEvent("beforeStart",this.element);var c=k.limit;this.limit={x:[],y:[]};var f,h;for(f in k.modifiers){if(!k.modifiers[f]){continue}var b=this.element.getStyle(k.modifiers[f]);if(b&&!b.match(/px$/)){if(!h){h=this.element.getCoordinates(this.element.getOffsetParent())}b=h[k.modifiers[f]]}if(k.style){this.value.now[f]=(b||0).toInt()}else{this.value.now[f]=this.element[k.modifiers[f]]}if(k.invert){this.value.now[f]*=-1}this.mouse.pos[f]=a.page[f]-this.value.now[f];if(c&&c[f]){var d=2;while(d--){var g=c[f][d];if(g||g===0){this.limit[f][d]=(typeof g=="function")?g():g}}}}if(typeOf(this.options.grid)=="number"){this.options.grid={x:this.options.grid,y:this.options.grid}}var j={mousemove:this.bound.check,mouseup:this.bound.cancel};j[this.selection]=this.bound.eventStop;this.document.addEvents(j)},check:function(a){if(this.options.preventDefault){a.preventDefault()}var b=Math.round(Math.sqrt(Math.pow(a.page.x-this.mouse.start.x,2)+Math.pow(a.page.y-this.mouse.start.y,2)));if(b>this.options.snap){this.cancel();this.document.addEvents({mousemove:this.bound.drag,mouseup:this.bound.stop});this.fireEvent("start",[this.element,a]).fireEvent("snap",this.element)}},drag:function(b){var a=this.options;if(a.preventDefault){b.preventDefault()}this.mouse.now=b.page;for(var c in a.modifiers){if(!a.modifiers[c]){continue}this.value.now[c]=this.mouse.now[c]-this.mouse.pos[c];if(a.invert){this.value.now[c]*=-1}if(a.limit&&this.limit[c]){if((this.limit[c][1]||this.limit[c][1]===0)&&(this.value.now[c]>this.limit[c][1])){this.value.now[c]=this.limit[c][1]}else{if((this.limit[c][0]||this.limit[c][0]===0)&&(this.value.now[c]<this.limit[c][0])){this.value.now[c]=this.limit[c][0]}}}if(a.grid[c]){this.value.now[c]-=((this.value.now[c]-(this.limit[c][0]||0))%a.grid[c])}if(a.style){this.element.setStyle(a.modifiers[c],this.value.now[c]+a.unit)}else{this.element[a.modifiers[c]]=this.value.now[c]}}this.fireEvent("drag",[this.element,b])},cancel:function(a){this.document.removeEvents({mousemove:this.bound.check,mouseup:this.bound.cancel});if(a){this.document.removeEvent(this.selection,this.bound.eventStop);this.fireEvent("cancel",this.element)}},stop:function(b){var a={mousemove:this.bound.drag,mouseup:this.bound.stop};a[this.selection]=this.bound.eventStop;this.document.removeEvents(a);if(b){this.fireEvent("complete",[this.element,b])}}});Element.implement({makeResizable:function(a){var b=new Drag(this,Object.merge({modifiers:{x:"width",y:"height"}},a));this.store("resizer",b);return b.addEvent("drag",function(){this.fireEvent("resize",b)}.bind(this))}});Drag.Move=new Class({Extends:Drag,options:{droppables:[],container:false,precalculate:false,includeMargins:true,checkDroppables:true},initialize:function(b,a){this.parent(b,a);b=this.element;this.droppables=$$(this.options.droppables);this.container=document.id(this.options.container);if(this.container&&typeOf(this.container)!="element"){this.container=document.id(this.container.getDocument().body)}if(this.options.style){if(this.options.modifiers.x=="left"&&this.options.modifiers.y=="top"){var c=b.getOffsetParent(),d=b.getStyles("left","top");if(c&&(d.left=="auto"||d.top=="auto")){b.setPosition(b.getPosition(c))}}if(b.getStyle("position")=="static"){b.setStyle("position","absolute")}}this.addEvent("start",this.checkDroppables,true);this.overed=null},start:function(a){if(this.container){this.options.limit=this.calculateLimit()}if(this.options.precalculate){this.positions=this.droppables.map(function(b){return b.getCoordinates()})}this.parent(a)},calculateLimit:function(){var k=this.element,f=this.container,d=document.id(k.getOffsetParent())||document.body,i=f.getCoordinates(d),c={},b={},l={},h={},n={};["top","right","bottom","left"].each(function(r){c[r]=k.getStyle("margin-"+r).toInt();b[r]=k.getStyle("border-"+r).toInt();l[r]=f.getStyle("margin-"+r).toInt();h[r]=f.getStyle("border-"+r).toInt();n[r]=d.getStyle("padding-"+r).toInt()},this);var g=k.offsetWidth+c.left+c.right,q=k.offsetHeight+c.top+c.bottom,j=0,m=0,p=i.right-h.right-g,a=i.bottom-h.bottom-q;if(this.options.includeMargins){j+=c.left;m+=c.top}else{p+=c.right;a+=c.bottom}if(k.getStyle("position")=="relative"){var o=k.getCoordinates(d);o.left-=k.getStyle("left").toInt();o.top-=k.getStyle("top").toInt();j-=o.left;m-=o.top;if(f.getStyle("position")!="relative"){j+=h.left;m+=h.top}p+=c.left-o.left;a+=c.top-o.top;if(f!=d){j+=l.left+n.left;m+=((Browser.ie6||Browser.ie7)?0:l.top)+n.top}}else{j-=c.left;m-=c.top;if(f!=d){j+=i.left+h.left;m+=i.top+h.top}}return{x:[j,p],y:[m,a]}},getDroppableCoordinates:function(c){var b=c.getCoordinates();if(c.getStyle("position")=="fixed"){var a=window.getScroll();b.left+=a.x;b.right+=a.x;b.top+=a.y;b.bottom+=a.y}return b},checkDroppables:function(){var a=this.droppables.filter(function(d,c){d=this.positions?this.positions[c]:this.getDroppableCoordinates(d);var b=this.mouse.now;return(b.x>d.left&&b.x<d.right&&b.y<d.bottom&&b.y>d.top)},this).getLast();if(this.overed!=a){if(this.overed){this.fireEvent("leave",[this.element,this.overed])}if(a){this.fireEvent("enter",[this.element,a])}this.overed=a}},drag:function(a){this.parent(a);if(this.options.checkDroppables&&this.droppables.length){this.checkDroppables()}},stop:function(a){this.checkDroppables();this.fireEvent("drop",[this.element,this.overed,a]);this.overed=null;return this.parent(a)}});Element.implement({makeDraggable:function(a){var b=new Drag.Move(this,a);this.store("dragger",b);return b}});var Slider=new Class({Implements:[Events,Options],Binds:["clickedElement","draggedKnob","scrolledElement"],options:{onTick:function(a){this.setKnobPosition(Math.round(a))},initialStep:0,snap:false,offset:0,range:false,wheel:false,steps:100,mode:"horizontal"},initialize:function(g,a,f){this.setOptions(f);f=this.options;this.element=document.id(g);a=this.knob=document.id(a);this.previousChange=this.previousEnd=this.step=-1;var b={},d={x:false,y:false};switch(f.mode){case"vertical":this.axis="y";this.property="top";this.offset="offsetHeight";break;case"horizontal":this.axis="x";this.property="left";this.offset="offsetWidth"}this.setSliderDimensions();this.setRange(f.range);if(a.getStyle("position")=="static"){a.setStyle("position","relative")}a.setStyle(this.property,-f.offset);d[this.axis]=this.property;b[this.axis]=[-f.offset,this.full-f.offset];var c={snap:0,limit:b,modifiers:d,onDrag:this.draggedKnob,onStart:this.draggedKnob,onBeforeStart:(function(){this.isDragging=true}).bind(this),onCancel:function(){this.isDragging=false}.bind(this),onComplete:function(){this.isDragging=false;this.draggedKnob();this.end()}.bind(this)};if(f.snap){this.setSnap(c)}this.drag=new Drag(a,c);this.attach();if(f.initialStep!=null){this.set(f.initialStep)}},attach:function(){this.element.addEvent("mousedown",this.clickedElement);if(this.options.wheel){this.element.addEvent("mousewheel",this.scrolledElement)}this.drag.attach();return this},detach:function(){this.element.removeEvent("mousedown",this.clickedElement).removeEvent("mousewheel",this.scrolledElement);this.drag.detach();return this},autosize:function(){this.setSliderDimensions().setKnobPosition(this.toPosition(this.step));this.drag.options.limit[this.axis]=[-this.options.offset,this.full-this.options.offset];if(this.options.snap){this.setSnap()}return this},setSnap:function(a){if(!a){a=this.drag.options}a.grid=Math.ceil(this.stepWidth);a.limit[this.axis][1]=this.full;return this},setKnobPosition:function(a){if(this.options.snap){a=this.toPosition(this.step)}this.knob.setStyle(this.property,Math.round(a));return this},setSliderDimensions:function(){this.full=this.element.measure(function(){this.half=this.knob[this.offset]/2;return this.element[this.offset]-this.knob[this.offset]+(this.options.offset*2)}.bind(this));return this},set:function(a){if(!((this.range>0)^(a<this.min))){a=this.min}if(!((this.range>0)^(a>this.max))){a=this.max}this.step=Math.round(a);return this.checkStep().fireEvent("tick",this.toPosition(this.step)).end()},setRange:function(a,b){this.min=Array.pick([a[0],0]);this.max=Array.pick([a[1],this.options.steps]);this.range=this.max-this.min;this.steps=this.options.steps||this.full;this.stepSize=Math.abs(this.range)/this.steps;this.stepWidth=this.stepSize*this.full/(this.range>0?Math.abs(this.range):1);if(a){this.set(Array.pick([b,this.step]).floor(this.min).max(this.max))}return this},clickedElement:function(c){if(this.isDragging||c.target==this.knob){return}var b=this.range<0?-1:1,a=c.page[this.axis]-this.element.getPosition()[this.axis]-this.half;a=a.limit(-this.options.offset,this.full-this.options.offset);this.step=Math.round(this.min+b*this.toStep(a));this.checkStep().fireEvent("tick",a).end()},scrolledElement:function(a){var b=(this.options.mode=="horizontal")?(a.wheel<0):(a.wheel>0);this.set(this.step+(b?-1:1)*this.stepSize);a.stop()},draggedKnob:function(){var b=this.range<0?-1:1,a=this.drag.value.now[this.axis];a=a.limit(-this.options.offset,this.full-this.options.offset);this.step=Math.round(this.min+b*this.toStep(a));this.checkStep()},checkStep:function(){var a=this.step;if(this.previousChange!=a){this.previousChange=a;this.fireEvent("change",a)}return this},end:function(){var a=this.step;if(this.previousEnd!==a){this.previousEnd=a;this.fireEvent("complete",a+"")}return this},toStep:function(a){var b=(a+this.options.offset)*this.stepSize/this.full*this.steps;return this.options.steps?Math.round(b-=b%this.stepSize):b},toPosition:function(a){return(this.full*Math.abs(this.min-a))/(this.steps>0&&this.stepSize>0?(this.steps*this.stepSize)-this.options.offset:1)}});var Sortables=new Class({Implements:[Events,Options],options:{opacity:1,clone:false,revert:false,handle:false,dragOptions:{}},initialize:function(a,b){this.setOptions(b);this.elements=[];this.lists=[];this.idle=true;this.addLists($$(document.id(a)||a));if(!this.options.clone){this.options.revert=false}if(this.options.revert){this.effect=new Fx.Morph(null,Object.merge({duration:250,link:"cancel"},this.options.revert))}},attach:function(){this.addLists(this.lists);return this},detach:function(){this.lists=this.removeLists(this.lists);return this},addItems:function(){Array.flatten(arguments).each(function(a){this.elements.push(a);var b=a.retrieve("sortables:start",function(c){this.start.call(this,c,a)}.bind(this));(this.options.handle?a.getElement(this.options.handle)||a:a).addEvent("mousedown",b)},this);return this},addLists:function(){Array.flatten(arguments).each(function(a){this.lists.include(a);this.addItems(a.getChildren())},this);return this},removeItems:function(){return $$(Array.flatten(arguments).map(function(a){this.elements.erase(a);var b=a.retrieve("sortables:start");(this.options.handle?a.getElement(this.options.handle)||a:a).removeEvent("mousedown",b);return a},this))},removeLists:function(){return $$(Array.flatten(arguments).map(function(a){this.lists.erase(a);this.removeItems(a.getChildren());return a},this))},getClone:function(b,a){if(!this.options.clone){return new Element(a.tagName).inject(document.body)}if(typeOf(this.options.clone)=="function"){return this.options.clone.call(this,b,a,this.list)}var c=a.clone(true).setStyles({margin:0,position:"absolute",visibility:"hidden",width:a.getStyle("width")}).addEvent("mousedown",function(d){a.fireEvent("mousedown",d)});if(c.get("html").test("radio")){c.getElements("input[type=radio]").each(function(d,f){d.set("name","clone_"+f);if(d.get("checked")){a.getElements("input[type=radio]")[f].set("checked",true)}})}return c.inject(this.list).setPosition(a.getPosition(a.getOffsetParent()))},getDroppables:function(){var a=this.list.getChildren().erase(this.clone).erase(this.element);if(!this.options.constrain){a.append(this.lists).erase(this.list)}return a},insert:function(c,b){var a="inside";if(this.lists.contains(b)){this.list=b;this.drag.droppables=this.getDroppables()}else{a=this.element.getAllPrevious().contains(b)?"before":"after"}this.element.inject(b,a);this.fireEvent("sort",[this.element,this.clone])},start:function(b,a){if(!this.idle||b.rightClick||["button","input","a","textarea"].contains(b.target.get("tag"))){return}this.idle=false;this.element=a;this.opacity=a.get("opacity");this.list=a.getParent();this.clone=this.getClone(b,a);this.drag=new Drag.Move(this.clone,Object.merge({droppables:this.getDroppables()},this.options.dragOptions)).addEvents({onSnap:function(){b.stop();this.clone.setStyle("visibility","visible");this.element.set("opacity",this.options.opacity||0);this.fireEvent("start",[this.element,this.clone])}.bind(this),onEnter:this.insert.bind(this),onCancel:this.end.bind(this),onComplete:this.end.bind(this)});this.clone.inject(this.element,"before");this.drag.start(b)},end:function(){this.drag.detach();this.element.set("opacity",this.opacity);if(this.effect){var b=this.element.getStyles("width","height"),d=this.clone,c=d.computePosition(this.element.getPosition(this.clone.getOffsetParent()));var a=function(){this.removeEvent("cancel",a);d.destroy()};this.effect.element=d;this.effect.start({top:c.top,left:c.left,width:b.width,height:b.height,opacity:0.25}).addEvent("cancel",a).chain(a)}else{this.clone.destroy()}this.reset()},reset:function(){this.idle=true;this.fireEvent("complete",this.element)},serialize:function(){var c=Array.link(arguments,{modifier:Type.isFunction,index:function(d){return d!=null}});var b=this.lists.map(function(d){return d.getChildren().map(c.modifier||function(f){return f.get("id")},this)},this);var a=c.index;if(this.lists.length==1){a=0}return(a||a===0)&&a>=0&&a<this.lists.length?b[a]:b}});Request.JSONP=new Class({Implements:[Chain,Events,Options],options:{onRequest:function(a){if(this.options.log&&window.console&&console.log){console.log("JSONP retrieving script with url:"+a)}},onError:function(a){if(this.options.log&&window.console&&console.warn){console.warn("JSONP "+a+" will fail in Internet Explorer, which enforces a 2083 bytes length limit on URIs")}},url:"",callbackKey:"callback",injectScript:document.head,data:"",link:"ignore",timeout:0,log:false},initialize:function(a){this.setOptions(a)},send:function(c){if(!Request.prototype.check.call(this,c)){return this}this.running=true;var d=typeOf(c);if(d=="string"||d=="element"){c={data:c}}c=Object.merge(this.options,c||{});var f=c.data;switch(typeOf(f)){case"element":f=document.id(f).toQueryString();break;case"object":case"hash":f=Object.toQueryString(f)}var b=this.index=Request.JSONP.counter++;var g=c.url+(c.url.test("\\?")?"&":"?")+(c.callbackKey)+"=Request.JSONP.request_map.request_"+b+(f?"&"+f:"");if(g.length>2083){this.fireEvent("error",g)}Request.JSONP.request_map["request_"+b]=function(){this.success(arguments,b)}.bind(this);var a=this.getScript(g).inject(c.injectScript);this.fireEvent("request",[g,a]);if(c.timeout){this.timeout.delay(c.timeout,this)}return this},getScript:function(a){if(!this.script){this.script=new Element("script",{type:"text/javascript",async:true,src:a})}return this.script},success:function(b,a){if(!this.running){return}this.clear().fireEvent("complete",b).fireEvent("success",b).callChain()},cancel:function(){if(this.running){this.clear().fireEvent("cancel")}return this},isRunning:function(){return !!this.running},clear:function(){this.running=false;if(this.script){this.script.destroy();this.script=null}return this},timeout:function(){if(this.running){this.running=false;this.fireEvent("timeout",[this.script.get("src"),this.script]).fireEvent("failure").cancel()}return this}});Request.JSONP.counter=0;Request.JSONP.request_map={};Request.Queue=new Class({Implements:[Options,Events],Binds:["attach","request","complete","cancel","success","failure","exception"],options:{stopOnFailure:true,autoAdvance:true,concurrent:1,requests:{}},initialize:function(a){var b;if(a){b=a.requests;delete a.requests}this.setOptions(a);this.requests={};this.queue=[];this.reqBinders={};if(b){this.addRequests(b)}},addRequest:function(a,b){this.requests[a]=b;this.attach(a,b);return this},addRequests:function(a){Object.each(a,function(c,b){this.addRequest(b,c)},this);return this},getName:function(a){return Object.keyOf(this.requests,a)},attach:function(a,b){if(b._groupSend){return this}["request","complete","cancel","success","failure","exception"].each(function(c){if(!this.reqBinders[a]){this.reqBinders[a]={}}this.reqBinders[a][c]=function(){this["on"+c.capitalize()].apply(this,[a,b].append(arguments))}.bind(this);b.addEvent(c,this.reqBinders[a][c])},this);b._groupSend=b.send;b.send=function(c){this.send(a,c);return b}.bind(this);return this},removeRequest:function(b){var a=typeOf(b)=="object"?this.getName(b):b;if(!a&&typeOf(a)!="string"){return this}b=this.requests[a];if(!b){return this}["request","complete","cancel","success","failure","exception"].each(function(c){b.removeEvent(c,this.reqBinders[a][c])},this);b.send=b._groupSend;delete b._groupSend;return this},getRunning:function(){return Object.filter(this.requests,function(a){return a.running})},isRunning:function(){return !!(Object.keys(this.getRunning()).length)},send:function(b,a){var c=function(){this.requests[b]._groupSend(a);this.queue.erase(c)}.bind(this);c.name=b;if(Object.keys(this.getRunning()).length>=this.options.concurrent||(this.error&&this.options.stopOnFailure)){this.queue.push(c)}else{c()}return this},hasNext:function(a){return(!a)?!!this.queue.length:!!this.queue.filter(function(b){return b.name==a}).length},resume:function(){this.error=false;(this.options.concurrent-Object.keys(this.getRunning()).length).times(this.runNext,this);return this},runNext:function(a){if(!this.queue.length){return this}if(!a){this.queue[0]()}else{var b;this.queue.each(function(c){if(!b&&c.name==a){b=true;c()}})}return this},runAll:function(){this.queue.each(function(a){a()});return this},clear:function(a){if(!a){this.queue.empty()}else{this.queue=this.queue.map(function(b){if(b.name!=a){return b}else{return false}}).filter(function(b){return b})}return this},cancel:function(a){this.requests[a].cancel();return this},onRequest:function(){this.fireEvent("request",arguments)},onComplete:function(){this.fireEvent("complete",arguments);if(!this.queue.length){this.fireEvent("end")}},onCancel:function(){if(this.options.autoAdvance&&!this.error){this.runNext()}this.fireEvent("cancel",arguments)},onSuccess:function(){if(this.options.autoAdvance&&!this.error){this.runNext()}this.fireEvent("success",arguments)},onFailure:function(){this.error=true;if(!this.options.stopOnFailure&&this.options.autoAdvance){this.runNext()}this.fireEvent("failure",arguments)},onException:function(){this.error=true;if(!this.options.stopOnFailure&&this.options.autoAdvance){this.runNext()}this.fireEvent("exception",arguments)}});Request.implement({options:{initialDelay:5000,delay:5000,limit:60000},startTimer:function(b){var a=function(){if(!this.running){this.send({data:b})}};this.lastDelay=this.options.initialDelay;this.timer=a.delay(this.lastDelay,this);this.completeCheck=function(c){clearTimeout(this.timer);this.lastDelay=(c)?this.options.delay:(this.lastDelay+this.options.delay).min(this.options.limit);this.timer=a.delay(this.lastDelay,this)};return this.addEvent("complete",this.completeCheck)},stopTimer:function(){clearTimeout(this.timer);return this.removeEvent("complete",this.completeCheck)}});var Asset={javascript:function(d,b){if(!b){b={}}var a=new Element("script",{src:d,type:"text/javascript"}),f=b.document||document,c=b.onload||b.onLoad;delete b.onload;delete b.onLoad;delete b.document;if(c){if(typeof a.onreadystatechange!="undefined"){a.addEvent("readystatechange",function(){if(["loaded","complete"].contains(this.readyState)){c.call(this)}})}else{a.addEvent("load",c)}}return a.set(b).inject(f.head)},css:function(d,a){if(!a){a={}}var b=new Element("link",{rel:"stylesheet",media:"screen",type:"text/css",href:d});var c=a.onload||a.onLoad,f=a.document||document;delete a.onload;delete a.onLoad;delete a.document;if(c){b.addEvent("load",c)}return b.set(a).inject(f.head)},image:function(c,b){if(!b){b={}}var d=new Image(),a=document.id(d)||new Element("img");["load","abort","error"].each(function(f){var h="on"+f,g="on"+f.capitalize(),i=b[h]||b[g]||function(){};delete b[g];delete b[h];d[h]=function(){if(!d){return}if(!a.parentNode){a.width=d.width;a.height=d.height}d=d.onload=d.onabort=d.onerror=null;i.delay(1,a,a);a.fireEvent(f,a,1)}});d.src=a.src=c;if(d&&d.complete){d.onload.delay(1)}return a.set(b)},images:function(c,b){c=Array.from(c);var d=function(){},a=0;b=Object.merge({onComplete:d,onProgress:d,onError:d,properties:{}},b);return new Elements(c.map(function(g,f){return Asset.image(g,Object.append(b.properties,{onload:function(){a++;b.onProgress.call(this,a,f,g);if(a==c.length){b.onComplete()}},onerror:function(){a++;b.onError.call(this,a,f,g);if(a==c.length){b.onComplete()}}}))}))}};(function(){var a=this.Color=new Type("Color",function(c,d){if(arguments.length>=3){d="rgb";c=Array.slice(arguments,0,3)}else{if(typeof c=="string"){if(c.match(/rgb/)){c=c.rgbToHex().hexToRgb(true)}else{if(c.match(/hsb/)){c=c.hsbToRgb()}else{c=c.hexToRgb(true)}}}}d=d||"rgb";switch(d){case"hsb":var b=c;c=c.hsbToRgb();c.hsb=b;break;case"hex":c=c.hexToRgb(true);break}c.rgb=c.slice(0,3);c.hsb=c.hsb||c.rgbToHsb();c.hex=c.rgbToHex();return Object.append(c,this)});a.implement({mix:function(){var b=Array.slice(arguments);var d=(typeOf(b.getLast())=="number")?b.pop():50;var c=this.slice();b.each(function(f){f=new a(f);for(var g=0;g<3;g++){c[g]=Math.round((c[g]/100*(100-d))+(f[g]/100*d))}});return new a(c,"rgb")},invert:function(){return new a(this.map(function(b){return 255-b}))},setHue:function(b){return new a([b,this.hsb[1],this.hsb[2]],"hsb")},setSaturation:function(b){return new a([this.hsb[0],b,this.hsb[2]],"hsb")},setBrightness:function(b){return new a([this.hsb[0],this.hsb[1],b],"hsb")}});this.$RGB=function(f,d,c){return new a([f,d,c],"rgb")};this.$HSB=function(f,d,c){return new a([f,d,c],"hsb")};this.$HEX=function(b){return new a(b,"hex")};Array.implement({rgbToHsb:function(){var c=this[0],d=this[1],l=this[2],i=0;var k=Math.max(c,d,l),g=Math.min(c,d,l);var m=k-g;var j=k/255,h=(k!=0)?m/k:0;if(h!=0){var f=(k-c)/m;var b=(k-d)/m;var n=(k-l)/m;if(c==k){i=n-b}else{if(d==k){i=2+f-n}else{i=4+b-f}}i/=6;if(i<0){i++}}return[Math.round(i*360),Math.round(h*100),Math.round(j*100)]},hsbToRgb:function(){var d=Math.round(this[2]/100*255);if(this[1]==0){return[d,d,d]}else{var b=this[0]%360;var h=b%60;var i=Math.round((this[2]*(100-this[1]))/10000*255);var g=Math.round((this[2]*(6000-this[1]*h))/600000*255);var c=Math.round((this[2]*(6000-this[1]*(60-h)))/600000*255);switch(Math.floor(b/60)){case 0:return[d,c,i];case 1:return[g,d,i];case 2:return[i,d,c];case 3:return[i,g,d];case 4:return[c,i,d];case 5:return[d,i,g]}}return false}});String.implement({rgbToHsb:function(){var b=this.match(/\d{1,3}/g);return(b)?b.rgbToHsb():null},hsbToRgb:function(){var b=this.match(/\d{1,3}/g);return(b)?b.hsbToRgb():null}})})();(function(){this.Group=new Class({initialize:function(){this.instances=Array.flatten(arguments)},addEvent:function(f,d){var h=this.instances,a=h.length,g=a,c=new Array(a),b=this;h.each(function(j,k){j.addEvent(f,function(){if(!c[k]){g--}c[k]=arguments;if(!g){d.call(b,h,j,c);g=a;c=new Array(a)}})})}})})();Hash.Cookie=new Class({Extends:Cookie,options:{autoSave:true},initialize:function(b,a){this.parent(b,a);this.load()},save:function(){var a=JSON.encode(this.hash);if(!a||a.length>4096){return false}if(a=="{}"){this.dispose()}else{this.write(a)}return true},load:function(){this.hash=new Hash(JSON.decode(this.read(),true));return this}});Hash.each(Hash.prototype,function(b,a){if(typeof b=="function"){Hash.Cookie.implement(a,function(){var c=b.apply(this.hash,arguments);if(this.options.autoSave){this.save()}return c})}});(function(){var a=this.Table=function(){this.length=0;var c=[],b=[];this.set=function(f,h){var d=c.indexOf(f);if(d==-1){var g=c.length;c[g]=f;b[g]=h;this.length++}else{b[d]=h}return this};this.get=function(f){var d=c.indexOf(f);return(d==-1)?null:b[d]};this.erase=function(f){var d=c.indexOf(f);if(d!=-1){this.length--;c.splice(d,1);return b.splice(d,1)[0]}return null};this.each=this.forEach=function(g,h){for(var f=0,d=this.length;f<d;f++){g.call(h,c[f],b[f],this)}}};if(this.Type){new Type("Table",a)}})();var HtmlTable=new Class({Implements:[Options,Events,Class.Occlude],options:{properties:{cellpadding:0,cellspacing:0,border:0},rows:[],headers:[],footers:[]},property:"HtmlTable",initialize:function(){var a=Array.link(arguments,{options:Type.isObject,table:Type.isElement,id:Type.isString});this.setOptions(a.options);if(!a.table&&a.id){a.table=document.id(a.id)}this.element=a.table||new Element("table",this.options.properties);if(this.occlude()){return this.occluded}this.build()},build:function(){this.element.store("HtmlTable",this);this.body=document.id(this.element.tBodies[0])||new Element("tbody").inject(this.element);$$(this.body.rows);if(this.options.headers.length){this.setHeaders(this.options.headers)}else{this.thead=document.id(this.element.tHead)}if(this.thead){this.head=this.getHead()}if(this.options.footers.length){this.setFooters(this.options.footers)}this.tfoot=document.id(this.element.tFoot);if(this.tfoot){this.foot=document.id(this.tfoot.rows[0])}this.options.rows.each(function(a){this.push(a)},this)},toElement:function(){return this.element},empty:function(){this.body.empty();return this},set:function(f,a){var d=(f=="headers")?"tHead":"tFoot",b=d.toLowerCase();this[b]=(document.id(this.element[d])||new Element(b).inject(this.element,"top")).empty();var c=this.push(a,{},this[b],f=="headers"?"th":"td");if(f=="headers"){this.head=this.getHead()}else{this.foot=this.getHead()}return c},getHead:function(){var a=this.thead.rows;return a.length>1?$$(a):a.length?document.id(a[0]):false},setHeaders:function(a){this.set("headers",a);return this},setFooters:function(a){this.set("footers",a);return this},update:function(d,f,a){var b=d.getChildren(a||"td"),c=b.length-1;f.each(function(j,g){var k=b[g]||new Element(a||"td").inject(d),i=(j?j.content:"")||j,h=typeOf(i);if(j&&j.properties){k.set(j.properties)}if(/(element(s?)|array|collection)/.test(h)){k.empty().adopt(i)}else{k.set("html",i)}if(g>c){b.push(k)}else{b[g]=k}});return{tr:d,tds:b}},push:function(f,c,d,a,b){if(typeOf(f)=="element"&&f.get("tag")=="tr"){f.inject(d||this.body,b);return{tr:f,tds:f.getChildren("td")}}return this.update(new Element("tr",c).inject(d||this.body,b),f,a)},pushMany:function(d,c,f,a,b){return d.map(function(g){return this.push(g,c,f,a,b)},this)}});["adopt","inject","wraps","grab","replaces","dispose"].each(function(a){HtmlTable.implement(a,function(){this.element[a].apply(this.element,arguments);return this})});HtmlTable=Class.refactor(HtmlTable,{options:{classZebra:"table-tr-odd",zebra:true,zebraOnlyVisibleRows:true},initialize:function(){this.previous.apply(this,arguments);if(this.occluded){return this.occluded}if(this.options.zebra){this.updateZebras()}},updateZebras:function(){var a=0;Array.each(this.body.rows,function(b){if(!this.options.zebraOnlyVisibleRows||b.isDisplayed()){this.zebra(b,a++)}},this)},setRowStyle:function(b,a){if(this.previous){this.previous(b,a)}this.zebra(b,a)},zebra:function(b,a){return b[((a%2)?"remove":"add")+"Class"](this.options.classZebra)},push:function(){var a=this.previous.apply(this,arguments);if(this.options.zebra){this.updateZebras()}return a}});HtmlTable=Class.refactor(HtmlTable,{options:{sortIndex:0,sortReverse:false,parsers:[],defaultParser:"string",classSortable:"table-sortable",classHeadSort:"table-th-sort",classHeadSortRev:"table-th-sort-rev",classNoSort:"table-th-nosort",classGroupHead:"table-tr-group-head",classGroup:"table-tr-group",classCellSort:"table-td-sort",classSortSpan:"table-th-sort-span",sortable:false,thSelector:"th"},initialize:function(){this.previous.apply(this,arguments);if(this.occluded){return this.occluded}this.sorted={index:null,dir:1};if(!this.bound){this.bound={}}this.bound.headClick=this.headClick.bind(this);this.sortSpans=new Elements();if(this.options.sortable){this.enableSort();if(this.options.sortIndex!=null){this.sort(this.options.sortIndex,this.options.sortReverse)}}},attachSorts:function(a){this.detachSorts();if(a!==false){this.element.addEvent("click:relay("+this.options.thSelector+")",this.bound.headClick)}},detachSorts:function(){this.element.removeEvents("click:relay("+this.options.thSelector+")")},setHeaders:function(){this.previous.apply(this,arguments);if(this.sortEnabled){this.setParsers()}},setParsers:function(){this.parsers=this.detectParsers()},detectParsers:function(){return this.head&&this.head.getElements(this.options.thSelector).flatten().map(this.detectParser,this)},detectParser:function(a,b){if(a.hasClass(this.options.classNoSort)||a.retrieve("htmltable-parser")){return a.retrieve("htmltable-parser")}var c=new Element("div");c.adopt(a.childNodes).inject(a);var g=new Element("span",{"class":this.options.classSortSpan}).inject(c,"top");this.sortSpans.push(g);var h=this.options.parsers[b],f=this.body.rows,d;switch(typeOf(h)){case"function":h={convert:h};d=true;break;case"string":h=h;d=true;break}if(!d){HtmlTable.ParserPriority.some(function(l){var p=HtmlTable.Parsers[l],n=p.match;if(!n){return false}for(var o=0,m=f.length;o<m;o++){var k=document.id(f[o].cells[b]),q=k?k.get("html").clean():"";if(q&&n.test(q)){h=p;return true}}})}if(!h){h=this.options.defaultParser}a.store("htmltable-parser",h);return h},headClick:function(b,a){if(!this.head||a.hasClass(this.options.classNoSort)){return}return this.sort(Array.indexOf(this.head.getElements(this.options.thSelector).flatten(),a)%this.body.rows[0].cells.length)},serialize:function(){var a=this.previous.apply(this,arguments)||{};if(this.options.sortable){a.sortIndex=this.sorted.index;a.sortReverse=this.sorted.reverse}return a},restore:function(a){if(this.options.sortable&&a.sortIndex){this.sort(a.sortIndex,a.sortReverse)}this.previous.apply(this,arguments)},setSortedState:function(b,a){if(a!=null){this.sorted.reverse=a}else{if(this.sorted.index==b){this.sorted.reverse=!this.sorted.reverse}else{this.sorted.reverse=this.sorted.index==null}}if(b!=null){this.sorted.index=b}},setHeadSort:function(a){var b=$$(!this.head.length?this.head.cells[this.sorted.index]:this.head.map(function(c){return c.getElements(this.options.thSelector)[this.sorted.index]},this).clean());if(!b.length){return}if(a){b.addClass(this.options.classHeadSort);if(this.sorted.reverse){b.addClass(this.options.classHeadSortRev)}else{b.removeClass(this.options.classHeadSortRev)}}else{b.removeClass(this.options.classHeadSort).removeClass(this.options.classHeadSortRev)}},setRowSort:function(b,a){var f=b.length,d=this.body,h,g;while(f){var i=b[--f],c=i.position,j=d.rows[c];if(j.disabled){continue}if(!a){h=this.setGroupSort(h,j,i);this.setRowStyle(j,f)}d.appendChild(j);for(g=0;g<f;g++){if(b[g].position>c){b[g].position--}}}},setRowStyle:function(b,a){this.previous(b,a);b.cells[this.sorted.index].addClass(this.options.classCellSort)},setGroupSort:function(b,c,a){if(b==a.value){c.removeClass(this.options.classGroupHead).addClass(this.options.classGroup)}else{c.removeClass(this.options.classGroup).addClass(this.options.classGroupHead)}return a.value},getParser:function(){var a=this.parsers[this.sorted.index];return typeOf(a)=="string"?HtmlTable.Parsers[a]:a},sort:function(c,b,f){if(!this.head){return}if(!f){this.clearSort();this.setSortedState(c,b);this.setHeadSort(true)}var g=this.getParser();if(!g){return}var a;if(!Browser.ie){a=this.body.getParent();this.body.dispose()}var d=this.parseData(g).sort(function(i,h){if(i.value===h.value){return 0}return i.value>h.value?1:-1});if(this.sorted.reverse==(g==HtmlTable.Parsers["input-checked"])){d.reverse(true)}this.setRowSort(d,f);if(a){a.grab(this.body)}this.fireEvent("stateChanged");return this.fireEvent("sort",[this.body,this.sorted.index])},parseData:function(a){return Array.map(this.body.rows,function(d,b){var c=a.convert.call(document.id(d.cells[this.sorted.index]));return{position:b,value:c}},this)},clearSort:function(){this.setHeadSort(false);this.body.getElements("td").removeClass(this.options.classCellSort)},reSort:function(){if(this.sortEnabled){this.sort.call(this,this.sorted.index,this.sorted.reverse)}return this},enableSort:function(){this.element.addClass(this.options.classSortable);this.attachSorts(true);this.setParsers();this.sortEnabled=true;return this},disableSort:function(){this.element.removeClass(this.options.classSortable);this.attachSorts(false);this.sortSpans.each(function(a){a.destroy()});this.sortSpans.empty();this.sortEnabled=false;return this}});HtmlTable.ParserPriority=["date","input-checked","input-value","float","number"];HtmlTable.Parsers={date:{match:/^\d{2}[-\/ ]\d{2}[-\/ ]\d{2,4}$/,convert:function(){var a=Date.parse(this.get("text").stripTags());return(typeOf(a)=="date")?a.format("db"):""},type:"date"},"input-checked":{match:/ type="(radio|checkbox)" /,convert:function(){return this.getElement("input").checked}},"input-value":{match:/<input/,convert:function(){return this.getElement("input").value}},number:{match:/^\d+[^\d.,]*$/,convert:function(){return this.get("text").stripTags().toInt()},number:true},numberLax:{match:/^[^\d]+\d+$/,convert:function(){return this.get("text").replace(/[^-?^0-9]/,"").stripTags().toInt()},number:true},"float":{match:/^[\d]+\.[\d]+/,convert:function(){return this.get("text").replace(/[^-?^\d.]/,"").stripTags().toFloat()},number:true},floatLax:{match:/^[^\d]+[\d]+\.[\d]+$/,convert:function(){return this.get("text").replace(/[^-?^\d.]/,"").stripTags()},number:true},string:{match:null,convert:function(){return this.get("text").stripTags().toLowerCase()}},title:{match:null,convert:function(){return this.title}}};HtmlTable.defineParsers=function(a){HtmlTable.Parsers=Object.append(HtmlTable.Parsers,a);for(var b in a){HtmlTable.ParserPriority.unshift(b)}};(function(){var a=this.Keyboard=new Class({Extends:Events,Implements:[Options],options:{defaultEventType:"keydown",active:false,manager:null,events:{},nonParsedEvents:["activate","deactivate","onactivate","ondeactivate","changed","onchanged"]},initialize:function(g){if(g&&g.manager){this._manager=g.manager;delete g.manager}this.setOptions(g);this._setup()},addEvent:function(i,h,g){return this.parent(a.parse(i,this.options.defaultEventType,this.options.nonParsedEvents),h,g)},removeEvent:function(h,g){return this.parent(a.parse(h,this.options.defaultEventType,this.options.nonParsedEvents),g)},toggleActive:function(){return this[this.isActive()?"deactivate":"activate"]()},activate:function(g){if(g){if(g.isActive()){return this}if(this._activeKB&&g!=this._activeKB){this.previous=this._activeKB;this.previous.fireEvent("deactivate")}this._activeKB=g.fireEvent("activate");a.manager.fireEvent("changed")}else{if(this._manager){this._manager.activate(this)}}return this},isActive:function(){return this._manager?(this._manager._activeKB==this):(a.manager==this)},deactivate:function(g){if(g){if(g===this._activeKB){this._activeKB=null;g.fireEvent("deactivate");a.manager.fireEvent("changed")}}else{if(this._manager){this._manager.deactivate(this)}}return this},relinquish:function(){if(this.isActive()&&this._manager&&this._manager.previous){this._manager.activate(this._manager.previous)}else{this.deactivate()}return this},manage:function(g){if(g._manager){g._manager.drop(g)}this._instances.push(g);g._manager=this;if(!this._activeKB){this.activate(g)}return this},drop:function(g){g.relinquish();this._instances.erase(g);if(this._activeKB==g){if(this.previous&&this._instances.contains(this.previous)){this.activate(this.previous)}else{this._activeKB=this._instances[0]}}return this},trace:function(){a.trace(this)},each:function(g){a.each(this,g)},_instances:[],_disable:function(g){if(this._activeKB==g){this._activeKB=null}},_setup:function(){this.addEvents(this.options.events);if(a.manager&&!this._manager){a.manager.manage(this)}if(this.options.active){this.activate()}else{this.relinquish()}},_handle:function(i,h){if(i.preventKeyboardPropagation){return}var g=!!this._manager;if(g&&this._activeKB){this._activeKB._handle(i,h);if(i.preventKeyboardPropagation){return}}this.fireEvent(h,i);if(!g&&this._activeKB){this._activeKB._handle(i,h)}}});var b={};var c=["shift","control","alt","meta"];var f=/^(?:shift|control|ctrl|alt|meta)$/;a.parse=function(i,h,l){if(l&&l.contains(i.toLowerCase())){return i}i=i.toLowerCase().replace(/^(keyup|keydown):/,function(n,m){h=m;return""});if(!b[i]){var g,k={};i.split("+").each(function(m){if(f.test(m)){k[m]=true}else{g=m}});k.control=k.control||k.ctrl;var j=[];c.each(function(m){if(k[m]){j.push(m)}});if(g){j.push(g)}b[i]=j.join("+")}return h+":keys("+b[i]+")"};a.each=function(g,h){var i=g||a.manager;while(i){h.run(i);i=i._activeKB}};a.stop=function(g){g.preventKeyboardPropagation=true};a.manager=new a({active:true});a.trace=function(g){g=g||a.manager;var h=window.console&&console.log;if(h){console.log("the following items have focus: ")}a.each(g,function(i){if(h){console.log(document.id(i.widget)||i.wiget||i)}})};var d=function(h){var g=[];c.each(function(i){if(h[i]){g.push(i)}});if(!f.test(h.key)){g.push(h.key)}a.manager._handle(h,h.type+":keys("+g.join("+")+")")};document.addEvents({keyup:d,keydown:d})})();Keyboard.prototype.options.nonParsedEvents.combine(["rebound","onrebound"]);Keyboard.implement({addShortcut:function(b,a){this._shortcuts=this._shortcuts||[];this._shortcutIndex=this._shortcutIndex||{};a.getKeyboard=Function.from(this);a.name=b;this._shortcutIndex[b]=a;this._shortcuts.push(a);if(a.keys){this.addEvent(a.keys,a.handler)}return this},addShortcuts:function(b){for(var a in b){this.addShortcut(a,b[a])}return this},removeShortcut:function(b){var a=this.getShortcut(b);if(a&&a.keys){this.removeEvent(a.keys,a.handler);delete this._shortcutIndex[b];this._shortcuts.erase(a)}return this},removeShortcuts:function(a){a.each(this.removeShortcut,this);return this},getShortcuts:function(){return this._shortcuts||[]},getShortcut:function(a){return(this._shortcutIndex||{})[a]}});Keyboard.rebind=function(b,a){Array.from(a).each(function(c){c.getKeyboard().removeEvent(c.keys,c.handler);c.getKeyboard().addEvent(b,c.handler);c.keys=b;c.getKeyboard().fireEvent("rebound")})};Keyboard.getActiveShortcuts=function(b){var a=[],c=[];Keyboard.each(b,[].push.bind(a));a.each(function(d){c.extend(d.getShortcuts())});return c};Keyboard.getShortcut=function(c,b,d){d=d||{};var a=d.many?[]:null,f=d.many?function(h){var g=h.getShortcut(c);if(g){a.push(g)}}:function(g){if(!a){a=g.getShortcut(c)}};Keyboard.each(b,f);return a};Keyboard.getShortcuts=function(b,a){return Keyboard.getShortcut(b,a,{many:true})};HtmlTable=Class.refactor(HtmlTable,{options:{useKeyboard:true,classRowSelected:"table-tr-selected",classRowHovered:"table-tr-hovered",classSelectable:"table-selectable",shiftForMultiSelect:true,allowMultiSelect:true,selectable:false,selectHiddenRows:false},initialize:function(){this.previous.apply(this,arguments);if(this.occluded){return this.occluded}this.selectedRows=new Elements();if(!this.bound){this.bound={}}this.bound.mouseleave=this.mouseleave.bind(this);this.bound.clickRow=this.clickRow.bind(this);this.bound.activateKeyboard=function(){if(this.keyboard&&this.selectEnabled){this.keyboard.activate()}}.bind(this);if(this.options.selectable){this.enableSelect()}},empty:function(){this.selectNone();return this.previous()},enableSelect:function(){this.selectEnabled=true;this.attachSelects();this.element.addClass(this.options.classSelectable);return this},disableSelect:function(){this.selectEnabled=false;this.attachSelects(false);this.element.removeClass(this.options.classSelectable);return this},push:function(){var a=this.previous.apply(this,arguments);this.updateSelects();return a},toggleRow:function(a){return this[(this.isSelected(a)?"de":"")+"selectRow"](a)},selectRow:function(b,a){if(this.isSelected(b)||(!a&&!this.body.getChildren().contains(b))){return}if(!this.options.allowMultiSelect){this.selectNone()}if(!this.isSelected(b)){this.selectedRows.push(b);b.addClass(this.options.classRowSelected);this.fireEvent("rowFocus",[b,this.selectedRows]);this.fireEvent("stateChanged")}this.focused=b;document.clearSelection();return this},isSelected:function(a){return this.selectedRows.contains(a)},getSelected:function(){return this.selectedRows},getSelected:function(){return this.selectedRows},serialize:function(){var a=this.previous.apply(this,arguments)||{};if(this.options.selectable){a.selectedRows=this.selectedRows.map(function(b){return Array.indexOf(this.body.rows,b)}.bind(this))}return a},restore:function(a){if(this.options.selectable&&a.selectedRows){a.selectedRows.each(function(b){this.selectRow(this.body.rows[b])}.bind(this))}this.previous.apply(this,arguments)},deselectRow:function(b,a){if(!this.isSelected(b)||(!a&&!this.body.getChildren().contains(b))){return}this.selectedRows=new Elements(Array.from(this.selectedRows).erase(b));b.removeClass(this.options.classRowSelected);this.fireEvent("rowUnfocus",[b,this.selectedRows]);this.fireEvent("stateChanged");return this},selectAll:function(a){if(!a&&!this.options.allowMultiSelect){return}this.selectRange(0,this.body.rows.length,a);return this},selectNone:function(){return this.selectAll(true)},selectRange:function(b,a,g){if(!this.options.allowMultiSelect&&!g){return}var h=g?"deselectRow":"selectRow",f=Array.clone(this.body.rows);if(typeOf(b)=="element"){b=f.indexOf(b)}if(typeOf(a)=="element"){a=f.indexOf(a)}a=a<f.length-1?a:f.length-1;if(a<b){var d=b;b=a;a=d}for(var c=b;c<=a;c++){if(this.options.selectHiddenRows||f[c].isDisplayed()){this[h](f[c],true)}}return this},deselectRange:function(b,a){this.selectRange(b,a,true)},getSelected:function(){return this.selectedRows},enterRow:function(a){if(this.hovered){this.hovered=this.leaveRow(this.hovered)}this.hovered=a.addClass(this.options.classRowHovered)},leaveRow:function(a){a.removeClass(this.options.classRowHovered)},updateSelects:function(){Array.each(this.body.rows,function(a){var b=a.retrieve("binders");if(!b&&!this.selectEnabled){return}if(!b){b={mouseenter:this.enterRow.pass([a],this),mouseleave:this.leaveRow.pass([a],this)};a.store("binders",b)}if(this.selectEnabled){a.addEvents(b)}else{a.removeEvents(b)}},this)},shiftFocus:function(b,a){if(!this.focused){return this.selectRow(this.body.rows[0],a)}var c=this.getRowByOffset(b,this.options.selectHiddenRows);if(c===null||this.focused==this.body.rows[c]){return this}this.toggleRow(this.body.rows[c],a)},clickRow:function(a,b){var c=(a.shift||a.meta||a.control)&&this.options.shiftForMultiSelect;if(!c&&!(a.rightClick&&this.isSelected(b)&&this.options.allowMultiSelect)){this.selectNone()}if(a.rightClick){this.selectRow(b)}else{this.toggleRow(b)}if(a.shift){this.selectRange(this.rangeStart||this.body.rows[0],b,this.rangeStart?!this.isSelected(b):true);this.focused=b}this.rangeStart=b},getRowByOffset:function(f,d){if(!this.focused){return 0}var b=Array.indexOf(this.body.rows,this.focused);if((b==0&&f<0)||(b==this.body.rows.length-1&&f>0)){return null}if(d){b+=f}else{var a=0,c=0;if(f>0){while(c<f&&b<this.body.rows.length-1){if(this.body.rows[++b].isDisplayed()){c++}}}else{while(c>f&&b>0){if(this.body.rows[--b].isDisplayed()){c--}}}}return b},attachSelects:function(d){d=d!=null?d:true;var h=d?"addEvents":"removeEvents";this.element[h]({mouseleave:this.bound.mouseleave,click:this.bound.activateKeyboard});this.body[h]({"click:relay(tr)":this.bound.clickRow,"contextmenu:relay(tr)":this.bound.clickRow});if(this.options.useKeyboard||this.keyboard){if(!this.keyboard){this.keyboard=new Keyboard()}if(!this.selectKeysDefined){this.selectKeysDefined=true;var g,f;var c=function(j){var i=function(k){clearTimeout(g);k.preventDefault();var l=this.body.rows[this.getRowByOffset(j,this.options.selectHiddenRows)];if(k.shift&&l&&this.isSelected(l)){this.deselectRow(this.focused);this.focused=l}else{if(l&&(!this.options.allowMultiSelect||!k.shift)){this.selectNone()}this.shiftFocus(j,k)}if(f){g=i.delay(100,this,k)}else{g=(function(){f=true;i(k)}).delay(400)}}.bind(this);return i}.bind(this);var b=function(){clearTimeout(g);f=false};this.keyboard.addEvents({"keydown:shift+up":c(-1),"keydown:shift+down":c(1),"keyup:shift+up":b,"keyup:shift+down":b,"keyup:up":b,"keyup:down":b});var a="";if(this.options.allowMultiSelect&&this.options.shiftForMultiSelect&&this.options.useKeyboard){a=" (Shift multi-selects)."}this.keyboard.addShortcuts({"Select Previous Row":{keys:"up",shortcut:"up arrow",handler:c(-1),description:"Select the previous row in the table."+a},"Select Next Row":{keys:"down",shortcut:"down arrow",handler:c(1),description:"Select the next row in the table."+a}})}this.keyboard[d?"activate":"deactivate"]()}this.updateSelects()},mouseleave:function(){if(this.hovered){this.leaveRow(this.hovered)}}});var Scroller=new Class({Implements:[Events,Options],options:{area:20,velocity:1,onChange:function(a,b){this.element.scrollTo(a,b)},fps:50},initialize:function(b,a){this.setOptions(a);this.element=document.id(b);this.docBody=document.id(this.element.getDocument().body);this.listener=(typeOf(this.element)!="element")?this.docBody:this.element;this.timer=null;this.bound={attach:this.attach.bind(this),detach:this.detach.bind(this),getCoords:this.getCoords.bind(this)}},start:function(){this.listener.addEvents({mouseover:this.bound.attach,mouseleave:this.bound.detach});return this},stop:function(){this.listener.removeEvents({mouseover:this.bound.attach,mouseleave:this.bound.detach});this.detach();this.timer=clearInterval(this.timer);return this},attach:function(){this.listener.addEvent("mousemove",this.bound.getCoords)},detach:function(){this.listener.removeEvent("mousemove",this.bound.getCoords);this.timer=clearInterval(this.timer)},getCoords:function(a){this.page=(this.listener.get("tag")=="body")?a.client:a.page;if(!this.timer){this.timer=this.scroll.periodical(Math.round(1000/this.options.fps),this)}},scroll:function(){var c=this.element.getSize(),a=this.element.getScroll(),i=this.element!=this.docBody?this.element.getOffsets():{x:0,y:0},d=this.element.getScrollSize(),h={x:0,y:0},f=this.options.area.top||this.options.area,b=this.options.area.bottom||this.options.area;for(var g in this.page){if(this.page[g]<(f+i[g])&&a[g]!=0){h[g]=(this.page[g]-f-i[g])*this.options.velocity}else{if(this.page[g]+b>(c[g]+i[g])&&a[g]+c[g]!=d[g]){h[g]=(this.page[g]-c[g]+b-i[g])*this.options.velocity}}h[g]=h[g].round()}if(h.y||h.x){this.fireEvent("change",[a.x+h.x,a.y+h.y])}}});(function(){var a=function(c,b){return(c)?(typeOf(c)=="function"?c(b):b.get(c)):""};this.Tips=new Class({Implements:[Events,Options],options:{onShow:function(){this.tip.setStyle("display","block")},onHide:function(){this.tip.setStyle("display","none")},title:"title",text:function(b){return b.get("rel")||b.get("href")},showDelay:100,hideDelay:100,className:"tip-wrap",offset:{x:16,y:16},windowPadding:{x:0,y:0},fixed:false,waiAria:true},initialize:function(){var b=Array.link(arguments,{options:Type.isObject,elements:function(c){return c!=null}});this.setOptions(b.options);if(b.elements){this.attach(b.elements)}this.container=new Element("div",{"class":"tip"});if(this.options.id){this.container.set("id",this.options.id);if(this.options.waiAria){this.attachWaiAria()}}},toElement:function(){if(this.tip){return this.tip}this.tip=new Element("div",{"class":this.options.className,styles:{position:"absolute",top:0,left:0}}).adopt(new Element("div",{"class":"tip-top"}),this.container,new Element("div",{"class":"tip-bottom"}));return this.tip},attachWaiAria:function(){var b=this.options.id;this.container.set("role","tooltip");if(!this.waiAria){this.waiAria={show:function(c){if(b){c.set("aria-describedby",b)}this.container.set("aria-hidden","false")},hide:function(c){if(b){c.erase("aria-describedby")}this.container.set("aria-hidden","true")}}}this.addEvents(this.waiAria)},detachWaiAria:function(){if(this.waiAria){this.container.erase("role");this.container.erase("aria-hidden");this.removeEvents(this.waiAria)}},attach:function(b){$$(b).each(function(d){var g=a(this.options.title,d),f=a(this.options.text,d);d.set("title","").store("tip:native",g).retrieve("tip:title",g);d.retrieve("tip:text",f);this.fireEvent("attach",[d]);var c=["enter","leave"];if(!this.options.fixed){c.push("move")}c.each(function(i){var h=d.retrieve("tip:"+i);if(!h){h=function(j){this["element"+i.capitalize()].apply(this,[j,d])}.bind(this)}d.store("tip:"+i,h).addEvent("mouse"+i,h)},this)},this);return this},detach:function(b){$$(b).each(function(d){["enter","leave","move"].each(function(f){d.removeEvent("mouse"+f,d.retrieve("tip:"+f)).eliminate("tip:"+f)});this.fireEvent("detach",[d]);if(this.options.title=="title"){var c=d.retrieve("tip:native");if(c){d.set("title",c)}}},this);return this},elementEnter:function(c,b){clearTimeout(this.timer);this.timer=(function(){this.container.empty();["title","text"].each(function(f){var d=b.retrieve("tip:"+f);var g=this["_"+f+"Element"]=new Element("div",{"class":"tip-"+f}).inject(this.container);if(d){this.fill(g,d)}},this);this.show(b);this.position((this.options.fixed)?{page:b.getPosition()}:c)}).delay(this.options.showDelay,this)},elementLeave:function(c,b){clearTimeout(this.timer);this.timer=this.hide.delay(this.options.hideDelay,this,b);this.fireForParent(c,b)},setTitle:function(b){if(this._titleElement){this._titleElement.empty();this.fill(this._titleElement,b)}return this},setText:function(b){if(this._textElement){this._textElement.empty();this.fill(this._textElement,b)}return this},fireForParent:function(c,b){b=b.getParent();if(!b||b==document.body){return}if(b.retrieve("tip:enter")){b.fireEvent("mouseenter",c)}else{this.fireForParent(c,b)}},elementMove:function(c,b){this.position(c)},position:function(g){if(!this.tip){document.id(this)}var c=window.getSize(),b=window.getScroll(),h={x:this.tip.offsetWidth,y:this.tip.offsetHeight},d={x:"left",y:"top"},f={y:false,x2:false,y2:false,x:false},i={};for(var j in d){i[d[j]]=g.page[j]+this.options.offset[j];if(i[d[j]]<0){f[j]=true}if((i[d[j]]+h[j]-b[j])>c[j]-this.options.windowPadding[j]){i[d[j]]=g.page[j]-this.options.offset[j]-h[j];f[j+"2"]=true}}this.fireEvent("bound",f);this.tip.setStyles(i)},fill:function(b,c){if(typeof c=="string"){b.set("html",c)}else{b.adopt(c)}},show:function(b){if(!this.tip){document.id(this)}if(!this.tip.getParent()){this.tip.inject(document.body)}this.fireEvent("show",[this.tip,b])},hide:function(b){if(!this.tip){document.id(this)}this.fireEvent("hide",[this.tip,b])}})})();(function(){var a={json:JSON.decode};Locale.Set.defineParser=function(b,c){a[b]=c};Locale.Set.from=function(d,c){if(instanceOf(d,Locale.Set)){return d}if(!c&&typeOf(d)=="string"){c="json"}if(a[c]){d=a[c](d)}var b=new Locale.Set;b.sets=d.sets||{};if(d.inherits){b.inherits.locales=Array.from(d.inherits.locales);b.inherits.sets=d.inherits.sets||{}}return b}})();Locale.define("ar","Date",{dateOrder:["date","month","year"],shortDate:"%d/%m/%Y",shortTime:"%H:%M"});Locale.define("ar","FormValidator",{required:"  .",minLength:"  {minLength}    (  {length} ).",maxLength:"     {maxLength}  (  {length} ).",integer:"      .        ( 1.25 )  .",numeric:'       ( "1"  "1.1"  "-1"  "-1.1").',digits:"          (,      )",alpha:"    (-)   .      .",alphanum:"    (-)   (0-9)    .      .",dateSuchAs:"     {date}",dateInFormatMDY:"    (, 31-12-1999)",email:"    .",url:"      http://www.example.com",currencyDollar:"   $ . , 100.00$",oneRequired:"        .",errorPrefix:": ",warningPrefix:": "});Locale.define("ca-CA","Date",{months:["Gener","Febrer","Mar","Abril","Maig","Juny","Juli","Agost","Setembre","Octubre","Novembre","Desembre"],months_abbr:["gen.","febr.","mar","abr.","maig","juny","jul.","ag.","set.","oct.","nov.","des."],days:["Diumenge","Dilluns","Dimarts","Dimecres","Dijous","Divendres","Dissabte"],days_abbr:["dg","dl","dt","dc","dj","dv","ds"],dateOrder:["date","month","year"],shortDate:"%d/%m/%Y",shortTime:"%H:%M",AM:"AM",PM:"PM",firstDayOfWeek:0,ordinal:"",lessThanMinuteAgo:"fa menys d`un minut",minuteAgo:"fa un minut",minutesAgo:"fa {delta} minuts",hourAgo:"fa un hora",hoursAgo:"fa unes {delta} hores",dayAgo:"fa un dia",daysAgo:"fa {delta} dies",lessThanMinuteUntil:"menys d`un minut des d`ara",minuteUntil:"un minut des d`ara",minutesUntil:"{delta} minuts des d`ara",hourUntil:"un hora des d`ara",hoursUntil:"unes {delta} hores des d`ara",dayUntil:"1 dia des d`ara",daysUntil:"{delta} dies des d`ara"});Locale.define("ca-CA","FormValidator",{required:"Aquest camp es obligatori.",minLength:"Per favor introdueix al menys {minLength} caracters (has introduit {length} caracters).",maxLength:"Per favor introdueix no mes de {maxLength} caracters (has introduit {length} caracters).",integer:"Per favor introdueix un nombre enter en aquest camp. Nombres amb decimals (p.e. 1,25) no estan permesos.",numeric:'Per favor introdueix sols valors numerics en aquest camp (p.e. "1" o "1,1" o "-1" o "-1,1").',digits:"Per favor usa sols numeros i puntuacio en aquest camp (per exemple, un nombre de telefon amb guions i punts no esta permes).",alpha:"Per favor utilitza lletres nomes (a-z) en aquest camp. No sadmiteixen espais ni altres caracters.",alphanum:"Per favor, utilitza nomes lletres (a-z) o numeros (0-9) en aquest camp. No sadmiteixen espais ni altres caracters.",dateSuchAs:"Per favor introdueix una data valida com {date}",dateInFormatMDY:'Per favor introdueix una data valida com DD/MM/YYYY (p.e. "31/12/1999")',email:'Per favor, introdueix una adrea de correu electronic valida. Per exemple, "fred@domain.com".',url:"Per favor introdueix una URL valida com http://www.example.com.",currencyDollar:"Per favor introdueix una quantitat valida de . Per exemple 100,00 .",oneRequired:"Per favor introdueix alguna cosa per al menys una daquestes entrades.",errorPrefix:"Error: ",warningPrefix:"Avis: ",noSpace:"No poden haver espais en aquesta entrada.",reqChkByNode:"No hi han elements seleccionats.",requiredChk:"Aquest camp es obligatori.",reqChkByName:"Per favor selecciona una {label}.",match:"Aquest camp necessita coincidir amb el camp {matchName}",startDate:"la data de inici",endDate:"la data de fi",currendDate:"la data actual",afterDate:"La data deu ser igual o posterior a {label}.",beforeDate:"La data deu ser igual o anterior a {label}.",startMonth:"Per favor selecciona un mes dorige",sameMonth:"Aquestes dos dates deuen estar dins del mateix mes - deus canviar una o altra."});(function(){var a=function(f,d,c,b){if(f==1){return d}else{if(f==2||f==3||f==4){return c}else{return b}}};Locale.define("cs-CZ","Date",{months:["Leden","nor","Bezen","Duben","Kvten","erven","ervenec","Srpen","Z","jen","Listopad","Prosinec"],months_abbr:["ledna","nora","bezna","dubna","kvtna","ervna","ervence","srpna","z","jna","listopadu","prosince"],days:["Nedle","Pondl","ter","Steda","tvrtek","Ptek","Sobota"],days_abbr:["ne","po","t","st","t","p","so"],dateOrder:["date","month","year"],shortDate:"%d.%m.%Y",shortTime:"%H:%M",AM:"dop.",PM:"odp.",firstDayOfWeek:1,ordinal:".",lessThanMinuteAgo:"ped chvl",minuteAgo:"piblin ped minutou",minutesAgo:function(b){return"ped {delta} "+a(b,"minutou","minutami","minutami")},hourAgo:"piblin ped hodinou",hoursAgo:function(b){return"ped {delta} "+a(b,"hodinou","hodinami","hodinami")},dayAgo:"ped dnem",daysAgo:function(b){return"ped {delta} "+a(b,"dnem","dny","dny")},weekAgo:"ped tdnem",weeksAgo:function(b){return"ped {delta} "+a(b,"tdnem","tdny","tdny")},monthAgo:"ped mscem",monthsAgo:function(b){return"ped {delta} "+a(b,"mscem","msci","msci")},yearAgo:"ped rokem",yearsAgo:function(b){return"ped {delta} "+a(b,"rokem","lety","lety")},lessThanMinuteUntil:"za chvli",minuteUntil:"piblin za minutu",minutesUntil:function(b){return"za {delta} "+a(b,"minutu","minuty","minut")},hourUntil:"piblin za hodinu",hoursUntil:function(b){return"za {delta} "+a(b,"hodinu","hodiny","hodin")},dayUntil:"za den",daysUntil:function(b){return"za {delta} "+a(b,"den","dny","dn")},weekUntil:"za tden",weeksUntil:function(b){return"za {delta} "+a(b,"tden","tdny","tdn")},monthUntil:"za msc",monthsUntil:function(b){return"za {delta} "+a(b,"msc","msce","msc")},yearUntil:"za rok",yearsUntil:function(b){return"za {delta} "+a(b,"rok","roky","let")}})})();Locale.define("cs-CZ","FormValidator",{required:"Tato poloka je povinn.",minLength:"Zadejte prosm alespo {minLength} znak (napsno {length} znak).",maxLength:"Zadejte prosm mn ne {maxLength} znak (npsno {length} znak).",integer:"Zadejte prosm cel slo. Desetinn sla (nap. 1.25) nejsou povolena.",numeric:'Zadejte jen seln hodnoty (tj. "1" nebo "1.1" nebo "-1" nebo "-1.1").',digits:"Zadejte prosm pouze sla a interpunkn znamnka(napklad telefonn slo s pomlkami nebo tekami je povoleno).",alpha:"Zadejte prosm pouze psmena (a-z). Mezery nebo jin znaky nejsou povoleny.",alphanum:"Zadejte prosm pouze psmena (a-z) nebo slice (0-9). Mezery nebo jin znaky nejsou povoleny.",dateSuchAs:"Zadejte prosm platn datum jako {date}",dateInFormatMDY:'Zadejte prosm platn datum jako MM / DD / RRRR (tj. "12/31/1999")',email:'Zadejte prosm platnou e-mailovou adresu. Napklad "fred@domain.com".',url:"Zadejte prosm platnou URL adresu jako http://www.example.com.",currencyDollar:"Zadejte prosm platnou stku. Napklad $100.00.",oneRequired:"Zadejte prosm alespo jednu hodnotu pro tyto poloky.",errorPrefix:"Chyba: ",warningPrefix:"Upozornn: ",noSpace:"V tto poloce nejsou povoleny mezery",reqChkByNode:"Nejsou vybrny dn poloky.",requiredChk:"Tato poloka je vyadovna.",reqChkByName:"Prosm vyberte {label}.",match:"Tato poloka se mus shodovat s polokou {matchName}",startDate:"datum zahjen",endDate:"datum ukonen",currendDate:"aktuln datum",afterDate:"Datum by mlo bt stejn nebo vt ne {label}.",beforeDate:"Datum by mlo bt stejn nebo men ne {label}.",startMonth:"Vyberte poten msc.",sameMonth:"Tyto dva datumy mus bt ve stejnm msci - zmte jeden z nich.",creditcard:"Zadan slo kreditn karty je neplatn. Prosm opravte ho. Bylo zadno {length} sel."});Locale.define("da-DK","Date",{months:["Januar","Februar","Marts","April","Maj","Juni","Juli","August","September","Oktober","November","December"],months_abbr:["jan.","feb.","mar.","apr.","maj.","jun.","jul.","aug.","sep.","okt.","nov.","dec."],days:["Sndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lrdag"],days_abbr:["sn","man","tir","ons","tor","fre","lr"],dateOrder:["date","month","year"],shortDate:"%d-%m-%Y",shortTime:"%H:%M",AM:"AM",PM:"PM",firstDayOfWeek:1,ordinal:".",lessThanMinuteAgo:"mindre end et minut siden",minuteAgo:"omkring et minut siden",minutesAgo:"{delta} minutter siden",hourAgo:"omkring en time siden",hoursAgo:"omkring {delta} timer siden",dayAgo:"1 dag siden",daysAgo:"{delta} dage siden",weekAgo:"1 uge siden",weeksAgo:"{delta} uger siden",monthAgo:"1 mned siden",monthsAgo:"{delta} mneder siden",yearAgo:"1 r siden",yearsAgo:"{delta} r siden",lessThanMinuteUntil:"mindre end et minut fra nu",minuteUntil:"omkring et minut fra nu",minutesUntil:"{delta} minutter fra nu",hourUntil:"omkring en time fra nu",hoursUntil:"omkring {delta} timer fra nu",dayUntil:"1 dag fra nu",daysUntil:"{delta} dage fra nu",weekUntil:"1 uge fra nu",weeksUntil:"{delta} uger fra nu",monthUntil:"1 mned fra nu",monthsUntil:"{delta} mneder fra nu",yearUntil:"1 r fra nu",yearsUntil:"{delta} r fra nu"});Locale.define("da-DK","FormValidator",{required:"Feltet skal udfyldes.",minLength:"Skriv mindst {minLength} tegn (du skrev {length} tegn).",maxLength:"Skriv maksimalt {maxLength} tegn (du skrev {length} tegn).",integer:"Skriv et tal i dette felt. Decimal tal (f.eks. 1.25) er ikke tilladt.",numeric:'Skriv kun tal i dette felt (i.e. "1" eller "1.1" eller "-1" eller "-1.1").',digits:"Skriv kun tal og tegnstning i dette felt (eksempel, et telefon nummer med bindestreg eller punktum er tilladt).",alpha:"Skriv kun bogstaver (a-z) i dette felt. Mellemrum og andre tegn er ikke tilladt.",alphanum:"Skriv kun bogstaver (a-z) eller tal (0-9) i dette felt. Mellemrum og andre tegn er ikke tilladt.",dateSuchAs:"Skriv en gyldig dato som {date}",dateInFormatMDY:'Skriv dato i formatet DD-MM-YYYY (f.eks. "31-12-1999")',email:'Skriv en gyldig e-mail adresse. F.eks "fred@domain.com".',url:'Skriv en gyldig URL adresse. F.eks "http://www.example.com".',currencyDollar:"Skriv et gldigt belb. F.eks Kr.100.00 .",oneRequired:"Et eller flere af felterne i denne formular skal udfyldes.",errorPrefix:"Fejl: ",warningPrefix:"Advarsel: ",noSpace:"Der m ikke benyttes mellemrum i dette felt.",reqChkByNode:"Foretag et valg.",requiredChk:"Dette felt skal udfyldes.",reqChkByName:"Vlg en {label}.",match:"Dette felt skal matche {matchName} feltet",startDate:"start dato",endDate:"slut dato",currendDate:"dags dato",afterDate:"Datoen skal vre strre end eller lig med {label}.",beforeDate:"Datoen skal vre mindre end eller lig med {label}.",startMonth:"Vlg en start mned",sameMonth:"De valgte datoer skal vre i samme mned - skift en af dem."});Locale.define("de-DE","Date",{months:["Januar","Februar","Mrz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],months_abbr:["Jan","Feb","Mr","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],days_abbr:["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."],dateOrder:["date","month","year"],shortDate:"%d.%m.%Y",shortTime:"%H:%M",AM:"vormittags",PM:"nachmittags",firstDayOfWeek:1,ordinal:".",lessThanMinuteAgo:"vor weniger als einer Minute",minuteAgo:"vor einer Minute",minutesAgo:"vor {delta} Minuten",hourAgo:"vor einer Stunde",hoursAgo:"vor {delta} Stunden",dayAgo:"vor einem Tag",daysAgo:"vor {delta} Tagen",weekAgo:"vor einer Woche",weeksAgo:"vor {delta} Wochen",monthAgo:"vor einem Monat",monthsAgo:"vor {delta} Monaten",yearAgo:"vor einem Jahr",yearsAgo:"vor {delta} Jahren",lessThanMinuteUntil:"in weniger als einer Minute",minuteUntil:"in einer Minute",minutesUntil:"in {delta} Minuten",hourUntil:"in ca. einer Stunde",hoursUntil:"in ca. {delta} Stunden",dayUntil:"in einem Tag",daysUntil:"in {delta} Tagen",weekUntil:"in einer Woche",weeksUntil:"in {delta} Wochen",monthUntil:"in einem Monat",monthsUntil:"in {delta} Monaten",yearUntil:"in einem Jahr",yearsUntil:"in {delta} Jahren"});Locale.define("de-CH").inherit("de-DE","Date");Locale.define("de-CH","FormValidator",{required:"Dieses Feld ist obligatorisch.",minLength:"Geben Sie bitte mindestens {minLength} Zeichen ein (Sie haben {length} Zeichen eingegeben).",maxLength:"Bitte geben Sie nicht mehr als {maxLength} Zeichen ein (Sie haben {length} Zeichen eingegeben).",integer:"Geben Sie bitte eine ganze Zahl ein. Dezimalzahlen (z.B. 1.25) sind nicht erlaubt.",numeric:"Geben Sie bitte nur Zahlenwerte in dieses Eingabefeld ein (z.B. &quot;1&quot;, &quot;1.1&quot;, &quot;-1&quot; oder &quot;-1.1&quot;).",digits:"Benutzen Sie bitte nur Zahlen und Satzzeichen in diesem Eingabefeld (erlaubt ist z.B. eine Telefonnummer mit Bindestrichen und Punkten).",alpha:"Benutzen Sie bitte nur Buchstaben (a-z) in diesem Feld. Leerzeichen und andere Zeichen sind nicht erlaubt.",alphanum:"Benutzen Sie bitte nur Buchstaben (a-z) und Zahlen (0-9) in diesem Eingabefeld. Leerzeichen und andere Zeichen sind nicht erlaubt.",dateSuchAs:"Geben Sie bitte ein g&uuml;ltiges Datum ein. Wie zum Beispiel {date}",dateInFormatMDY:"Geben Sie bitte ein g&uuml;ltiges Datum ein. Wie zum Beispiel TT.MM.JJJJ (z.B. &quot;31.12.1999&quot;)",email:"Geben Sie bitte eine g&uuml;ltige E-Mail Adresse ein. Wie zum Beispiel &quot;maria@bernasconi.ch&quot;.",url:"Geben Sie bitte eine g&uuml;ltige URL ein. Wie zum Beispiel http://www.example.com.",currencyDollar:"Geben Sie bitte einen g&uuml;ltigen Betrag in Schweizer Franken ein. Wie zum Beispiel 100.00 CHF .",oneRequired:"Machen Sie f&uuml;r mindestens eines der Eingabefelder einen Eintrag.",errorPrefix:"Fehler: ",warningPrefix:"Warnung: ",noSpace:"In diesem Eingabefeld darf kein Leerzeichen sein.",reqChkByNode:"Es wurden keine Elemente gew&auml;hlt.",requiredChk:"Dieses Feld ist obligatorisch.",reqChkByName:"Bitte w&auml;hlen Sie ein {label}.",match:"Dieses Eingabefeld muss mit dem Feld {matchName} &uuml;bereinstimmen.",startDate:"Das Anfangsdatum",endDate:"Das Enddatum",currendDate:"Das aktuelle Datum",afterDate:"Das Datum sollte zur gleichen Zeit oder sp&auml;ter sein {label}.",beforeDate:"Das Datum sollte zur gleichen Zeit oder fr&uuml;her sein {label}.",startMonth:"W&auml;hlen Sie bitte einen Anfangsmonat",sameMonth:"Diese zwei Datumsangaben m&uuml;ssen im selben Monat sein - Sie m&uuml;ssen eine von beiden ver&auml;ndern.",creditcard:"Die eingegebene Kreditkartennummer ist ung&uuml;ltig. Bitte &uuml;berpr&uuml;fen Sie diese und versuchen Sie es erneut. {length} Zahlen eingegeben."});Locale.define("de-DE","FormValidator",{required:"Dieses Eingabefeld muss ausgefllt werden.",minLength:"Geben Sie bitte mindestens {minLength} Zeichen ein (Sie haben nur {length} Zeichen eingegeben).",maxLength:"Geben Sie bitte nicht mehr als {maxLength} Zeichen ein (Sie haben {length} Zeichen eingegeben).",integer:'Geben Sie in diesem Eingabefeld bitte eine ganze Zahl ein. Dezimalzahlen (z.B. "1.25") sind nicht erlaubt.',numeric:'Geben Sie in diesem Eingabefeld bitte nur Zahlenwerte (z.B. "1", "1.1", "-1" oder "-1.1") ein.',digits:"Geben Sie in diesem Eingabefeld bitte nur Zahlen und Satzzeichen ein (z.B. eine Telefonnummer mit Bindestrichen und Punkten ist erlaubt).",alpha:"Geben Sie in diesem Eingabefeld bitte nur Buchstaben (a-z) ein. Leerzeichen und andere Zeichen sind nicht erlaubt.",alphanum:"Geben Sie in diesem Eingabefeld bitte nur Buchstaben (a-z) und Zahlen (0-9) ein. Leerzeichen oder andere Zeichen sind nicht erlaubt.",dateSuchAs:'Geben Sie bitte ein gltiges Datum ein (z.B. "{date}").',dateInFormatMDY:'Geben Sie bitte ein gltiges Datum im Format TT.MM.JJJJ ein (z.B. "31.12.1999").',email:'Geben Sie bitte eine gltige E-Mail-Adresse ein (z.B. "max@mustermann.de").',url:'Geben Sie bitte eine gltige URL ein (z.B. "http://www.example.com").',currencyDollar:"Geben Sie bitte einen gltigen Betrag in EURO ein (z.B. 100.00).",oneRequired:"Bitte fllen Sie mindestens ein Eingabefeld aus.",errorPrefix:"Fehler: ",warningPrefix:"Warnung: ",noSpace:"Es darf kein Leerzeichen in diesem Eingabefeld sein.",reqChkByNode:"Es wurden keine Elemente gewhlt.",requiredChk:"Dieses Feld muss ausgefllt werden.",reqChkByName:"Bitte whlen Sie ein {label}.",match:"Dieses Eingabefeld muss mit dem {matchName} Eingabefeld bereinstimmen.",startDate:"Das Anfangsdatum",endDate:"Das Enddatum",currendDate:"Das aktuelle Datum",afterDate:"Das Datum sollte zur gleichen Zeit oder spter sein als {label}.",beforeDate:"Das Datum sollte zur gleichen Zeit oder frher sein als {label}.",startMonth:"Whlen Sie bitte einen Anfangsmonat",sameMonth:"Diese zwei Datumsangaben mssen im selben Monat sein - Sie mssen eines von beiden verndern.",creditcard:"Die eingegebene Kreditkartennummer ist ungltig. Bitte berprfen Sie diese und versuchen Sie es erneut. {length} Zahlen eingegeben."});Locale.define("EU","Number",{decimal:",",group:".",currency:{prefix:" "}});Locale.define("de-DE").inherit("EU","Number");Locale.define("en-GB","Date",{dateOrder:["date","month","year"],shortDate:"%d/%m/%Y",shortTime:"%H:%M"}).inherit("en-US","Date");Locale.define("es-ES","Date",{months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],months_abbr:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],days:["Domingo","Lunes","Martes","Mircoles","Jueves","Viernes","Sbado"],days_abbr:["dom","lun","mar","mi","juv","vie","sb"],dateOrder:["date","month","year"],shortDate:"%d/%m/%Y",shortTime:"%H:%M",AM:"AM",PM:"PM",firstDayOfWeek:1,ordinal:"",lessThanMinuteAgo:"hace menos de un minuto",minuteAgo:"hace un minuto",minutesAgo:"hace {delta} minutos",hourAgo:"hace una hora",hoursAgo:"hace unas {delta} horas",dayAgo:"hace un da",daysAgo:"hace {delta} das",weekAgo:"hace una semana",weeksAgo:"hace unas {delta} semanas",monthAgo:"hace un mes",monthsAgo:"hace {delta} meses",yearAgo:"hace un ao",yearsAgo:"hace {delta} aos",lessThanMinuteUntil:"menos de un minuto desde ahora",minuteUntil:"un minuto desde ahora",minutesUntil:"{delta} minutos desde ahora",hourUntil:"una hora desde ahora",hoursUntil:"unas {delta} horas desde ahora",dayUntil:"un da desde ahora",daysUntil:"{delta} das desde ahora",weekUntil:"una semana desde ahora",weeksUntil:"unas {delta} semanas desde ahora",monthUntil:"un mes desde ahora",monthsUntil:"{delta} meses desde ahora",yearUntil:"un ao desde ahora",yearsUntil:"{delta} aos desde ahora"});Locale.define("es-AR").inherit("es-ES","Date");Locale.define("es-AR","FormValidator",{required:"Este campo es obligatorio.",minLength:"Por favor ingrese al menos {minLength} caracteres (ha ingresado {length} caracteres).",maxLength:"Por favor no ingrese ms de {maxLength} caracteres (ha ingresado {length} caracteres).",integer:"Por favor ingrese un nmero entero en este campo. Nmeros con decimales (p.e. 1,25) no se permiten.",numeric:'Por favor ingrese solo valores numricos en este campo (p.e. "1" o "1,1" o "-1" o "-1,1").',digits:"Por favor use slo nmeros y puntuacin en este campo (por ejemplo, un nmero de telfono con guiones y/o puntos no est permitido).",alpha:"Por favor use slo letras (a-z) en este campo. No se permiten espacios ni otros caracteres.",alphanum:"Por favor, usa slo letras (a-z) o nmeros (0-9) en este campo. No se permiten espacios u otros caracteres.",dateSuchAs:"Por favor ingrese una fecha vlida como {date}",dateInFormatMDY:'Por favor ingrese una fecha vlida, utulizando el formato DD/MM/YYYY (p.e. "31/12/1999")',email:'Por favor, ingrese una direccin de e-mail vlida. Por ejemplo, "fred@dominio.com".',url:"Por favor ingrese una URL vlida como http://www.example.com.",currencyDollar:"Por favor ingrese una cantidad vlida de pesos. Por ejemplo $100,00 .",oneRequired:"Por favor ingrese algo para por lo menos una de estas entradas.",errorPrefix:"Error: ",warningPrefix:"Advertencia: ",noSpace:"No se permiten espacios en este campo.",reqChkByNode:"No hay elementos seleccionados.",requiredChk:"Este campo es obligatorio.",reqChkByName:"Por favor selecciona una {label}.",match:"Este campo necesita coincidir con el campo {matchName}",startDate:"la fecha de inicio",endDate:"la fecha de fin",currendDate:"la fecha actual",afterDate:"La fecha debe ser igual o posterior a {label}.",beforeDate:"La fecha debe ser igual o anterior a {label}.",startMonth:"Por favor selecciona un mes de origen",sameMonth:"Estas dos fechas deben estar en el mismo mes - debes cambiar una u otra."});Locale.define("es-ES","FormValidator",{required:"Este campo es obligatorio.",minLength:"Por favor introduce al menos {minLength} caracteres (has introducido {length} caracteres).",maxLength:"Por favor introduce no m&aacute;s de {maxLength} caracteres (has introducido {length} caracteres).",integer:"Por favor introduce un n&uacute;mero entero en este campo. N&uacute;meros con decimales (p.e. 1,25) no se permiten.",numeric:'Por favor introduce solo valores num&eacute;ricos en este campo (p.e. "1" o "1,1" o "-1" o "-1,1").',digits:"Por favor usa solo n&uacute;meros y puntuaci&oacute;n en este campo (por ejemplo, un n&uacute;mero de tel&eacute;fono con guiones y puntos no esta permitido).",alpha:"Por favor usa letras solo (a-z) en este campo. No se admiten espacios ni otros caracteres.",alphanum:"Por favor, usa solo letras (a-z) o n&uacute;meros (0-9) en este campo. No se admiten espacios ni otros caracteres.",dateSuchAs:"Por favor introduce una fecha v&aacute;lida como {date}",dateInFormatMDY:'Por favor introduce una fecha v&aacute;lida como DD/MM/YYYY (p.e. "31/12/1999")',email:'Por favor, introduce una direcci&oacute;n de email v&aacute;lida. Por ejemplo, "fred@domain.com".',url:"Por favor introduce una URL v&aacute;lida como http://www.example.com.",currencyDollar:"Por favor introduce una cantidad v&aacute;lida de . Por ejemplo 100,00 .",oneRequired:"Por favor introduce algo para por lo menos una de estas entradas.",errorPrefix:"Error: ",warningPrefix:"Aviso: ",noSpace:"No pueden haber espacios en esta entrada.",reqChkByNode:"No hay elementos seleccionados.",requiredChk:"Este campo es obligatorio.",reqChkByName:"Por favor selecciona una {label}.",match:"Este campo necesita coincidir con el campo {matchName}",startDate:"la fecha de inicio",endDate:"la fecha de fin",currendDate:"la fecha actual",afterDate:"La fecha debe ser igual o posterior a {label}.",beforeDate:"La fecha debe ser igual o anterior a {label}.",startMonth:"Por favor selecciona un mes de origen",sameMonth:"Estas dos fechas deben estar en el mismo mes - debes cambiar una u otra."});Locale.define("et-EE","Date",{months:["jaanuar","veebruar","mrts","aprill","mai","juuni","juuli","august","september","oktoober","november","detsember"],months_abbr:["jaan","veebr","mrts","apr","mai","juuni","juuli","aug","sept","okt","nov","dets"],days:["phapev","esmaspev","teisipev","kolmapev","neljapev","reede","laupev"],days_abbr:["phap","esmasp","teisip","kolmap","neljap","reede","laup"],dateOrder:["month","date","year"],shortDate:"%m.%d.%Y",shortTime:"%H:%M",AM:"AM",PM:"PM",firstDayOfWeek:1,ordinal:"",lessThanMinuteAgo:"vhem kui minut aega tagasi",minuteAgo:"umbes minut aega tagasi",minutesAgo:"{delta} minutit tagasi",hourAgo:"umbes tund aega tagasi",hoursAgo:"umbes {delta} tundi tagasi",dayAgo:"1 pev tagasi",daysAgo:"{delta} peva tagasi",weekAgo:"1 ndal tagasi",weeksAgo:"{delta} ndalat tagasi",monthAgo:"1 kuu tagasi",monthsAgo:"{delta} kuud tagasi",yearAgo:"1 aasta tagasi",yearsAgo:"{delta} aastat tagasi",lessThanMinuteUntil:"vhem kui minuti aja prast",minuteUntil:"umbes minuti aja prast",minutesUntil:"{delta} minuti prast",hourUntil:"umbes tunni aja prast",hoursUntil:"umbes {delta} tunni prast",dayUntil:"1 peva prast",daysUntil:"{delta} peva prast",weekUntil:"1 ndala prast",weeksUntil:"{delta} ndala prast",monthUntil:"1 kuu prast",monthsUntil:"{delta} kuu prast",yearUntil:"1 aasta prast",yearsUntil:"{delta} aasta prast"});Locale.define("et-EE","FormValidator",{required:"Vli peab olema tidetud.",minLength:"Palun sisestage vhemalt {minLength} thte (te sisestasite {length} thte).",maxLength:"Palun rge sisestage rohkem kui {maxLength} thte (te sisestasite {length} thte).",integer:"Palun sisestage vljale tisarv. Kmnendarvud (niteks 1.25) ei ole lubatud.",numeric:'Palun sisestage ainult numbreid vljale (niteks "1", "1.1", "-1" vi "-1.1").',digits:"Palun kasutage ainult numbreid ja kirjavahemrke (telefoninumbri sisestamisel on lubatud kasutada kriipse ja punkte).",alpha:"Palun kasutage ainult thti (a-z). Thikud ja teised smbolid on keelatud.",alphanum:"Palun kasutage ainult thti (a-z) vi numbreid (0-9). Thikud ja teised smbolid on keelatud.",dateSuchAs:"Palun sisestage kehtiv kuupev kujul {date}",dateInFormatMDY:'Palun sisestage kehtiv kuupev kujul MM.DD.YYYY (niteks: "12.31.1999").',email:'Palun sisestage kehtiv e-maili aadress (niteks: "fred@domain.com").',url:"Palun sisestage kehtiv URL (niteks: http://www.example.com).",currencyDollar:"Palun sisestage kehtiv $ summa (niteks: $100.00).",oneRequired:"Palun sisestage midagi vhemalt hele antud vljadest.",errorPrefix:"Viga: ",warningPrefix:"Hoiatus: ",noSpace:"Vli ei tohi sisaldada thikuid.",reqChkByNode:"kski vljadest pole valitud.",requiredChk:"Vlja titmine on vajalik.",reqChkByName:"Palun valige ks {label}.",match:"Vli peab sobima {matchName} vljaga",startDate:"algkuupev",endDate:"lppkuupev",currendDate:"praegune kuupev",afterDate:"Kuupev peab olema vrdne vi prast {label}.",beforeDate:"Kuupev peab olema vrdne vi enne {label}.",startMonth:"Palun valige algkuupev.",sameMonth:"Antud kaks kuupeva peavad olema samas kuus - peate muutma hte kuupeva."});Locale.define("fa","Date",{months:["","","","","","","","","","","",""],months_abbr:["1","2","3","4","5","6","7","8","9","10","11","12"],days:["",""," ","","","",""],days_abbr:["","","","","","",""],dateOrder:["month","date","year"],shortDate:"%m/%d/%Y",shortTime:"%I:%M%p",AM:".",PM:".",ordinal:"",lessThanMinuteAgo:"    ",minuteAgo:"   ",minutesAgo:"{delta}  ",hourAgo:"   ",hoursAgo:" {delta}  ",dayAgo:"1  ",daysAgo:"{delta}  ",weekAgo:"1  ",weeksAgo:"{delta}  ",monthAgo:"1  ",monthsAgo:"{delta}  ",yearAgo:"1  ",yearsAgo:"{delta}  ",lessThanMinuteUntil:"     ",minuteUntil:"    ",minutesUntil:"{delta}   ",hourUntil:"    ",hoursUntil:" {delta}   ",dayUntil:"1   ",daysUntil:"{delta}   ",weekUntil:"1   ",weeksUntil:"{delta}   ",monthUntil:"1   ",monthsUntil:"{delta}   ",yearUntil:"1   ",yearsUntil:"{delta}   "});Locale.define("fa","FormValidator",{required:"   .",minLength:"   {minLength}    ({length}    ).",maxLength:"  {maxLength}    ( {length}    ).",integer:"     .   ( 1.25)  .",numeric:'      ( "1"  "1.1"  "1-"  "1.1-").',digits:"           (           ).",alpha:"         .      .",alphanum:"           .      .",dateSuchAs:"     {date}  .",dateInFormatMDY:'      MM/DD/YYYY   ( "12/31/1999").',email:'      .   "fred@domain.com".',url:"  URL   http://www.example.com  .",currencyDollar:"          100.00$ .",oneRequired:"       .",errorPrefix:": ",warningPrefix:": ",noSpace:"       .",reqChkByNode:"   .",requiredChk:"   .",reqChkByName:"  {label}   .",match:"     {matchName}   .",startDate:" ",endDate:" ",currendDate:" ",afterDate:"      {label} ",beforeDate:"      {label} ",startMonth:"     ",sameMonth:"        -         .",creditcard:"        .         . {length}    ."});Locale.define("fi-FI","Date",{months:["tammikuu","helmikuu","maaliskuu","huhtikuu","toukokuu","keskuu","heinkuu","elokuu","syyskuu","lokakuu","marraskuu","joulukuu"],months_abbr:["tammik.","helmik.","maalisk.","huhtik.","toukok.","kesk.","heink.","elok.","syysk.","lokak.","marrask.","jouluk."],days:["sunnuntai","maanantai","tiistai","keskiviikko","torstai","perjantai","lauantai"],days_abbr:["su","ma","ti","ke","to","pe","la"],dateOrder:["date","month","year"],shortDate:"%d.%m.%Y",shortTime:"%H:%M",AM:"AM",PM:"PM",firstDayOfWeek:1,ordinal:".",lessThanMinuteAgo:"vajaa minuutti sitten",minuteAgo:"noin minuutti sitten",minutesAgo:"{delta} minuuttia sitten",hourAgo:"noin tunti sitten",hoursAgo:"noin {delta} tuntia sitten",dayAgo:"piv sitten",daysAgo:"{delta} piv sitten",weekAgo:"viikko sitten",weeksAgo:"{delta} viikkoa sitten",monthAgo:"kuukausi sitten",monthsAgo:"{delta} kuukautta sitten",yearAgo:"vuosi sitten",yearsAgo:"{delta} vuotta sitten",lessThanMinuteUntil:"vajaan minuutin kuluttua",minuteUntil:"noin minuutin kuluttua",minutesUntil:"{delta} minuutin kuluttua",hourUntil:"noin tunnin kuluttua",hoursUntil:"noin {delta} tunnin kuluttua",dayUntil:"pivn kuluttua",daysUntil:"{delta} pivn kuluttua",weekUntil:"viikon kuluttua",weeksUntil:"{delta} viikon kuluttua",monthUntil:"kuukauden kuluttua",monthsUntil:"{delta} kuukauden kuluttua",yearUntil:"vuoden kuluttua",yearsUntil:"{delta} vuoden kuluttua"});Locale.define("fi-FI","FormValidator",{required:"Tm kentt on pakollinen.",minLength:"Ole hyv ja anna vhintn {minLength} merkki (annoit {length} merkki).",maxLength:"l anna enemp kuin {maxLength} merkki (annoit {length} merkki).",integer:"Ole hyv ja anna kokonaisluku. Luvut, joissa on desimaaleja (esim. 1.25) eivt ole sallittuja.",numeric:'Anna thn kenttn lukuarvo (kuten "1" tai "1.1" tai "-1" tai "-1.1").',digits:"Kyt pelkstn numeroita ja vlimerkkej tss kentss (sytteet, kuten esim. puhelinnumero, jossa on vliviivoja, pilkkuja tai pisteit, kelpaa).",alpha:"Anna thn kenttn vain kirjaimia (a-z). Vlilynnit tai muut merkit eivt ole sallittuja.",alphanum:"Anna thn kenttn vain kirjaimia (a-z) tai numeroita (0-9). Vlilynnit tai muut merkit eivt ole sallittuja.",dateSuchAs:"Ole hyv ja anna kelvollinen pivmr, kuten esimerkiksi {date}",dateInFormatMDY:'Ole hyv ja anna kelvollinen pivmr muodossa pp/kk/vvvv (kuten "12/31/1999")',email:'Ole hyv ja anna kelvollinen shkpostiosoite (kuten esimerkiksi "matti@meikalainen.com").',url:"Ole hyv ja anna kelvollinen URL, kuten esimerkiksi http://www.example.com.",currencyDollar:"Ole hyv ja anna kelvollinen eurosumma (kuten esimerkiksi 100,00 EUR) .",oneRequired:"Ole hyv ja syt jotakin ainakin johonkin nist kentist.",errorPrefix:"Virhe: ",warningPrefix:"Varoitus: ",noSpace:"Tss sytteess ei voi olla vlilyntej",reqChkByNode:"Ei valintoja.",requiredChk:"Tm kentt on pakollinen.",reqChkByName:"Ole hyv ja valitse {label}.",match:"Tmn kentn tulee vastata kentt {matchName}",startDate:"alkupivmr",endDate:"loppupivmr",currendDate:"nykyinen pivmr",afterDate:"Pivmrn tulisi olla sama tai myhisempi ajankohta kuin {label}.",beforeDate:"Pivmrn tulisi olla sama tai aikaisempi ajankohta kuin {label}.",startMonth:"Ole hyv ja valitse aloituskuukausi",sameMonth:"Niden kahden pivmrn tulee olla saman kuun sisll -- sinun pit muuttaa jompaa kumpaa.",creditcard:"Annettu luottokortin numero ei kelpaa. Ole hyv ja tarkista numero sek yrit uudelleen. {length} numeroa sytetty."});Locale.define("fi-FI","Number",{group:" "}).inherit("EU","Number");Locale.define("fr-FR","Date",{months:["Janvier","Fvrier","Mars","Avril","Mai","Juin","Juillet","Aot","Septembre","Octobre","Novembre","Dcembre"],months_abbr:["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc."],days:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],days_abbr:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],dateOrder:["date","month","year"],shortDate:"%d/%m/%Y",shortTime:"%H:%M",AM:"AM",PM:"PM",firstDayOfWeek:1,ordinal:function(a){return(a>1)?"":"er"},lessThanMinuteAgo:"il y a moins d'une minute",minuteAgo:"il y a une minute",minutesAgo:"il y a {delta} minutes",hourAgo:"il y a une heure",hoursAgo:"il y a {delta} heures",dayAgo:"il y a un jour",daysAgo:"il y a {delta} jours",weekAgo:"il y a une semaine",weeksAgo:"il y a {delta} semaines",monthAgo:"il y a 1 mois",monthsAgo:"il y a {delta} mois",yearthAgo:"il y a 1 an",yearsAgo:"il y a {delta} ans",lessThanMinuteUntil:"dans moins d'une minute",minuteUntil:"dans une minute",minutesUntil:"dans {delta} minutes",hourUntil:"dans une heure",hoursUntil:"dans {delta} heures",dayUntil:"dans un jour",daysUntil:"dans {delta} jours",weekUntil:"dans 1 semaine",weeksUntil:"dans {delta} semaines",monthUntil:"dans 1 mois",monthsUntil:"dans {delta} mois",yearUntil:"dans 1 an",yearsUntil:"dans {delta} ans"});Locale.define("fr-FR","FormValidator",{required:"Ce champ est obligatoire.",length:"Veuillez saisir {length} caract&egrave;re(s) (vous avez saisi {elLength} caract&egrave;re(s)",minLength:"Veuillez saisir un minimum de {minLength} caract&egrave;re(s) (vous avez saisi {length} caract&egrave;re(s)).",maxLength:"Veuillez saisir un maximum de {maxLength} caract&egrave;re(s) (vous avez saisi {length} caract&egrave;re(s)).",integer:'Veuillez saisir un nombre entier dans ce champ. Les nombres d&eacute;cimaux (ex : "1,25") ne sont pas autoris&eacute;s.',numeric:'Veuillez saisir uniquement des chiffres dans ce champ (ex : "1" ou "1,1" ou "-1" ou "-1,1").',digits:"Veuillez saisir uniquement des chiffres et des signes de ponctuation dans ce champ (ex : un num&eacute;ro de t&eacute;l&eacute;phone avec des traits d'union est autoris&eacute;).",alpha:"Veuillez saisir uniquement des lettres (a-z) dans ce champ. Les espaces ou autres caract&egrave;res ne sont pas autoris&eacute;s.",alphanum:"Veuillez saisir uniquement des lettres (a-z) ou des chiffres (0-9) dans ce champ. Les espaces ou autres caract&egrave;res ne sont pas autoris&eacute;s.",dateSuchAs:"Veuillez saisir une date correcte comme {date}",dateInFormatMDY:'Veuillez saisir une date correcte, au format JJ/MM/AAAA (ex : "31/11/1999").',email:'Veuillez saisir une adresse de courrier &eacute;lectronique. Par example "fred@domaine.com".',url:"Veuillez saisir une URL, comme http://www.example.com.",currencyDollar:"Veuillez saisir une quantit&eacute; correcte. Par example 100,00&euro;.",oneRequired:"Veuillez s&eacute;lectionner au moins une de ces options.",errorPrefix:"Erreur : ",warningPrefix:"Attention : ",noSpace:"Ce champ n'accepte pas les espaces.",reqChkByNode:"Aucun &eacute;l&eacute;ment n'est s&eacute;lectionn&eacute;.",requiredChk:"Ce champ est obligatoire.",reqChkByName:"Veuillez s&eacute;lectionner un(e) {label}.",match:"Ce champ doit correspondre avec le champ {matchName}.",startDate:"date de d&eacute;but",endDate:"date de fin",currendDate:"date actuelle",afterDate:"La date doit &ecirc;tre identique ou post&eacute;rieure &agrave; {label}.",beforeDate:"La date doit &ecirc;tre identique ou ant&eacute;rieure &agrave; {label}.",startMonth:"Veuillez s&eacute;lectionner un mois de d&eacute;but.",sameMonth:"Ces deux dates doivent &ecirc;tre dans le m&ecirc;me mois - vous devez en modifier une.",creditcard:"Le num&eacute;ro de carte de cr&eacute;dit est invalide. Merci de v&eacute;rifier le num&eacute;ro et de r&eacute;essayer. Vous avez entr&eacute; {length} chiffre(s)."});Locale.define("fr-FR","Number",{group:" "}).inherit("EU","Number");Locale.define("he-IL","Date",{months:["","","","","","","","","","","",""],months_abbr:["","","","","","","","","","","",""],days:["","","","","","",""],days_abbr:["","","","","","",""],dateOrder:["date","month","year"],shortDate:"%d/%m/%Y",shortTime:"%H:%M",AM:"AM",PM:"PM",firstDayOfWeek:0,ordinal:"",lessThanMinuteAgo:"  ",minuteAgo:" ",minutesAgo:" {delta} ",hourAgo:" ",hoursAgo:" {delta} ",dayAgo:" ",daysAgo:" {delta} ",weekAgo:" ",weeksAgo:" {delta} ",monthAgo:" ",monthsAgo:" {delta} ",yearAgo:" ",yearsAgo:" {delta} ",lessThanMinuteUntil:"  ",minuteUntil:" ",minutesUntil:" {delta} ",hourUntil:" ",hoursUntil:" {delta} ",dayUntil:" ",daysUntil:" {delta} ",weekUntil:" ",weeksUntil:" {delta} ",monthUntil:" ",monthsUntil:" {delta} ",yearUntil:" ",yearsUntil:" {delta} "});Locale.define("he-IL","FormValidator",{required:"   .",minLength:"   {minLength}  ( {length} ).",maxLength:"   {maxLength}  ( {length} ).",integer:"     .   ( 1.25)  .",numeric:'       ( "1", "1.1", "-1"  "-1.1").',digits:"        (,        ).",alpha:"     (a-z)  .      .",alphanum:"     (a-z)   (0-9)  .      .",dateSuchAs:"   ,  {date}",dateInFormatMDY:'     MM/DD/YYYY ( "12/31/1999")',email:'    . : "fred@domain.com".',url:"    ,  http://www.example.com.",currencyDollar:"    .  $100.00.",oneRequired:"    .",errorPrefix:": ",warningPrefix:": ",noSpace:"    .",reqChkByNode:"   .",requiredChk:"  .",reqChkByName:"  {label}.",match:"     {matchName}",startDate:" ",endDate:" ",currendDate:" ",afterDate:"      {label}.",beforeDate:"      {label}.",startMonth:"   ",sameMonth:"       -    .",creditcard:"     .   .  {length} ."});Locale.define("he-IL","Number",{decimal:".",group:",",currency:{suffix:" "}});Locale.define("hu-HU","Date",{months:["Janur","Februr","Mrcius","prilis","Mjus","Jnius","Jlius","Augusztus","Szeptember","Oktber","November","December"],months_abbr:["jan.","febr.","mrc.","pr.","mj.","jn.","jl.","aug.","szept.","okt.","nov.","dec."],days:["Vasrnap","Htf","Kedd","Szerda","Cstrtk","Pntek","Szombat"],days_abbr:["V","H","K","Sze","Cs","P","Szo"],dateOrder:["year","month","date"],shortDate:"%Y.%m.%d.",shortTime:"%I:%M",AM:"de.",PM:"du.",firstDayOfWeek:1,ordinal:".",lessThanMinuteAgo:"alig egy perce",minuteAgo:"egy perce",minutesAgo:"{delta} perce",hourAgo:"egy rja",hoursAgo:"{delta} rja",dayAgo:"1 napja",daysAgo:"{delta} napja",weekAgo:"1 hete",weeksAgo:"{delta} hete",monthAgo:"1 hnapja",monthsAgo:"{delta} hnapja",yearAgo:"1 ve",yearsAgo:"{delta} ve",lessThanMinuteUntil:"alig egy perc mlva",minuteUntil:"egy perc mlva",minutesUntil:"{delta} perc mlva",hourUntil:"egy ra mlva",hoursUntil:"{delta} ra mlva",dayUntil:"1 nap mlva",daysUntil:"{delta} nap mlva",weekUntil:"1 ht mlva",weeksUntil:"{delta} ht mlva",monthUntil:"1 hnap mlva",monthsUntil:"{delta} hnap mlva",yearUntil:"1 v mlva",yearsUntil:"{delta} v mlva"});Locale.define("hu-HU","FormValidator",{required:"A mez kitltse ktelez.",minLength:"Legalbb {minLength} karakter megadsa szksges (megadva {length} karakter).",maxLength:"Legfeljebb {maxLength} karakter megadsa lehetsges (megadva {length} karakter).",integer:"Egsz szm megadsa szksges. A tizedesjegyek (pl. 1.25) nem engedlyezettek.",numeric:'Szm megadsa szksges (pl. "1" vagy "1.1" vagy "-1" vagy "-1.1").',digits:"Csak szmok s rsjelek megadsa lehetsges (pl. telefonszm ktjelek s/vagy perjelekkel).",alpha:"Csak betk (a-z) megadsa lehetsges. Szkz s egyb karakterek nem engedlyezettek.",alphanum:"Csak betk (a-z) vagy szmok (0-9) megadsa lehetsges. Szkz s egyb karakterek nem engedlyezettek.",dateSuchAs:"Vals dtum megadsa szksges (pl. {date}).",dateInFormatMDY:'Vals dtum megadsa szksges .HH.NN. formban. (pl. "1999.12.31.")',email:'Vals e-mail cm megadsa szksges (pl. "fred@domain.hu").',url:"Vals URL megadsa szksges (pl. http://www.example.com).",currencyDollar:"Vals pnzsszeg megadsa szksges (pl. 100.00 Ft.).",oneRequired:"Az albbi mezk legalbb egyiknek kitltse ktelez.",errorPrefix:"Hiba: ",warningPrefix:"Figyelem: ",noSpace:"A mez nem tartalmazhat szkzket.",reqChkByNode:"Nincs egyetlen kijellt elem sem.",requiredChk:"A mez kitltse ktelez.",reqChkByName:"Egy {label} kivlasztsa szksges.",match:"A meznek egyeznie kell a(z) {matchName} mezvel.",startDate:"a kezdet dtuma",endDate:"a vg dtuma",currendDate:"jelenlegi dtum",afterDate:"A dtum nem lehet kisebb, mint {label}.",beforeDate:"A dtum nem lehet nagyobb, mint {label}.",startMonth:"Kezdeti hnap megadsa szksges.",sameMonth:"A kt dtumnak ugyanazon hnapban kell lennie.",creditcard:"A megadott bankkrtyaszm nem valdi (megadva {length} szmjegy)."});Locale.define("it-IT","Date",{months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],months_abbr:["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic"],days:["Domenica","Luned","Marted","Mercoled","Gioved","Venerd","Sabato"],days_abbr:["dom","lun","mar","mer","gio","ven","sab"],dateOrder:["date","month","year"],shortDate:"%d/%m/%Y",shortTime:"%H.%M",AM:"AM",PM:"PM",firstDayOfWeek:1,ordinal:"",lessThanMinuteAgo:"meno di un minuto fa",minuteAgo:"circa un minuto fa",minutesAgo:"circa {delta} minuti fa",hourAgo:"circa un'ora fa",hoursAgo:"circa {delta} ore fa",dayAgo:"circa 1 giorno fa",daysAgo:"circa {delta} giorni fa",weekAgo:"una settimana fa",weeksAgo:"{delta} settimane fa",monthAgo:"un mese fa",monthsAgo:"{delta} mesi fa",yearAgo:"un anno fa",yearsAgo:"{delta} anni fa",lessThanMinuteUntil:"tra meno di un minuto",minuteUntil:"tra circa un minuto",minutesUntil:"tra circa {delta} minuti",hourUntil:"tra circa un'ora",hoursUntil:"tra circa {delta} ore",dayUntil:"tra circa un giorno",daysUntil:"tra circa {delta} giorni",weekUntil:"tra una settimana",weeksUntil:"tra {delta} settimane",monthUntil:"tra un mese",monthsUntil:"tra {delta} mesi",yearUntil:"tra un anno",yearsUntil:"tra {delta} anni"});Locale.define("it-IT","FormValidator",{required:"Il campo &egrave; obbligatorio.",minLength:"Inserire almeno {minLength} caratteri (ne sono stati inseriti {length}).",maxLength:"Inserire al massimo {maxLength} caratteri (ne sono stati inseriti {length}).",integer:"Inserire un numero intero. Non sono consentiti decimali (es.: 1.25).",numeric:'Inserire solo valori numerici (es.: "1" oppure "1.1" oppure "-1" oppure "-1.1").',digits:"Inserire solo numeri e caratteri di punteggiatura. Per esempio &egrave; consentito un numero telefonico con trattini o punti.",alpha:"Inserire solo lettere (a-z). Non sono consentiti spazi o altri caratteri.",alphanum:"Inserire solo lettere (a-z) o numeri (0-9). Non sono consentiti spazi o altri caratteri.",dateSuchAs:"Inserire una data valida del tipo {date}",dateInFormatMDY:'Inserire una data valida nel formato MM/GG/AAAA (es.: "12/31/1999")',email:'Inserire un indirizzo email valido. Per esempio "nome@dominio.com".',url:'Inserire un indirizzo valido. Per esempio "http://www.example.com".',currencyDollar:'Inserire un importo valido. Per esempio "$100.00".',oneRequired:"Completare almeno uno dei campi richiesti.",errorPrefix:"Errore: ",warningPrefix:"Attenzione: ",noSpace:"Non sono consentiti spazi.",reqChkByNode:"Nessuna voce selezionata.",requiredChk:"Il campo &egrave; obbligatorio.",reqChkByName:"Selezionare un(a) {label}.",match:"Il valore deve corrispondere al campo {matchName}",startDate:"data d'inizio",endDate:"data di fine",currendDate:"data attuale",afterDate:"La data deve corrispondere o essere successiva al {label}.",beforeDate:"La data deve corrispondere o essere precedente al {label}.",startMonth:"Selezionare un mese d'inizio",sameMonth:"Le due date devono essere dello stesso mese - occorre modificarne una."});Locale.define("ja-JP","Date",{months:["1","2","3","4","5","6","7","8","9","10","11","12"],months_abbr:["1","2","3","4","5","6","7","8","9","10","11","12"],days:["","","","","","",""],days_abbr:["","","","","","",""],dateOrder:["year","month","date"],shortDate:"%Y/%m/%d",shortTime:"%H:%M",AM:"",PM:"",firstDayOfWeek:0,ordinal:"",lessThanMinuteAgo:"1",minuteAgo:"1",minutesAgo:"{delta}",hourAgo:"1",hoursAgo:"{delta}",dayAgo:"1",daysAgo:"{delta}",weekAgo:"1",weeksAgo:"{delta}",monthAgo:"1",monthsAgo:"{delta}",yearAgo:"1",yearsAgo:"{delta}",lessThanMinuteUntil:"1",minuteUntil:"1",minutesUntil:"{delta}",hourUntil:"1",hoursUntil:"{delta}",dayUntil:"1",daysUntil:"{delta}",weekUntil:"1",weeksUntil:"{delta}",monthUntil:"1",monthsUntil:"{delta}",yearUntil:"1",yearsUntil:"{delta}"});Locale.define("ja-JP","FormValidator",{required:"",minLength:"{minLength}({length})",maxLength:"{maxLength}({length})",integer:"",numeric:'(: "1", "1.1", "-1", "-1.1"....)',digits:" (: -+).",alpha:"",alphanum:"",dateSuchAs:"{date}",dateInFormatMDY:'YYYY/MM/DD (i.e. "1999/12/31")',email:"",url:"URL",currencyDollar:"",oneRequired:"",errorPrefix:": ",warningPrefix:": ",noSpace:"",reqChkByNode:"",requiredChk:"",reqChkByName:"{label}",match:"{matchName}",startDate:"",endDate:"",currendDate:"",afterDate:"{label}",beforeDate:"{label}",startMonth:"",sameMonth:""});Locale.define("ja-JP","Number",{decimal:".",group:",",currency:{decimals:0,prefix:"\\"}});Locale.define("nl-NL","Date",{months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],months_abbr:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"],days:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],days_abbr:["zo","ma","di","wo","do","vr","za"],dateOrder:["date","month","year"],shortDate:"%d-%m-%Y",shortTime:"%H:%M",AM:"AM",PM:"PM",firstDayOfWeek:1,ordinal:"e",lessThanMinuteAgo:"minder dan een minuut geleden",minuteAgo:"ongeveer een minuut geleden",minutesAgo:"{delta} minuten geleden",hourAgo:"ongeveer een uur geleden",hoursAgo:"ongeveer {delta} uur geleden",dayAgo:"een dag geleden",daysAgo:"{delta} dagen geleden",weekAgo:"een week geleden",weeksAgo:"{delta} weken geleden",monthAgo:"een maand geleden",monthsAgo:"{delta} maanden geleden",yearAgo:"een jaar geleden",yearsAgo:"{delta} jaar geleden",lessThanMinuteUntil:"over minder dan een minuut",minuteUntil:"over ongeveer een minuut",minutesUntil:"over {delta} minuten",hourUntil:"over ongeveer een uur",hoursUntil:"over {delta} uur",dayUntil:"over ongeveer een dag",daysUntil:"over {delta} dagen",weekUntil:"over een week",weeksUntil:"over {delta} weken",monthUntil:"over een maand",monthsUntil:"over {delta} maanden",yearUntil:"over een jaar",yearsUntil:"over {delta} jaar"});Locale.define("nl-NL","FormValidator",{required:"Dit veld is verplicht.",length:"Vul precies {length} karakters in (je hebt {elLength} karakters ingevoerd).",minLength:"Vul minimaal {minLength} karakters in (je hebt {length} karakters ingevoerd).",maxLength:"Vul niet meer dan {maxLength} karakters in (je hebt {length} karakters ingevoerd).",integer:"Vul een getal in. Getallen met decimalen (bijvoorbeeld 1.25) zijn niet toegestaan.",numeric:'Vul alleen numerieke waarden in (bijvoorbeeld "1" of "1.1" of "-1" of "-1.1").',digits:"Vul alleen nummers en leestekens in (bijvoorbeeld een telefoonnummer met streepjes is toegestaan).",alpha:"Vul alleen letters in (a-z). Spaties en andere karakters zijn niet toegestaan.",alphanum:"Vul alleen letters (a-z) of nummers (0-9) in. Spaties en andere karakters zijn niet toegestaan.",dateSuchAs:"Vul een geldige datum in, zoals {date}",dateInFormatMDY:'Vul een geldige datum, in het formaat MM/DD/YYYY (bijvoorbeeld "12/31/1999")',email:'Vul een geldig e-mailadres in. Bijvoorbeeld "fred@domein.nl".',url:"Vul een geldige URL in, zoals http://www.example.com.",currencyDollar:"Vul een geldig $ bedrag in. Bijvoorbeeld $100.00 .",oneRequired:"Vul iets in bij in ieder geval een van deze velden.",warningPrefix:"Waarschuwing: ",errorPrefix:"Fout: ",noSpace:"Spaties zijn niet toegestaan in dit veld.",reqChkByNode:"Er zijn geen items geselecteerd.",requiredChk:"Dit veld is verplicht.",reqChkByName:"Selecteer een {label}.",match:"Dit veld moet overeen komen met het {matchName} veld",startDate:"de begin datum",endDate:"de eind datum",currendDate:"de huidige datum",afterDate:"De datum moet hetzelfde of na {label} zijn.",beforeDate:"De datum moet hetzelfde of voor {label} zijn.",startMonth:"Selecteer een begin maand",sameMonth:"Deze twee data moeten in dezelfde maand zijn - u moet een van beide aanpassen.",creditcard:"Het ingevulde creditcardnummer is niet geldig. Controleer het nummer en probeer opnieuw. {length} getallen ingevuld."});Locale.define("nl-NL").inherit("EU","Number");Locale.define("no-NO","Date",{dateOrder:["date","month","year"],shortDate:"%d.%m.%Y",shortTime:"%H:%M",AM:"AM",PM:"PM",firstDayOfWeek:1,lessThanMinuteAgo:"kortere enn et minutt siden",minuteAgo:"omtrent et minutt siden",minutesAgo:"{delta} minutter siden",hourAgo:"omtrent en time siden",hoursAgo:"omtrent {delta} timer siden",dayAgo:"{delta} dag siden",daysAgo:"{delta} dager siden"});Locale.define("no-NO","FormValidator",{required:"Dette feltet er pkrevd.",minLength:"Vennligst skriv inn minst {minLength} tegn (du skrev {length} tegn).",maxLength:"Vennligst skriv inn maksimalt {maxLength} tegn (du skrev {length} tegn).",integer:"Vennligst skriv inn et tall i dette feltet. Tall med desimaler (for eksempel 1,25) er ikke tillat.",numeric:'Vennligst skriv inn kun numeriske verdier i dette feltet (for eksempel "1", "1.1", "-1" eller "-1.1").',digits:"Vennligst bruk kun nummer og skilletegn i dette feltet.",alpha:"Vennligst bruk kun bokstaver (a-z) i dette feltet. Ingen mellomrom eller andre tegn er tillat.",alphanum:"Vennligst bruk kun bokstaver (a-z) eller nummer (0-9) i dette feltet. Ingen mellomrom eller andre tegn er tillat.",dateSuchAs:"Vennligst skriv inn en gyldig dato, som {date}",dateInFormatMDY:'Vennligst skriv inn en gyldig dato, i formatet MM/DD/YYYY (for eksempel "12/31/1999")',email:'Vennligst skriv inn en gyldig epost-adresse. For eksempel "espen@domene.no".',url:"Vennligst skriv inn en gyldig URL, for eksempel http://www.example.com.",currencyDollar:"Vennligst fyll ut et gyldig $ belp. For eksempel $100.00 .",oneRequired:"Vennligst fyll ut noe i minst ett av disse feltene.",errorPrefix:"Feil: ",warningPrefix:"Advarsel: "});Locale.define("pl-PL","Date",{months:["Stycze","Luty","Marzec","Kwiecie","Maj","Czerwiec","Lipiec","Sierpie","Wrzesie","Padziernik","Listopad","Grudzie"],months_abbr:["sty","lut","mar","kwi","maj","cze","lip","sie","wrz","pa","lis","gru"],days:["Niedziela","Poniedziaek","Wtorek","roda","Czwartek","Pitek","Sobota"],days_abbr:["niedz.","pon.","wt.","r.","czw.","pt.","sob."],dateOrder:["year","month","date"],shortDate:"%Y-%m-%d",shortTime:"%H:%M",AM:"nad ranem",PM:"po poudniu",firstDayOfWeek:1,ordinal:function(a){return(a>3&&a<21)?"ty":["ty","szy","gi","ci","ty"][Math.min(a%10,4)]},lessThanMinuteAgo:"mniej ni minute temu",minuteAgo:"okoo minut temu",minutesAgo:"{delta} minut temu",hourAgo:"okoo godzin temu",hoursAgo:"okoo {delta} godzin temu",dayAgo:"Wczoraj",daysAgo:"{delta} dni temu",lessThanMinuteUntil:"za nieca minut",minuteUntil:"za okoo minut",minutesUntil:"za {delta} minut",hourUntil:"za okoo godzin",hoursUntil:"za okoo {delta} godzin",dayUntil:"za 1 dzie",daysUntil:"za {delta} dni"});Locale.define("pl-PL","FormValidator",{required:"To pole jest wymagane.",minLength:"Wymagane jest przynajmniej {minLength} znakw (wpisanych zostao tylko {length}).",maxLength:"Dozwolone jest nie wicej ni {maxLength} znakw (wpisanych zostao {length})",integer:"To pole wymaga liczb caych. Liczby dziesitne (np. 1.25) s niedozwolone.",numeric:'Prosimy uywa tylko numerycznych wartoci w tym polu (np. "1", "1.1", "-1" lub "-1.1").',digits:"Prosimy uywa liczb oraz zankow punktuacyjnych w typ polu (dla przykadu, przy numerze telefonu mylniki i kropki s dozwolone).",alpha:"Prosimy uywa tylko liter (a-z) w tym polu. Spacje oraz inne znaki s niedozwolone.",alphanum:"Prosimy uywa tylko liter (a-z) lub liczb (0-9) w tym polu. Spacje oraz inne znaki s niedozwolone.",dateSuchAs:"Prosimy poda prawidow dat w formacie: {date}",dateInFormatMDY:'Prosimy poda poprawn date w formacie DD.MM.RRRR (i.e. "12.01.2009")',email:'Prosimy poda prawidowy adres e-mail, np. "jan@domena.pl".',url:"Prosimy poda prawidowy adres URL, np. http://www.example.com.",currencyDollar:"Prosimy poda prawidow sum w PLN. Dla przykadu: 100.00 PLN.",oneRequired:"Prosimy wypeni chocia jedno z pl.",errorPrefix:"Bd: ",warningPrefix:"Uwaga: ",noSpace:"W tym polu nie mog znajdowa si spacje.",reqChkByNode:"Brak zaznaczonych elementw.",requiredChk:"To pole jest wymagane.",reqChkByName:"Prosimy wybra z {label}.",match:"To pole musi by takie samo jak {matchName}",startDate:"data pocztkowa",endDate:"data kocowa",currendDate:"aktualna data",afterDate:"Podana data poinna by taka sama lub po {label}.",beforeDate:"Podana data poinna by taka sama lub przed {label}.",startMonth:"Prosimy wybra pocztkowy miesic.",sameMonth:"Te dwie daty musz by w zakresie tego samego miesica - wymagana jest zmiana ktrego z pl."});Locale.define("pt-PT","Date",{months:["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],months_abbr:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],days:["Domingo","Segunda-feira","Tera-feira","Quarta-feira","Quinta-feira","Sexta-feira","Sbado"],days_abbr:["Dom","Seg","Ter","Qua","Qui","Sex","Sb"],dateOrder:["date","month","year"],shortDate:"%d-%m-%Y",shortTime:"%H:%M",AM:"AM",PM:"PM",firstDayOfWeek:1,ordinal:"",lessThanMinuteAgo:"h menos de um minuto",minuteAgo:"h cerca de um minuto",minutesAgo:"h {delta} minutos",hourAgo:"h cerca de uma hora",hoursAgo:"h cerca de {delta} horas",dayAgo:"h um dia",daysAgo:"h {delta} dias",weekAgo:"h uma semana",weeksAgo:"h {delta} semanas",monthAgo:"h um ms",monthsAgo:"h {delta} meses",yearAgo:"h um ano",yearsAgo:"h {delta} anos",lessThanMinuteUntil:"em menos de um minuto",minuteUntil:"em um minuto",minutesUntil:"em {delta} minutos",hourUntil:"em uma hora",hoursUntil:"em {delta} horas",dayUntil:"em um dia",daysUntil:"em {delta} dias",weekUntil:"em uma semana",weeksUntil:"em {delta} semanas",monthUntil:"em um ms",monthsUntil:"em {delta} meses",yearUntil:"em um ano",yearsUntil:"em {delta} anos"});Locale.define("pt-BR","Date",{shortDate:"%d/%m/%Y"}).inherit("pt-PT","Date");Locale.define("pt-BR","FormValidator",{required:"Este campo  obrigatrio.",minLength:"Digite pelo menos {minLength} caracteres (tamanho atual: {length}).",maxLength:"No digite mais de {maxLength} caracteres (tamanho atual: {length}).",integer:"Por favor digite apenas um nmero inteiro neste campo. No so permitidos nmeros decimais (por exemplo, 1,25).",numeric:'Por favor digite apenas valores numricos neste campo (por exemplo, "1" ou "1.1" ou "-1" ou "-1,1").',digits:"Por favor use apenas nmeros e pontuao neste campo (por exemplo, um nmero de telefone com traos ou pontos  permitido).",alpha:"Por favor use somente letras (a-z). Espao e outros caracteres no so permitidos.",alphanum:"Use somente letras (a-z) ou nmeros (0-9) neste campo. Espao e outros caracteres no so permitidos.",dateSuchAs:"Digite uma data vlida, como {date}",dateInFormatMDY:'Digite uma data vlida, como DD/MM/YYYY (por exemplo, "31/12/1999")',email:'Digite um endereo de email vlido. Por exemplo "nome@dominio.com".',url:"Digite uma URL vlida. Exemplo: http://www.example.com.",currencyDollar:"Digite um valor em dinheiro vlido. Exemplo: R$100,00 .",oneRequired:"Digite algo para pelo menos um desses campos.",errorPrefix:"Erro: ",warningPrefix:"Aviso: ",noSpace:"No  possvel digitar espaos neste campo.",reqChkByNode:"No foi selecionado nenhum item.",requiredChk:"Este campo  obrigatrio.",reqChkByName:"Por favor digite um {label}.",match:"Este campo deve ser igual ao campo {matchName}.",startDate:"a data inicial",endDate:"a data final",currendDate:"a data atual",afterDate:"A data deve ser igual ou posterior a {label}.",beforeDate:"A data deve ser igual ou anterior a {label}.",startMonth:"Por favor selecione uma data inicial.",sameMonth:"Estas duas datas devem ter o mesmo ms - voc deve modificar uma das duas.",creditcard:"O nmero do carto de crdito informado  invlido. Por favor verifique o valor e tente novamente. {length} nmeros informados."});Locale.define("pt-PT","FormValidator",{required:"Este campo  necessrio.",minLength:"Digite pelo menos{minLength} caracteres (comprimento {length} caracteres).",maxLength:"No insira mais de {maxLength} caracteres (comprimento {length} caracteres).",integer:"Digite um nmero inteiro neste domnio. Com nmeros decimais (por exemplo, 1,25), no so permitidas.",numeric:'Digite apenas valores numricos neste domnio (p.ex., "1" ou "1.1" ou "-1" ou "-1,1").',digits:"Por favor, use nmeros e pontuao apenas neste campo (p.ex., um nmero de telefone com traos ou pontos  permitida).",alpha:"Por favor use somente letras (a-z), com nesta rea. No utilize espaos nem outros caracteres so permitidos.",alphanum:"Use somente letras (a-z) ou nmeros (0-9) neste campo. No utilize espaos nem outros caracteres so permitidos.",dateSuchAs:"Digite uma data vlida, como {date}",dateInFormatMDY:'Digite uma data vlida, como DD/MM/YYYY (p.ex. "31/12/1999")',email:'Digite um endereo de email vlido. Por exemplo "fred@domain.com".',url:"Digite uma URL vlida, como http://www.example.com.",currencyDollar:"Digite um valor vlido $. Por exemplo $ 100,00. ",oneRequired:"Digite algo para pelo menos um desses insumos.",errorPrefix:"Erro: ",warningPrefix:"Aviso: "});(function(){var a=function(i,f,d,h,b){var c=i%10,g=i%100;if(c==1&&g!=11){return f}else{if((c==2||c==3||c==4)&&!(g==12||g==13||g==14)){return d}else{if(c==0||(c==5||c==6||c==7||c==8||c==9)||(g==11||g==12||g==13||g==14)){return h}else{return b}}}};Locale.define("ru-RU","Date",{months:["","","","","","","","","","","",""],months_abbr:["","","","","","","","","","","",""],days:["","","","","","",""],days_abbr:["","","","","","",""],dateOrder:["date","month","year"],shortDate:"%d.%m.%Y",shortTime:"%H:%M",AM:"AM",PM:"PM",firstDayOfWeek:1,ordinal:"",lessThanMinuteAgo:"  ",minuteAgo:" ",minutesAgo:function(b){return"{delta} "+a(b,"","","")+" "},hourAgo:" ",hoursAgo:function(b){return"{delta} "+a(b,"","","")+" "},dayAgo:"",daysAgo:function(b){return"{delta} "+a(b,"","","")+" "},weekAgo:" ",weeksAgo:function(b){return"{delta} "+a(b,"","","")+" "},monthAgo:" ",monthsAgo:function(b){return"{delta} "+a(b,"","","")+" "},yearAgo:" ",yearsAgo:function(b){return"{delta} "+a(b,"","","")+" "},lessThanMinuteUntil:"   ",minuteUntil:" ",minutesUntil:function(b){return" {delta} "+a(b,"","","")+""},hourUntil:" ",hoursUntil:function(b){return" {delta} "+a(b,"","","")+""},dayUntil:"",daysUntil:function(b){return" {delta} "+a(b,"","","")+""},weekUntil:" ",weeksUntil:function(b){return" {delta} "+a(b,"","","")+""},monthUntil:" ",monthsUntil:function(b){return" {delta} "+a(b,"","","")+""},yearUntil:"",yearsUntil:function(b){return" {delta} "+a(b,"","","")+""}})})();Locale.define("ru-RU","FormValidator",{required:"    .",minLength:",    {minLength}  (  {length}).",maxLength:",    {maxLength}  (  {length}).",integer:",     .   ( 1.25)   .",numeric:',      ( "1"  "1.1",  "-1",  "-1.1").',digits:"           (,        ).",alpha:"        (a-z).     .",alphanum:"        (a-z)   (0-9).     .",dateSuchAs:",    {date}",dateInFormatMDY:',     // ( "12/31/1999")',email:',   -.   "fred@domain.com".',url:",     http://www.example.com.",currencyDollar:",    . : $100.00 .",oneRequired:",   -     .",errorPrefix:": ",warningPrefix:": "});(function(){var a=function(g,d,c,f,b){return(g>=1&&g<=3)?arguments[g]:b};Locale.define("si-SI","Date",{months:["januar","februar","marec","april","maj","junij","julij","avgust","september","oktober","november","december"],months_abbr:["jan","feb","mar","apr","maj","jun","jul","avg","sep","okt","nov","dec"],days:["nedelja","ponedeljek","torek","sreda","etrtek","petek","sobota"],days_abbr:["ned","pon","tor","sre","et","pet","sob"],dateOrder:["date","month","year"],shortDate:"%d.%m.%Y",shortTime:"%H.%M",AM:"AM",PM:"PM",firstDayOfWeek:1,ordinal:".",lessThanMinuteAgo:"manj kot minuto nazaj",minuteAgo:"minuto nazaj",minutesAgo:function(b){return"{delta} "+a(b,"minuto","minuti","minute","minut")+" nazaj"},hourAgo:"uro nazaj",hoursAgo:function(b){return"{delta} "+a(b,"uro","uri","ure","ur")+" nazaj"},dayAgo:"dan nazaj",daysAgo:function(b){return"{delta} "+a(b,"dan","dneva","dni","dni")+" nazaj"},weekAgo:"teden nazaj",weeksAgo:function(b){return"{delta} "+a(b,"teden","tedna","tedne","tednov")+" nazaj"},monthAgo:"mesec nazaj",monthsAgo:function(b){return"{delta} "+a(b,"mesec","meseca","mesece","mesecov")+" nazaj"},yearthAgo:"leto nazaj",yearsAgo:function(b){return"{delta} "+a(b,"leto","leti","leta","let")+" nazaj"},lessThanMinuteUntil:"e manj kot minuto",minuteUntil:"e minuta",minutesUntil:function(b){return"e {delta} "+a(b,"minuta","minuti","minute","minut")},hourUntil:"e ura",hoursUntil:function(b){return"e {delta} "+a(b,"ura","uri","ure","ur")},dayUntil:"e dan",daysUntil:function(b){return"e {delta} "+a(b,"dan","dneva","dnevi","dni")},weekUntil:"e tedn",weeksUntil:function(b){return"e {delta} "+a(b,"teden","tedna","tedni","tednov")},monthUntil:"e mesec",monthsUntil:function(b){return"e {delta} "+a(b,"mesec","meseca","meseci","mesecov")},yearUntil:"e leto",yearsUntil:function(b){return"e {delta} "+a(b,"leto","leti","leta","let")}})})();Locale.define("si-SI","FormValidator",{required:"To polje je obvezno",minLength:"Prosim, vnesite vsaj {minLength} znakov (vnesli ste {length} znakov).",maxLength:"Prosim, ne vnesite ve kot {maxLength} znakov (vnesli ste {length} znakov).",integer:"Prosim, vnesite celo tevilo. Decimalna tevila (kot 1,25) niso dovoljena.",numeric:'Prosim, vnesite samo numerine vrednosti (kot "1" ali "1.1" ali "-1" ali "-1.1").',digits:"Prosim, uporabite tevilke in loila le na tem polju (na primer, dovoljena je telefonska tevilka z pomilaji ali pikami).",alpha:"Prosim, uporabite le rke v tem plju. Presledki in drugi znaki niso dovoljeni.",alphanum:"Prosim, uporabite samo rke ali tevilke v tem polju. Presledki in drugi znaki niso dovoljeni.",dateSuchAs:"Prosim, vnesite pravilen datum kot {date}",dateInFormatMDY:'Prosim, vnesite pravilen datum kot MM.DD.YYYY (primer "12.31.1999")',email:'Prosim, vnesite pravilen email naslov. Na primer "fred@domain.com".',url:"Prosim, vnesite pravilen URL kot http://www.example.com.",currencyDollar:"Prosim, vnesit epravilno vrednost . Primer 100,00 .",oneRequired:"Prosimo, vnesite nekaj za vsaj eno izmed teh polj.",errorPrefix:"Napaka: ",warningPrefix:"Opozorilo: ",noSpace:"To vnosno polje ne dopua presledkov.",reqChkByNode:"Ni niste izbrali.",requiredChk:"To polje je obvezno",reqChkByName:"Prosim, izberite {label}.",match:"To polje se mora ujemati z poljem {matchName}",startDate:"datum zaetka",endDate:"datum konca",currendDate:"trenuten datum",afterDate:"Datum bi moral biti isti ali po {label}.",beforeDate:"Datum bi moral biti isti ali pred {label}.",startMonth:"Prosim, vnesite zaetni datum",sameMonth:"Ta dva datuma morata biti v istem mesecu - premeniti morate eno ali drugo.",creditcard:"tevilka kreditne kartice ni pravilna. Preverite tevilko ali poskusite e enkrat. Vneenih {length} znakov."});Locale.define("sv-SE","Date",{months:["januari","februari","mars","april","maj","juni","juli","augusti","september","oktober","november","december"],months_abbr:["jan","feb","mar","apr","maj","jun","jul","aug","sep","okt","nov","dec"],days:["sndag","mndag","tisdag","onsdag","torsdag","fredag","lrdag"],days_abbr:["sn","mn","tis","ons","tor","fre","lr"],dateOrder:["year","month","date"],shortDate:"%Y-%m-%d",shortTime:"%H:%M",AM:"",PM:"",firstDayOfWeek:1,ordinal:"",lessThanMinuteAgo:"mindre n en minut sedan",minuteAgo:"ungefr en minut sedan",minutesAgo:"{delta} minuter sedan",hourAgo:"ungefr en timme sedan",hoursAgo:"ungefr {delta} timmar sedan",dayAgo:"1 dag sedan",daysAgo:"{delta} dagar sedan",lessThanMinuteUntil:"mindre n en minut sedan",minuteUntil:"ungefr en minut sedan",minutesUntil:"{delta} minuter sedan",hourUntil:"ungefr en timme sedan",hoursUntil:"ungefr {delta} timmar sedan",dayUntil:"1 dag sedan",daysUntil:"{delta} dagar sedan"});Locale.define("sv-SE","FormValidator",{required:"Fltet r obligatoriskt.",minLength:"Ange minst {minLength} tecken (du angav {length} tecken).",maxLength:"Ange hgst {maxLength} tecken (du angav {length} tecken). ",integer:"Ange ett heltal i fltet. Tal med decimaler (t.ex. 1,25) r inte tilltna.",numeric:'Ange endast numeriska vrden i detta flt (t.ex. "1" eller "1.1" eller "-1" eller "-1,1").',digits:"Anvnd endast siffror och skiljetecken i detta flt (till exempel ett telefonnummer med bindestreck tilltet).",alpha:"Anvnd endast bokstver (a-) i detta flt. Inga mellanslag eller andra tecken r tilltna.",alphanum:"Anvnd endast bokstver (a-) och siffror (0-9) i detta flt. Inga mellanslag eller andra tecken r tilltna.",dateSuchAs:"Ange ett giltigt datum som t.ex. {date}",dateInFormatMDY:'Ange ett giltigt datum som t.ex. YYYY-MM-DD (i.e. "1999-12-31")',email:'Ange en giltig e-postadress. Till exempel "erik@domain.com".',url:"Ange en giltig webbadress som http://www.example.com.",currencyDollar:"Ange en giltig belopp. Exempelvis 100,00.",oneRequired:"Vnligen ange minst ett av dessa alternativ.",errorPrefix:"Fel: ",warningPrefix:"Varning: ",noSpace:"Det fr inte finnas ngra mellanslag i detta flt.",reqChkByNode:"Inga objekt r valda.",requiredChk:"Detta r ett obligatoriskt flt.",reqChkByName:"Vlj en {label}.",match:"Detta flt mste matcha {matchName}",startDate:"startdatumet",endDate:"slutdatum",currendDate:"dagens datum",afterDate:"Datumet br vara samma eller senare n {label}.",beforeDate:"Datumet br vara samma eller tidigare n {label}.",startMonth:"Vlj en start mnad",sameMonth:"Dessa tv datum mste vara i samma mnad - du mste ndra det ena eller det andra."});(function(){var a=function(k,f,c,j,b){var i=(k/10).toInt(),h=k%10,g=(k/100).toInt();if(i==1&&k>10){return j}if(h==1){return f}if(h>0&&h<5){return c}return j};Locale.define("uk-UA","Date",{months:["","","","","","","","","","","",""],months_abbr:["","","","","","","","","","","",""],days:["","","","","","'",""],days_abbr:["","","","","","",""],dateOrder:["date","month","year"],shortDate:"%d/%m/%Y",shortTime:"%H:%M",AM:" ",PM:" ",firstDayOfWeek:1,ordinal:"",lessThanMinuteAgo:"  ",minuteAgo:" ",minutesAgo:function(b){return"{delta} "+a(b,"","","")+" "},hourAgo:" ",hoursAgo:function(b){return"{delta} "+a(b,"","","")+" "},dayAgo:"",daysAgo:function(b){return"{delta} "+a(b,"","","")+" "},weekAgo:" ",weeksAgo:function(b){return"{delta} "+a(b,"","","")+" "},monthAgo:" ",monthsAgo:function(b){return"{delta} "+a(b,"","","")+" "},yearAgo:" ",yearsAgo:function(b){return"{delta} "+a(b,"","","")+" "},lessThanMinuteUntil:" ",minuteUntil:" ",minutesUntil:function(b){return" {delta} "+a(b,"","","")},hourUntil:" ",hoursUntil:function(b){return" {delta} "+a(b,"","","")},dayUntil:"",daysUntil:function(b){return" {delta} "+a(b,"","","")},weekUntil:" ",weeksUntil:function(b){return" {delta} "+a(b,"","","")},monthUntil:" ",monthesUntil:function(b){return" {delta} "+a(b,"","","")},yearUntil:" ",yearsUntil:function(b){return" {delta} "+a(b,"","","")}})})();Locale.define("uk-UA","FormValidator",{required:"    .",minLength:"   {minLength}  (  {length}).",maxLength:"      {maxLength} (  {length}).",integer:"    .   ( 1.25)  .",numeric:'     ( "1"  "1.1",  "-1",  "-1.1").',digits:"           (,        ).",alpha:"        (a-z).     .",alphanum:"        (a-z)   (0-9).     .",dateSuchAs:"   {date}.",dateInFormatMDY:'    // ( "12/31/2009").',email:'     ( "name@domain.com").',url:"  - ( http://www.example.com).",currencyDollar:'    ( "$100.00").',oneRequired:"   .",errorPrefix:": ",warningPrefix:": ",noSpace:" .",reqChkByNode:"   .",requiredChk:"    .",reqChkByName:" ,  {label}.",match:"    {matchName}",startDate:" ",endDate:" ",currendDate:" ",afterDate:"     ,    {label}.",beforeDate:"     ,    {label}.",startMonth:" ,   ",sameMonth:"        .  ,    .",creditcard:"    .  ,  .  {length} ."});Locale.define("zh-CHS","Date",{months:["","","","","","","","","","","",""],months_abbr:["","","","","","","","","","","",""],days:["","","","","","",""],days_abbr:["","","","","","",""],dateOrder:["year","month","date"],shortDate:"%Y-%m-%d",shortTime:"%I:%M%p",AM:"AM",PM:"PM",firstDayOfWeek:1,ordinal:"",lessThanMinuteAgo:"1",minuteAgo:"1",minutesAgo:"{delta}",hourAgo:"1",hoursAgo:"{delta}",dayAgo:"1",daysAgo:"{delta}",weekAgo:"1",weeksAgo:"{delta}",monthAgo:"1",monthsAgo:"{delta}",yearAgo:"1",yearsAgo:"{delta}",lessThanMinuteUntil:"1",minuteUntil:"1",minutesUntil:"{delta}",hourUntil:"1",hoursUntil:"{delta}",dayUntil:"1",daysUntil:"{delta}",weekUntil:"1",weeksUntil:"{delta}",monthUntil:"",monthsUntil:"{delta}",yearUntil:"1",yearsUntil:"{delta}"});Locale.define("zh-CHT","Date",{months:["","","","","","","","","","","",""],months_abbr:["","","","","","","","","","","",""],days:["","","","","","",""],days_abbr:["","","","","","",""],dateOrder:["year","month","date"],shortDate:"%Y-%m-%d",shortTime:"%I:%M%p",AM:"AM",PM:"PM",firstDayOfWeek:1,ordinal:"",lessThanMinuteAgo:"1",minuteAgo:"1",minutesAgo:"{delta}",hourAgo:"1",hoursAgo:"{delta}",dayAgo:"1",daysAgo:"{delta}",weekAgo:"1",weeksAgo:"{delta}",monthAgo:"1",monthsAgo:"{delta}",yearAgo:"1",yearsAgo:"{delta}",lessThanMinuteUntil:"1",minuteUntil:"1",minutesUntil:"{delta}",hourUntil:"1",hoursUntil:"{delta}",dayUntil:"1",daysUntil:"{delta}",weekUntil:"1",weeksUntil:"{delta}",monthUntil:"",monthsUntil:"{delta}",yearUntil:"1",yearsUntil:"{delta}"});Locale.define("zh-CHS","FormValidator",{required:"",minLength:" {minLength}  ( {length} )",maxLength:" {maxLength}  ( {length} )",integer:'"1", "200"',numeric:'"1", "1.1", "-1", "-1.1"',digits:"",alpha:" A-Z  26 ",alphanum:" A-Z  26  0-9  10 ",dateSuchAs:"{date}",dateInFormatMDY:'YYYY-MM-DD ("2010-12-31")',email:'"fred@domain.com"',url:" Url http://www.example.com",currencyDollar:"100.0",oneRequired:"",errorPrefix:"",warningPrefix:"",noSpace:"",reqChkByNode:"",requiredChk:"",reqChkByName:" {label}.",match:"{matchName}",startDate:"",endDate:"",currendDate:"",afterDate:" {label}.",beforeDate:" {label}.",startMonth:"",sameMonth:"",creditcard:"{length}"});Locale.define("zh-CHT","FormValidator",{required:" ",minLength:"{minLength} ({length} ) ",maxLength:"{maxLength} ({length} ) ",integer:'"1", "200" ',numeric:'"1", "1.1", "-1", "-1.1" ',digits:" ",alpha:"AZ 26  ",alphanum:"AZ 26 0-9 10  ",dateSuchAs:"{date} ",dateInFormatMDY:'YYYY-MM-DD ("2010-12-31") ',email:'"fred@domain.com" ',url:"Url http://www.example.com ",currencyDollar:"100.0",oneRequired:" ",errorPrefix:"",warningPrefix:"",noSpace:" ",reqChkByNode:" ",requiredChk:" ",reqChkByName:" {label}.",match:"{matchName}",startDate:"",endDate:"",currendDate:"",afterDate:"{label}.",beforeDate:"{label}.",startMonth:"",sameMonth:" ",creditcard:"{length} "});Form.Validator.add("validate-currency-yuan",{errorMsg:function(){return Form.Validator.getMsg("currencyYuan")},test:function(a){return Form.Validator.getValidator("IsEmpty").test(a)||(/^?\-?([1-9]{1}[0-9]{0,2}(\,[0-9]{3})*(\.[0-9]{0,2})?|[1-9]{1}\d*(\.[0-9]{0,2})?|0(\.[0-9]{0,2})?|(\.[0-9]{1,2})?)$/).test(a.get("value"))}});var draw2d=new Object();var _errorStack_=[];function pushErrorStack(a,b){_errorStack_.push(b+"\n");throw a}draw2d.AbstractEvent=function(){this.type=null;this.target=null;this.relatedTarget=null;this.cancelable=false;this.timeStamp=null;this.returnValue=true};draw2d.AbstractEvent.prototype.initEvent=function(b,a){this.type=b;this.cancelable=a;this.timeStamp=(new Date()).getTime()};draw2d.AbstractEvent.prototype.preventDefault=function(){if(this.cancelable){this.returnValue=false}};draw2d.AbstractEvent.fireDOMEvent=function(c,b){if(document.createEvent){var a=document.createEvent("Events");a.initEvent(c,true,true);b.dispatchEvent(a)}else{if(document.createEventObject){var a=document.createEventObject();b.fireEvent("on"+c,a)}}};draw2d.EventTarget=function(){this.eventhandlers={}};draw2d.EventTarget.prototype.addEventListener=function(b,a){if(typeof this.eventhandlers[b]=="undefined"){this.eventhandlers[b]=[]}this.eventhandlers[b][this.eventhandlers[b].length]=a};draw2d.EventTarget.prototype.dispatchEvent=function(b){b.target=this;if(typeof this.eventhandlers[b.type]!="undefined"){for(var a=0;a<this.eventhandlers[b.type].length;a++){this.eventhandlers[b.type][a](b)}}return b.returnValue};draw2d.EventTarget.prototype.removeEventListener=function(d,c){if(typeof this.eventhandlers[d]!="undefined"){var a=[];for(var b=0;b<this.eventhandlers[d].length;b++){if(this.eventhandlers[d][b]!=c){a[a.length]=this.eventhandlers[d][b]}}this.eventhandlers[d]=a}};String.prototype.trim=function(){return(this.replace(new RegExp("^([\\s]+)|([\\s]+)$","gm"),""))};String.prototype.lefttrim=function(){return(this.replace(new RegExp("^[\\s]+","gm"),""))};String.prototype.righttrim=function(){return(this.replace(new RegExp("[\\s]+$","gm"),""))};String.prototype.between=function(f,d,c){if(!c){c=0}var a=this.indexOf(f,c);if(a==-1){return null}var b=this.indexOf(d,a);if(b==-1){return null}return this.substring(a+f.length,b)};draw2d.UUID=function(){};draw2d.UUID.prototype.type="draw2d.UUID";draw2d.UUID.create=function(){var a=function(){return(((1+Math.random())*65536)|0).toString(16).substring(1)};return(a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a())};draw2d.ArrayList=function(){this.increment=10;this.size=0;this.data=new Array(this.increment)};draw2d.ArrayList.EMPTY_LIST=new draw2d.ArrayList();draw2d.ArrayList.prototype.type="draw2d.ArrayList";draw2d.ArrayList.prototype.reverse=function(){var b=new Array(this.size);for(var a=0;a<this.size;a++){b[a]=this.data[this.size-a-1]}this.data=b};draw2d.ArrayList.prototype.getCapacity=function(){return this.data.length};draw2d.ArrayList.prototype.getSize=function(){return this.size};draw2d.ArrayList.prototype.isEmpty=function(){return this.getSize()===0};draw2d.ArrayList.prototype.getLastElement=function(){if(this.data[this.getSize()-1]!==null){return this.data[this.getSize()-1]}};draw2d.ArrayList.prototype.getFirstElement=function(){if(this.data[0]!==null&&this.data[0]!==undefined){return this.data[0]}return null};draw2d.ArrayList.prototype.get=function(a){return this.data[a]};draw2d.ArrayList.prototype.add=function(a){if(this.getSize()==this.data.length){this.resize()}this.data[this.size++]=a};draw2d.ArrayList.prototype.addAll=function(b){for(var a=0;a<b.getSize();a++){this.add(b.get(a))}};draw2d.ArrayList.prototype.remove=function(b){var a=this.indexOf(b);if(a>=0){return this.removeElementAt(a)}return null};draw2d.ArrayList.prototype.insertElementAt=function(c,a){if(this.size==this.capacity){this.resize()}for(var b=this.getSize();b>a;b--){this.data[b]=this.data[b-1]}this.data[a]=c;this.size++};draw2d.ArrayList.prototype.removeElementAt=function(b){var a=this.data[b];for(var c=b;c<(this.getSize()-1);c++){this.data[c]=this.data[c+1]}this.data[this.getSize()-1]=null;this.size--;return a};draw2d.ArrayList.prototype.removeAllElements=function(){this.size=0;for(var a=0;a<this.data.length;a++){this.data[a]=null}};draw2d.ArrayList.prototype.indexOf=function(b){for(var a=0;a<this.getSize();a++){if(this.data[a]==b){return a}}return -1};draw2d.ArrayList.prototype.contains=function(b){for(var a=0;a<this.getSize();a++){if(this.data[a]==b){return true}}return false};draw2d.ArrayList.prototype.resize=function(){newData=new Array(this.data.length+this.increment);for(var a=0;a<this.data.length;a++){newData[a]=this.data[a]}this.data=newData};draw2d.ArrayList.prototype.trimToSize=function(){if(this.data.length==this.size){return}var a=new Array(this.getSize());for(var b=0;b<this.getSize();b++){a[b]=this.data[b]}this.size=a.length;this.data=a};draw2d.ArrayList.prototype.sort=function(k){var h,g;var d;var c;var b;var a;for(h=1;h<this.getSize();h++){c=this.data[h];d=c[k];g=h-1;b=this.data[g];a=b[k];while(g>=0&&a>d){this.data[g+1]=this.data[g];g--;if(g>=0){b=this.data[g];a=b[k]}}this.data[g+1]=c}};draw2d.ArrayList.prototype.clone=function(){var b=new draw2d.ArrayList(this.size);for(var a=0;a<this.size;a++){b.add(this.data[a])}return b};draw2d.ArrayList.prototype.overwriteElementAt=function(b,a){this.data[a]=b};draw2d.ArrayList.prototype.getPersistentAttributes=function(){return{data:this.data,increment:this.increment,size:this.getSize()}};function trace(b){var a=openwindow("about:blank",700,400);a.document.writeln("<pre>"+b+"</pre>")}function openwindow(a,b,f){var d=(screen.width-b)/2;var c=(screen.height-f)/2;property="left="+d+", top="+c+", toolbar=0,scrollbars=0,location=0,statusbar=0,menubar=0,resizable=1,alwaysRaised,width="+b+",height="+f;return window.open(a,"_blank",property)}function dumpObject(c){trace("----------------------------------------------------------------------------");trace("- Object dump");trace("----------------------------------------------------------------------------");for(var a in c){try{if(typeof c[a]!="function"){trace(a+" --&gt; "+c[a])}}catch(b){}}for(var a in c){try{if(typeof c[a]=="function"){trace(a+" --&gt; "+c[a])}}catch(b){}}trace("----------------------------------------------------------------------------")}draw2d.Drag=function(){};draw2d.Drag.current=null;draw2d.Drag.currentTarget=null;draw2d.Drag.currentHover=null;draw2d.Drag.currentCompartment=null;draw2d.Drag.dragging=false;draw2d.Drag.isDragging=function(){return this.dragging};draw2d.Drag.setCurrent=function(a){this.current=a;this.dragging=true};draw2d.Drag.getCurrent=function(){return this.current};draw2d.Drag.clearCurrent=function(){this.current=null;this.dragging=false;this.currentTarget=null};draw2d.Draggable=function(a,b){this.id=draw2d.UUID.create();this.node=null;draw2d.EventTarget.call(this);this.construct(a,b);this.diffX=0;this.diffY=0;this.targets=new draw2d.ArrayList()};draw2d.Draggable.prototype=new draw2d.EventTarget();draw2d.Draggable.prototype.construct=function(f){if(f===null||f===undefined){return}this.element=f;var c=this;var d=function(){var h=new draw2d.DragDropEvent();h.initDragDropEvent("dblclick",true);c.dispatchEvent(h);var g=arguments[0]||window.event;g.cancelBubble=true;g.returnValue=false};var b=function(){var j=arguments[0]||window.event;var h=new draw2d.DragDropEvent();if(c.node!==null){var g=c.node.getWorkflow().getAbsoluteX();var l=c.node.getWorkflow().getAbsoluteY();var k=c.node.getWorkflow().getScrollLeft();var i=c.node.getWorkflow().getScrollTop();h.x=j.clientX-c.element.offsetLeft+k-g;h.y=j.clientY-c.element.offsetTop+i-l}if(j.button===2){h.initDragDropEvent("contextmenu",true);c.dispatchEvent(h)}else{h.initDragDropEvent("dragstart",true);if(c.dispatchEvent(h)){c.diffX=j.clientX-c.element.offsetLeft;c.diffY=j.clientY-c.element.offsetTop;draw2d.Drag.setCurrent(c);if(c.isAttached==true){c.detachEventHandlers()}c.attachEventHandlers()}}j.cancelBubble=true;j.returnValue=false};var a=function(){if(draw2d.Drag.getCurrent()===null){var g=arguments[0]||window.event;if(draw2d.Drag.currentHover!==null&&c!==draw2d.Drag.currentHover){var h=new draw2d.DragDropEvent();h.initDragDropEvent("mouseleave",false,c);draw2d.Drag.currentHover.dispatchEvent(h)}if(c!==null&&c!==draw2d.Drag.currentHover){var h=new draw2d.DragDropEvent();h.initDragDropEvent("mouseenter",false,c);c.dispatchEvent(h)}draw2d.Drag.currentHover=c}else{}};if(this.element.addEventListener){this.element.addEventListener("mousemove",a,false);this.element.addEventListener("mousedown",b,false);this.element.addEventListener("dblclick",d,false)}else{if(this.element.attachEvent){this.element.attachEvent("onmousemove",a);this.element.attachEvent("onmousedown",b);this.element.attachEvent("ondblclick",d)}else{throw"Drag not supported in this browser."}}};draw2d.Draggable.prototype.onDrop=function(a,b){};draw2d.Draggable.prototype.attachEventHandlers=function(){var a=this;a.isAttached=true;this.tempMouseMove=function(){var d=arguments[0]||window.event;var c=new draw2d.Point(d.clientX-a.diffX,d.clientY-a.diffY);if(a.node!==null&&a.node.getCanSnapToHelper()){c=a.node.getWorkflow().snapToHelper(a.node,c)}a.element.style.left=c.x+"px";a.element.style.top=c.y+"px";if(a.node!==null){var l=a.node.getWorkflow().getScrollLeft();var j=a.node.getWorkflow().getScrollTop();var i=a.node.getWorkflow().getAbsoluteX();var h=a.node.getWorkflow().getAbsoluteY();var g=a.getDropTarget(d.clientX+l-i,d.clientY+j-h);var f=a.getCompartment(d.clientX+l-i,d.clientY+j-h);if(draw2d.Drag.currentTarget!==null&&g!=draw2d.Drag.currentTarget){var b=new draw2d.DragDropEvent();b.initDragDropEvent("dragleave",false,a);draw2d.Drag.currentTarget.dispatchEvent(b)}if(g!==null&&g!==draw2d.Drag.currentTarget){var b=new draw2d.DragDropEvent();b.initDragDropEvent("dragenter",false,a);g.dispatchEvent(b)}draw2d.Drag.currentTarget=g;if(draw2d.Drag.currentCompartment!==null&&f!==draw2d.Drag.currentCompartment){var b=new draw2d.DragDropEvent();b.initDragDropEvent("figureleave",false,a);draw2d.Drag.currentCompartment.dispatchEvent(b)}if(f!==null&&f.node!=a.node&&f!==draw2d.Drag.currentCompartment){var b=new draw2d.DragDropEvent();b.initDragDropEvent("figureenter",false,a);f.dispatchEvent(b)}draw2d.Drag.currentCompartment=f}var k=new draw2d.DragDropEvent();k.initDragDropEvent("drag",false);a.dispatchEvent(k)};a.tempMouseUp=function(){a.detachEventHandlers();var k=arguments[0]||window.event;if(a.node!==null){var j=a.node.getWorkflow().getScrollLeft();var i=a.node.getWorkflow().getScrollTop();var h=a.node.getWorkflow().getAbsoluteX();var g=a.node.getWorkflow().getAbsoluteY();var f=a.getDropTarget(k.clientX+j-h,k.clientY+i-g);var d=a.getCompartment(k.clientX+j-h,k.clientY+i-g);if(f!==null){var c=new draw2d.DragDropEvent();c.initDragDropEvent("drop",false,a);f.dispatchEvent(c)}if(d!==null&&d.node!==a.node){var c=new draw2d.DragDropEvent();c.initDragDropEvent("figuredrop",false,a);d.dispatchEvent(c)}if(draw2d.Drag.currentTarget!==null){var c=new draw2d.DragDropEvent();c.initDragDropEvent("dragleave",false,a);draw2d.Drag.currentTarget.dispatchEvent(c);draw2d.Drag.currentTarget=null}}var b=new draw2d.DragDropEvent();b.initDragDropEvent("dragend",false);a.dispatchEvent(b);a.onDrop(k.clientX,k.clientY);draw2d.Drag.currentCompartment=null;draw2d.Drag.clearCurrent()};if(document.body.addEventListener){document.body.addEventListener("mousemove",this.tempMouseMove,false);document.body.addEventListener("mouseup",this.tempMouseUp,false)}else{if(document.body.attachEvent){document.body.attachEvent("onmousemove",this.tempMouseMove);document.body.attachEvent("onmouseup",this.tempMouseUp)}else{throw new Error("Drag doesn't support this browser.")}}};draw2d.Draggable.prototype.detachEventHandlers=function(){this.isAttached=false;if(document.body.removeEventListener){document.body.removeEventListener("mousemove",this.tempMouseMove,false);document.body.removeEventListener("mouseup",this.tempMouseUp,false)}else{if(document.body.detachEvent){document.body.detachEvent("onmousemove",this.tempMouseMove);document.body.detachEvent("onmouseup",this.tempMouseUp)}else{throw new Error("Drag doesn't support this browser.")}}};draw2d.Draggable.prototype.getDropTarget=function(a,d){for(var c=0;c<this.targets.getSize();c++){var b=this.targets.get(c);if(b.node.isOver(a,d)&&b.node!==this.node){return b}}return null};draw2d.Draggable.prototype.getCompartment=function(a,f){var d=null;for(var c=0;c<this.node.getWorkflow().compartments.getSize();c++){var b=this.node.getWorkflow().compartments.get(c);if(b.isOver(a,f)&&b!==this.node){if(d===null){d=b}else{if(d.getZOrder()<b.getZOrder()){d=b}}}}return d===null?null:d.dropable};draw2d.Draggable.prototype.getLeft=function(){return this.element.offsetLeft};draw2d.Draggable.prototype.getTop=function(){return this.element.offsetTop};draw2d.DragDropEvent=function(){draw2d.AbstractEvent.call(this)};draw2d.DragDropEvent.prototype=new draw2d.AbstractEvent();draw2d.DragDropEvent.prototype.initDragDropEvent=function(c,b,a){this.initEvent(c,b);this.relatedTarget=a};draw2d.DropTarget=function(a){draw2d.EventTarget.call(this);this.construct(a)};draw2d.DropTarget.prototype=new draw2d.EventTarget();draw2d.DropTarget.prototype.construct=function(a){this.element=a};draw2d.DropTarget.prototype.getLeft=function(){var b=this.element;var a=b.offsetLeft;while((b=b.offsetParent)!==null){a+=b.offsetLeft}return a};draw2d.DropTarget.prototype.getTop=function(){var a=this.element;var b=a.offsetTop;while((a=a.offsetParent)!==null){b+=a.offsetTop}return b};draw2d.DropTarget.prototype.getHeight=function(){return this.element.offsetHeight};draw2d.DropTarget.prototype.getWidth=function(){return this.element.offsetWidth};draw2d.PositionConstants=function(){};draw2d.PositionConstants.NORTH=1;draw2d.PositionConstants.SOUTH=4;draw2d.PositionConstants.WEST=8;draw2d.PositionConstants.EAST=16;draw2d.Color=function(d,c,a){if(typeof c=="undefined"){var b=this.hex2rgb(d);this.red=b[0];this.green=b[1];this.blue=b[2]}else{this.red=d;this.green=c;this.blue=a}};draw2d.Color.prototype.type="draw2d.Color";draw2d.Color.prototype.getHTMLStyle=function(){return"rgb("+this.red+","+this.green+","+this.blue+")"};draw2d.Color.prototype.getRed=function(){return this.red};draw2d.Color.prototype.getGreen=function(){return this.green};draw2d.Color.prototype.getBlue=function(){return this.blue};draw2d.Color.prototype.getIdealTextColor=function(){var b=105;var a=(this.red*0.299)+(this.green*0.587)+(this.blue*0.114);return(255-a<b)?new draw2d.Color(0,0,0):new draw2d.Color(255,255,255)};draw2d.Color.prototype.hex2rgb=function(a){a=a.replace("#","");return({0:parseInt(a.substr(0,2),16),1:parseInt(a.substr(2,2),16),2:parseInt(a.substr(4,2),16)})};draw2d.Color.prototype.hex=function(){return(this.int2hex(this.red)+this.int2hex(this.green)+this.int2hex(this.blue))};draw2d.Color.prototype.int2hex=function(a){a=Math.round(Math.min(Math.max(0,a),255));return("0123456789ABCDEF".charAt((a-a%16)/16)+"0123456789ABCDEF".charAt(a%16))};draw2d.Color.prototype.darker=function(d){var c=parseInt(Math.round(this.getRed()*(1-d)));var b=parseInt(Math.round(this.getGreen()*(1-d)));var a=parseInt(Math.round(this.getBlue()*(1-d)));if(c<0){c=0}else{if(c>255){c=255}}if(b<0){b=0}else{if(b>255){b=255}}if(a<0){a=0}else{if(a>255){a=255}}return new draw2d.Color(c,b,a)};draw2d.Color.prototype.lighter=function(d){var c=parseInt(Math.round(this.getRed()*(1+d)));var b=parseInt(Math.round(this.getGreen()*(1+d)));var a=parseInt(Math.round(this.getBlue()*(1+d)));if(c<0){c=0}else{if(c>255){c=255}}if(b<0){b=0}else{if(b>255){b=255}}if(a<0){a=0}else{if(a>255){a=255}}return new draw2d.Color(c,b,a)};draw2d.Point=function(a,b){this.x=a;this.y=b};draw2d.Point.prototype.type="draw2d.Point";draw2d.Point.prototype.getX=function(){return this.x};draw2d.Point.prototype.getY=function(){return this.y};draw2d.Point.prototype.getPosition=function(c){var b=c.x-this.x;var a=c.y-this.y;if(Math.abs(b)>Math.abs(a)){if(b<0){return draw2d.PositionConstants.WEST}return draw2d.PositionConstants.EAST}if(a<0){return draw2d.PositionConstants.NORTH}return draw2d.PositionConstants.SOUTH};draw2d.Point.prototype.equals=function(a){return this.x==a.x&&this.y==a.y};draw2d.Point.prototype.getDistance=function(a){return Math.sqrt((this.x-a.x)*(this.x-a.x)+(this.y-a.y)*(this.y-a.y))};draw2d.Point.prototype.getTranslated=function(a){return new draw2d.Point(this.x+a.x,this.y+a.y)};draw2d.Point.prototype.getPersistentAttributes=function(){return{x:this.x,y:this.y}};draw2d.Dimension=function(a,d,b,c){draw2d.Point.call(this,a,d);this.w=b;this.h=c};draw2d.Dimension.prototype=new draw2d.Point();draw2d.Dimension.prototype.type="draw2d.Dimension";draw2d.Dimension.prototype.translate=function(b,a){this.x+=b;this.y+=a;return this};draw2d.Dimension.prototype.resize=function(a,b){this.w+=a;this.h+=b;return this};draw2d.Dimension.prototype.setBounds=function(a){this.x=a.x;this.y=a.y;this.w=a.w;this.h=a.h;return this};draw2d.Dimension.prototype.isEmpty=function(){return this.w<=0||this.h<=0};draw2d.Dimension.prototype.getWidth=function(){return this.w};draw2d.Dimension.prototype.getHeight=function(){return this.h};draw2d.Dimension.prototype.getRight=function(){return this.x+this.w};draw2d.Dimension.prototype.getBottom=function(){return this.y+this.h};draw2d.Dimension.prototype.getTopLeft=function(){return new draw2d.Point(this.x,this.y)};draw2d.Dimension.prototype.getCenter=function(){return new draw2d.Point(this.x+this.w/2,this.y+this.h/2)};draw2d.Dimension.prototype.getBottomRight=function(){return new draw2d.Point(this.x+this.w,this.y+this.h)};draw2d.Dimension.prototype.equals=function(a){return this.x==a.x&&this.y==a.y&&this.w==a.w&&this.h==a.h};draw2d.SnapToHelper=function(a){this.workflow=a};draw2d.SnapToHelper.NORTH=1;draw2d.SnapToHelper.SOUTH=4;draw2d.SnapToHelper.WEST=8;draw2d.SnapToHelper.EAST=16;draw2d.SnapToHelper.CENTER=32;draw2d.SnapToHelper.NORTH_EAST=draw2d.SnapToHelper.NORTH|draw2d.SnapToHelper.EAST;draw2d.SnapToHelper.NORTH_WEST=draw2d.SnapToHelper.NORTH|draw2d.SnapToHelper.WEST;draw2d.SnapToHelper.SOUTH_EAST=draw2d.SnapToHelper.SOUTH|draw2d.SnapToHelper.EAST;draw2d.SnapToHelper.SOUTH_WEST=draw2d.SnapToHelper.SOUTH|draw2d.SnapToHelper.WEST;draw2d.SnapToHelper.NORTH_SOUTH=draw2d.SnapToHelper.NORTH|draw2d.SnapToHelper.SOUTH;draw2d.SnapToHelper.EAST_WEST=draw2d.SnapToHelper.EAST|draw2d.SnapToHelper.WEST;draw2d.SnapToHelper.NSEW=draw2d.SnapToHelper.NORTH_SOUTH|draw2d.SnapToHelper.EAST_WEST;draw2d.SnapToHelper.prototype.snapPoint=function(c,b,a){return b};draw2d.SnapToHelper.prototype.snapRectangle=function(b,a){return b};draw2d.SnapToHelper.prototype.onSetDocumentDirty=function(){};draw2d.SnapToGrid=function(a){draw2d.SnapToHelper.call(this,a)};draw2d.SnapToGrid.prototype=new draw2d.SnapToHelper();draw2d.SnapToGrid.prototype.type="draw2d.SnapToGrid";draw2d.SnapToGrid.prototype.snapPoint=function(c,b,a){a.x=this.workflow.gridWidthX*Math.floor(((b.x+this.workflow.gridWidthX/2)/this.workflow.gridWidthX));a.y=this.workflow.gridWidthY*Math.floor(((b.y+this.workflow.gridWidthY/2)/this.workflow.gridWidthY));return 0};draw2d.SnapToGrid.prototype.snapRectangle=function(b,a){a.x=b.x;a.y=b.y;a.w=b.w;a.h=b.h;return 0};draw2d.SnapToGeometryEntry=function(b,a){this.type=b;this.location=a};draw2d.SnapToGeometryEntry.prototype.getLocation=function(){return this.location};draw2d.SnapToGeometryEntry.prototype.getType=function(){return this.type};draw2d.SnapToGeometry=function(a){draw2d.SnapToHelper.call(this,a);this.rows=null;this.cols=null};draw2d.SnapToGeometry.prototype=new draw2d.SnapToHelper();draw2d.SnapToGeometry.THRESHOLD=5;draw2d.SnapToGeometry.prototype.snapPoint=function(b,a,h){if(this.rows===null||this.cols===null){this.populateRowsAndCols()}if((b&draw2d.SnapToHelper.EAST)!==0){var g=this.getCorrectionFor(this.cols,a.getX()-1,1);if(g!==draw2d.SnapToGeometry.THRESHOLD){b&=~draw2d.SnapToHelper.EAST;h.x+=g}}if((b&draw2d.SnapToHelper.WEST)!==0){var f=this.getCorrectionFor(this.cols,a.getX(),-1);if(f!==draw2d.SnapToGeometry.THRESHOLD){b&=~draw2d.SnapToHelper.WEST;h.x+=f}}if((b&draw2d.SnapToHelper.SOUTH)!==0){var d=this.getCorrectionFor(this.rows,a.getY()-1,1);if(d!==draw2d.SnapToGeometry.THRESHOLD){b&=~draw2d.SnapToHelper.SOUTH;h.y+=d}}if((b&draw2d.SnapToHelper.NORTH)!==0){var c=this.getCorrectionFor(this.rows,a.getY(),-1);if(c!==draw2d.SnapToGeometry.THRESHOLD){b&=~draw2d.SnapToHelper.NORTH;h.y+=c}}return b};draw2d.SnapToGeometry.prototype.snapRectangle=function(f,c){var b=f.getTopLeft();var a=f.getBottomRight();var g=this.snapPoint(draw2d.SnapToHelper.NORTH_WEST,f.getTopLeft(),b);c.x=b.x;c.y=b.y;var d=this.snapPoint(draw2d.SnapToHelper.SOUTH_EAST,f.getBottomRight(),a);if(g&draw2d.SnapToHelper.WEST){c.x=a.x-f.getWidth()}if(g&draw2d.SnapToHelper.NORTH){c.y=a.y-f.getHeight()}return g|d};draw2d.SnapToGeometry.prototype.populateRowsAndCols=function(){this.rows=[];this.cols=[];var f=this.workflow.getDocument().getFigures();var c=0;for(var d=0;d<f.getSize();d++){var a=f.get(d);if(a!=this.workflow.getCurrentSelection()){var b=a.getBounds();this.cols[c*3]=new draw2d.SnapToGeometryEntry(-1,b.getX());this.rows[c*3]=new draw2d.SnapToGeometryEntry(-1,b.getY());this.cols[c*3+1]=new draw2d.SnapToGeometryEntry(0,b.x+(b.getWidth()-1)/2);this.rows[c*3+1]=new draw2d.SnapToGeometryEntry(0,b.y+(b.getHeight()-1)/2);this.cols[c*3+2]=new draw2d.SnapToGeometryEntry(1,b.getRight()-1);this.rows[c*3+2]=new draw2d.SnapToGeometryEntry(1,b.getBottom()-1);c++}}};draw2d.SnapToGeometry.prototype.getCorrectionFor=function(a,g,c){var j=draw2d.SnapToGeometry.THRESHOLD;var h=draw2d.SnapToGeometry.THRESHOLD;for(var b=0;b<a.length;b++){var f=a[b];var d;if(f.type===-1&&c!==0){d=Math.abs(g-f.location);if(d<j){j=d;h=f.location-g}}else{if(f.type===0&&c===0){d=Math.abs(g-f.location);if(d<j){j=d;h=f.location-g}}else{if(f.type===1&&c!==0){d=Math.abs(g-f.location);if(d<j){j=d;h=f.location-g}}}}}return h};draw2d.SnapToGeometry.prototype.onSetDocumentDirty=function(){this.rows=null;this.cols=null};draw2d.Border=function(){this.color=null};draw2d.Border.prototype.type="draw2d.Border";draw2d.Border.prototype.dispose=function(){this.color=null};draw2d.Border.prototype.getHTMLStyle=function(){return""};draw2d.Border.prototype.setColor=function(a){this.color=a};draw2d.Border.prototype.getColor=function(){return this.color};draw2d.Border.prototype.refresh=function(){};draw2d.LineBorder=function(a){draw2d.Border.call(this);this.width=1;if(a){this.width=a}this.figure=null};draw2d.LineBorder.prototype=new draw2d.Border();draw2d.LineBorder.prototype.type="draw2d.LineBorder";draw2d.LineBorder.prototype.dispose=function(){draw2d.Border.prototype.dispose.call(this);this.figure=null};draw2d.LineBorder.prototype.setLineWidth=function(a){this.width=a;if(this.figure!==null){this.figure.html.style.border=this.getHTMLStyle()}};draw2d.LineBorder.prototype.getHTMLStyle=function(){if(this.getColor()!==null){return this.width+"px solid "+this.getColor().getHTMLStyle()}return this.width+"px solid black"};draw2d.LineBorder.prototype.refresh=function(){this.setLineWidth(this.width)};draw2d.Figure=function(){this.construct()};draw2d.Figure.prototype.type="draw2d.Figure";draw2d.Figure.ZOrderBaseIndex=100;draw2d.Figure.setZOrderBaseIndex=function(a){draw2d.Figure.ZOrderBaseIndex=a};draw2d.Figure.prototype.construct=function(){this.lastDragStartTime=0;this.x=0;this.y=0;this.width=10;this.height=10;this.border=null;this.id=draw2d.UUID.create();this.html=this.createHTMLElement();this.canvas=null;this.workflow=null;this.draggable=null;this.parent=null;this.isMoving=false;this.canSnapToHelper=true;this.snapToGridAnchor=new draw2d.Point(0,0);this.timer=-1;this.model=null;this.alpha=1;this.alphaBeforeOnDrag=1;this.properties={};this.moveListener=new draw2d.ArrayList();this.setDimension(this.width,this.height);this.setDeleteable(true);this.setCanDrag(true);this.setResizeable(true);this.setSelectable(true)};draw2d.Figure.prototype.dispose=function(){this.canvas=null;this.workflow=null;this.moveListener=null;if(this.draggable!==null){this.draggable.removeEventListener("mouseenter",this.tmpMouseEnter);this.draggable.removeEventListener("mouseleave",this.tmpMouseLeave);this.draggable.removeEventListener("dragend",this.tmpDragend);this.draggable.removeEventListener("dragstart",this.tmpDragstart);this.draggable.removeEventListener("drag",this.tmpDrag);this.draggable.removeEventListener("dblclick",this.tmpDoubleClick);this.draggable.node=null;this.draggable.target.removeAllElements()}this.draggable=null;if(this.border!==null){this.border.dispose()}this.border=null;if(this.parent!==null){this.parent.removeChild(this)}};draw2d.Figure.prototype.getProperties=function(){return this.properties};draw2d.Figure.prototype.getProperty=function(a){return this.properties[a]};draw2d.Figure.prototype.setProperty=function(a,b){this.properties[a]=b;this.setDocumentDirty()};draw2d.Figure.prototype.getId=function(){return this.id};draw2d.Figure.prototype.setId=function(a){this.id=a;if(this.html!==null){this.html.id=a}};draw2d.Figure.prototype.setCanvas=function(a){this.canvas=a};draw2d.Figure.prototype.getWorkflow=function(){return this.workflow};draw2d.Figure.prototype.setWorkflow=function(b){if(this.draggable===null){this.html.tabIndex="0";var a=this;this.keyDown=function(c){c.cancelBubble=true;c.returnValue=true;a.onKeyDown(c.keyCode,c.ctrlKey)};if(this.html.addEventListener){this.html.addEventListener("keydown",this.keyDown,false)}else{if(this.html.attachEvent){this.html.attachEvent("onkeydown",this.keyDown)}}this.draggable=new draw2d.Draggable(this.html,draw2d.Draggable.DRAG_X|draw2d.Draggable.DRAG_Y);this.draggable.node=this;this.tmpContextMenu=function(c){a.onContextMenu(a.x+c.x,c.y+a.y)};this.tmpMouseEnter=function(c){a.onMouseEnter()};this.tmpMouseLeave=function(c){a.onMouseLeave()};this.tmpDragend=function(c){a.onDragend()};this.tmpDragstart=function(f){var d=a.workflow;d.showMenu(null);if(d.toolPalette&&d.toolPalette.activeTool){f.returnValue=false;d.onMouseDown(a.x+f.x,f.y+a.y);d.onMouseUp(a.x+f.x,f.y+a.y);return}if(!(a instanceof draw2d.ResizeHandle)&&!(a instanceof draw2d.Port)){var c=d.getBestLine(a.x+f.x,f.y+a.y);if(c!==null){f.returnValue=false;d.setCurrentSelection(c);d.showLineResizeHandles(c);d.onMouseDown(a.x+f.x,f.y+a.y);return}else{if(a.isSelectable()){d.showResizeHandles(a);d.setCurrentSelection(a)}}}f.returnValue=a.onDragstart(f.x,f.y)};this.tmpDrag=function(c){a.onDrag()};this.tmpDoubleClick=function(c){a.onDoubleClick()};this.draggable.addEventListener("contextmenu",this.tmpContextMenu);this.draggable.addEventListener("mouseenter",this.tmpMouseEnter);this.draggable.addEventListener("mouseleave",this.tmpMouseLeave);this.draggable.addEventListener("dragend",this.tmpDragend);this.draggable.addEventListener("dragstart",this.tmpDragstart);this.draggable.addEventListener("drag",this.tmpDrag);this.draggable.addEventListener("dblclick",this.tmpDoubleClick)}this.workflow=b};draw2d.Figure.prototype.createHTMLElement=function(){var a=document.createElement("div");a.id=this.id;a.style.position="absolute";a.style.left=this.x+"px";a.style.top=this.y+"px";a.style.height=this.width+"px";a.style.width=this.height+"px";a.style.margin="0px";a.style.padding="0px";a.style.outline="none";a.style.zIndex=""+draw2d.Figure.ZOrderBaseIndex;return a};draw2d.Figure.prototype.setParent=function(a){this.parent=a};draw2d.Figure.prototype.getParent=function(){return this.parent};draw2d.Figure.prototype.getZOrder=function(){return this.html.style.zIndex};draw2d.Figure.prototype.setZOrder=function(a){this.html.style.zIndex=a};draw2d.Figure.prototype.hasFixedPosition=function(){return false};draw2d.Figure.prototype.getMinWidth=function(){return 5};draw2d.Figure.prototype.getMinHeight=function(){return 5};draw2d.Figure.prototype.getHTMLElement=function(){if(this.html===null){this.html=this.createHTMLElement()}return this.html};draw2d.Figure.prototype.paint=function(){};draw2d.Figure.prototype.setBorder=function(a){if(this.border!==null){this.border.figure=null}this.border=a;this.border.figure=this;this.border.refresh();this.setDocumentDirty()};draw2d.Figure.prototype.onRemove=function(a){};draw2d.Figure.prototype.onContextMenu=function(a,c){var b=this.getContextMenu();if(b!==null){this.workflow.showMenu(b,a,c)}};draw2d.Figure.prototype.getContextMenu=function(){return null};draw2d.Figure.prototype.onDoubleClick=function(){};draw2d.Figure.prototype.onMouseEnter=function(){};draw2d.Figure.prototype.onMouseLeave=function(){};draw2d.Figure.prototype.onDrag=function(){this.x=this.draggable.getLeft();this.y=this.draggable.getTop();if(this.isMoving==false){this.isMoving=true;this.alphaBeforeOnDrag=this.getAlpha();this.setAlpha(this.alphaBeforeOnDrag*0.5)}this.fireMoveEvent()};draw2d.Figure.prototype.onDragend=function(){if(this.getWorkflow().getEnableSmoothFigureHandling()===true){var a=this;var b=function(){if(a.alpha<a.alphaBeforeOnDrag){a.setAlpha(Math.min(1,a.alpha+0.05))}else{window.clearInterval(a.timer);a.timer=-1}};if(a.timer>0){window.clearInterval(a.timer)}a.timer=window.setInterval(b,20)}else{this.setAlpha(this.alphaBeforeOnDrag)}this.command.setPosition(this.x,this.y);this.workflow.commandStack.execute(this.command);this.command=null;this.isMoving=false;this.workflow.hideSnapToHelperLines();this.fireMoveEvent()};draw2d.Figure.prototype.onDragstart=function(a,b){this.command=this.createCommand(new draw2d.EditPolicy(draw2d.EditPolicy.MOVE));return this.command!==null};draw2d.Figure.prototype.setCanDrag=function(a){this.canDrag=a;if(a){this.html.style.cursor="move"}else{this.html.style.cursor=""}};draw2d.Figure.prototype.getCanDrag=function(){return this.canDrag};draw2d.Figure.prototype.setAlpha=function(a){if(this.alpha===a){return}this.alpha=Math.max(0,Math.min(1,a));if(this.alpha==1){this.html.style.filter="";this.html.style.opacity=""}else{this.html.style.filter="alpha(opacity="+Math.round(this.alpha*100)+")";this.html.style.opacity=this.alpha}};draw2d.Figure.prototype.getAlpha=function(){return this.alpha};draw2d.Figure.prototype.setDimension=function(a,b){this.width=Math.max(this.getMinWidth(),a);this.height=Math.max(this.getMinHeight(),b);if(this.html===null){return}this.html.style.width=this.width+"px";this.html.style.height=this.height+"px";this.fireMoveEvent();if(this.workflow!==null&&this.workflow.getCurrentSelection()==this){this.workflow.showResizeHandles(this)}};draw2d.Figure.prototype.setPosition=function(b,a){this.x=b;this.y=a;if(this.html===null){return}this.html.style.left=this.x+"px";this.html.style.top=this.y+"px";this.fireMoveEvent();if(this.workflow!==null&&this.workflow.getCurrentSelection()==this){this.workflow.showResizeHandles(this)}};draw2d.Figure.prototype.isResizeable=function(){return this.resizeable};draw2d.Figure.prototype.setResizeable=function(a){this.resizeable=a};draw2d.Figure.prototype.isSelectable=function(){return this.selectable};draw2d.Figure.prototype.setSelectable=function(a){this.selectable=a};draw2d.Figure.prototype.isStrechable=function(){return true};draw2d.Figure.prototype.isDeleteable=function(){return this.deleteable};draw2d.Figure.prototype.setDeleteable=function(a){this.deleteable=a};draw2d.Figure.prototype.setCanSnapToHelper=function(a){this.canSnapToHelper=a};draw2d.Figure.prototype.getCanSnapToHelper=function(){return this.canSnapToHelper};draw2d.Figure.prototype.getSnapToGridAnchor=function(){return this.snapToGridAnchor};draw2d.Figure.prototype.setSnapToGridAnchor=function(a){this.snapToGridAnchor=a};draw2d.Figure.prototype.getBounds=function(){return new draw2d.Dimension(this.getX(),this.getY(),this.getWidth(),this.getHeight())};draw2d.Figure.prototype.getWidth=function(){return this.width};draw2d.Figure.prototype.getHeight=function(){return this.height};draw2d.Figure.prototype.getY=function(){return this.y};draw2d.Figure.prototype.getX=function(){return this.x};draw2d.Figure.prototype.getAbsoluteY=function(){return this.y};draw2d.Figure.prototype.getAbsoluteX=function(){return this.x};draw2d.Figure.prototype.onKeyDown=function(a,b){if(a==46){this.workflow.getCommandStack().execute(this.createCommand(new draw2d.EditPolicy(draw2d.EditPolicy.DELETE)))}if(b){this.workflow.onKeyDown(a,b)}};draw2d.Figure.prototype.getPosition=function(){return new draw2d.Point(this.x,this.y)};draw2d.Figure.prototype.isOver=function(b,g){var a=this.getAbsoluteX();var f=this.getAbsoluteY();var c=a+this.width;var d=f+this.height;return(b>=a&&b<=c&&g>=f&&g<=d)};draw2d.Figure.prototype.attachMoveListener=function(a){if(a===null||this.moveListener===null){return}this.moveListener.add(a)};draw2d.Figure.prototype.detachMoveListener=function(a){if(a===null||this.moveListener===null){return}this.moveListener.remove(a)};draw2d.Figure.prototype.fireMoveEvent=function(){this.setDocumentDirty();var b=this.moveListener.getSize();for(var a=0;a<b;a++){this.moveListener.get(a).onOtherFigureMoved(this)}};draw2d.Figure.prototype.setModel=function(a){if(this.model!==null){this.model.removePropertyChangeListener(this)}this.model=a;if(this.model!==null){this.model.addPropertyChangeListener(this)}};draw2d.Figure.prototype.getModel=function(){return this.model};draw2d.Figure.prototype.onOtherFigureMoved=function(a){};draw2d.Figure.prototype.setDocumentDirty=function(){if(this.workflow!==null){this.workflow.setDocumentDirty()}};draw2d.Figure.prototype.disableTextSelection=function(a){a.onselectstart=function(){return false};a.unselectable="on";a.style.MozUserSelect="none";a.onmousedown=function(){return false}};draw2d.Figure.prototype.createCommand=function(a){if(a.getPolicy()==draw2d.EditPolicy.MOVE){if(!this.canDrag){return null}return new draw2d.CommandMove(this)}if(a.getPolicy()==draw2d.EditPolicy.DELETE){if(!this.isDeleteable()){return null}return new draw2d.CommandDelete(this)}if(a.getPolicy()==draw2d.EditPolicy.RESIZE){if(!this.isResizeable()){return null}return new draw2d.CommandResize(this)}return null};draw2d.Node=function(){this.bgColor=null;this.lineColor=new draw2d.Color(128,128,255);this.lineStroke=1;this.ports=new draw2d.ArrayList();draw2d.Figure.call(this)};draw2d.Node.prototype=new draw2d.Figure();draw2d.Node.prototype.type="draw2d.Node";draw2d.Node.prototype.dispose=function(){for(var a=0;a<this.ports.getSize();a++){this.ports.get(a).dispose()}this.ports=null;draw2d.Figure.prototype.dispose.call(this)};draw2d.Node.prototype.createHTMLElement=function(){var a=draw2d.Figure.prototype.createHTMLElement.call(this);a.style.width="auto";a.style.height="auto";a.style.margin="0px";a.style.padding="0px";if(this.lineColor!==null){a.style.border=this.lineStroke+"px solid "+this.lineColor.getHTMLStyle()}a.style.fontSize="1px";if(this.bgColor!==null){a.style.backgroundColor=this.bgColor.getHTMLStyle()}return a};draw2d.Node.prototype.paint=function(){draw2d.Figure.prototype.paint.call(this);for(var a=0;a<this.ports.getSize();a++){this.ports.get(a).paint()}};draw2d.Node.prototype.getPorts=function(){return this.ports};draw2d.Node.prototype.getInputPorts=function(){var c=new draw2d.ArrayList();for(var b=0;b<this.ports.getSize();b++){var a=this.ports.get(b);if(a instanceof draw2d.InputPort){c.add(a)}}return c};draw2d.Node.prototype.getOutputPorts=function(){var c=new draw2d.ArrayList();for(var b=0;b<this.ports.getSize();b++){var a=this.ports.get(b);if(a instanceof draw2d.OutputPort){c.add(a)}}return c};draw2d.Node.prototype.getPort=function(b){if(this.ports===null){return null}for(var c=0;c<this.ports.getSize();c++){var a=this.ports.get(c);if(a.getName()==b){return a}}};draw2d.Node.prototype.getInputPort=function(b){if(this.ports===null){return null}for(var c=0;c<this.ports.getSize();c++){var a=this.ports.get(c);if(a.getName()==b&&a instanceof draw2d.InputPort){return a}}};draw2d.Node.prototype.getOutputPort=function(c){if(this.ports===null){return null}for(var b=0;b<this.ports.getSize();b++){var a=this.ports.get(b);if(a.getName()==c&&a instanceof draw2d.OutputPort){return a}}};draw2d.Node.prototype.addPort=function(b,a,c){this.ports.add(b);b.setOrigin(a,c);b.setPosition(a,c);b.setParent(this);b.setDeleteable(false);this.html.appendChild(b.getHTMLElement());if(this.workflow!==null){this.workflow.registerPort(b)}};draw2d.Node.prototype.removePort=function(b){if(this.ports!==null){this.ports.remove(b)}try{this.html.removeChild(b.getHTMLElement())}catch(a){}if(this.workflow!==null){this.workflow.unregisterPort(b)}var d=b.getConnections();for(var c=0;c<d.getSize();++c){this.workflow.removeFigure(d.get(c))}};draw2d.Node.prototype.setWorkflow=function(c){var b=this.workflow;draw2d.Figure.prototype.setWorkflow.call(this,c);if(b!==null){for(var a=0;a<this.ports.getSize();a++){b.unregisterPort(this.ports.get(a))}}if(this.workflow!==null){for(var a=0;a<this.ports.getSize();a++){this.workflow.registerPort(this.ports.get(a))}}};draw2d.Node.prototype.setBackgroundColor=function(a){this.bgColor=a;if(this.bgColor!==null){this.html.style.backgroundColor=this.bgColor.getHTMLStyle()}else{this.html.style.backgroundColor="transparent"}};draw2d.Node.prototype.getBackgroundColor=function(){return this.bgColor};draw2d.Node.prototype.setColor=function(a){this.lineColor=a;if(this.lineColor!==null){this.html.style.border=this.lineStroke+"px solid "+this.lineColor.getHTMLStyle()}else{this.html.style.border="0px"}};draw2d.Node.prototype.setLineWidth=function(a){this.lineStroke=a;if(this.lineColor!==null){this.html.style.border=this.lineStroke+"px solid "+this.lineColor.getHTMLStyle()}else{this.html.style.border="0px"}};draw2d.Node.prototype.getModelSourceConnections=function(){throw"You must override the method [Node.prototype.getModelSourceConnections]"};draw2d.Node.prototype.refreshConnections=function(){if(this.workflow!==null){this.workflow.refreshConnections(this)}};draw2d.VectorFigure=function(){this.bgColor=null;this.lineColor=new draw2d.Color(0,0,0);this.stroke=1;this.graphics=null;draw2d.Node.call(this)};draw2d.VectorFigure.prototype=new draw2d.Node;draw2d.VectorFigure.prototype.type="draw2d.VectorFigure";draw2d.VectorFigure.prototype.dispose=function(){draw2d.Node.prototype.dispose.call(this);this.bgColor=null;this.lineColor=null;if(this.graphics!==null){this.graphics.clear()}this.graphics=null};draw2d.VectorFigure.prototype.createHTMLElement=function(){var a=draw2d.Node.prototype.createHTMLElement.call(this);a.style.border="0px";a.style.backgroundColor="transparent";return a};draw2d.VectorFigure.prototype.setWorkflow=function(a){draw2d.Node.prototype.setWorkflow.call(this,a);if(this.workflow===null){this.graphics.clear();this.graphics=null}};draw2d.VectorFigure.prototype.paint=function(){if(this.html===null){return}try{if(this.graphics===null){this.graphics=new jsGraphics(this.html)}else{this.graphics.clear()}draw2d.Node.prototype.paint.call(this);for(var a=0;a<this.ports.getSize();a++){this.getHTMLElement().appendChild(this.ports.get(a).getHTMLElement())}}catch(b){pushErrorStack(b,"draw2d.VectorFigure.prototype.paint=function()["+area+"]")}};draw2d.VectorFigure.prototype.setDimension=function(a,b){draw2d.Node.prototype.setDimension.call(this,a,b);if(this.graphics!==null){this.paint()}};draw2d.VectorFigure.prototype.setBackgroundColor=function(a){this.bgColor=a;if(this.graphics!==null){this.paint()}};draw2d.VectorFigure.prototype.getBackgroundColor=function(){return this.bgColor};draw2d.VectorFigure.prototype.setLineWidth=function(a){this.stroke=a;if(this.graphics!==null){this.paint()}};draw2d.VectorFigure.prototype.setColor=function(a){this.lineColor=a;if(this.graphics!==null){this.paint()}};draw2d.VectorFigure.prototype.getColor=function(){return this.lineColor};draw2d.SVGFigure=function(b,a){this.bgColor=null;this.lineColor=new draw2d.Color(0,0,0);this.stroke=1;this.context=null;draw2d.Node.call(this);if(b&&a){this.setDimension(b,a)}};draw2d.SVGFigure.prototype=new draw2d.Node();draw2d.SVGFigure.prototype.type="draw2d.SVGFigure";draw2d.SVGFigure.prototype.createHTMLElement=function(){var a=new MooCanvas(this.id,{width:100,height:100});a.style.position="absolute";a.style.left=this.x+"px";a.style.top=this.y+"px";a.style.zIndex=""+draw2d.Figure.ZOrderBaseIndex;this.context=a.getContext("2d");return a};draw2d.SVGFigure.prototype.paint=function(){this.context.clearRect(0,0,this.getWidth(),this.getHeight());this.context.fillStyle="rgba(200,0,0,0.3)";this.context.fillRect(0,0,this.getWidth(),this.getHeight())};draw2d.SVGFigure.prototype.setDimension=function(a,b){draw2d.Node.prototype.setDimension.call(this,a,b);this.html.width=a;this.html.height=b;this.html.style.width=a+"px";this.html.style.height=b+"px";if(this.context!==null){if(this.context.element){this.context.element.style.width=a+"px";this.context.element.style.height=b+"px"}this.paint()}};draw2d.SVGFigure.prototype.setBackgroundColor=function(a){this.bgColor=a;if(this.graphics!==null){this.paint()}};draw2d.SVGFigure.prototype.getBackgroundColor=function(){return this.bgColor};draw2d.SVGFigure.prototype.setLineWidth=function(a){this.stroke=a;if(this.context!==null){this.paint()}};draw2d.SVGFigure.prototype.setColor=function(a){this.lineColor=a;if(this.context!==null){this.paint()}};draw2d.SVGFigure.prototype.getColor=function(){return this.lineColor};draw2d.Label=function(a){this.msg=a;this.bgColor=null;this.color=new draw2d.Color(0,0,0);this.fontSize=10;this.textNode=null;this.align="center";draw2d.Figure.call(this)};draw2d.Label.prototype=new draw2d.Figure();draw2d.Label.prototype.type="draw2d.Label";draw2d.Label.prototype.createHTMLElement=function(){var a=draw2d.Figure.prototype.createHTMLElement.call(this);this.textNode=document.createTextNode(this.msg);a.appendChild(this.textNode);a.style.color=this.color.getHTMLStyle();a.style.fontSize=this.fontSize+"pt";a.style.width="auto";a.style.height="auto";a.style.paddingLeft="3px";a.style.paddingRight="3px";a.style.textAlign=this.align;a.style.MozUserSelect="none";this.disableTextSelection(a);if(this.bgColor!==null){a.style.backgroundColor=this.bgColor.getHTMLStyle()}return a};draw2d.Label.prototype.isResizeable=function(){return false};draw2d.Label.prototype.setWordwrap=function(a){this.html.style.whiteSpace=a?"wrap":"nowrap"};draw2d.Label.prototype.setAlign=function(a){this.align=a;this.html.style.textAlign=a};draw2d.Label.prototype.setBackgroundColor=function(a){this.bgColor=a;if(this.bgColor!==null){this.html.style.backgroundColor=this.bgColor.getHTMLStyle()}else{this.html.style.backgroundColor="transparent"}};draw2d.Label.prototype.setColor=function(a){this.color=a;this.html.style.color=this.color.getHTMLStyle()};draw2d.Label.prototype.setFontSize=function(a){this.fontSize=a;this.html.style.fontSize=this.fontSize+"pt"};draw2d.Label.prototype.setDimension=function(a,b){};draw2d.Label.prototype.getWidth=function(){if(window.getComputedStyle){return parseInt(getComputedStyle(this.html,"").getPropertyValue("width"))}return parseInt(this.html.clientWidth)};draw2d.Label.prototype.getHeight=function(){if(window.getComputedStyle){return parseInt(getComputedStyle(this.html,"").getPropertyValue("height"))}return parseInt(this.html.clientHeight)};draw2d.Label.prototype.getText=function(){return this.msg};draw2d.Label.prototype.setText=function(a){this.msg=a;this.html.removeChild(this.textNode);this.textNode=document.createTextNode(this.msg);this.html.appendChild(this.textNode)};draw2d.Label.prototype.setStyledText=function(a){this.msg=a;this.html.removeChild(this.textNode);this.textNode=document.createElement("div");this.textNode.style.whiteSpace="nowrap";this.textNode.innerHTML=a;this.html.appendChild(this.textNode)};draw2d.Oval=function(){draw2d.VectorFigure.call(this)};draw2d.Oval.prototype=new draw2d.VectorFigure();draw2d.Oval.prototype.type="draw2d.Oval";draw2d.Oval.prototype.paint=function(){if(this.html===null){return}try{draw2d.VectorFigure.prototype.paint.call(this);this.graphics.setStroke(this.stroke);if(this.bgColor!==null){this.graphics.setColor(this.bgColor.getHTMLStyle());this.graphics.fillOval(0,0,this.getWidth()-1,this.getHeight()-1)}if(this.lineColor!==null){this.graphics.setColor(this.lineColor.getHTMLStyle());this.graphics.drawOval(0,0,this.getWidth()-1,this.getHeight()-1)}this.graphics.paint()}catch(a){pushErrorStack(a,"draw2d.Oval.prototype.paint=function()")}};draw2d.Circle=function(a){draw2d.Oval.call(this);if(a){this.setDimension(a,a)}};draw2d.Circle.prototype=new draw2d.Oval();draw2d.Circle.prototype.type="draw2d.Circle";draw2d.Circle.prototype.setDimension=function(a,b){if(a>b){draw2d.Oval.prototype.setDimension.call(this,a,a)}else{draw2d.Oval.prototype.setDimension.call(this,b,b)}};draw2d.Circle.prototype.isStrechable=function(){return false};draw2d.Rectangle=function(a,b){this.bgColor=null;this.lineColor=new draw2d.Color(0,0,0);this.lineStroke=1;draw2d.Figure.call(this);if(a&&b){this.setDimension(a,b)}};draw2d.Rectangle.prototype=new draw2d.Figure();draw2d.Rectangle.prototype.type="draw2d.Rectangle";draw2d.Rectangle.prototype.dispose=function(){draw2d.Figure.prototype.dispose.call(this);this.bgColor=null;this.lineColor=null};draw2d.Rectangle.prototype.createHTMLElement=function(){var a=draw2d.Figure.prototype.createHTMLElement.call(this);a.style.width="auto";a.style.height="auto";a.style.margin="0px";a.style.padding="0px";a.style.border=this.lineStroke+"px solid "+this.lineColor.getHTMLStyle();a.style.fontSize="1px";a.style.lineHeight="1px";a.innerHTML="&nbsp";if(this.bgColor!==null){a.style.backgroundColor=this.bgColor.getHTMLStyle()}return a};draw2d.Rectangle.prototype.setBackgroundColor=function(a){this.bgColor=a;if(this.bgColor!==null){this.html.style.backgroundColor=this.bgColor.getHTMLStyle()}else{this.html.style.backgroundColor="transparent"}};draw2d.Rectangle.prototype.getBackgroundColor=function(){return this.bgColor};draw2d.Rectangle.prototype.setColor=function(a){this.lineColor=a;if(this.lineColor!==null){this.html.style.border=this.lineStroke+"px solid "+this.lineColor.getHTMLStyle()}else{this.html.style.border=this.lineStroke+"0px"}};draw2d.Rectangle.prototype.getColor=function(){return this.lineColor};draw2d.Rectangle.prototype.getWidth=function(){return draw2d.Figure.prototype.getWidth.call(this)+2*this.lineStroke};draw2d.Rectangle.prototype.getHeight=function(){return draw2d.Figure.prototype.getHeight.call(this)+2*this.lineStroke};draw2d.Rectangle.prototype.setDimension=function(a,b){draw2d.Figure.prototype.setDimension.call(this,a-2*this.lineStroke,b-2*this.lineStroke)};draw2d.Rectangle.prototype.setLineWidth=function(a){var b=a-this.lineStroke;this.setDimension(this.getWidth()-2*b,this.getHeight()-2*b);this.lineStroke=a;var d="transparent";if(this.lineColor!==null){d=this.lineColor.getHTMLStyle()}this.html.style.border=this.lineStroke+"px solid "+d};draw2d.Rectangle.prototype.getLineWidth=function(){return this.lineStroke};draw2d.ImageFigure=function(a){if(a===undefined){a=null}this.url=a;draw2d.Node.call(this);this.setDimension(40,40)};draw2d.ImageFigure.prototype=new draw2d.Node;draw2d.ImageFigure.prototype.type="draw2d.Image";draw2d.ImageFigure.prototype.createHTMLElement=function(){var a=draw2d.Node.prototype.createHTMLElement.call(this);a.style.width=this.width+"px";a.style.height=this.height+"px";a.style.margin="0px";a.style.padding="0px";a.style.border="0px";if(this.url!==null){a.style.backgroundImage="url("+this.url+")"}else{a.style.backgroundImage=""}return a};draw2d.ImageFigure.prototype.setColor=function(a){};draw2d.ImageFigure.prototype.isResizeable=function(){return false};draw2d.ImageFigure.prototype.setImage=function(a){if(a===undefined){a=null}this.url=a;if(this.url!==null){this.html.style.backgroundImage="url("+this.url+")"}else{this.html.style.backgroundImage=""}};draw2d.Port=function(b,a){Corona=function(){};Corona.prototype=new draw2d.Circle();Corona.prototype.setAlpha=function(c){draw2d.Circle.prototype.setAlpha.call(this,Math.min(0.3,c));this.setDeleteable(false);this.setCanDrag(false);this.setResizeable(false);this.setSelectable(false)};if(b===null||b===undefined){this.currentUIRepresentation=new draw2d.Circle()}else{this.currentUIRepresentation=b}if(a===null||a===undefined){this.connectedUIRepresentation=new draw2d.Circle();this.connectedUIRepresentation.setColor(null)}else{this.connectedUIRepresentation=a}this.disconnectedUIRepresentation=this.currentUIRepresentation;this.hideIfConnected=false;this.uiRepresentationAdded=true;this.parentNode=null;this.originX=0;this.originY=0;this.coronaWidth=10;this.corona=null;draw2d.Rectangle.call(this);this.setDimension(8,8);this.setBackgroundColor(new draw2d.Color(100,180,100));this.setColor(new draw2d.Color(90,150,90));draw2d.Rectangle.prototype.setColor.call(this,null);this.dropable=new draw2d.DropTarget(this.html);this.dropable.node=this;this.dropable.addEventListener("dragenter",function(c){c.target.node.onDragEnter(c.relatedTarget.node)});this.dropable.addEventListener("dragleave",function(c){c.target.node.onDragLeave(c.relatedTarget.node)});this.dropable.addEventListener("drop",function(c){c.relatedTarget.node.onDrop(c.target.node)})};draw2d.Port.prototype=new draw2d.Rectangle();draw2d.Port.prototype.type="draw2d.Port";draw2d.Port.ZOrderBaseIndex=5000;draw2d.Port.setZOrderBaseIndex=function(a){draw2d.Port.ZOrderBaseIndex=a};draw2d.Port.prototype.setHideIfConnected=function(a){this.hideIfConnected=a};draw2d.Port.prototype.dispose=function(){var b=this.moveListener.getSize();for(var a=0;a<b;a++){var c=this.moveListener.get(a);this.parentNode.workflow.removeFigure(c);c.dispose()}draw2d.Rectangle.prototype.dispose.call(this);this.parentNode=null;this.dropable.node=null;this.dropable=null;this.disconnectedUIRepresentation.dispose();this.connectedUIRepresentation.dispose()};draw2d.Port.prototype.createHTMLElement=function(){var a=draw2d.Rectangle.prototype.createHTMLElement.call(this);a.style.zIndex=draw2d.Port.ZOrderBaseIndex;this.currentUIRepresentation.html.zIndex=draw2d.Port.ZOrderBaseIndex;a.appendChild(this.currentUIRepresentation.html);this.uiRepresentationAdded=true;return a};draw2d.Port.prototype.setUiRepresentation=function(a){if(a===null){a=new draw2d.Figure()}if(this.uiRepresentationAdded){this.html.removeChild(this.currentUIRepresentation.getHTMLElement())}this.html.appendChild(a.getHTMLElement());a.paint();this.currentUIRepresentation=a};draw2d.Port.prototype.onMouseEnter=function(){this.setLineWidth(2)};draw2d.Port.prototype.onMouseLeave=function(){this.setLineWidth(0)};draw2d.Port.prototype.setDimension=function(b,a){draw2d.Rectangle.prototype.setDimension.call(this,b,a);this.connectedUIRepresentation.setDimension(b,a);this.disconnectedUIRepresentation.setDimension(b,a);this.setPosition(this.x,this.y)};draw2d.Port.prototype.setBackgroundColor=function(a){this.currentUIRepresentation.setBackgroundColor(a)};draw2d.Port.prototype.getBackgroundColor=function(){return this.currentUIRepresentation.getBackgroundColor()};draw2d.Port.prototype.getConnections=function(){var d=new draw2d.ArrayList();var c=this.moveListener.getSize();for(var b=0;b<c;b++){var a=this.moveListener.get(b);if(a instanceof draw2d.Connection){d.add(a)}}return d};draw2d.Port.prototype.setColor=function(a){this.currentUIRepresentation.setColor(a)};draw2d.Port.prototype.getColor=function(){return this.currentUIRepresentation.getColor()};draw2d.Port.prototype.setLineWidth=function(a){this.currentUIRepresentation.setLineWidth(a)};draw2d.Port.prototype.getLineWidth=function(){return this.currentUIRepresentation.getLineWidth()};draw2d.Port.prototype.paint=function(){try{this.currentUIRepresentation.paint()}catch(a){pushErrorStack(a,"draw2d.Port.prototype.paint=function()")}};draw2d.Port.prototype.setPosition=function(b,a){this.originX=b;this.originY=a;draw2d.Rectangle.prototype.setPosition.call(this,b,a);if(this.html===null){return}this.html.style.left=(this.x-this.getWidth()/2)+"px";this.html.style.top=(this.y-this.getHeight()/2)+"px"};draw2d.Port.prototype.setParent=function(a){if(this.parentNode!==null){this.parentNode.detachMoveListener(this)}this.parentNode=a;if(this.parentNode!==null){this.parentNode.attachMoveListener(this)}};draw2d.Port.prototype.attachMoveListener=function(a){draw2d.Rectangle.prototype.attachMoveListener.call(this,a);if(this.hideIfConnected==true){this.setUiRepresentation(this.connectedUIRepresentation)}};draw2d.Port.prototype.detachMoveListener=function(a){draw2d.Rectangle.prototype.detachMoveListener.call(this,a);if(this.getConnections().getSize()==0){this.setUiRepresentation(this.disconnectedUIRepresentation)}};draw2d.Port.prototype.getParent=function(){return this.parentNode};draw2d.Port.prototype.onDrag=function(){draw2d.Rectangle.prototype.onDrag.call(this);this.parentNode.workflow.showConnectionLine(this.parentNode.x+this.x,this.parentNode.y+this.y,this.parentNode.x+this.originX,this.parentNode.y+this.originY)};draw2d.Port.prototype.getCoronaWidth=function(){return this.coronaWidth};draw2d.Port.prototype.setCoronaWidth=function(a){this.coronaWidth=a};draw2d.Port.prototype.setOrigin=function(a,b){this.originX=a;this.originY=b};draw2d.Port.prototype.onDragend=function(){this.setAlpha(1);this.setPosition(this.originX,this.originY);this.parentNode.workflow.hideConnectionLine();document.body.focus()};draw2d.Port.prototype.onDragEnter=function(a){var b=new draw2d.EditPolicy(draw2d.EditPolicy.CONNECT);b.canvas=this.parentNode.workflow;b.source=a;b.target=this;var c=this.createCommand(b);if(c===null){return}this.parentNode.workflow.connectionLine.setColor(new draw2d.Color(0,150,0));this.parentNode.workflow.connectionLine.setLineWidth(3);this.showCorona(true)};draw2d.Port.prototype.onDragLeave=function(a){this.parentNode.workflow.connectionLine.setColor(new draw2d.Color(0,0,0));this.parentNode.workflow.connectionLine.setLineWidth(1);this.showCorona(false)};draw2d.Port.prototype.onDrop=function(b){var c=new draw2d.EditPolicy(draw2d.EditPolicy.CONNECT);c.canvas=this.parentNode.workflow;c.source=b;c.target=this;var a=this.createCommand(c);if(a!==null){this.parentNode.workflow.getCommandStack().execute(a)}};draw2d.Port.prototype.getAbsolutePosition=function(){return new draw2d.Point(this.getAbsoluteX(),this.getAbsoluteY())};draw2d.Port.prototype.getAbsoluteBounds=function(){return new draw2d.Dimension(this.getAbsoluteX(),this.getAbsoluteY(),this.getWidth(),this.getHeight())};draw2d.Port.prototype.getAbsoluteY=function(){return this.originY+this.parentNode.getY()};draw2d.Port.prototype.getAbsoluteX=function(){return this.originX+this.parentNode.getX()};draw2d.Port.prototype.onOtherFigureMoved=function(a){this.fireMoveEvent()};draw2d.Port.prototype.getName=function(){return this.name};draw2d.Port.prototype.setName=function(a){this.name=a};draw2d.Port.prototype.isOver=function(b,g){var a=this.getAbsoluteX()-this.coronaWidth-this.getWidth()/2;var f=this.getAbsoluteY()-this.coronaWidth-this.getHeight()/2;var c=a+this.width+(this.coronaWidth*2)+this.getWidth()/2;var d=f+this.height+(this.coronaWidth*2)+this.getHeight()/2;return(b>=a&&b<=c&&g>=f&&g<=d)};draw2d.Port.prototype.showCorona=function(a,b){if(a===true){this.corona=new Corona();this.corona.setAlpha(0.3);this.corona.setBackgroundColor(new draw2d.Color(0,125,125));this.corona.setColor(null);this.corona.setDimension(this.getWidth()+(this.getCoronaWidth()*2),this.getWidth()+(this.getCoronaWidth()*2));this.parentNode.getWorkflow().addFigure(this.corona,this.getAbsoluteX()-this.getCoronaWidth()-this.getWidth()/2,this.getAbsoluteY()-this.getCoronaWidth()-this.getHeight()/2)}else{if(a===false&&this.corona!==null){this.parentNode.getWorkflow().removeFigure(this.corona);this.corona=null}}};draw2d.Port.prototype.createCommand=function(a){if(a.getPolicy()===draw2d.EditPolicy.MOVE){if(!this.canDrag){return null}return new draw2d.CommandMovePort(this)}if(a.getPolicy()===draw2d.EditPolicy.CONNECT){if(a.source.parentNode.id===a.target.parentNode.id){return null}else{return new draw2d.CommandConnect(a.canvas,a.source,a.target)}}return null};draw2d.InputPort=function(a){draw2d.Port.call(this,a)};draw2d.InputPort.prototype=new draw2d.Port();draw2d.InputPort.prototype.type="draw2d.InputPort";draw2d.InputPort.prototype.onDragstart=function(a,b){if(!this.canDrag){return false}return true};draw2d.InputPort.prototype.onDragEnter=function(b){if(b instanceof draw2d.OutputPort){draw2d.Port.prototype.onDragEnter.call(this,b)}else{if(b instanceof draw2d.LineStartResizeHandle){var a=this.workflow.currentSelection;if(a instanceof draw2d.Connection&&a.getSource() instanceof draw2d.InputPort){draw2d.Port.prototype.onDragEnter.call(this,a.getTarget())}}else{if(b instanceof draw2d.LineEndResizeHandle){var a=this.workflow.currentSelection;if(a instanceof draw2d.Connection&&a.getTarget() instanceof draw2d.InputPort){draw2d.Port.prototype.onDragEnter.call(this,a.getSource())}}}}};draw2d.InputPort.prototype.onDragLeave=function(b){if(b instanceof draw2d.OutputPort){draw2d.Port.prototype.onDragLeave.call(this,b)}else{if(b instanceof draw2d.LineStartResizeHandle){var a=this.workflow.currentSelection;if(a instanceof draw2d.Connection&&a.getSource() instanceof draw2d.InputPort){draw2d.Port.prototype.onDragLeave.call(this,a.getTarget())}}else{if(b instanceof draw2d.LineEndResizeHandle){var a=this.workflow.currentSelection;if(a instanceof draw2d.Connection&&a.getTarget() instanceof draw2d.InputPort){draw2d.Port.prototype.onDragLeave.call(this,a.getSource())}}}}};draw2d.InputPort.prototype.createCommand=function(a){if(a.getPolicy()==draw2d.EditPolicy.CONNECT){if(a.source.parentNode.id==a.target.parentNode.id){return null}if(a.source instanceof draw2d.OutputPort){return new draw2d.CommandConnect(a.canvas,a.source,a.target)}return null}return draw2d.Port.prototype.createCommand.call(this,a)};draw2d.OutputPort=function(a){draw2d.Port.call(this,a);this.maxFanOut=100};draw2d.OutputPort.prototype=new draw2d.Port();draw2d.OutputPort.prototype.type="draw2d.OutputPort";draw2d.OutputPort.prototype.onDragEnter=function(b){if(this.getMaxFanOut()<=this.getFanOut()){return}if(b instanceof draw2d.InputPort){draw2d.Port.prototype.onDragEnter.call(this,b)}else{if(b instanceof draw2d.LineStartResizeHandle){var a=this.workflow.currentSelection;if(a instanceof draw2d.Connection&&a.getSource() instanceof draw2d.OutputPort){draw2d.Port.prototype.onDragEnter.call(this,a.getTarget())}}else{if(b instanceof draw2d.LineEndResizeHandle){var a=this.workflow.currentSelection;if(a instanceof draw2d.Connection&&a.getTarget() instanceof draw2d.OutputPort){draw2d.Port.prototype.onDragEnter.call(this,a.getSource())}}}}};draw2d.OutputPort.prototype.onDragLeave=function(b){if(b instanceof draw2d.InputPort){draw2d.Port.prototype.onDragLeave.call(this,b)}else{if(b instanceof draw2d.LineStartResizeHandle){var a=this.workflow.currentSelection;if(a instanceof draw2d.Connection&&a.getSource() instanceof draw2d.OutputPort){draw2d.Port.prototype.onDragLeave.call(this,a.getTarget())}}else{if(b instanceof draw2d.LineEndResizeHandle){var a=this.workflow.currentSelection;if(a instanceof draw2d.Connection&&a.getTarget() instanceof draw2d.OutputPort){draw2d.Port.prototype.onDragLeave.call(this,a.getSource())}}}}};draw2d.OutputPort.prototype.onDragstart=function(a,b){if(!this.canDrag){return false}if(this.maxFanOut===-1){return true}if(this.getMaxFanOut()<=this.getFanOut()){return false}return true};draw2d.OutputPort.prototype.setMaxFanOut=function(a){this.maxFanOut=a};draw2d.OutputPort.prototype.getMaxFanOut=function(){return this.maxFanOut};draw2d.OutputPort.prototype.getFanOut=function(){if(this.getParent().workflow===null){return 0}var f=0;var b=this.getParent().workflow.getLines();var d=b.getSize();for(var c=0;c<d;c++){var a=b.get(c);if(a instanceof draw2d.Connection){if(a.getSource()==this){f++}else{if(a.getTarget()==this){f++}}}}return f};draw2d.OutputPort.prototype.createCommand=function(a){if(a.getPolicy()===draw2d.EditPolicy.CONNECT){if(a.source.parentNode.id===a.target.parentNode.id){return null}if(a.source instanceof draw2d.InputPort){return new draw2d.CommandConnect(a.canvas,a.target,a.source)}return null}return draw2d.Port.prototype.createCommand.call(this,a)};draw2d.Line=function(){this.lineColor=new draw2d.Color(0,0,0);this.stroke=1;this.canvas=null;this.parent=null;this.workflow=null;this.html=null;this.graphics=null;this.id=draw2d.UUID.create();this.startX=30;this.startY=30;this.endX=100;this.endY=100;this.alpha=1;this.isMoving=false;this.model=null;this.zOrder=draw2d.Line.ZOrderBaseIndex;this.corona=draw2d.Line.CoronaWidth;this.properties={};this.moveListener=new draw2d.ArrayList();this.setSelectable(true);this.setDeleteable(true)};draw2d.Line.prototype.type="draw2d.Line";draw2d.Line.ZOrderBaseIndex=200;draw2d.Line.ZOrderBaseIndex=200;draw2d.Line.CoronaWidth=5;draw2d.Line.setZOrderBaseIndex=function(a){draw2d.Line.ZOrderBaseIndex=a};draw2d.Line.setDefaultCoronaWidth=function(a){draw2d.Line.CoronaWidth=a};draw2d.Line.prototype.dispose=function(){this.canvas=null;this.workflow=null;if(this.graphics!==null){this.graphics.clear()}this.graphics=null};draw2d.Line.prototype.getZOrder=function(){return this.zOrder};draw2d.Line.prototype.setZOrder=function(a){if(this.html!==null){this.html.style.zIndex=a}this.zOrder=a};draw2d.Line.prototype.setCoronaWidth=function(a){this.corona=a};draw2d.Line.prototype.createHTMLElement=function(){var a=document.createElement("div");a.id=this.id;a.style.position="absolute";a.style.left="0px";a.style.top="0px";a.style.height="0px";a.style.width="0px";a.style.zIndex=this.zOrder;return a};draw2d.Line.prototype.setId=function(a){this.id=a;if(this.html!==null){this.html.id=a}};draw2d.Line.prototype.getId=function(){return this.id};draw2d.Line.prototype.getProperties=function(){return this.properties};draw2d.Line.prototype.getProperty=function(a){return this.properties[a]};draw2d.Line.prototype.setProperty=function(a,b){this.properties[a]=b;this.setDocumentDirty()};draw2d.Line.prototype.getHTMLElement=function(){if(this.html===null){this.html=this.createHTMLElement()}return this.html};draw2d.Line.prototype.getWorkflow=function(){return this.workflow};draw2d.Line.prototype.isResizeable=function(){return true};draw2d.Line.prototype.setCanvas=function(a){this.canvas=a;if(this.graphics!==null){this.graphics.clear()}this.graphics=null};draw2d.Line.prototype.setWorkflow=function(a){this.workflow=a;if(this.graphics!==null){this.graphics.clear()}this.graphics=null};draw2d.Line.prototype.paint=function(){if(this.html===null){return}try{if(this.graphics===null){this.graphics=new jsGraphics(this.html)}else{this.graphics.clear()}this.graphics.setStroke(this.stroke);this.graphics.setColor(this.lineColor.getHTMLStyle());this.graphics.drawLine(this.startX,this.startY,this.endX,this.endY);this.graphics.paint()}catch(a){pushErrorStack(a,"draw2d.Line.prototype.paint=function()")}};draw2d.Line.prototype.attachMoveListener=function(a){this.moveListener.add(a)};draw2d.Line.prototype.detachMoveListener=function(a){this.moveListener.remove(a)};draw2d.Line.prototype.fireMoveEvent=function(){var b=this.moveListener.getSize();for(var a=0;a<b;a++){this.moveListener.get(a).onOtherFigureMoved(this)}};draw2d.Line.prototype.onOtherFigureMoved=function(a){};draw2d.Line.prototype.setLineWidth=function(a){this.stroke=a;if(this.graphics!==null){this.paint()}this.setDocumentDirty()};draw2d.Line.prototype.setColor=function(a){this.lineColor=a;if(this.graphics!==null){this.paint()}this.setDocumentDirty()};draw2d.Line.prototype.getColor=function(){return this.lineColor};draw2d.Line.prototype.setAlpha=function(f){if(f==this.alpha){return}try{this.html.style.MozOpacity=f}catch(d){}try{this.html.style.opacity=f}catch(c){}try{var b=Math.round(f*100);if(b>=99){this.html.style.filter=""}else{this.html.style.filter="alpha(opacity="+b+")"}}catch(a){}this.alpha=f};draw2d.Line.prototype.setStartPoint=function(a,b){this.startX=a;this.startY=b;if(this.graphics!==null){this.paint()}this.setDocumentDirty()};draw2d.Line.prototype.setEndPoint=function(a,b){this.endX=a;this.endY=b;if(this.graphics!==null){this.paint()}this.setDocumentDirty()};draw2d.Line.prototype.getStartX=function(){return this.startX};draw2d.Line.prototype.getStartY=function(){return this.startY};draw2d.Line.prototype.getStartPoint=function(){return new draw2d.Point(this.startX,this.startY)};draw2d.Line.prototype.getEndX=function(){return this.endX};draw2d.Line.prototype.getEndY=function(){return this.endY};draw2d.Line.prototype.getEndPoint=function(){return new draw2d.Point(this.endX,this.endY)};draw2d.Line.prototype.isSelectable=function(){return this.selectable};draw2d.Line.prototype.setSelectable=function(a){this.selectable=a};draw2d.Line.prototype.isDeleteable=function(){return this.deleteable};draw2d.Line.prototype.setDeleteable=function(a){this.deleteable=a};draw2d.Line.prototype.getLength=function(){return Math.sqrt((this.startX-this.endX)*(this.startX-this.endX)+(this.startY-this.endY)*(this.startY-this.endY))};draw2d.Line.prototype.getAngle=function(){var a=this.getLength();var b=-(180/Math.PI)*Math.asin((this.startY-this.endY)/a);if(b<0){if(this.endX<this.startX){b=Math.abs(b)+180}else{b=360-Math.abs(b)}}else{if(this.endX<this.startX){b=180-b}}return b};draw2d.Line.prototype.createCommand=function(f){if(f.getPolicy()==draw2d.EditPolicy.MOVE){var b=this.getStartX();var d=this.getStartY();var a=this.getEndX();var c=this.getEndY();return new draw2d.CommandMoveLine(this,b,d,a,c)}if(f.getPolicy()==draw2d.EditPolicy.DELETE){if(this.isDeleteable()==false){return null}return new draw2d.CommandDelete(this)}return null};draw2d.Line.prototype.setModel=function(a){if(this.model!==null){this.model.removePropertyChangeListener(this)}this.model=a;if(this.model!==null){this.model.addPropertyChangeListener(this)}};draw2d.Line.prototype.getModel=function(){return this.model};draw2d.Line.prototype.onRemove=function(a){};draw2d.Line.prototype.onContextMenu=function(a,c){var b=this.getContextMenu();if(b!==null){this.workflow.showMenu(b,a,c)}};draw2d.Line.prototype.getContextMenu=function(){return null};draw2d.Line.prototype.onDoubleClick=function(){};draw2d.Line.prototype.setDocumentDirty=function(){if(this.workflow!==null){this.workflow.setDocumentDirty()}};draw2d.Line.prototype.containsPoint=function(b,a){return draw2d.Line.hit(this.corona,this.startX,this.startY,this.endX,this.endY,b,a)};draw2d.Line.hit=function(j,b,k,a,i,h,g){a-=b;i-=k;h-=b;g-=k;var f=h*a+g*i;var d;if(f<=0){d=0}else{h=a-h;g=i-g;f=h*a+g*i;if(f<=0){d=0}else{d=f*f/(a*a+i*i)}}var c=h*h+g*g-d;if(c<0){c=0}return Math.sqrt(c)<j};draw2d.ConnectionRouter=function(){};draw2d.ConnectionRouter.prototype.type="draw2d.ConnectionRouter";draw2d.ConnectionRouter.prototype.getDirection=function(d,f){var c=Math.abs(d.x-f.x);var b=3;var a=Math.abs(d.y-f.y);if(a<=c){c=a;b=0}a=Math.abs(d.getBottom()-f.y);if(a<=c){c=a;b=2}a=Math.abs(d.getRight()-f.x);if(a<c){c=a;b=1}return b};draw2d.ConnectionRouter.prototype.getEndDirection=function(b){var c=b.getEndPoint();var a=b.getTarget().getParent().getBounds();return this.getDirection(a,c)};draw2d.ConnectionRouter.prototype.getStartDirection=function(b){var c=b.getStartPoint();var a=b.getSource().getParent().getBounds();return this.getDirection(a,c)};draw2d.ConnectionRouter.prototype.route=function(a){};draw2d.NullConnectionRouter=function(){};draw2d.NullConnectionRouter.prototype=new draw2d.ConnectionRouter();draw2d.NullConnectionRouter.prototype.type="draw2d.NullConnectionRouter";draw2d.NullConnectionRouter.prototype.invalidate=function(){};draw2d.NullConnectionRouter.prototype.route=function(a){a.addPoint(a.getStartPoint());a.addPoint(a.getEndPoint())};draw2d.ManhattanConnectionRouter=function(){this.MINDIST=20};draw2d.ManhattanConnectionRouter.prototype=new draw2d.ConnectionRouter();draw2d.ManhattanConnectionRouter.prototype.type="draw2d.ManhattanConnectionRouter";draw2d.ManhattanConnectionRouter.prototype.route=function(c){var b=c.getStartPoint();var a=this.getStartDirection(c);var f=c.getEndPoint();var d=this.getEndDirection(c);this._route(c,f,d,b,a)};draw2d.ManhattanConnectionRouter.prototype._route=function(d,o,m,q,c){var f=0.1;var h=0.01;var p=0;var g=1;var l=2;var a=3;var k=o.x-q.x;var i=o.y-q.y;var n;var b;if(((k*k)<(h))&&((i*i)<(h))){d.addPoint(new draw2d.Point(q.x,q.y));return}if(m==a){if((k>0)&&((i*i)<f)&&(c===g)){n=q;b=c}else{if(k<0){n=new draw2d.Point(o.x-this.MINDIST,o.y)}else{if(((i>0)&&(c===l))||((i<0)&&(c==p))){n=new draw2d.Point(q.x,o.y)}else{if(m==c){var j=Math.min(o.x,q.x)-this.MINDIST;n=new draw2d.Point(j,o.y)}else{n=new draw2d.Point(o.x-(k/2),o.y)}}}if(i>0){b=p}else{b=l}}}else{if(m==g){if((k<0)&&((i*i)<f)&&(c===a)){n=q;b=c}else{if(k>0){n=new draw2d.Point(o.x+this.MINDIST,o.y)}else{if(((i>0)&&(c===l))||((i<0)&&(c===p))){n=new draw2d.Point(q.x,o.y)}else{if(m==c){var j=Math.max(o.x,q.x)+this.MINDIST;n=new draw2d.Point(j,o.y)}else{n=new draw2d.Point(o.x-(k/2),o.y)}}}if(i>0){b=p}else{b=l}}}else{if(m==l){if(((k*k)<f)&&(i<0)&&(c==p)){n=q;b=c}else{if(i>0){n=new draw2d.Point(o.x,o.y+this.MINDIST)}else{if(((k>0)&&(c===g))||((k<0)&&(c===a))){n=new draw2d.Point(o.x,q.y)}else{if(m===c){var j=Math.max(o.y,q.y)+this.MINDIST;n=new draw2d.Point(o.x,j)}else{n=new draw2d.Point(o.x,o.y-(i/2))}}}if(k>0){b=a}else{b=g}}}else{if(m==p){if(((k*k)<f)&&(i>0)&&(c===l)){n=q;b=c}else{if(i<0){n=new draw2d.Point(o.x,o.y-this.MINDIST)}else{if(((k>0)&&(c===g))||((k<0)&&(c===a))){n=new draw2d.Point(o.x,q.y)}else{if(m===c){var j=Math.min(o.y,q.y)-this.MINDIST;n=new draw2d.Point(o.x,j)}else{n=new draw2d.Point(o.x,o.y-(i/2))}}}if(k>0){b=a}else{b=g}}}}}}this._route(d,n,b,q,c);d.addPoint(o)};draw2d.BezierConnectionRouter=function(a){if(!a){this.cheapRouter=new draw2d.ManhattanConnectionRouter()}else{this.cheapRouter=null}this.iteration=5};draw2d.BezierConnectionRouter.prototype=new draw2d.ConnectionRouter();draw2d.BezierConnectionRouter.prototype.type="draw2d.BezierConnectionRouter";draw2d.BezierConnectionRouter.prototype.drawBezier=function(a,o,m,l){var d=a.length-1;var c=[];var b=d+1;for(var k=0;k<b;k++){c[k]=[];c[k][0]=a[k]}for(var g=1;g<=d;g++){for(var k=0;k<=(d-g);k++){c[k][g]=new draw2d.Point((1-m)*c[k][g-1].x+m*c[k+1][g-1].x,(1-m)*c[k][g-1].y+m*c[k+1][g-1].y)}}var h=[];var f=[];for(var k=0;k<d+1;k++){h[k]=c[0][k];f[k]=c[k][d-k]}if(l>=0){this.drawBezier(h,o,m,--l);this.drawBezier(f,o,m,--l)}else{for(var k=0;k<d;k++){o.push(c[k][d-k])}}};draw2d.BezierConnectionRouter.prototype.route=function(f){if(this.cheapRouter!==null&&(f.getSource().getParent().isMoving===true||f.getTarget().getParent().isMoving===true)){this.cheapRouter.route(f);return}var d=[];var c=f.getStartPoint();var g=f.getEndPoint();this._route(d,f,g,this.getEndDirection(f),c,this.getStartDirection(f));var a=[];this.drawBezier(d,a,0.5,this.iteration);for(var b=0;b<a.length;b++){f.addPoint(a[b])}f.addPoint(g)};draw2d.BezierConnectionRouter.prototype._route=function(d,i,c,b,l,a){var q=0.1;var g=0.01;var f=90;var h=0;var m=1;var r=2;var n=3;var s=c.x-l.x;var k=c.y-l.y;var p;var o;if(((s*s)<(g))&&((k*k)<(g))){d.push(new draw2d.Point(l.x,l.y));return}if(b===n){if((s>0)&&((k*k)<q)&&(a===m)){p=l;o=a}else{if(s<0){p=new draw2d.Point(c.x-f,c.y)}else{if(((k>0)&&(a===r))||((k<0)&&(a===h))){p=new draw2d.Point(l.x,c.y)}else{if(b===a){var j=Math.min(c.x,l.x)-f;p=new draw2d.Point(j,c.y)}else{p=new draw2d.Point(c.x-(s/2),c.y)}}}if(k>0){o=h}else{o=r}}}else{if(b===m){if((s<0)&&((k*k)<q)&&(a==n)){p=l;o=a}else{if(s>0){p=new draw2d.Point(c.x+f,c.y)}else{if(((k>0)&&(a===r))||((k<0)&&(a===h))){p=new draw2d.Point(l.x,c.y)}else{if(b===a){var j=Math.max(c.x,l.x)+f;p=new draw2d.Point(j,c.y)}else{p=new draw2d.Point(c.x-(s/2),c.y)}}}if(k>0){o=h}else{o=r}}}else{if(b===r){if(((s*s)<q)&&(k<0)&&(a===h)){p=l;o=a}else{if(k>0){p=new draw2d.Point(c.x,c.y+f)}else{if(((s>0)&&(a===m))||((s<0)&&(a===n))){p=new draw2d.Point(c.x,l.y)}else{if(b===a){var j=Math.max(c.y,l.y)+f;p=new draw2d.Point(c.x,j)}else{p=new draw2d.Point(c.x,c.y-(k/2))}}}if(s>0){o=n}else{o=m}}}else{if(b===h){if(((s*s)<q)&&(k>0)&&(a===r)){p=l;o=a}else{if(k<0){p=new draw2d.Point(c.x,c.y-f)}else{if(((s>0)&&(a===m))||((s<0)&&(a===n))){p=new draw2d.Point(c.x,l.y)}else{if(b===a){var j=Math.min(c.y,l.y)-f;p=new draw2d.Point(c.x,j)}else{p=new draw2d.Point(c.x,c.y-(k/2))}}}if(s>0){o=n}else{o=m}}}}}}this._route(d,i,p,o,l,a);d.push(c)};draw2d.FanConnectionRouter=function(){};draw2d.FanConnectionRouter.prototype=new draw2d.NullConnectionRouter();draw2d.FanConnectionRouter.prototype.type="draw2d.FanConnectionRouter";draw2d.FanConnectionRouter.prototype.route=function(g){var f=g.getStartPoint();var j=g.getEndPoint();var a=g.getSource().getConnections();var b=new draw2d.ArrayList();var c=0;for(var d=0;d<a.getSize();d++){var h=a.get(d);if(h.getTarget()==g.getTarget()||h.getSource()==g.getTarget()){b.add(h);if(g==h){c=b.getSize()}}}if(b.getSize()>1){this.routeCollision(g,c)}else{draw2d.NullConnectionRouter.prototype.route.call(this,g)}};draw2d.FanConnectionRouter.prototype.routeNormal=function(a){a.addPoint(a.getStartPoint());a.addPoint(a.getEndPoint())};draw2d.FanConnectionRouter.prototype.routeCollision=function(b,d){var a=b.getStartPoint();var c=b.getEndPoint();b.addPoint(a);var m=10;var l=new draw2d.Point((c.x+a.x)/2,(c.y+a.y)/2);var j=c.getPosition(a);var k;if(j==draw2d.PositionConstants.SOUTH||j==draw2d.PositionConstants.EAST){k=new draw2d.Point(c.x-a.x,c.y-a.y)}else{k=new draw2d.Point(a.x-c.x,a.y-c.y)}var i=Math.sqrt(k.x*k.x+k.y*k.y);var h=m*k.x/i;var g=m*k.y/i;var f;if(d%2===0){f=new draw2d.Point(l.x+(d/2)*(-1*g),l.y+(d/2)*h)}else{f=new draw2d.Point(l.x+(d/2)*g,l.y+(d/2)*(-1*h))}b.addPoint(f);b.addPoint(c)};draw2d.Graphics=function(a,c,b){this.jsGraphics=a;this.xt=b.x;this.yt=b.y;this.radian=c*Math.PI/180;this.sinRadian=Math.sin(this.radian);this.cosRadian=Math.cos(this.radian)};draw2d.Graphics.prototype.setStroke=function(a){this.jsGraphics.setStroke(a)};draw2d.Graphics.prototype.drawLine=function(b,d,a,c){var g=this.xt+b*this.cosRadian-d*this.sinRadian;var i=this.yt+b*this.sinRadian+d*this.cosRadian;var f=this.xt+a*this.cosRadian-c*this.sinRadian;var h=this.yt+a*this.sinRadian+c*this.cosRadian;this.jsGraphics.drawLine(g,i,f,h)};draw2d.Graphics.prototype.fillRect=function(l,i,m,d){var c=this.xt+l*this.cosRadian-i*this.sinRadian;var k=this.yt+l*this.sinRadian+i*this.cosRadian;var b=this.xt+(l+m)*this.cosRadian-i*this.sinRadian;var j=this.yt+(l+m)*this.sinRadian+i*this.cosRadian;var a=this.xt+(l+m)*this.cosRadian-(i+d)*this.sinRadian;var g=this.yt+(l+m)*this.sinRadian+(i+d)*this.cosRadian;var n=this.xt+l*this.cosRadian-(i+d)*this.sinRadian;var f=this.yt+l*this.sinRadian+(i+d)*this.cosRadian;this.jsGraphics.fillPolygon([c,b,a,n],[k,j,g,f])};draw2d.Graphics.prototype.fillPolygon=function(c,a){var f=[];var d=[];for(var b=0;b<c.length;b++){f[b]=this.xt+c[b]*this.cosRadian-a[b]*this.sinRadian;d[b]=this.yt+c[b]*this.sinRadian+a[b]*this.cosRadian}this.jsGraphics.fillPolygon(f,d)};draw2d.Graphics.prototype.setColor=function(a){this.jsGraphics.setColor(a.getHTMLStyle())};draw2d.Graphics.prototype.drawPolygon=function(f,d){var c=[];var b=[];for(var a=0;a<f.length;a++){c[a]=this.xt+f[a]*this.cosRadian-d[a]*this.sinRadian;b[a]=this.yt+f[a]*this.sinRadian+d[a]*this.cosRadian}this.jsGraphics.drawPolygon(c,b)};draw2d.Connection=function(){draw2d.Line.call(this);this.sourcePort=null;this.targetPort=null;this.canDrag=true;this.sourceDecorator=null;this.targetDecorator=null;this.sourceAnchor=new draw2d.ConnectionAnchor();this.targetAnchor=new draw2d.ConnectionAnchor();this.router=draw2d.Connection.defaultRouter;this.lineSegments=new draw2d.ArrayList();this.children=new draw2d.ArrayList();this.setColor(new draw2d.Color(0,0,115));this.setLineWidth(1)};draw2d.Connection.prototype=new draw2d.Line();draw2d.Connection.prototype.type="draw2d.Connection";draw2d.Connection.defaultRouter=new draw2d.ManhattanConnectionRouter();draw2d.Connection.setDefaultRouter=function(a){draw2d.Connection.defaultRouter=a};draw2d.Connection.prototype.disconnect=function(){if(this.sourcePort!==null){this.sourcePort.detachMoveListener(this);this.fireSourcePortRouteEvent()}if(this.targetPort!==null){this.targetPort.detachMoveListener(this);this.fireTargetPortRouteEvent()}};draw2d.Connection.prototype.reconnect=function(){if(this.sourcePort!==null){this.sourcePort.attachMoveListener(this);this.fireSourcePortRouteEvent()}if(this.targetPort!==null){this.targetPort.attachMoveListener(this);this.fireTargetPortRouteEvent()}};draw2d.Connection.prototype.isResizeable=function(){return this.getCanDrag()};draw2d.Connection.prototype.setCanDrag=function(a){this.canDrag=a};draw2d.Connection.prototype.getCanDrag=function(){return this.canDrag};draw2d.Connection.prototype.addFigure=function(c,f){var d={};d.figure=c;d.locator=f;this.children.add(d);if(this.graphics!==null){this.paint()}var b=this;var a=function(){var g=arguments[0]||window.event;g.returnValue=false;b.getWorkflow().setCurrentSelection(b);b.getWorkflow().showLineResizeHandles(b)};if(c.getHTMLElement().addEventListener){c.getHTMLElement().addEventListener("mousedown",a,false)}else{if(c.getHTMLElement().attachEvent){c.getHTMLElement().attachEvent("onmousedown",a)}}};draw2d.Connection.prototype.setSourceDecorator=function(a){this.sourceDecorator=a;if(this.graphics!==null){this.paint()}};draw2d.Connection.prototype.getSourceDecorator=function(){return this.sourceDecorator};draw2d.Connection.prototype.setTargetDecorator=function(a){this.targetDecorator=a;if(this.graphics!==null){this.paint()}};draw2d.Connection.prototype.getTargetDecorator=function(){return this.targetDecorator};draw2d.Connection.prototype.setSourceAnchor=function(a){this.sourceAnchor=a;this.sourceAnchor.setOwner(this.sourcePort);if(this.graphics!==null){this.paint()}};draw2d.Connection.prototype.setTargetAnchor=function(a){this.targetAnchor=a;this.targetAnchor.setOwner(this.targetPort);if(this.graphics!==null){this.paint()}};draw2d.Connection.prototype.setRouter=function(a){if(a!==null){this.router=a}else{this.router=new draw2d.NullConnectionRouter()}if(this.graphics!==null){this.paint()}};draw2d.Connection.prototype.getRouter=function(){return this.router};draw2d.Connection.prototype.setWorkflow=function(a){draw2d.Line.prototype.setWorkflow.call(this,a);for(var b=0;b<this.children.getSize();b++){this.children.get(b).isAppended=false}};draw2d.Connection.prototype.paint=function(){if(this.html===null){return}try{for(var a=0;a<this.children.getSize();a++){var b=this.children.get(a);if(b.isAppended==true){this.html.removeChild(b.figure.getHTMLElement())}b.isAppended=false}if(this.graphics===null){this.graphics=new jsGraphics(this.html)}else{this.graphics.clear()}this.graphics.setStroke(this.stroke);this.graphics.setColor(this.lineColor.getHTMLStyle());this.startStroke();this.router.route(this);if(this.getSource().getParent().isMoving==false&&this.getTarget().getParent().isMoving==false){if(this.targetDecorator!==null){this.targetDecorator.paint(new draw2d.Graphics(this.graphics,this.getEndAngle(),this.getEndPoint()))}if(this.sourceDecorator!==null){this.sourceDecorator.paint(new draw2d.Graphics(this.graphics,this.getStartAngle(),this.getStartPoint()))}}this.finishStroke();for(var a=0;a<this.children.getSize();a++){var b=this.children.get(a);this.html.appendChild(b.figure.getHTMLElement());b.isAppended=true;b.locator.relocate(b.figure)}}catch(c){pushErrorStack(c,"draw2d.Connection.prototype.paint=function()")}};draw2d.Connection.prototype.getStartPoint=function(){if(this.isMoving==false){return this.sourceAnchor.getLocation(this.targetAnchor.getReferencePoint())}else{return draw2d.Line.prototype.getStartPoint.call(this)}};draw2d.Connection.prototype.getEndPoint=function(){if(this.isMoving==false){return this.targetAnchor.getLocation(this.sourceAnchor.getReferencePoint())}else{return draw2d.Line.prototype.getEndPoint.call(this)}};draw2d.Connection.prototype.startStroke=function(){this.oldPoint=null;this.lineSegments=new draw2d.ArrayList()};draw2d.Connection.prototype.finishStroke=function(){this.graphics.paint();this.oldPoint=null};draw2d.Connection.prototype.getPoints=function(){var c=new draw2d.ArrayList();var a=null;for(var b=0;b<this.lineSegments.getSize();b++){a=this.lineSegments.get(b);c.add(a.start)}if(a!==null){c.add(a.end)}return c};draw2d.Connection.prototype.addPoint=function(b){b=new draw2d.Point(parseInt(b.x),parseInt(b.y));if(this.oldPoint!==null){this.graphics.drawLine(this.oldPoint.x,this.oldPoint.y,b.x,b.y);var a={};a.start=this.oldPoint;a.end=b;this.lineSegments.add(a)}this.oldPoint={};this.oldPoint.x=b.x;this.oldPoint.y=b.y};draw2d.Connection.prototype.refreshSourcePort=function(){var d=this.getModel().getSourceModel();var g=this.getModel().getSourcePortName();var c=this.getWorkflow().getDocument().getFigures();var h=c.getSize();for(var f=0;f<h;f++){var a=c.get(f);if(a.getModel()==d){var b=a.getOutputPort(g);this.setSource(b)}}this.setRouter(this.getRouter())};draw2d.Connection.prototype.refreshTargetPort=function(){var d=this.getModel().getTargetModel();var c=this.getModel().getTargetPortName();var a=this.getWorkflow().getDocument().getFigures();var g=a.getSize();for(var f=0;f<g;f++){var h=a.get(f);if(h.getModel()==d){var b=h.getInputPort(c);this.setTarget(b)}}this.setRouter(this.getRouter())};draw2d.Connection.prototype.setSource=function(a){if(this.sourcePort!==null){this.sourcePort.detachMoveListener(this)}this.sourcePort=a;if(this.sourcePort===null){return}this.sourceAnchor.setOwner(this.sourcePort);this.fireSourcePortRouteEvent();this.sourcePort.attachMoveListener(this);this.setStartPoint(a.getAbsoluteX(),a.getAbsoluteY())};draw2d.Connection.prototype.getSource=function(){return this.sourcePort};draw2d.Connection.prototype.setTarget=function(a){if(this.targetPort!==null){this.targetPort.detachMoveListener(this)}this.targetPort=a;if(this.targetPort===null){return}this.targetAnchor.setOwner(this.targetPort);this.fireTargetPortRouteEvent();this.targetPort.attachMoveListener(this);this.setEndPoint(a.getAbsoluteX(),a.getAbsoluteY())};draw2d.Connection.prototype.getTarget=function(){return this.targetPort};draw2d.Connection.prototype.onOtherFigureMoved=function(a){if(a==this.sourcePort){this.setStartPoint(this.sourcePort.getAbsoluteX(),this.sourcePort.getAbsoluteY())}else{this.setEndPoint(this.targetPort.getAbsoluteX(),this.targetPort.getAbsoluteY())}};draw2d.Connection.prototype.containsPoint=function(d,b){for(var c=0;c<this.lineSegments.getSize();c++){var a=this.lineSegments.get(c);if(draw2d.Line.hit(this.corona,a.start.x,a.start.y,a.end.x,a.end.y,d,b)){return true}}return false};draw2d.Connection.prototype.getStartAngle=function(){var d=this.lineSegments.get(0).start;var b=this.lineSegments.get(0).end;if(this.router instanceof draw2d.BezierConnectionRouter){b=this.lineSegments.get(5).end}var a=Math.sqrt((d.x-b.x)*(d.x-b.x)+(d.y-b.y)*(d.y-b.y));var c=-(180/Math.PI)*Math.asin((d.y-b.y)/a);if(c<0){if(b.x<d.x){c=Math.abs(c)+180}else{c=360-Math.abs(c)}}else{if(b.x<d.x){c=180-c}}return c};draw2d.Connection.prototype.getEndAngle=function(){if(this.lineSegments.getSize()===0){return 90}var d=this.lineSegments.get(this.lineSegments.getSize()-1).end;var b=this.lineSegments.get(this.lineSegments.getSize()-1).start;if(this.router instanceof draw2d.BezierConnectionRouter){b=this.lineSegments.get(this.lineSegments.getSize()-5).end}var a=Math.sqrt((d.x-b.x)*(d.x-b.x)+(d.y-b.y)*(d.y-b.y));var c=-(180/Math.PI)*Math.asin((d.y-b.y)/a);if(c<0){if(b.x<d.x){c=Math.abs(c)+180}else{c=360-Math.abs(c)}}else{if(b.x<d.x){c=180-c}}return c};draw2d.Connection.prototype.fireSourcePortRouteEvent=function(){var a=this.sourcePort.getConnections();for(var b=0;b<a.getSize();b++){a.get(b).paint()}};draw2d.Connection.prototype.fireTargetPortRouteEvent=function(){var b=this.targetPort.getConnections();for(var a=0;a<b.getSize();a++){b.get(a).paint()}};draw2d.Connection.prototype.createCommand=function(a){if(a.getPolicy()==draw2d.EditPolicy.MOVE){return new draw2d.CommandReconnect(this)}if(a.getPolicy()==draw2d.EditPolicy.DELETE){if(this.isDeleteable()==true){return new draw2d.CommandDelete(this)}return null}return null};draw2d.ConnectionAnchor=function(a){this.owner=a};draw2d.ConnectionAnchor.prototype.type="draw2d.ConnectionAnchor";draw2d.ConnectionAnchor.prototype.getLocation=function(a){return this.getReferencePoint()};draw2d.ConnectionAnchor.prototype.getOwner=function(){return this.owner};draw2d.ConnectionAnchor.prototype.setOwner=function(a){this.owner=a};draw2d.ConnectionAnchor.prototype.getBox=function(){return this.getOwner().getAbsoluteBounds()};draw2d.ConnectionAnchor.prototype.getReferencePoint=function(){if(this.getOwner()===null){return null}else{return this.getOwner().getAbsolutePosition()}};draw2d.ChopboxConnectionAnchor=function(a){draw2d.ConnectionAnchor.call(this,a)};draw2d.ChopboxConnectionAnchor.prototype=new draw2d.ConnectionAnchor();draw2d.ChopboxConnectionAnchor.prototype.type="draw2d.ChopboxConnectionAnchor";draw2d.ChopboxConnectionAnchor.prototype.getLocation=function(c){var f=new draw2d.Dimension();f.setBounds(this.getBox());f.translate(-1,-1);f.resize(1,1);var g=f.x+f.w/2;var d=f.y+f.h/2;if(f.isEmpty()||(c.x==g&&c.y==d)){return new Point(g,d)}var b=c.x-g;var a=c.y-d;var h=0.5/Math.max(Math.abs(b)/f.w,Math.abs(a)/f.h);b*=h;a*=h;g+=b;d+=a;return new draw2d.Point(Math.round(g),Math.round(d))};draw2d.ChopboxConnectionAnchor.prototype.getBox=function(){return this.getOwner().getParent().getBounds()};draw2d.ChopboxConnectionAnchor.prototype.getReferencePoint=function(){return this.getBox().getCenter()};draw2d.ConnectionDecorator=function(){this.color=new draw2d.Color(0,0,0);this.backgroundColor=new draw2d.Color(250,250,250)};draw2d.ConnectionDecorator.prototype.type="draw2d.ConnectionDecorator";draw2d.ConnectionDecorator.prototype.paint=function(a){};draw2d.ConnectionDecorator.prototype.setColor=function(a){this.color=a};draw2d.ConnectionDecorator.prototype.setBackgroundColor=function(a){this.backgroundColor=a};draw2d.ArrowConnectionDecorator=function(a,b){draw2d.ConnectionDecorator.call(this);if(a===undefined||a<1){this.lenght=15}if(b===undefined||b<1){this.width=10}};draw2d.ArrowConnectionDecorator.prototype=new draw2d.ConnectionDecorator();draw2d.ArrowConnectionDecorator.prototype.type="draw2d.ArrowConnectionDecorator";draw2d.ArrowConnectionDecorator.prototype.paint=function(a){if(this.backgroundColor!==null){a.setColor(this.backgroundColor);a.fillPolygon([3,this.lenght,this.lenght,3],[0,(this.width/2),-(this.width/2),0])}a.setColor(this.color);a.setStroke(1);a.drawPolygon([3,this.lenght,this.lenght,3],[0,(this.width/2),-(this.width/2),0])};draw2d.ArrowConnectionDecorator.prototype.setDimension=function(a,b){this.width=w;this.lenght=a};draw2d.CompartmentFigure=function(){draw2d.Node.call(this);this.children=new draw2d.ArrayList();this.setBorder(new draw2d.LineBorder(1));this.dropable=new draw2d.DropTarget(this.html);this.dropable.node=this;this.dropable.addEventListener("figureenter",function(a){a.target.node.onFigureEnter(a.relatedTarget.node)});this.dropable.addEventListener("figureleave",function(a){a.target.node.onFigureLeave(a.relatedTarget.node)});this.dropable.addEventListener("figuredrop",function(a){a.target.node.onFigureDrop(a.relatedTarget.node)})};draw2d.CompartmentFigure.prototype=new draw2d.Node();draw2d.CompartmentFigure.prototype.type="draw2d.CompartmentFigure";draw2d.CompartmentFigure.prototype.onFigureEnter=function(a){};draw2d.CompartmentFigure.prototype.onFigureLeave=function(a){};draw2d.CompartmentFigure.prototype.onFigureDrop=function(a){};draw2d.CompartmentFigure.prototype.getChildren=function(){return this.children};draw2d.CompartmentFigure.prototype.addChild=function(a){a.setZOrder(this.getZOrder()+1);a.setParent(this);this.children.add(a)};draw2d.CompartmentFigure.prototype.removeChild=function(a){a.setParent(null);this.children.remove(a)};draw2d.CompartmentFigure.prototype.setZOrder=function(a){draw2d.Node.prototype.setZOrder.call(this,a);for(var b=0;b<this.children.getSize();b++){this.children.get(b).setZOrder(a+1)}};draw2d.CompartmentFigure.prototype.setPosition=function(f,d){var c=this.getX();var b=this.getY();draw2d.Node.prototype.setPosition.call(this,f,d);for(var a=0;a<this.children.getSize();a++){var g=this.children.get(a);g.setPosition(g.getX()+this.getX()-c,g.getY()+this.getY()-b)}};draw2d.CompartmentFigure.prototype.onDrag=function(){var c=this.getX();var b=this.getY();draw2d.Node.prototype.onDrag.call(this);for(var a=0;a<this.children.getSize();a++){var d=this.children.get(a);d.setPosition(d.getX()+this.getX()-c,d.getY()+this.getY()-b)}};draw2d.CanvasDocument=function(a){this.canvas=a};draw2d.CanvasDocument.prototype.type="draw2d.CanvasDocument";draw2d.CanvasDocument.prototype.getFigures=function(){var a=new draw2d.ArrayList();var f=this.canvas.figures;var d=this.canvas.dialogs;for(var c=0;c<f.getSize();c++){var b=f.get(c);if(d.indexOf(b)==-1&&b.getParent()===null&&!(b instanceof draw2d.WindowFigure)){a.add(b)}}return a};draw2d.CanvasDocument.prototype.getFigure=function(a){return this.canvas.getFigure(a)};draw2d.CanvasDocument.prototype.getLines=function(){return this.canvas.getLines()};draw2d.CanvasDocument.prototype.getLine=function(a){return this.canvas.getLine(a)};draw2d.Annotation=function(a){this.msg=a;this.alpha=1;this.color=new draw2d.Color(0,0,0);this.bgColor=new draw2d.Color(241,241,121);this.fontSize=10;this.textNode=null;draw2d.Figure.call(this)};draw2d.Annotation.prototype=new draw2d.Figure();draw2d.Annotation.prototype.type="draw2d.Annotation";draw2d.Annotation.prototype.createHTMLElement=function(){var a=draw2d.Figure.prototype.createHTMLElement.call(this);a.style.color=this.color.getHTMLStyle();a.style.backgroundColor=this.bgColor.getHTMLStyle();a.style.fontSize=this.fontSize+"pt";a.style.width="auto";a.style.height="auto";a.style.margin="0px";a.style.padding="0px";a.onselectstart=function(){return false};a.unselectable="on";a.style.cursor="default";this.textNode=document.createTextNode(this.msg);a.appendChild(this.textNode);this.disableTextSelection(a);return a};draw2d.Annotation.prototype.onDoubleClick=function(){var a=new draw2d.AnnotationDialog(this);this.workflow.showDialog(a)};draw2d.Annotation.prototype.setBackgroundColor=function(a){this.bgColor=a;if(this.bgColor!==null){this.html.style.backgroundColor=this.bgColor.getHTMLStyle()}else{this.html.style.backgroundColor="transparent"}};draw2d.Annotation.prototype.getBackgroundColor=function(){return this.bgColor};draw2d.Annotation.prototype.setFontSize=function(a){this.fontSize=a;this.html.style.fontSize=this.fontSize+"pt"};draw2d.Annotation.prototype.getText=function(){return this.msg};draw2d.Annotation.prototype.setText=function(a){this.msg=a;this.html.removeChild(this.textNode);this.textNode=document.createTextNode(this.msg);this.html.appendChild(this.textNode)};draw2d.Annotation.prototype.setStyledText=function(a){this.msg=a;this.html.removeChild(this.textNode);this.textNode=document.createElement("div");this.textNode.innerHTML=a;this.html.appendChild(this.textNode)};draw2d.ResizeHandle=function(d,a){draw2d.Rectangle.call(this,5,5);this.type=a;var c=this.getWidth();var b=c/2;switch(this.type){case 1:this.setSnapToGridAnchor(new draw2d.Point(c,c));break;case 2:this.setSnapToGridAnchor(new draw2d.Point(b,c));break;case 3:this.setSnapToGridAnchor(new draw2d.Point(0,c));break;case 4:this.setSnapToGridAnchor(new draw2d.Point(0,b));break;case 5:this.setSnapToGridAnchor(new draw2d.Point(0,0));break;case 6:this.setSnapToGridAnchor(new draw2d.Point(b,0));break;case 7:this.setSnapToGridAnchor(new draw2d.Point(c,0));break;case 8:this.setSnapToGridAnchor(new draw2d.Point(c,b));case 9:this.setSnapToGridAnchor(new draw2d.Point(b,b));break}this.setBackgroundColor(new draw2d.Color(0,255,0));this.setWorkflow(d);this.setZOrder(10000)};draw2d.ResizeHandle.prototype=new draw2d.Rectangle();draw2d.ResizeHandle.prototype.type="draw2d.ResizeHandle";draw2d.ResizeHandle.prototype.getSnapToDirection=function(){switch(this.type){case 1:return draw2d.SnapToHelper.NORTH_WEST;case 2:return draw2d.SnapToHelper.NORTH;case 3:return draw2d.SnapToHelper.NORTH_EAST;case 4:return draw2d.SnapToHelper.EAST;case 5:return draw2d.SnapToHelper.SOUTH_EAST;case 6:return draw2d.SnapToHelper.SOUTH;case 7:return draw2d.SnapToHelper.SOUTH_WEST;case 8:return draw2d.SnapToHelper.WEST;case 9:return draw2d.SnapToHelper.CENTER}};draw2d.ResizeHandle.prototype.onDragend=function(){var a=this.workflow.currentSelection;if(this.commandMove!==null){this.commandMove.setPosition(a.getX(),a.getY());this.workflow.getCommandStack().execute(this.commandMove);this.commandMove=null}if(this.commandResize!==null){this.commandResize.setDimension(a.getWidth(),a.getHeight());this.workflow.getCommandStack().execute(this.commandResize);this.commandResize=null}this.workflow.hideSnapToHelperLines()};draw2d.ResizeHandle.prototype.setPosition=function(b,a){this.x=b;this.y=a;if(this.html===null){return}this.html.style.left=this.x+"px";this.html.style.top=this.y+"px"};draw2d.ResizeHandle.prototype.onDragstart=function(a,c){if(!this.canDrag){return false}var b=this.workflow.currentSelection;this.commandMove=b.createCommand(new draw2d.EditPolicy(draw2d.EditPolicy.MOVE));this.commandResize=b.createCommand(new draw2d.EditPolicy(draw2d.EditPolicy.RESIZE));return true};draw2d.ResizeHandle.prototype.onDrag=function(){var i=this.getX();var h=this.getY();draw2d.Rectangle.prototype.onDrag.call(this);var g=i-this.getX();var d=h-this.getY();var f=this.workflow.currentSelection.getX();var c=this.workflow.currentSelection.getY();var b=this.workflow.currentSelection.getWidth();var a=this.workflow.currentSelection.getHeight();switch(this.type){case 1:this.workflow.currentSelection.setPosition(f-g,c-d);this.workflow.currentSelection.setDimension(b+g,a+d);break;case 2:this.workflow.currentSelection.setPosition(f,c-d);this.workflow.currentSelection.setDimension(b,a+d);break;case 3:this.workflow.currentSelection.setPosition(f,c-d);this.workflow.currentSelection.setDimension(b-g,a+d);break;case 4:this.workflow.currentSelection.setPosition(f,c);this.workflow.currentSelection.setDimension(b-g,a);break;case 5:this.workflow.currentSelection.setPosition(f,c);this.workflow.currentSelection.setDimension(b-g,a-d);break;case 6:this.workflow.currentSelection.setPosition(f,c);this.workflow.currentSelection.setDimension(b,a-d);break;case 7:this.workflow.currentSelection.setPosition(f-g,c);this.workflow.currentSelection.setDimension(b+g,a-d);break;case 8:this.workflow.currentSelection.setPosition(f-g,c);this.workflow.currentSelection.setDimension(b+g,a);break}this.workflow.moveResizeHandles(this.workflow.getCurrentSelection())};draw2d.ResizeHandle.prototype.setCanDrag=function(a){draw2d.Rectangle.prototype.setCanDrag.call(this,a);if(this.html===null){return}if(!a){this.html.style.cursor="";return}switch(this.type){case 1:this.html.style.cursor="nw-resize";break;case 2:this.html.style.cursor="s-resize";break;case 3:this.html.style.cursor="ne-resize";break;case 4:this.html.style.cursor="w-resize";break;case 5:this.html.style.cursor="se-resize";break;case 6:this.html.style.cursor="n-resize";break;case 7:this.html.style.cursor="sw-resize";break;case 8:this.html.style.cursor="e-resize";break;case 9:this.html.style.cursor="resize";break}};draw2d.ResizeHandle.prototype.onKeyDown=function(b,a){this.workflow.onKeyDown(b,a)};draw2d.ResizeHandle.prototype.fireMoveEvent=function(){};draw2d.LineStartResizeHandle=function(a){draw2d.ResizeHandle.call(this,a,9);this.setDimension(10,10);this.setBackgroundColor(new draw2d.Color(100,255,0));this.setZOrder(10000)};draw2d.LineStartResizeHandle.prototype=new draw2d.ResizeHandle();draw2d.LineStartResizeHandle.prototype.type="draw2d.LineStartResizeHandle";draw2d.LineStartResizeHandle.prototype.onDragend=function(){if(this.workflow.currentSelection instanceof draw2d.Connection){if(this.command!==null){this.command.cancel()}}else{if(this.command!==null){this.getWorkflow().getCommandStack().execute(this.command)}}this.command=null};draw2d.LineStartResizeHandle.prototype.onDragstart=function(a,b){if(!this.canDrag){return false}this.command=this.workflow.currentSelection.createCommand(new draw2d.EditPolicy(draw2d.EditPolicy.MOVE));return this.command!==null};draw2d.LineStartResizeHandle.prototype.onDrag=function(){var f=this.getX();var d=this.getY();draw2d.Rectangle.prototype.onDrag.call(this);var c=f-this.getX();var b=d-this.getY();var g=this.workflow.currentSelection.getStartPoint();var a=this.workflow.currentSelection;a.setStartPoint(g.x-c,g.y-b);a.isMoving=true};draw2d.LineStartResizeHandle.prototype.onDrop=function(b){var a=this.workflow.currentSelection;a.isMoving=false;if(a instanceof draw2d.Connection){this.command.setNewPorts(b,a.getTarget());this.getWorkflow().getCommandStack().execute(this.command)}this.command=null};draw2d.LineEndResizeHandle=function(a){draw2d.ResizeHandle.call(this,a,9);this.setDimension(10,10);this.setBackgroundColor(new draw2d.Color(0,255,0));this.setZOrder(10000)};draw2d.LineEndResizeHandle.prototype=new draw2d.ResizeHandle();draw2d.LineEndResizeHandle.prototype.type="draw2d.LineEndResizeHandle";draw2d.LineEndResizeHandle.prototype.onDragend=function(){if(this.workflow.currentSelection instanceof draw2d.Connection){if(this.command!==null){this.command.cancel()}}else{if(this.command!==null){this.workflow.getCommandStack().execute(this.command)}}this.command=null};draw2d.LineEndResizeHandle.prototype.onDragstart=function(a,b){if(!this.canDrag){return false}this.command=this.workflow.currentSelection.createCommand(new draw2d.EditPolicy(draw2d.EditPolicy.MOVE));return this.command!==null};draw2d.LineEndResizeHandle.prototype.onDrag=function(){var g=this.getX();var f=this.getY();draw2d.Rectangle.prototype.onDrag.call(this);var c=g-this.getX();var b=f-this.getY();var d=this.workflow.currentSelection.getEndPoint();var a=this.workflow.currentSelection;a.setEndPoint(d.x-c,d.y-b);a.isMoving=true};draw2d.LineEndResizeHandle.prototype.onDrop=function(b){var a=this.workflow.currentSelection;a.isMoving=false;if(a instanceof draw2d.Connection){this.command.setNewPorts(a.getSource(),b);this.getWorkflow().getCommandStack().execute(this.command)}this.command=null};draw2d.Canvas=function(a){try{if(a){this.construct(a)}this.enableSmoothFigureHandling=false;this.canvasLines=new draw2d.ArrayList()}catch(b){pushErrorStack(b,"draw2d.Canvas=function(/*:String*/id)")}};draw2d.Canvas.IMAGE_BASE_URL="";draw2d.Canvas.prototype.type="draw2d.Canvas";draw2d.Canvas.prototype.construct=function(a){this.canvasId=a;this.html=document.getElementById(this.canvasId);this.scrollArea=document.body.parentNode};draw2d.Canvas.prototype.setViewPort=function(a){this.scrollArea=document.getElementById(a)};draw2d.Canvas.prototype.addFigure=function(b,h,c,a){try{if(this.enableSmoothFigureHandling===true){if(b.timer<=0){b.setAlpha(0.001)}var i=b;var g=function(){if(i.alpha<1){i.setAlpha(Math.min(1,i.alpha+0.05))}else{window.clearInterval(i.timer);i.timer=-1}};if(i.timer>0){window.clearInterval(i.timer)}i.timer=window.setInterval(g,30)}b.setCanvas(this);if(h&&c){b.setPosition(h,c)}if(b instanceof draw2d.Line){this.canvasLines.add(b);this.html.appendChild(b.getHTMLElement())}else{var f=this.canvasLines.getFirstElement();if(f===null){this.html.appendChild(b.getHTMLElement())}else{this.html.insertBefore(b.getHTMLElement(),f.getHTMLElement())}}if(!a){b.paint()}}catch(d){pushErrorStack(d,"draw2d.Canvas.prototype.addFigure= function( /*:draw2d.Figure*/figure,/*:int*/ xPos,/*:int*/ yPos, /*:boolean*/ avoidPaint)")}};draw2d.Canvas.prototype.removeFigure=function(a){if(this.enableSmoothFigureHandling===true){var b=this;var d=a;var c=function(){if(d.alpha>0){d.setAlpha(Math.max(0,d.alpha-0.05))}else{window.clearInterval(d.timer);d.timer=-1;b.html.removeChild(d.html);d.setCanvas(null)}};if(d.timer>0){window.clearInterval(d.timer)}d.timer=window.setInterval(c,20)}else{this.html.removeChild(a.html);a.setCanvas(null)}if(a instanceof draw2d.Line){this.canvasLines.remove(a)}};draw2d.Canvas.prototype.getEnableSmoothFigureHandling=function(){return this.enableSmoothFigureHandling};draw2d.Canvas.prototype.setEnableSmoothFigureHandling=function(a){this.enableSmoothFigureHandling=a};draw2d.Canvas.prototype.getWidth=function(){return parseInt(this.html.style.width)};draw2d.Canvas.prototype.setWidth=function(a){if(this.scrollArea!==null){this.scrollArea.style.width=a+"px"}else{this.html.style.width=a+"px"}};draw2d.Canvas.prototype.getHeight=function(){return parseInt(this.html.style.height)};draw2d.Canvas.prototype.setHeight=function(a){if(this.scrollArea!==null){this.scrollArea.style.height=a+"px"}else{this.html.style.height=a+"px"}};draw2d.Canvas.prototype.setBackgroundImage=function(b,a){if(b!==null){if(a){this.html.style.background="transparent url("+b+") "}else{this.html.style.background="transparent url("+b+") no-repeat"}}else{this.html.style.background="transparent"}};draw2d.Canvas.prototype.getY=function(){return this.y};draw2d.Canvas.prototype.getX=function(){return this.x};draw2d.Canvas.prototype.getAbsoluteY=function(){var a=this.html;var b=a.offsetTop;while((a=a.offsetParent)!==null){b+=a.offsetTop}return b};draw2d.Canvas.prototype.getAbsoluteX=function(){var b=this.html;var a=b.offsetLeft;while((b=b.offsetParent)!==null){a+=b.offsetLeft}return a};draw2d.Canvas.prototype.getScrollLeft=function(){return this.scrollArea.scrollLeft};draw2d.Canvas.prototype.getScrollTop=function(){return this.scrollArea.scrollTop};draw2d.Workflow=function(c){try{if(!c){return}this.menu=null;this.gridWidthX=10;this.gridWidthY=10;this.snapToGridHelper=null;this.verticalSnapToHelperLine=null;this.horizontalSnapToHelperLine=null;this.snapToGeometryHelper=null;this.figures=new draw2d.ArrayList();this.lines=new draw2d.ArrayList();this.commonPorts=new draw2d.ArrayList();this.dropTargets=new draw2d.ArrayList();this.compartments=new draw2d.ArrayList();this.selectionListeners=new draw2d.ArrayList();this.dialogs=new draw2d.ArrayList();this.toolPalette=null;this.dragging=false;this.tooltip=null;this.draggingLine=null;this.draggingLineCommand=null;this.commandStack=new draw2d.CommandStack();this.oldScrollPosLeft=0;this.oldScrollPosTop=0;this.currentSelection=null;this.currentMenu=null;this.connectionLine=new draw2d.Line();this.resizeHandleStart=new draw2d.LineStartResizeHandle(this);this.resizeHandleEnd=new draw2d.LineEndResizeHandle(this);this.resizeHandle1=new draw2d.ResizeHandle(this,1);this.resizeHandle2=new draw2d.ResizeHandle(this,2);this.resizeHandle3=new draw2d.ResizeHandle(this,3);this.resizeHandle4=new draw2d.ResizeHandle(this,4);this.resizeHandle5=new draw2d.ResizeHandle(this,5);this.resizeHandle6=new draw2d.ResizeHandle(this,6);this.resizeHandle7=new draw2d.ResizeHandle(this,7);this.resizeHandle8=new draw2d.ResizeHandle(this,8);this.resizeHandleHalfWidth=parseInt(this.resizeHandle2.getWidth()/2);draw2d.Canvas.call(this,c);this.setPanning(false);if(this.html!==null){this.html.style.backgroundImage="url(grid_10.png)";this.html.className="Workflow";g=this;this.html.tabIndex="0";var i=function(){var r=arguments[0]||window.event;r.cancelBubble=true;r.returnValue=false;r.stopped=true;var o=r.clientX;var m=r.clientY;var n=g.getScrollLeft();var l=g.getScrollTop();var q=g.getAbsoluteX();var p=g.getAbsoluteY();var k=g.getBestLine(o+n-q,m+l-p,null);if(k!==null){k.onContextMenu(o+n-q,m+l-p)}else{g.onContextMenu(o+n-q,m+l-p)}};this.html.oncontextmenu=function(){return false};var g=this;var f=function(k){var l=k.ctrlKey;g.onKeyDown(k.keyCode,l)};var d=function(){var k=arguments[0]||window.event;if(k.returnValue==false){return}var m=k.clientX;var l=k.clientY;var q=g.getScrollLeft();var p=g.getScrollTop();var o=g.getAbsoluteX();var n=g.getAbsoluteY();g.onMouseDown(m+q-o,l+p-n)};var a=function(){var q=arguments[0]||window.event;if(g.currentMenu!==null){g.removeFigure(g.currentMenu);g.currentMenu=null}if(q.button==2){return}var m=q.clientX;var k=q.clientY;var p=g.getScrollLeft();var o=g.getScrollTop();var l=g.getAbsoluteX();var n=g.getAbsoluteY();g.onMouseUp(m+p-l,k+o-n)};var b=function(){var s=arguments[0]||window.event;var o=s.clientX;var m=s.clientY;var q=g.getScrollLeft();var p=g.getScrollTop();var n=g.getAbsoluteX();var l=g.getAbsoluteY();g.currentMouseX=o+q-n;g.currentMouseY=m+p-l;var k=g.getBestFigure(g.currentMouseX,g.currentMouseY);if(draw2d.Drag.currentHover!==null&&k===null){var r=new draw2d.DragDropEvent();r.initDragDropEvent("mouseleave",false,g);draw2d.Drag.currentHover.dispatchEvent(r)}else{var o=s.clientX;var m=s.clientY;var q=g.getScrollLeft();var p=g.getScrollTop();var n=g.getAbsoluteX();var l=g.getAbsoluteY();g.onMouseMove(o+q-n,m+p-l)}if(k===null){draw2d.Drag.currentHover=null}if(g.tooltip!==null){if(Math.abs(g.currentTooltipX-g.currentMouseX)>10||Math.abs(g.currentTooltipY-g.currentMouseY)>10){g.showTooltip(null)}}};var j=function(r){var r=arguments[0]||window.event;var m=r.clientX;var l=r.clientY;var p=g.getScrollLeft();var q=g.getScrollTop();var o=g.getAbsoluteX();var n=g.getAbsoluteY();var k=g.getBestLine(m+p-o,l+q-n,null);if(k!==null){k.onDoubleClick()}};if(this.html.addEventListener){this.html.addEventListener("contextmenu",i,false);this.html.addEventListener("mousemove",b,false);this.html.addEventListener("mouseup",a,false);this.html.addEventListener("mousedown",d,false);this.html.addEventListener("keydown",f,false);this.html.addEventListener("dblclick",j,false)}else{if(this.html.attachEvent){this.html.attachEvent("oncontextmenu",i);this.html.attachEvent("onmousemove",b);this.html.attachEvent("onmousedown",d);this.html.attachEvent("onmouseup",a);this.html.attachEvent("onkeydown",f);this.html.attachEvent("ondblclick",j)}else{throw"Open-jACOB Draw2D not supported in this browser."}}}}catch(h){pushErrorStack(h,"draw2d.Workflow=function(/*:String*/id)")}};draw2d.Workflow.prototype=new draw2d.Canvas();draw2d.Workflow.prototype.type="draw2d.Workflow";draw2d.Workflow.COLOR_GREEN=new draw2d.Color(0,255,0);draw2d.Workflow.prototype.clear=function(){this.scrollTo(0,0,true);this.gridWidthX=10;this.gridWidthY=10;this.snapToGridHelper=null;this.verticalSnapToHelperLine=null;this.horizontalSnapToHelperLine=null;var b=this.getDocument();var a=b.getLines().clone();for(var c=0;c<a.getSize();c++){(new draw2d.CommandDelete(a.get(c))).execute()}var d=b.getFigures().clone();for(var c=0;c<d.getSize();c++){(new draw2d.CommandDelete(d.get(c))).execute()}this.commonPorts.removeAllElements();this.dropTargets.removeAllElements();this.compartments.removeAllElements();this.selectionListeners.removeAllElements();this.dialogs.removeAllElements();this.commandStack=new draw2d.CommandStack();this.currentSelection=null;this.currentMenu=null;draw2d.Drag.clearCurrent()};draw2d.Workflow.prototype.onScroll=function(){var g=this.getScrollLeft();var d=this.getScrollTop();var b=g-this.oldScrollPosLeft;var a=d-this.oldScrollPosTop;for(var c=0;c<this.figures.getSize();c++){var f=this.figures.get(c);if(f.hasFixedPosition&&f.hasFixedPosition()==true){f.setPosition(f.getX()+b,f.getY()+a)}}this.oldScrollPosLeft=g;this.oldScrollPosTop=d};draw2d.Workflow.prototype.setPanning=function(a){this.panning=a;if(a){this.html.style.cursor="move"}else{this.html.style.cursor="default"}};draw2d.Workflow.prototype.scrollTo=function(h,f,d){if(d){this.scrollArea.scrollLeft=h;this.scrollArea.scrollTop=f}else{var g=40;var b=(h-this.getScrollLeft())/g;var a=(f-this.getScrollTop())/g;var k=this.getScrollLeft();var j=this.getScrollTop();for(var c=0;c<g;c++){this.scrollArea.scrollLeft=k+(b*c);this.scrollArea.scrollTop=j+(a*c)}}};draw2d.Workflow.prototype.showTooltip=function(a,d){if(this.tooltip!==null){this.removeFigure(this.tooltip);this.tooltip=null;if(this.tooltipTimer>=0){window.clearTimeout(this.tooltipTimer);this.tooltipTimer=-1}}this.tooltip=a;if(this.tooltip!==null){this.currentTooltipX=this.currentMouseX;this.currentTooltipY=this.currentMouseY;this.addFigure(this.tooltip,this.currentTooltipX+10,this.currentTooltipY+10);var c=this;var b=function(){c.tooltipTimer=-1;c.showTooltip(null)};if(d==true){this.tooltipTimer=window.setTimeout(b,5000)}}};draw2d.Workflow.prototype.showDialog=function(a,c,b){if(c){this.addFigure(a,c,b)}else{this.addFigure(a,200,100)}this.dialogs.add(a)};draw2d.Workflow.prototype.showMenu=function(c,b,a){if(this.menu!==null){this.html.removeChild(this.menu.getHTMLElement());this.menu.setWorkflow()}this.menu=c;if(this.menu!==null){this.menu.setWorkflow(this);this.menu.setPosition(b,a);this.html.appendChild(this.menu.getHTMLElement());this.menu.paint()}};draw2d.Workflow.prototype.onContextMenu=function(a,c){var b=this.getContextMenu();if(b!==null){this.showMenu(b,a,c)}};draw2d.Workflow.prototype.getContextMenu=function(){return null};draw2d.Workflow.prototype.setToolWindow=function(b,a,c){this.toolPalette=b;if(c){this.addFigure(b,a,c)}else{this.addFigure(b,20,20)}this.dialogs.add(b)};draw2d.Workflow.prototype.setSnapToGrid=function(a){if(a){this.snapToGridHelper=new draw2d.SnapToGrid(this)}else{this.snapToGridHelper=null}};draw2d.Workflow.prototype.setSnapToGeometry=function(a){if(a){this.snapToGeometryHelper=new draw2d.SnapToGeometry(this)}else{this.snapToGeometryHelper=null}};draw2d.Workflow.prototype.setGridWidth=function(b,a){this.gridWidthX=b;this.gridWidthY=a};draw2d.Workflow.prototype.addFigure=function(b,f,c){try{draw2d.Canvas.prototype.addFigure.call(this,b,f,c,true);b.setWorkflow(this);var a=this;if(b instanceof draw2d.CompartmentFigure){this.compartments.add(b)}if(b instanceof draw2d.Line){this.lines.add(b)}else{this.figures.add(b);b.draggable.addEventListener("drag",function(h){var g=a.getFigure(h.target.element.id);if(g===null){return}if(g.isSelectable()==false){return}a.moveResizeHandles(g)})}b.paint();this.setDocumentDirty()}catch(d){pushErrorStack(d,"draw2d.Workflow.prototype.addFigure=function(/*:draw2d.Figure*/ figure ,/*:int*/ xPos, /*:int*/ yPos)")}};draw2d.Workflow.prototype.removeFigure=function(a){draw2d.Canvas.prototype.removeFigure.call(this,a);this.figures.remove(a);this.lines.remove(a);this.dialogs.remove(a);a.setWorkflow(null);if(a instanceof draw2d.CompartmentFigure){this.compartments.remove(a)}if(a instanceof draw2d.Connection){a.disconnect()}if(this.currentSelection==a){this.setCurrentSelection(null)}this.setDocumentDirty();a.onRemove(this)};draw2d.Workflow.prototype.moveFront=function(a){this.html.removeChild(a.getHTMLElement());this.html.appendChild(a.getHTMLElement())};draw2d.Workflow.prototype.moveBack=function(a){this.html.removeChild(a.getHTMLElement());this.html.insertBefore(a.getHTMLElement(),this.html.firstChild)};draw2d.Workflow.prototype.getBestCompartmentFigure=function(a,g,d){var c=null;for(var b=0;b<this.figures.getSize();b++){var f=this.figures.get(b);if((f instanceof draw2d.CompartmentFigure)&&f.isOver(a,g)==true&&f!=d){if(c===null){c=f}else{if(c.getZOrder()<f.getZOrder()){c=f}}}}return c};draw2d.Workflow.prototype.getBestFigure=function(a,g,f){var c=null;for(var d=0;d<this.figures.getSize();d++){var b=this.figures.get(d);if(b.isOver(a,g)==true&&b!=f){if(c===null){c=b}else{if(c.getZOrder()<b.getZOrder()){c=b}}}}return c};draw2d.Workflow.prototype.getBestLine=function(b,h,a){var g=null;var f=this.lines.getSize();for(var d=0;d<f;d++){var c=this.lines.get(d);if(c.containsPoint(b,h)==true&&c!=a){if(g===null){g=c}else{if(g.getZOrder()<c.getZOrder()){g=c}}}}return g};draw2d.Workflow.prototype.getFigure=function(c){for(var a=0;a<this.figures.getSize();a++){var b=this.figures.get(a);if(b.id==c){return b}}return null};draw2d.Workflow.prototype.getFigures=function(){return this.figures};draw2d.Workflow.prototype.getDocument=function(){return new draw2d.CanvasDocument(this)};draw2d.Workflow.prototype.addSelectionListener=function(a){if(a!==null){if(a.onSelectionChanged){this.selectionListeners.add(a)}else{throw"Object doesn't implement required callback method [onSelectionChanged]"}}};draw2d.Workflow.prototype.removeSelectionListener=function(a){this.selectionListeners.remove(a)};draw2d.Workflow.prototype.setCurrentSelection=function(c){if(c===null||this.currentSelection!=c){this.hideResizeHandles();this.hideLineResizeHandles()}this.currentSelection=c;for(var b=0;b<this.selectionListeners.getSize();b++){var a=this.selectionListeners.get(b);if(a.onSelectionChanged){a.onSelectionChanged(this.currentSelection,this.currentSelection?this.currentSelection.getModel():null)}}if(c instanceof draw2d.Line){this.showLineResizeHandles(c);if(!(c instanceof draw2d.Connection)){this.draggingLineCommand=line.createCommand(new draw2d.EditPolicy(draw2d.EditPolicy.MOVE));if(this.draggingLineCommand!==null){this.draggingLine=c}}}};draw2d.Workflow.prototype.getCurrentSelection=function(){return this.currentSelection};draw2d.Workflow.prototype.getLine=function(d){var c=this.lines.getSize();for(var b=0;b<c;b++){var a=this.lines.get(b);if(a.getId()==d){return a}}return null};draw2d.Workflow.prototype.getLines=function(){return this.lines};draw2d.Workflow.prototype.registerPort=function(a){a.draggable.targets=this.dropTargets;this.commonPorts.add(a);this.dropTargets.add(a.dropable)};draw2d.Workflow.prototype.unregisterPort=function(a){a.draggable.targets=null;this.commonPorts.remove(a);this.dropTargets.remove(a.dropable)};draw2d.Workflow.prototype.getCommandStack=function(){return this.commandStack};draw2d.Workflow.prototype.showConnectionLine=function(b,d,a,c){this.connectionLine.setStartPoint(b,d);this.connectionLine.setEndPoint(a,c);if(this.connectionLine.canvas===null){draw2d.Canvas.prototype.addFigure.call(this,this.connectionLine)}};draw2d.Workflow.prototype.hideConnectionLine=function(){if(this.connectionLine.canvas!==null){draw2d.Canvas.prototype.removeFigure.call(this,this.connectionLine)}};draw2d.Workflow.prototype.showLineResizeHandles=function(b){var a=this.resizeHandleStart.getWidth()/2;var f=this.resizeHandleStart.getHeight()/2;var d=b.getStartPoint();var c=b.getEndPoint();draw2d.Canvas.prototype.addFigure.call(this,this.resizeHandleStart,d.x-a,d.y-a);draw2d.Canvas.prototype.addFigure.call(this,this.resizeHandleEnd,c.x-a,c.y-a);this.resizeHandleStart.setCanDrag(b.isResizeable());this.resizeHandleEnd.setCanDrag(b.isResizeable());if(b.isResizeable()){this.resizeHandleStart.setBackgroundColor(draw2d.Workflow.COLOR_GREEN);this.resizeHandleEnd.setBackgroundColor(draw2d.Workflow.COLOR_GREEN);this.resizeHandleStart.draggable.targets=this.dropTargets;this.resizeHandleEnd.draggable.targets=this.dropTargets}else{this.resizeHandleStart.setBackgroundColor(null);this.resizeHandleEnd.setBackgroundColor(null)}};draw2d.Workflow.prototype.hideLineResizeHandles=function(){if(this.resizeHandleStart.canvas!==null){draw2d.Canvas.prototype.removeFigure.call(this,this.resizeHandleStart)}if(this.resizeHandleEnd.canvas!==null){draw2d.Canvas.prototype.removeFigure.call(this,this.resizeHandleEnd)}};draw2d.Workflow.prototype.showResizeHandles=function(g){this.hideLineResizeHandles();this.hideResizeHandles();if(this.getEnableSmoothFigureHandling()==true&&this.getCurrentSelection()!=g){this.resizeHandle1.setAlpha(0.01);this.resizeHandle2.setAlpha(0.01);this.resizeHandle3.setAlpha(0.01);this.resizeHandle4.setAlpha(0.01);this.resizeHandle5.setAlpha(0.01);this.resizeHandle6.setAlpha(0.01);this.resizeHandle7.setAlpha(0.01);this.resizeHandle8.setAlpha(0.01)}var h=this.resizeHandle1.getWidth();var f=this.resizeHandle1.getHeight();var c=g.getHeight();var a=g.getWidth();var i=g.getX();var b=g.getY();draw2d.Canvas.prototype.addFigure.call(this,this.resizeHandle1,i-h,b-f);draw2d.Canvas.prototype.addFigure.call(this,this.resizeHandle3,i+a,b-f);draw2d.Canvas.prototype.addFigure.call(this,this.resizeHandle5,i+a,b+c);draw2d.Canvas.prototype.addFigure.call(this,this.resizeHandle7,i-h,b+c);this.moveFront(this.resizeHandle1);this.moveFront(this.resizeHandle3);this.moveFront(this.resizeHandle5);this.moveFront(this.resizeHandle7);this.resizeHandle1.setCanDrag(g.isResizeable());this.resizeHandle3.setCanDrag(g.isResizeable());this.resizeHandle5.setCanDrag(g.isResizeable());this.resizeHandle7.setCanDrag(g.isResizeable());if(g.isResizeable()){var d=new draw2d.Color(0,255,0);this.resizeHandle1.setBackgroundColor(d);this.resizeHandle3.setBackgroundColor(d);this.resizeHandle5.setBackgroundColor(d);this.resizeHandle7.setBackgroundColor(d)}else{this.resizeHandle1.setBackgroundColor(null);this.resizeHandle3.setBackgroundColor(null);this.resizeHandle5.setBackgroundColor(null);this.resizeHandle7.setBackgroundColor(null)}if(g.isStrechable()&&g.isResizeable()){this.resizeHandle2.setCanDrag(g.isResizeable());this.resizeHandle4.setCanDrag(g.isResizeable());this.resizeHandle6.setCanDrag(g.isResizeable());this.resizeHandle8.setCanDrag(g.isResizeable());draw2d.Canvas.prototype.addFigure.call(this,this.resizeHandle2,i+(a/2)-this.resizeHandleHalfWidth,b-f);draw2d.Canvas.prototype.addFigure.call(this,this.resizeHandle4,i+a,b+(c/2)-(f/2));draw2d.Canvas.prototype.addFigure.call(this,this.resizeHandle6,i+(a/2)-this.resizeHandleHalfWidth,b+c);draw2d.Canvas.prototype.addFigure.call(this,this.resizeHandle8,i-h,b+(c/2)-(f/2));this.moveFront(this.resizeHandle2);this.moveFront(this.resizeHandle4);this.moveFront(this.resizeHandle6);this.moveFront(this.resizeHandle8)}};draw2d.Workflow.prototype.hideResizeHandles=function(){if(this.resizeHandle1.canvas!==null){draw2d.Canvas.prototype.removeFigure.call(this,this.resizeHandle1)}if(this.resizeHandle2.canvas!==null){draw2d.Canvas.prototype.removeFigure.call(this,this.resizeHandle2)}if(this.resizeHandle3.canvas!==null){draw2d.Canvas.prototype.removeFigure.call(this,this.resizeHandle3)}if(this.resizeHandle4.canvas!==null){draw2d.Canvas.prototype.removeFigure.call(this,this.resizeHandle4)}if(this.resizeHandle5.canvas!==null){draw2d.Canvas.prototype.removeFigure.call(this,this.resizeHandle5)}if(this.resizeHandle6.canvas!==null){draw2d.Canvas.prototype.removeFigure.call(this,this.resizeHandle6)}if(this.resizeHandle7.canvas!==null){draw2d.Canvas.prototype.removeFigure.call(this,this.resizeHandle7)}if(this.resizeHandle8.canvas!==null){draw2d.Canvas.prototype.removeFigure.call(this,this.resizeHandle8)}};draw2d.Workflow.prototype.moveResizeHandles=function(b){var a=this.resizeHandle1.getWidth();var h=this.resizeHandle1.getHeight();var d=b.getHeight();var c=b.getWidth();var g=b.getX();var f=b.getY();this.resizeHandle1.setPosition(g-a,f-h);this.resizeHandle3.setPosition(g+c,f-h);this.resizeHandle5.setPosition(g+c,f+d);this.resizeHandle7.setPosition(g-a,f+d);if(b.isStrechable()){this.resizeHandle2.setPosition(g+(c/2)-this.resizeHandleHalfWidth,f-h);this.resizeHandle4.setPosition(g+c,f+(d/2)-(h/2));this.resizeHandle6.setPosition(g+(c/2)-this.resizeHandleHalfWidth,f+d);this.resizeHandle8.setPosition(g-a,f+(d/2)-(h/2))}};draw2d.Workflow.prototype.onMouseDown=function(a,c){this.dragging=true;this.mouseDownPosX=a;this.mouseDownPosY=c;if(this.toolPalette!==null&&this.toolPalette.getActiveTool()!==null){this.toolPalette.getActiveTool().execute(a,c)}this.showMenu(null);var b=this.getBestLine(a,c);if(b!==null&&b.isSelectable()){this.setCurrentSelection(b)}else{this.setCurrentSelection(null)}};draw2d.Workflow.prototype.onMouseUp=function(a,b){this.dragging=false;if(this.draggingLineCommand!==null){this.getCommandStack().execute(this.draggingLineCommand);this.draggingLine=null;this.draggingLineCommand=null}};draw2d.Workflow.prototype.onMouseMove=function(a,d){if(this.dragging===true&&this.draggingLine!==null){var c=a-this.mouseDownPosX;var b=d-this.mouseDownPosY;this.draggingLine.startX=this.draggingLine.getStartX()+c;this.draggingLine.startY=this.draggingLine.getStartY()+b;this.draggingLine.setEndPoint(this.draggingLine.getEndX()+c,this.draggingLine.getEndY()+b);this.mouseDownPosX=a;this.mouseDownPosY=d;this.showLineResizeHandles(this.currentSelection)}else{if(this.dragging===true&&this.panning===true){var c=a-this.mouseDownPosX;var b=d-this.mouseDownPosY;this.scrollTo(this.getScrollLeft()-c,this.getScrollTop()-b,true);this.onScroll()}}};draw2d.Workflow.prototype.onKeyDown=function(a,b){if(a==46&&this.currentSelection!==null){this.commandStack.execute(this.currentSelection.createCommand(new draw2d.EditPolicy(draw2d.EditPolicy.DELETE)))}else{if(a==90&&b){this.commandStack.undo()}else{if(a==89&&b){this.commandStack.redo()}}}};draw2d.Workflow.prototype.setDocumentDirty=function(){try{for(var a=0;a<this.dialogs.getSize();a++){var c=this.dialogs.get(a);if(c!==null&&c.onSetDocumentDirty){c.onSetDocumentDirty()}}if(this.snapToGeometryHelper!==null){this.snapToGeometryHelper.onSetDocumentDirty()}if(this.snapToGridHelper!==null){this.snapToGridHelper.onSetDocumentDirty()}}catch(b){pushErrorStack(b,"draw2d.Workflow.prototype.setDocumentDirty=function()")}};draw2d.Workflow.prototype.snapToHelper=function(g,h){if(this.snapToGeometryHelper!==null){if(g instanceof draw2d.ResizeHandle){var f=g.getSnapToGridAnchor();h.x+=f.x;h.y+=f.y;var d=new draw2d.Point(h.x,h.y);var b=g.getSnapToDirection();var c=this.snapToGeometryHelper.snapPoint(b,h,d);if((b&draw2d.SnapToHelper.EAST_WEST)&&!(c&draw2d.SnapToHelper.EAST_WEST)){this.showSnapToHelperLineVertical(d.x)}else{this.hideSnapToHelperLineVertical()}if((b&draw2d.SnapToHelper.NORTH_SOUTH)&&!(c&draw2d.SnapToHelper.NORTH_SOUTH)){this.showSnapToHelperLineHorizontal(d.y)}else{this.hideSnapToHelperLineHorizontal()}d.x-=f.x;d.y-=f.y;return d}else{var a=new draw2d.Dimension(h.x,h.y,g.getWidth(),g.getHeight());var d=new draw2d.Dimension(h.x,h.y,g.getWidth(),g.getHeight());var b=draw2d.SnapToHelper.NSEW;var c=this.snapToGeometryHelper.snapRectangle(a,d);if((b&draw2d.SnapToHelper.WEST)&&!(c&draw2d.SnapToHelper.WEST)){this.showSnapToHelperLineVertical(d.x)}else{if((b&draw2d.SnapToHelper.EAST)&&!(c&draw2d.SnapToHelper.EAST)){this.showSnapToHelperLineVertical(d.getX()+d.getWidth())}else{this.hideSnapToHelperLineVertical()}}if((b&draw2d.SnapToHelper.NORTH)&&!(c&draw2d.SnapToHelper.NORTH)){this.showSnapToHelperLineHorizontal(d.y)}else{if((b&draw2d.SnapToHelper.SOUTH)&&!(c&draw2d.SnapToHelper.SOUTH)){this.showSnapToHelperLineHorizontal(d.getY()+d.getHeight())}else{this.hideSnapToHelperLineHorizontal()}}return d.getTopLeft()}}else{if(this.snapToGridHelper!==null){var f=g.getSnapToGridAnchor();h.x=h.x+f.x;h.y=h.y+f.y;var d=new draw2d.Point(h.x,h.y);this.snapToGridHelper.snapPoint(0,h,d);d.x=d.x-f.x;d.y=d.y-f.y;return d}}return h};draw2d.Workflow.prototype.showSnapToHelperLineHorizontal=function(a){if(this.horizontalSnapToHelperLine===null){this.horizontalSnapToHelperLine=new draw2d.Line();this.horizontalSnapToHelperLine.setColor(new draw2d.Color(175,175,255));this.addFigure(this.horizontalSnapToHelperLine)}this.horizontalSnapToHelperLine.setStartPoint(0,a);this.horizontalSnapToHelperLine.setEndPoint(this.getWidth(),a)};draw2d.Workflow.prototype.showSnapToHelperLineVertical=function(a){if(this.verticalSnapToHelperLine===null){this.verticalSnapToHelperLine=new draw2d.Line();this.verticalSnapToHelperLine.setColor(new draw2d.Color(175,175,255));this.addFigure(this.verticalSnapToHelperLine)}this.verticalSnapToHelperLine.setStartPoint(a,0);this.verticalSnapToHelperLine.setEndPoint(a,this.getHeight())};draw2d.Workflow.prototype.hideSnapToHelperLines=function(){this.hideSnapToHelperLineHorizontal();this.hideSnapToHelperLineVertical()};draw2d.Workflow.prototype.hideSnapToHelperLineHorizontal=function(){if(this.horizontalSnapToHelperLine!==null){this.removeFigure(this.horizontalSnapToHelperLine);this.horizontalSnapToHelperLine=null}};draw2d.Workflow.prototype.hideSnapToHelperLineVertical=function(){if(this.verticalSnapToHelperLine!==null){this.removeFigure(this.verticalSnapToHelperLine);this.verticalSnapToHelperLine=null}};draw2d.WindowFigure=function(a){this.title=a;this.titlebar=null;draw2d.Figure.call(this);this.setDeleteable(false);this.setCanSnapToHelper(false);this.setZOrder(draw2d.WindowFigure.ZOrderIndex)};draw2d.WindowFigure.prototype=new draw2d.Figure();draw2d.WindowFigure.prototype.type=":draw2d.WindowFigure";draw2d.WindowFigure.ZOrderIndex=50000;draw2d.WindowFigure.setZOrderBaseIndex=function(a){draw2d.WindowFigure.ZOrderBaseIndex=a};draw2d.WindowFigure.prototype.hasFixedPosition=function(){return true};draw2d.WindowFigure.prototype.hasTitleBar=function(){return true};draw2d.WindowFigure.prototype.createHTMLElement=function(){var a=draw2d.Figure.prototype.createHTMLElement.call(this);a.style.margin="0px";a.style.padding="0px";a.style.border="1px solid black";a.style.backgroundImage="url(window_bg.png)";a.style.zIndex=draw2d.WindowFigure.ZOrderIndex;a.style.cursor=null;a.className="WindowFigure";if(this.hasTitleBar()){this.titlebar=document.createElement("div");this.titlebar.style.position="absolute";this.titlebar.style.left="0px";this.titlebar.style.top="0px";this.titlebar.style.width=this.getWidth()+"px";this.titlebar.style.height="15px";this.titlebar.style.margin="0px";this.titlebar.style.padding="0px";this.titlebar.style.font="normal 10px verdana";this.titlebar.style.backgroundColor="blue";this.titlebar.style.borderBottom="2px solid gray";this.titlebar.style.whiteSpace="nowrap";this.titlebar.style.textAlign="center";this.titlebar.style.backgroundImage="url(window_toolbar.png)";this.titlebar.className="WindowFigure_titlebar";this.textNode=document.createTextNode(this.title);this.titlebar.appendChild(this.textNode);this.disableTextSelection(this.titlebar);a.appendChild(this.titlebar)}return a};draw2d.WindowFigure.prototype.setDocumentDirty=function(a){};draw2d.WindowFigure.prototype.onDragend=function(){};draw2d.WindowFigure.prototype.onDragstart=function(a,b){if(this.titlebar===null){return false}if(this.canDrag===true&&a<parseInt(this.titlebar.style.width)&&b<parseInt(this.titlebar.style.height)){return true}return false};draw2d.WindowFigure.prototype.isSelectable=function(){return false};draw2d.WindowFigure.prototype.setCanDrag=function(a){draw2d.Figure.prototype.setCanDrag.call(this,a);this.html.style.cursor="";if(this.titlebar===null){return}if(a){this.titlebar.style.cursor="move"}else{this.titlebar.style.cursor=""}};draw2d.WindowFigure.prototype.setWorkflow=function(b){var a=this.workflow;draw2d.Figure.prototype.setWorkflow.call(this,b);if(a!==null){a.removeSelectionListener(this)}if(this.workflow!==null){this.workflow.addSelectionListener(this)}};draw2d.WindowFigure.prototype.setDimension=function(a,b){draw2d.Figure.prototype.setDimension.call(this,a,b);if(this.titlebar!==null){this.titlebar.style.width=this.getWidth()+"px"}};draw2d.WindowFigure.prototype.setTitle=function(a){this.title=a};draw2d.WindowFigure.prototype.getMinWidth=function(){return 50};draw2d.WindowFigure.prototype.getMinHeight=function(){return 50};draw2d.WindowFigure.prototype.isResizeable=function(){return false};draw2d.WindowFigure.prototype.setAlpha=function(a){};draw2d.WindowFigure.prototype.setBackgroundColor=function(a){this.bgColor=a;if(this.bgColor!==null){this.html.style.backgroundColor=this.bgColor.getHTMLStyle()}else{this.html.style.backgroundColor="transparent";this.html.style.backgroundImage=""}};draw2d.WindowFigure.prototype.setColor=function(a){this.lineColor=a;if(this.lineColor!==null){this.html.style.border=this.lineStroke+"px solid "+this.lineColor.getHTMLStyle()}else{this.html.style.border="0px"}};draw2d.WindowFigure.prototype.setLineWidth=function(a){this.lineStroke=a;this.html.style.border=this.lineStroke+"px solid black"};draw2d.WindowFigure.prototype.onSelectionChanged=function(b,a){};draw2d.Button=function(c,a,b){this.x=0;this.y=0;this.width=24;this.height=24;this.id=draw2d.UUID.create();this.enabled=true;this.active=false;this.palette=c;this.html=this.createHTMLElement();if(a!==undefined&&b!==undefined){this.setDimension(a,b)}else{this.setDimension(24,24)}};draw2d.Button.prototype.type="draw2d.Button";draw2d.Button.prototype.dispose=function(){};draw2d.Button.prototype.getImageUrl=function(){return this.type+".png"};draw2d.Button.prototype.createHTMLElement=function(){var b=document.createElement("div");b.id=this.id;b.style.position="absolute";b.style.left=this.x+"px";b.style.top=this.y+"px";b.style.height=this.width+"px";b.style.width=this.height+"px";b.style.margin="0px";b.style.padding="0px";b.style.outline="none";if(this.getImageUrl()!==null){b.style.backgroundImage="url("+this.getImageUrl()+")"}else{b.style.backgroundImage=""}var a=this;this.omousedown=function(c){if(a.enabled){a.setActive(true)}c.cancelBubble=true;c.returnValue=false};this.omouseup=function(c){if(a.enabled){a.setActive(false);a.execute();a.palette.setActiveTool(null)}c.cancelBubble=true;c.returnValue=false};if(b.addEventListener){b.addEventListener("mousedown",this.omousedown,false);b.addEventListener("mouseup",this.omouseup,false)}else{if(b.attachEvent){b.attachEvent("onmousedown",this.omousedown);b.attachEvent("onmouseup",this.omouseup)}}return b};draw2d.Button.prototype.getHTMLElement=function(){if(this.html===null){this.html=this.createHTMLElement()}return this.html};draw2d.Button.prototype.execute=function(){};draw2d.Button.prototype.setTooltip=function(a){this.tooltip=a;if(this.tooltip!==null){this.html.title=this.tooltip}else{this.html.title=""}};draw2d.Button.prototype.getWorkflow=function(){return this.getToolPalette().getWorkflow()};draw2d.Button.prototype.getToolPalette=function(){return this.palette};draw2d.Button.prototype.setActive=function(a){if(!this.enabled){return}this.active=a;if(a===true){this.html.style.border="1px inset"}else{this.html.style.border="0px"}};draw2d.Button.prototype.isActive=function(){return this.active};draw2d.Button.prototype.setEnabled=function(a){this.enabled=a;if(a){this.html.style.filter="alpha(opacity=100)";this.html.style.opacity="1.0"}else{this.html.style.filter="alpha(opacity=30)";this.html.style.opacity="0.3"}};draw2d.Button.prototype.setDimension=function(a,b){this.width=a;this.height=b;if(this.html===null){return}this.html.style.width=this.width+"px";this.html.style.height=this.height+"px"};draw2d.Button.prototype.setPosition=function(b,a){this.x=Math.max(0,b);this.y=Math.max(0,a);if(this.html===null){return}this.html.style.left=this.x+"px";this.html.style.top=this.y+"px"};draw2d.Button.prototype.getWidth=function(){return this.width};draw2d.Button.prototype.getHeight=function(){return this.height};draw2d.Button.prototype.getY=function(){return this.y};draw2d.Button.prototype.getX=function(){return this.x};draw2d.Button.prototype.getPosition=function(){return new draw2d.Point(this.x,this.y)};draw2d.ToggleButton=function(a){draw2d.Button.call(this,a);this.isDownFlag=false};draw2d.ToggleButton.prototype=new draw2d.Button();draw2d.ToggleButton.prototype.type="draw2d.ToggleButton";draw2d.ToggleButton.prototype.createHTMLElement=function(){var b=document.createElement("div");b.id=this.id;b.style.position="absolute";b.style.left=this.x+"px";b.style.top=this.y+"px";b.style.height="24px";b.style.width="24px";b.style.margin="0px";b.style.padding="0px";if(this.getImageUrl()!==null){b.style.backgroundImage="url("+this.getImageUrl()+")"}else{b.style.backgroundImage=""}var a=this;this.omousedown=function(c){if(a.enabled){if(!a.isDown()){draw2d.Button.prototype.setActive.call(a,true)}}c.cancelBubble=true;c.returnValue=false};this.omouseup=function(c){if(a.enabled){if(a.isDown()){draw2d.Button.prototype.setActive.call(a,false)}a.isDownFlag=!a.isDownFlag;a.execute()}c.cancelBubble=true;c.returnValue=false};if(b.addEventListener){b.addEventListener("mousedown",this.omousedown,false);b.addEventListener("mouseup",this.omouseup,false)}else{if(b.attachEvent){b.attachEvent("onmousedown",this.omousedown);b.attachEvent("onmouseup",this.omouseup)}}return b};draw2d.ToggleButton.prototype.isDown=function(){return this.isDownFlag};draw2d.ToggleButton.prototype.setActive=function(a){draw2d.Button.prototype.setActive.call(this,a);this.isDownFlag=a};draw2d.ToggleButton.prototype.execute=function(){};draw2d.ToolGeneric=function(a){this.x=0;this.y=0;this.enabled=true;this.tooltip=null;this.palette=a;this.html=this.createHTMLElement();this.setDimension(10,10)};draw2d.ToolGeneric.prototype.type="draw2d.ToolGeneric";draw2d.ToolGeneric.prototype.dispose=function(){};draw2d.ToolGeneric.prototype.getImageUrl=function(){return this.type+".png"};draw2d.ToolGeneric.prototype.getWorkflow=function(){return this.getToolPalette().getWorkflow()};draw2d.ToolGeneric.prototype.getToolPalette=function(){return this.palette};draw2d.ToolGeneric.prototype.createHTMLElement=function(){var b=document.createElement("div");b.id=this.id;b.style.position="absolute";b.style.left=this.x+"px";b.style.top=this.y+"px";b.style.height="24px";b.style.width="24px";b.style.margin="0px";b.style.padding="0px";if(this.getImageUrl()!==null){b.style.backgroundImage="url("+this.getImageUrl()+")"}else{b.style.backgroundImage=""}var a=this;this.click=function(c){if(a.enabled){a.palette.setActiveTool(a)}c.cancelBubble=true;c.returnValue=false};if(b.addEventListener){b.addEventListener("click",this.click,false)}else{if(b.attachEvent){b.attachEvent("onclick",this.click)}}if(this.tooltip!==null){b.title=this.tooltip}else{b.title=""}return b};draw2d.ToolGeneric.prototype.getHTMLElement=function(){if(this.html===null){this.html=this.createHTMLElement()}return this.html};draw2d.ToolGeneric.prototype.execute=function(a,b){if(this.enabled){this.palette.setActiveTool(null)}};draw2d.ToolGeneric.prototype.setTooltip=function(a){this.tooltip=a;if(this.tooltip!==null){this.html.title=this.tooltip}else{this.html.title=""}};draw2d.ToolGeneric.prototype.setActive=function(a){if(!this.enabled){return}if(a===true){this.html.style.border="1px inset"}else{this.html.style.border="0px"}};draw2d.ToolGeneric.prototype.setEnabled=function(a){this.enabled=a;if(a){this.html.style.filter="alpha(opacity=100)";this.html.style.opacity="1.0"}else{this.html.style.filter="alpha(opacity=30)";this.html.style.opacity="0.3"}};draw2d.ToolGeneric.prototype.setDimension=function(a,b){this.width=a;this.height=b;if(this.html===null){return}this.html.style.width=this.width+"px";this.html.style.height=this.height+"px"};draw2d.ToolGeneric.prototype.setPosition=function(b,a){this.x=Math.max(0,b);this.y=Math.max(0,a);if(this.html===null){return}this.html.style.left=this.x+"px";this.html.style.top=this.y+"px"};draw2d.ToolGeneric.prototype.getWidth=function(){return this.width};draw2d.ToolGeneric.prototype.getHeight=function(){return this.height};draw2d.ToolGeneric.prototype.getY=function(){return this.y};draw2d.ToolGeneric.prototype.getX=function(){return this.x};draw2d.ToolGeneric.prototype.getPosition=function(){return new draw2d.Point(this.x,this.y)};draw2d.ToolPalette=function(a){draw2d.WindowFigure.call(this,a);this.setDimension(75,400);this.activeTool=null;this.children={}};draw2d.ToolPalette.prototype=new draw2d.WindowFigure();draw2d.ToolPalette.prototype.type="draw2d.ToolPalette";draw2d.ToolPalette.prototype.dispose=function(){draw2d.WindowFigure.prototype.dispose.call(this)};draw2d.ToolPalette.prototype.createHTMLElement=function(){var a=draw2d.WindowFigure.prototype.createHTMLElement.call(this);this.scrollarea=document.createElement("div");this.scrollarea.style.position="absolute";this.scrollarea.style.left="0px";if(this.hasTitleBar()){this.scrollarea.style.top="15px"}else{this.scrollarea.style.top="0px"}this.scrollarea.style.width=this.getWidth()+"px";this.scrollarea.style.height="15px";this.scrollarea.style.margin="0px";this.scrollarea.style.padding="0px";this.scrollarea.style.font="normal 10px verdana";this.scrollarea.style.borderBottom="2px solid gray";this.scrollarea.style.whiteSpace="nowrap";this.scrollarea.style.textAlign="center";this.scrollarea.style.overflowX="auto";this.scrollarea.style.overflowY="auto";this.scrollarea.style.overflow="auto";a.appendChild(this.scrollarea);return a};draw2d.ToolPalette.prototype.setDimension=function(a,b){draw2d.WindowFigure.prototype.setDimension.call(this,a,b);if(this.scrollarea!==null){this.scrollarea.style.width=this.getWidth()+"px";if(this.hasTitleBar()){this.scrollarea.style.height=(this.getHeight()-15)+"px"}else{this.scrollarea.style.height=this.getHeight()+"px"}}};draw2d.ToolPalette.prototype.addChild=function(a){this.children[a.id]=a;this.scrollarea.appendChild(a.getHTMLElement())};draw2d.ToolPalette.prototype.getChild=function(a){return this.children[a]};draw2d.ToolPalette.prototype.getActiveTool=function(){return this.activeTool};draw2d.ToolPalette.prototype.setActiveTool=function(a){if(this.activeTool!=a&&this.activeTool!==null){this.activeTool.setActive(false)}if(a!==null){a.setActive(true)}this.activeTool=a};draw2d.Dialog=function(a){this.buttonbar=null;if(a){draw2d.WindowFigure.call(this,a)}else{draw2d.WindowFigure.call(this,"Dialog")}this.setDimension(400,300)};draw2d.Dialog.prototype=new draw2d.WindowFigure();draw2d.Dialog.prototype.type="draw2d.Dialog";draw2d.Dialog.prototype.createHTMLElement=function(){var b=draw2d.WindowFigure.prototype.createHTMLElement.call(this);var a=this;this.buttonbar=document.createElement("div");this.buttonbar.style.position="absolute";this.buttonbar.style.left="0px";this.buttonbar.style.bottom="0px";this.buttonbar.style.width=this.getWidth()+"px";this.buttonbar.style.height="30px";this.buttonbar.style.margin="0px";this.buttonbar.style.padding="0px";this.buttonbar.style.font="normal 10px verdana";this.buttonbar.style.backgroundColor="#c0c0c0";this.buttonbar.style.borderBottom="2px solid gray";this.buttonbar.style.whiteSpace="nowrap";this.buttonbar.style.textAlign="center";this.buttonbar.className="Dialog_buttonbar";this.okbutton=document.createElement("button");this.okbutton.style.border="1px solid gray";this.okbutton.style.font="normal 10px verdana";this.okbutton.style.width="80px";this.okbutton.style.margin="5px";this.okbutton.className="Dialog_okbutton";this.okbutton.innerHTML="Ok";this.okbutton.onclick=function(){var c=null;try{a.onOk()}catch(d){c=d}a.workflow.removeFigure(a);if(c!==null){throw c}};this.buttonbar.appendChild(this.okbutton);this.cancelbutton=document.createElement("button");this.cancelbutton.innerHTML="Cancel";this.cancelbutton.style.font="normal 10px verdana";this.cancelbutton.style.border="1px solid gray";this.cancelbutton.style.width="80px";this.cancelbutton.style.margin="5px";this.cancelbutton.className="Dialog_cancelbutton";this.cancelbutton.onclick=function(){var c=null;try{a.onCancel()}catch(d){c=d}a.workflow.removeFigure(a);if(c!==null){throw c}};this.buttonbar.appendChild(this.cancelbutton);b.appendChild(this.buttonbar);return b};draw2d.Dialog.prototype.onOk=function(){};draw2d.Dialog.prototype.onCancel=function(){};draw2d.Dialog.prototype.setDimension=function(a,b){draw2d.WindowFigure.prototype.setDimension.call(this,a,b);if(this.buttonbar!==null){this.buttonbar.style.width=this.getWidth()+"px"}};draw2d.Dialog.prototype.setWorkflow=function(a){draw2d.WindowFigure.prototype.setWorkflow.call(this,a);this.setFocus()};draw2d.Dialog.prototype.setFocus=function(){};draw2d.Dialog.prototype.onSetDocumentDirty=function(){};draw2d.InputDialog=function(){draw2d.Dialog.call(this);this.setDimension(400,100)};draw2d.InputDialog.prototype=new draw2d.Dialog();draw2d.InputDialog.prototype.type="draw2d.InputDialog";draw2d.InputDialog.prototype.createHTMLElement=function(){var a=draw2d.Dialog.prototype.createHTMLElement.call(this);return a};draw2d.InputDialog.prototype.onOk=function(){this.workflow.removeFigure(this)};draw2d.InputDialog.prototype.onCancel=function(){this.workflow.removeFigure(this)};draw2d.PropertyDialog=function(a,b,c){this.figure=a;this.propertyName=b;this.label=c;draw2d.Dialog.call(this);this.setDimension(400,120)};draw2d.PropertyDialog.prototype=new draw2d.Dialog();draw2d.PropertyDialog.prototype.type="draw2d.PropertyDialog";draw2d.PropertyDialog.prototype.createHTMLElement=function(){var a=draw2d.Dialog.prototype.createHTMLElement.call(this);var c=document.createElement("form");c.style.position="absolute";c.style.left="10px";c.style.top="30px";c.style.width="375px";c.style.font="normal 10px verdana";a.appendChild(c);this.labelDiv=document.createElement("div");this.labelDiv.innerHTML=this.label;this.disableTextSelection(this.labelDiv);c.appendChild(this.labelDiv);this.input=document.createElement("input");this.input.style.border="1px solid gray";this.input.style.font="normal 10px verdana";this.input.type="text";var b=this.figure.getProperty(this.propertyName);if(b){this.input.value=b}else{this.input.value=""}this.input.style.width="100%";c.appendChild(this.input);this.input.focus();return a};draw2d.PropertyDialog.prototype.onOk=function(){draw2d.Dialog.prototype.onOk.call(this);this.figure.setProperty(this.propertyName,this.input.value)};draw2d.AnnotationDialog=function(a){this.figure=a;draw2d.Dialog.call(this);this.setDimension(400,100)};draw2d.AnnotationDialog.prototype=new draw2d.Dialog();draw2d.AnnotationDialog.prototype.type="draw2d.AnnotationDialog";draw2d.AnnotationDialog.prototype.createHTMLElement=function(){var b=draw2d.Dialog.prototype.createHTMLElement.call(this);var a=document.createElement("form");a.style.position="absolute";a.style.left="10px";a.style.top="30px";a.style.width="375px";a.style.font="normal 10px verdana";b.appendChild(a);this.label=document.createTextNode("Text");a.appendChild(this.label);this.input=document.createElement("input");this.input.style.border="1px solid gray";this.input.style.font="normal 10px verdana";this.input.type="text";var c=this.figure.getText();if(c){this.input.value=c}else{this.input.value=""}this.input.style.width="100%";a.appendChild(this.input);this.input.focus();return b};draw2d.AnnotationDialog.prototype.onOk=function(){this.workflow.getCommandStack().execute(new draw2d.CommandSetText(this.figure,this.input.value));this.workflow.removeFigure(this)};draw2d.PropertyWindow=function(){this.currentSelection=null;draw2d.WindowFigure.call(this,"Property Window");this.setDimension(200,100)};draw2d.PropertyWindow.prototype=new draw2d.WindowFigure();draw2d.PropertyWindow.prototype.type="draw2d.PropertyWindow";draw2d.PropertyWindow.prototype.dispose=function(){draw2d.WindowFigure.prototype.dispose.call(this)};draw2d.PropertyWindow.prototype.createHTMLElement=function(){var a=draw2d.WindowFigure.prototype.createHTMLElement.call(this);a.appendChild(this.createLabel("Type:",15,25));a.appendChild(this.createLabel("X :",15,50));a.appendChild(this.createLabel("Y :",15,70));a.appendChild(this.createLabel("Width :",85,50));a.appendChild(this.createLabel("Height :",85,70));this.labelType=this.createLabel("",50,25);this.labelX=this.createLabel("",40,50);this.labelY=this.createLabel("",40,70);this.labelWidth=this.createLabel("",135,50);this.labelHeight=this.createLabel("",135,70);this.labelType.style.fontWeight="normal";this.labelX.style.fontWeight="normal";this.labelY.style.fontWeight="normal";this.labelWidth.style.fontWeight="normal";this.labelHeight.style.fontWeight="normal";a.appendChild(this.labelType);a.appendChild(this.labelX);a.appendChild(this.labelY);a.appendChild(this.labelWidth);a.appendChild(this.labelHeight);return a};draw2d.PropertyWindow.prototype.onSelectionChanged=function(a){draw2d.WindowFigure.prototype.onSelectionChanged.call(this,a);if(this.currentSelection!==null){this.currentSelection.detachMoveListener(this)}this.currentSelection=a;if(a!==null&&a!=this){this.labelType.innerHTML=a.type;if(a.getX){this.labelX.innerHTML=a.getX();this.labelY.innerHTML=a.getY();this.labelWidth.innerHTML=a.getWidth();this.labelHeight.innerHTML=a.getHeight();this.currentSelection=a;this.currentSelection.attachMoveListener(this)}else{this.labelX.innerHTML="";this.labelY.innerHTML="";this.labelWidth.innerHTML="";this.labelHeight.innerHTML=""}}else{this.labelType.innerHTML="&lt;none&gt;";this.labelX.innerHTML="";this.labelY.innerHTML="";this.labelWidth.innerHTML="";this.labelHeight.innerHTML=""}};draw2d.PropertyWindow.prototype.getCurrentSelection=function(){return this.currentSelection};draw2d.PropertyWindow.prototype.onOtherFigureMoved=function(a){if(a==this.currentSelection){this.onSelectionChanged(a)}};draw2d.PropertyWindow.prototype.createLabel=function(c,a,d){var b=document.createElement("div");b.style.position="absolute";b.style.left=a+"px";b.style.top=d+"px";b.style.font="normal 10px verdana";b.style.whiteSpace="nowrap";b.style.fontWeight="bold";b.innerHTML=c;return b};draw2d.ColorDialog=function(){this.maxValue={h:"359",s:"100",v:"100"};this.HSV={0:359,1:100,2:100};this.slideHSV={0:359,1:100,2:100};this.SVHeight=165;this.wSV=162;this.wH=162;draw2d.Dialog.call(this,"Color Chooser");this.loadSV();this.setColor(new draw2d.Color(255,0,0));this.setDimension(219,244)};draw2d.ColorDialog.prototype=new draw2d.Dialog();draw2d.ColorDialog.prototype.type="draw2d.ColorDialog";draw2d.ColorDialog.prototype.createHTMLElement=function(){var a=this;var b=draw2d.Dialog.prototype.createHTMLElement.call(this);this.outerDiv=document.createElement("div");this.outerDiv.id="plugin";this.outerDiv.style.top="15px";this.outerDiv.style.left="0px";this.outerDiv.style.width="201px";this.outerDiv.style.position="absolute";this.outerDiv.style.padding="9px";this.outerDiv.display="block";this.outerDiv.style.background="#0d0d0d";this.plugHEX=document.createElement("div");this.plugHEX.id="plugHEX";this.plugHEX.innerHTML="F1FFCC";this.plugHEX.style.color="white";this.plugHEX.style.font="normal 10px verdana";this.outerDiv.appendChild(this.plugHEX);this.SV=document.createElement("div");this.SV.onmousedown=function(c){a.mouseDownSV(a.SVslide,c)};this.SV.id="SV";this.SV.style.cursor="crosshair";this.SV.style.background="#FF0000 url(SatVal.png)";this.SV.style.position="absolute";this.SV.style.height="166px";this.SV.style.width="167px";this.SV.style.marginRight="10px";this.SV.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='SatVal.png', sizingMethod='scale')";this.SV.style["float"]="left";this.outerDiv.appendChild(this.SV);this.SVslide=document.createElement("div");this.SVslide.onmousedown=function(c){a.mouseDownSV(c)};this.SVslide.style.top="40px";this.SVslide.style.left="40px";this.SVslide.style.position="absolute";this.SVslide.style.cursor="crosshair";this.SVslide.style.background="url(slide.gif)";this.SVslide.style.height="9px";this.SVslide.style.width="9px";this.SVslide.style.lineHeight="1px";this.outerDiv.appendChild(this.SVslide);this.H=document.createElement("form");this.H.id="H";this.H.onmousedown=function(c){a.mouseDownH(c)};this.H.style.border="1px solid #000000";this.H.style.cursor="crosshair";this.H.style.position="absolute";this.H.style.width="19px";this.H.style.top="28px";this.H.style.left="191px";this.outerDiv.appendChild(this.H);this.Hslide=document.createElement("div");this.Hslide.style.top="-7px";this.Hslide.style.left="-8px";this.Hslide.style.background="url(slideHue.gif)";this.Hslide.style.height="5px";this.Hslide.style.width="33px";this.Hslide.style.position="absolute";this.Hslide.style.lineHeight="1px";this.H.appendChild(this.Hslide);this.Hmodel=document.createElement("div");this.Hmodel.style.height="1px";this.Hmodel.style.width="19px";this.Hmodel.style.lineHeight="1px";this.Hmodel.style.margin="0px";this.Hmodel.style.padding="0px";this.Hmodel.style.fontSize="1px";this.H.appendChild(this.Hmodel);b.appendChild(this.outerDiv);return b};draw2d.ColorDialog.prototype.onOk=function(){draw2d.Dialog.prototype.onOk.call(this)};draw2d.browser=function(a){return(Math.max(navigator.userAgent.toLowerCase().indexOf(a),0))};draw2d.ColorDialog.prototype.showColor=function(a){this.plugHEX.style.background="#"+a;this.plugHEX.innerHTML=a};draw2d.ColorDialog.prototype.getSelectedColor=function(){var a=this.hex2rgb(this.plugHEX.innerHTML);return new draw2d.Color(a[0],a[1],a[2])};draw2d.ColorDialog.prototype.setColor=function(a){if(a===null){a=new draw2d.Color(100,100,100)}var b=this.rgb2hex(Array(a.getRed(),a.getGreen(),a.getBlue()));this.updateH(b)};draw2d.ColorDialog.prototype.XY=function(b,a){var c=draw2d.browser("msie")?Array(event.clientX+document.body.scrollLeft,event.clientY+document.body.scrollTop):Array(b.pageX,b.pageY);return c[a]};draw2d.ColorDialog.prototype.mkHSV=function(f,d,g){return(Math.min(f,Math.max(0,Math.ceil((parseInt(g)/d)*f))))};draw2d.ColorDialog.prototype.ckHSV=function(d,c){if(d>=0&&d<=c){return(d)}else{if(d>c){return(c)}else{if(d<0){return("-"+oo)}}}};draw2d.ColorDialog.prototype.mouseDownH=function(b){this.slideHSV[0]=this.HSV[0];var a=this;this.H.onmousemove=function(c){a.dragH(c)};this.H.onmouseup=function(c){a.H.onmousemove="";a.H.onmouseup=""};this.dragH(b)};draw2d.ColorDialog.prototype.dragH=function(a){var b=this.XY(a,1)-this.getY()-40;this.Hslide.style.top=(this.ckHSV(b,this.wH)-5)+"px";this.slideHSV[0]=this.mkHSV(359,this.wH,this.Hslide.style.top);this.updateSV();this.showColor(this.commit());this.SV.style.backgroundColor="#"+this.hsv2hex(Array(this.HSV[0],100,100))};draw2d.ColorDialog.prototype.mouseDownSV=function(d,c){this.slideHSV[0]=this.HSV[0];var a=this;function b(){a.SV.onmousemove="";a.SV.onmouseup="";a.SVslide.onmousemove="";a.SVslide.onmouseup=""}this.SV.onmousemove=function(f){a.dragSV(f)};this.SV.onmouseup=b;this.SVslide.onmousemove=function(f){a.dragSV(f)};this.SVslide.onmouseup=b;this.dragSV(c)};draw2d.ColorDialog.prototype.dragSV=function(b){var a=this.XY(b,0)-this.getX()-1;var c=this.XY(b,1)-this.getY()-20;this.SVslide.style.left=this.ckHSV(a,this.wSV)+"px";this.SVslide.style.top=this.ckHSV(c,this.wSV)+"px";this.slideHSV[1]=this.mkHSV(100,this.wSV,this.SVslide.style.left);this.slideHSV[2]=100-this.mkHSV(100,this.wSV,this.SVslide.style.top);this.updateSV()};draw2d.ColorDialog.prototype.commit=function(){var c="hsv";var d={};var a="";for(var b=0;b<=c.length-1;b++){a=c.substr(b,1);d[b]=(a=="h")?this.maxValue[a]-this.mkHSV(this.maxValue[a],this.wH,this.Hslide.style.top):this.HSV[b]}return(this.updateSV(this.hsv2hex(d)))};draw2d.ColorDialog.prototype.updateSV=function(a){this.HSV=a?this.hex2hsv(a):Array(this.slideHSV[0],this.slideHSV[1],this.slideHSV[2]);if(!a){a=this.hsv2hex(Array(this.slideHSV[0],this.slideHSV[1],this.slideHSV[2]))}this.showColor(a);return a};draw2d.ColorDialog.prototype.loadSV=function(){var b="";for(var a=this.SVHeight;a>=0;a--){b+='<div style="background:#'+this.hsv2hex(Array(Math.round((359/this.SVHeight)*a),100,100))+';"><br/></div>'}this.Hmodel.innerHTML=b};draw2d.ColorDialog.prototype.updateH=function(a){this.plugHEX.innerHTML=a;this.HSV=this.hex2hsv(a);this.SV.style.backgroundColor="#"+this.hsv2hex(Array(this.HSV[0],100,100));this.SVslide.style.top=(parseInt(this.wSV-this.wSV*(this.HSV[1]/100))+20)+"px";this.SVslide.style.left=(parseInt(this.wSV*(this.HSV[1]/100))+5)+"px";this.Hslide.style.top=(parseInt(this.wH*((this.maxValue.h-this.HSV[0])/this.maxValue.h))-7)+"px"};draw2d.ColorDialog.prototype.toHex=function(a){a=Math.round(Math.min(Math.max(0,a),255));return("0123456789ABCDEF".charAt((a-a%16)/16)+"0123456789ABCDEF".charAt(a%16))};draw2d.ColorDialog.prototype.hex2rgb=function(a){return({0:parseInt(a.substr(0,2),16),1:parseInt(a.substr(2,2),16),2:parseInt(a.substr(4,2),16)})};draw2d.ColorDialog.prototype.rgb2hex=function(a){return(this.toHex(a[0])+this.toHex(a[1])+this.toHex(a[2]))};draw2d.ColorDialog.prototype.hsv2hex=function(a){return(this.rgb2hex(this.hsv2rgb(a)))};draw2d.ColorDialog.prototype.hex2hsv=function(a){return(this.rgb2hsv(this.hex2rgb(a)))};draw2d.ColorDialog.prototype.rgb2hsv=function(f){var a=Math.max(f[0],f[1],f[2]);var g=a-Math.min(f[0],f[1],f[2]);var d;var c;var b;if(a!=0){c=Math.round(g/a*100);if(f[0]==a){d=(f[1]-f[2])/g}else{if(f[1]==a){d=2+(f[2]-f[0])/g}else{if(f[2]==a){d=4+(f[0]-f[1])/g}}}var d=Math.min(Math.round(d*60),360);if(d<0){d+=360}}return({0:d?d:0,1:c?c:0,2:Math.round((a/255)*100)})};draw2d.ColorDialog.prototype.hsv2rgb=function(g){var f;var h;var d;var c=g[1]/100;var a=g[2]/100;var b=g[0]/360;if(c>0){if(b>=1){b=0}b=6*b;F=b-Math.floor(b);A=Math.round(255*a*(1-c));h=Math.round(255*a*(1-(c*F)));C=Math.round(255*a*(1-(c*(1-F))));a=Math.round(255*a);switch(Math.floor(b)){case 0:f=a;d=C;h=A;break;case 1:f=h;d=a;h=A;break;case 2:f=A;d=a;h=C;break;case 3:f=A;d=h;h=a;break;case 4:f=C;d=A;h=a;break;case 5:f=a;d=A;h=h;break}return({0:f?f:0,1:d?d:0,2:h?h:0})}else{return({0:(a=Math.round(a*255)),1:a,2:a})}};draw2d.LineColorDialog=function(b){draw2d.ColorDialog.call(this);this.figure=b;var a=b.getColor();this.updateH(this.rgb2hex(a.getRed(),a.getGreen(),a.getBlue()))};draw2d.LineColorDialog.prototype=new draw2d.ColorDialog();draw2d.LineColorDialog.prototype.type="draw2d.LineColorDialog";draw2d.LineColorDialog.prototype.onOk=function(){var a=this.workflow;draw2d.ColorDialog.prototype.onOk.call(this);if(typeof this.figure.setColor=="function"){a.getCommandStack().execute(new draw2d.CommandSetColor(this.figure,this.getSelectedColor()));if(a.getCurrentSelection()==this.figure){a.setCurrentSelection(this.figure)}}};draw2d.BackgroundColorDialog=function(b){draw2d.ColorDialog.call(this);this.figure=b;var a=b.getBackgroundColor();if(a!==null){this.updateH(this.rgb2hex(a.getRed(),a.getGreen(),a.getBlue()))}};draw2d.BackgroundColorDialog.prototype=new draw2d.ColorDialog();draw2d.BackgroundColorDialog.prototype.type="draw2d.BackgroundColorDialog";draw2d.BackgroundColorDialog.prototype.onOk=function(){var a=this.workflow;draw2d.ColorDialog.prototype.onOk.call(this);if(typeof this.figure.setBackgroundColor=="function"){a.getCommandStack().execute(new draw2d.CommandSetBackgroundColor(this.figure,this.getSelectedColor()));if(a.getCurrentSelection()==this.figure){a.setCurrentSelection(this.figure)}}};draw2d.AnnotationDialog=function(a){this.figure=a;draw2d.Dialog.call(this);this.setDimension(400,100)};draw2d.AnnotationDialog.prototype=new draw2d.Dialog();draw2d.AnnotationDialog.prototype.type="draw2d.AnnotationDialog";draw2d.AnnotationDialog.prototype.createHTMLElement=function(){var b=draw2d.Dialog.prototype.createHTMLElement.call(this);var a=document.createElement("form");a.style.position="absolute";a.style.left="10px";a.style.top="30px";a.style.width="375px";a.style.font="normal 10px verdana";b.appendChild(a);this.label=document.createTextNode("Text");a.appendChild(this.label);this.input=document.createElement("input");this.input.style.border="1px solid gray";this.input.style.font="normal 10px verdana";this.input.type="text";var c=this.figure.getText();if(c){this.input.value=c}else{this.input.value=""}this.input.style.width="100%";a.appendChild(this.input);this.input.focus();return b};draw2d.AnnotationDialog.prototype.onOk=function(){this.workflow.getCommandStack().execute(new draw2d.CommandSetText(this.figure,this.input.value));this.workflow.removeFigure(this)};draw2d.Command=function(a){this.label=a};draw2d.Command.prototype.type="draw2d.Command";draw2d.Command.prototype.getLabel=function(){return this.label};draw2d.Command.prototype.canExecute=function(){return true};draw2d.Command.prototype.execute=function(){};draw2d.Command.prototype.cancel=function(){};draw2d.Command.prototype.undo=function(){};draw2d.Command.prototype.redo=function(){};draw2d.CommandStack=function(){this.undostack=[];this.redostack=[];this.maxundo=50;this.eventListeners=new draw2d.ArrayList()};draw2d.CommandStack.PRE_EXECUTE=1;draw2d.CommandStack.PRE_REDO=2;draw2d.CommandStack.PRE_UNDO=4;draw2d.CommandStack.POST_EXECUTE=8;draw2d.CommandStack.POST_REDO=16;draw2d.CommandStack.POST_UNDO=32;draw2d.CommandStack.POST_MASK=draw2d.CommandStack.POST_EXECUTE|draw2d.CommandStack.POST_UNDO|draw2d.CommandStack.POST_REDO;draw2d.CommandStack.PRE_MASK=draw2d.CommandStack.PRE_EXECUTE|draw2d.CommandStack.PRE_UNDO|draw2d.CommandStack.PRE_REDO;draw2d.CommandStack.prototype.type="draw2d.CommandStack";draw2d.CommandStack.prototype.setUndoLimit=function(a){this.maxundo=a};draw2d.CommandStack.prototype.markSaveLocation=function(){this.undostack=[];this.redostack=[]};draw2d.CommandStack.prototype.execute=function(a){if(a===null){return}if(a.canExecute()==false){return}this.notifyListeners(a,draw2d.CommandStack.PRE_EXECUTE);this.undostack.push(a);a.execute();this.redostack=[];if(this.undostack.length>this.maxundo){this.undostack=this.undostack.slice(this.undostack.length-this.maxundo)}this.notifyListeners(a,draw2d.CommandStack.POST_EXECUTE)};draw2d.CommandStack.prototype.undo=function(){var a=this.undostack.pop();if(a){this.notifyListeners(a,draw2d.CommandStack.PRE_UNDO);this.redostack.push(a);a.undo();this.notifyListeners(a,draw2d.CommandStack.POST_UNDO)}};draw2d.CommandStack.prototype.redo=function(){var a=this.redostack.pop();if(a){this.notifyListeners(a,draw2d.CommandStack.PRE_REDO);this.undostack.push(a);a.redo();this.notifyListeners(a,draw2d.CommandStack.POST_REDO)}};draw2d.CommandStack.prototype.canRedo=function(){return this.redostack.length>0};draw2d.CommandStack.prototype.canUndo=function(){return this.undostack.length>0};draw2d.CommandStack.prototype.addCommandStackEventListener=function(a){this.eventListeners.add(a)};draw2d.CommandStack.prototype.removeCommandStackEventListener=function(a){this.eventListeners.remove(a)};draw2d.CommandStack.prototype.notifyListeners=function(a,f){var d=new draw2d.CommandStackEvent(a,f);var c=this.eventListeners.getSize();for(var b=0;b<c;b++){this.eventListeners.get(b).stackChanged(d)}};draw2d.CommandStackEvent=function(a,b){this.command=a;this.details=b};draw2d.CommandStackEvent.prototype.type="draw2d.CommandStackEvent";draw2d.CommandStackEvent.prototype.getCommand=function(){return this.command};draw2d.CommandStackEvent.prototype.getDetails=function(){return this.details};draw2d.CommandStackEvent.prototype.isPostChangeEvent=function(){return 0!=(this.getDetails()&draw2d.CommandStack.POST_MASK)};draw2d.CommandStackEvent.prototype.isPreChangeEvent=function(){return 0!=(this.getDetails()&draw2d.CommandStack.PRE_MASK)};draw2d.CommandStackEventListener=function(){};draw2d.CommandStackEventListener.prototype.type="draw2d.CommandStackEventListener";draw2d.CommandStackEventListener.prototype.stackChanged=function(a){};draw2d.CommandAdd=function(c,b,a,f,d){draw2d.Command.call(this,"add figure");if(d===undefined){d=null}this.parent=d;this.figure=b;this.x=a;this.y=f;this.workflow=c};draw2d.CommandAdd.prototype=new draw2d.Command();draw2d.CommandAdd.prototype.type="draw2d.CommandAdd";draw2d.CommandAdd.prototype.execute=function(){this.redo()};draw2d.CommandAdd.prototype.redo=function(){if(this.x&&this.y){this.workflow.addFigure(this.figure,this.x,this.y)}else{this.workflow.addFigure(this.figure)}this.workflow.setCurrentSelection(this.figure);if(this.parent!==null){this.parent.addChild(this.figure)}};draw2d.CommandAdd.prototype.undo=function(){this.workflow.removeFigure(this.figure);this.workflow.setCurrentSelection(null);if(this.parent!==null){this.parent.removeChild(this.figure)}};draw2d.CommandDelete=function(a){draw2d.Command.call(this,"delete figure");this.parent=a.parent;this.figure=a;this.workflow=a.workflow;this.connections=null;this.compartmentDeleteCommands=null};draw2d.CommandDelete.prototype=new draw2d.Command();draw2d.CommandDelete.prototype.type="draw2d.CommandDelete";draw2d.CommandDelete.prototype.execute=function(){this.redo()};draw2d.CommandDelete.prototype.undo=function(){if(this.figure instanceof draw2d.CompartmentFigure){for(var b=0;b<this.compartmentDeleteCommands.getSize();b++){var a=this.compartmentDeleteCommands.get(b);this.figure.addChild(a.figure);this.workflow.getCommandStack().undo()}}this.workflow.addFigure(this.figure);if(this.figure instanceof draw2d.Connection){this.figure.reconnect()}this.workflow.setCurrentSelection(this.figure);if(this.parent!==null){this.parent.addChild(this.figure)}for(var b=0;b<this.connections.getSize();++b){this.workflow.addFigure(this.connections.get(b));this.connections.get(b).reconnect()}};draw2d.CommandDelete.prototype.redo=function(){if(this.figure instanceof draw2d.CompartmentFigure){if(this.compartmentDeleteCommands===null){this.compartmentDeleteCommands=new draw2d.ArrayList();var d=this.figure.getChildren().clone();for(var g=0;g<d.getSize();g++){var k=d.get(g);this.figure.removeChild(k);var a=new draw2d.CommandDelete(k);this.compartmentDeleteCommands.add(a);this.workflow.getCommandStack().execute(a)}}else{for(var g=0;g<this.compartmentDeleteCommands.getSize();g++){this.workflow.redo()}}}this.workflow.removeFigure(this.figure);this.workflow.setCurrentSelection(null);if(this.figure instanceof draw2d.Node&&this.connections===null){this.connections=new draw2d.ArrayList();var j=this.figure.getPorts();for(var g=0;g<j.getSize();g++){var b=j.get(g);for(var h=0,f=b.getConnections().getSize();h<f;h++){if(!this.connections.contains(b.getConnections().get(h))){this.connections.add(b.getConnections().get(h))}}}}if(this.connections===null){this.connections=new draw2d.ArrayList()}if(this.parent!==null){this.parent.removeChild(this.figure)}for(var g=0;g<this.connections.getSize();++g){this.workflow.removeFigure(this.connections.get(g))}};draw2d.CommandMove=function(b,a,c){draw2d.Command.call(this,"move figure");this.figure=b;if(a==undefined){this.oldX=b.getX();this.oldY=b.getY()}else{this.oldX=a;this.oldY=c}this.oldCompartment=b.getParent()};draw2d.CommandMove.prototype=new draw2d.Command();draw2d.CommandMove.prototype.type="draw2d.CommandMove";draw2d.CommandMove.prototype.setStartPosition=function(a,b){this.oldX=a;this.oldY=b};draw2d.CommandMove.prototype.setPosition=function(a,b){this.newX=a;this.newY=b;this.newCompartment=this.figure.workflow.getBestCompartmentFigure(a,b,this.figure)};draw2d.CommandMove.prototype.canExecute=function(){return this.newX!=this.oldX||this.newY!=this.oldY};draw2d.CommandMove.prototype.execute=function(){this.redo()};draw2d.CommandMove.prototype.undo=function(){this.figure.setPosition(this.oldX,this.oldY);if(this.newCompartment!==null){this.newCompartment.removeChild(this.figure)}if(this.oldCompartment!==null){this.oldCompartment.addChild(this.figure)}this.figure.workflow.moveResizeHandles(this.figure)};draw2d.CommandMove.prototype.redo=function(){this.figure.setPosition(this.newX,this.newY);if(this.oldCompartment!==null){this.oldCompartment.removeChild(this.figure)}if(this.newCompartment!==null){this.newCompartment.addChild(this.figure)}this.figure.workflow.moveResizeHandles(this.figure)};draw2d.CommandResize=function(c,b,a){draw2d.Command.call(this,"resize figure");this.figure=c;if(b===undefined){this.oldWidth=c.getWidth();this.oldHeight=c.getHeight()}else{this.oldWidth=b;this.oldHeight=a}};draw2d.CommandResize.prototype=new draw2d.Command();draw2d.CommandResize.prototype.type="draw2d.CommandResize";draw2d.CommandResize.prototype.setDimension=function(b,a){this.newWidth=b;this.newHeight=a};draw2d.CommandResize.prototype.canExecute=function(){return this.newWidth!=this.oldWidth||this.newHeight!=this.oldHeight};draw2d.CommandResize.prototype.execute=function(){this.redo()};draw2d.CommandResize.prototype.undo=function(){this.figure.setDimension(this.oldWidth,this.oldHeight);this.figure.workflow.moveResizeHandles(this.figure)};draw2d.CommandResize.prototype.redo=function(){this.figure.setDimension(this.newWidth,this.newHeight);this.figure.workflow.moveResizeHandles(this.figure)};draw2d.CommandSetText=function(b,a){draw2d.Command.call(this,"set text");this.figure=b;this.newText=a;this.oldText=b.getText()};draw2d.CommandSetText.prototype=new draw2d.Command();draw2d.CommandSetText.prototype.type="draw2d.CommandSetText";draw2d.CommandSetText.prototype.execute=function(){this.redo()};draw2d.CommandSetText.prototype.redo=function(){this.figure.setText(this.newText)};draw2d.CommandSetText.prototype.undo=function(){this.figure.setText(this.oldText)};draw2d.CommandSetColor=function(b,a){draw2d.Command.call(this,"set color");this.figure=b;this.newColor=a;this.oldColor=b.getColor()};draw2d.CommandSetColor.prototype=new draw2d.Command();draw2d.CommandSetColor.prototype.type="draw2d.CommandSetColor";draw2d.CommandSetColor.prototype.execute=function(){this.redo()};draw2d.CommandSetColor.prototype.undo=function(){this.figure.setColor(this.oldColor)};draw2d.CommandSetColor.prototype.redo=function(){this.figure.setColor(this.newColor)};draw2d.CommandSetBackgroundColor=function(b,a){draw2d.Command.call(this,"set background color");this.figure=b;this.newColor=a;this.oldColor=b.getBackgroundColor()};draw2d.CommandSetBackgroundColor.prototype=new draw2d.Command();draw2d.CommandSetBackgroundColor.prototype.type="draw2d.CommandSetBackgroundColor";draw2d.CommandSetBackgroundColor.prototype.execute=function(){this.redo()};draw2d.CommandSetBackgroundColor.prototype.undo=function(){this.figure.setBackgroundColor(this.oldColor)};draw2d.CommandSetBackgroundColor.prototype.redo=function(){this.figure.setBackgroundColor(this.newColor)};draw2d.CommandConnect=function(c,b,a){draw2d.Command.call(this,"create connection");this.workflow=c;this.source=b;this.target=a;this.connection=null};draw2d.CommandConnect.prototype=new draw2d.Command();draw2d.CommandConnect.prototype.type="draw2d.CommandConnect";draw2d.CommandConnect.prototype.setConnection=function(a){this.connection=a};draw2d.CommandConnect.prototype.execute=function(){if(this.connection===null){this.connection=new draw2d.Connection()}this.connection.setSource(this.source);this.connection.setTarget(this.target);this.workflow.addFigure(this.connection)};draw2d.CommandConnect.prototype.redo=function(){this.workflow.addFigure(this.connection);this.connection.reconnect()};draw2d.CommandConnect.prototype.undo=function(){this.workflow.removeFigure(this.connection)};draw2d.CommandReconnect=function(a){draw2d.Command.call(this,"reconnect connection");this.con=a;this.oldSourcePort=a.getSource();this.oldTargetPort=a.getTarget();this.oldRouter=a.getRouter();this.con.setRouter(new draw2d.NullConnectionRouter())};draw2d.CommandReconnect.prototype=new draw2d.Command();draw2d.CommandReconnect.prototype.type="draw2d.CommandReconnect";draw2d.CommandReconnect.prototype.canExecute=function(){return true};draw2d.CommandReconnect.prototype.setNewPorts=function(b,a){this.newSourcePort=b;this.newTargetPort=a};draw2d.CommandReconnect.prototype.execute=function(){this.redo()};draw2d.CommandReconnect.prototype.cancel=function(){var b=this.con.sourceAnchor.getLocation(this.con.targetAnchor.getReferencePoint());var a=this.con.targetAnchor.getLocation(this.con.sourceAnchor.getReferencePoint());this.con.setStartPoint(b.x,b.y);this.con.setEndPoint(a.x,a.y);this.con.getWorkflow().showLineResizeHandles(this.con);this.con.setRouter(this.oldRouter)};draw2d.CommandReconnect.prototype.undo=function(){this.con.setSource(this.oldSourcePort);this.con.setTarget(this.oldTargetPort);this.con.setRouter(this.oldRouter);if(this.con.getWorkflow().getCurrentSelection()==this.con){this.con.getWorkflow().showLineResizeHandles(this.con)}};draw2d.CommandReconnect.prototype.redo=function(){this.con.setSource(this.newSourcePort);this.con.setTarget(this.newTargetPort);this.con.setRouter(this.oldRouter);if(this.con.getWorkflow().getCurrentSelection()==this.con){this.con.getWorkflow().showLineResizeHandles(this.con)}};draw2d.CommandMoveLine=function(a,c,b,f,d){draw2d.Command.call(this,"move line");this.line=a;this.startX1=c;this.startY1=b;this.endX1=f;this.endY1=d};draw2d.CommandMoveLine.prototype=new draw2d.Command();draw2d.CommandMoveLine.prototype.type="draw2d.CommandMoveLine";draw2d.CommandMoveLine.prototype.canExecute=function(){return this.startX1!=this.startX2||this.startY1!=this.startY2||this.endX1!=this.endX2||this.endY1!=this.endY2};draw2d.CommandMoveLine.prototype.execute=function(){this.startX2=this.line.getStartX();this.startY2=this.line.getStartY();this.endX2=this.line.getEndX();this.endY2=this.line.getEndY();this.redo()};draw2d.CommandMoveLine.prototype.undo=function(){this.line.setStartPoint(this.startX1,this.startY1);this.line.setEndPoint(this.endX1,this.endY1);if(this.line.workflow.getCurrentSelection()==this.line){this.line.workflow.showLineResizeHandles(this.line)}};draw2d.CommandMoveLine.prototype.redo=function(){this.line.setStartPoint(this.startX2,this.startY2);this.line.setEndPoint(this.endX2,this.endY2);if(this.line.workflow.getCurrentSelection()==this.line){this.line.workflow.showLineResizeHandles(this.line)}};draw2d.CommandMovePort=function(a){draw2d.Command.call(this,"move port");this.port=a};draw2d.CommandMovePort.prototype=new draw2d.Command();draw2d.CommandMovePort.prototype.type="draw2d.CommandMovePort";draw2d.CommandMovePort.prototype.execute=function(){this.port.setAlpha(1);this.port.setPosition(this.port.originX,this.port.originY);this.port.parentNode.workflow.hideConnectionLine()};draw2d.CommandMovePort.prototype.undo=function(){};draw2d.CommandMovePort.prototype.redo=function(){};draw2d.CommandMovePort.prototype.setPosition=function(a,b){};draw2d.Menu=function(){this.menuItems=new draw2d.ArrayList();draw2d.Figure.call(this);this.setSelectable(false);this.setDeleteable(false);this.setCanDrag(false);this.setResizeable(false);this.setSelectable(false);this.setZOrder(10000);this.dirty=false};draw2d.Menu.prototype=new draw2d.Figure();draw2d.Menu.prototype.type="draw2d.Menu";draw2d.Menu.prototype.createHTMLElement=function(){var a=document.createElement("div");a.style.position="absolute";a.style.left=this.x+"px";a.style.top=this.y+"px";a.style.margin="0px";a.style.padding="0px";a.style.zIndex=""+draw2d.Figure.ZOrderBaseIndex;a.style.border="1px solid gray";a.style.background="lavender";a.style.cursor="pointer";a.style.width="auto";a.style.height="auto";a.className="Menu";return a};draw2d.Menu.prototype.setWorkflow=function(a){this.workflow=a};draw2d.Menu.prototype.setDimension=function(a,b){};draw2d.Menu.prototype.appendMenuItem=function(a){this.menuItems.add(a);a.parentMenu=this;this.dirty=true};draw2d.Menu.prototype.getHTMLElement=function(){var a=draw2d.Figure.prototype.getHTMLElement.call(this);if(this.dirty){this.createList()}return a};draw2d.Menu.prototype.createList=function(){this.dirty=false;this.html.innerHTML="";var c=this;for(var b=0;b<this.menuItems.getSize();b++){var d=this.menuItems.get(b);var a=document.createElement("a");a.innerHTML=d.getLabel();a.style.display="block";a.style.fontFamily="Verdana, Arial, Helvetica, sans-serif";a.style.fontSize="9pt";a.style.color="dimgray";a.style.borderBottom="1px solid silver";a.style.paddingLeft="5px";a.style.paddingRight="5px";a.style.whiteSpace="nowrap";a.style.cursor="pointer";a.className="MenuItem";this.html.appendChild(a);a.menuItem=d;if(a.addEventListener){a.addEventListener("click",function(i){var k=arguments[0]||window.event;k.cancelBubble=true;k.returnValue=false;var g=k.clientX;var f=k.clientY;var j=document.body.parentNode.scrollLeft;var h=document.body.parentNode.scrollTop;this.menuItem.execute(g+j,f+h)},false);a.addEventListener("mouseup",function(f){f.cancelBubble=true;f.returnValue=false},false);a.addEventListener("mousedown",function(f){f.cancelBubble=true;f.returnValue=false},false);a.addEventListener("mouseover",function(f){this.style.backgroundColor="silver"},false);a.addEventListener("mouseout",function(f){this.style.backgroundColor="transparent"},false)}else{if(a.attachEvent){a.attachEvent("onclick",function(k){var f=arguments[0]||window.event;f.cancelBubble=true;f.returnValue=false;var j=f.clientX;var i=f.clientY;var h=document.body.parentNode.scrollLeft;var g=document.body.parentNode.scrollTop;k.srcElement.menuItem.execute(j+h,i+g)});a.attachEvent("onmousedown",function(f){f.cancelBubble=true;f.returnValue=false});a.attachEvent("onmouseup",function(f){f.cancelBubble=true;f.returnValue=false});a.attachEvent("onmouseover",function(f){f.srcElement.style.backgroundColor="silver"});a.attachEvent("onmouseout",function(f){f.srcElement.style.backgroundColor="transparent"})}}}};draw2d.MenuItem=function(a,c,b){this.label=a;this.iconUrl=c;this.parentMenu=null;this.action=b};draw2d.MenuItem.prototype.type="draw2d.MenuItem";draw2d.MenuItem.prototype.isEnabled=function(){return true};draw2d.MenuItem.prototype.getLabel=function(){return this.label};draw2d.MenuItem.prototype.execute=function(a,b){this.parentMenu.workflow.showMenu(null);this.action(a,b)};draw2d.Locator=function(){};draw2d.Locator.prototype.type="draw2d.Locator";draw2d.Locator.prototype.relocate=function(a){};draw2d.ConnectionLocator=function(a){draw2d.Locator.call(this);this.connection=a};draw2d.ConnectionLocator.prototype=new draw2d.Locator;draw2d.ConnectionLocator.prototype.type="draw2d.ConnectionLocator";draw2d.ConnectionLocator.prototype.getConnection=function(){return this.connection};draw2d.ManhattanMidpointLocator=function(a){draw2d.ConnectionLocator.call(this,a)};draw2d.ManhattanMidpointLocator.prototype=new draw2d.ConnectionLocator;draw2d.ManhattanMidpointLocator.prototype.type="draw2d.ManhattanMidpointLocator";draw2d.ManhattanMidpointLocator.prototype.relocate=function(g){var b=this.getConnection();var f=new draw2d.Point();var c=b.getPoints();var a=Math.floor((c.getSize()-2)/2);if(c.getSize()<=a+1){return}var h=c.get(a);var d=c.get(a+1);f.x=(d.x-h.x)/2+h.x+5;f.y=(d.y-h.y)/2+h.y+5;g.setPosition(f.x,f.y)};draw2d.EditPartFactory=function(){};draw2d.EditPartFactory.prototype.type="draw2d.EditPartFactory";draw2d.EditPartFactory.prototype.createEditPart=function(a){};draw2d.AbstractObjectModel=function(){this.listeners=new draw2d.ArrayList();this.id=draw2d.UUID.create()};draw2d.AbstractObjectModel.EVENT_ELEMENT_ADDED="element added";draw2d.AbstractObjectModel.EVENT_ELEMENT_REMOVED="element removed";draw2d.AbstractObjectModel.EVENT_CONNECTION_ADDED="connection addedx";draw2d.AbstractObjectModel.EVENT_CONNECTION_REMOVED="connection removed";draw2d.AbstractObjectModel.prototype.type="draw2d.AbstractObjectModel";draw2d.AbstractObjectModel.prototype.getModelChildren=function(){return new draw2d.ArrayList()};draw2d.AbstractObjectModel.prototype.getModelParent=function(){return this.modelParent};draw2d.AbstractObjectModel.prototype.setModelParent=function(a){this.modelParent=a};draw2d.AbstractObjectModel.prototype.getId=function(){return this.id};draw2d.AbstractObjectModel.prototype.firePropertyChange=function(d,c,a){var g=this.listeners.getSize();if(g===0){return}var f=new draw2d.PropertyChangeEvent(this,d,c,a);for(var b=0;b<g;b++){try{this.listeners.get(b).propertyChange(f)}catch(h){alert("Method: draw2d.AbstractObjectModel.prototype.firePropertyChange\n"+h+"\nProperty: "+d+"\nListener Class:"+this.listeners.get(b).type)}}};draw2d.AbstractObjectModel.prototype.addPropertyChangeListener=function(a){if(a!==null){this.listeners.add(a)}};draw2d.AbstractObjectModel.prototype.removePropertyChangeListener=function(a){if(a!==null){this.listeners.remove(a)}};draw2d.AbstractObjectModel.prototype.getPersistentAttributes=function(){return{id:this.id}};draw2d.AbstractConnectionModel=function(){draw2d.AbstractObjectModel.call(this)};draw2d.AbstractConnectionModel.prototype=new draw2d.AbstractObjectModel();draw2d.AbstractConnectionModel.prototype.type="draw2d.AbstractConnectionModel";draw2d.AbstractConnectionModel.prototype.getSourceModel=function(){throw"you must override the method [AbstractConnectionModel.prototype.getSourceModel]"};draw2d.AbstractConnectionModel.prototype.getTargetModel=function(){throw"you must override the method [AbstractConnectionModel.prototype.getTargetModel]"};draw2d.AbstractConnectionModel.prototype.getSourcePortName=function(){throw"you must override the method [AbstractConnectionModel.prototype.getSourcePortName]"};draw2d.AbstractConnectionModel.prototype.getTargetPortName=function(){throw"you must override the method [AbstractConnectionModel.prototype.getTargetPortName]"};draw2d.AbstractConnectionModel.prototype.getSourcePortModel=function(){throw"you must override the method [AbstractConnectionModel.prototype.getSourcePortModel]"};draw2d.AbstractConnectionModel.prototype.getTargetPortModel=function(){throw"you must override the method [AbstractConnectionModel.prototype.getTargetPortModel]"};draw2d.PropertyChangeEvent=function(b,a,d,c){this.model=b;this.property=a;this.oldValue=d;this.newValue=c};draw2d.PropertyChangeEvent.prototype.type="draw2d.PropertyChangeEvent";draw2d.GraphicalViewer=function(b){try{draw2d.Workflow.call(this,b);this.factory=null;this.model=null;this.initDone=false}catch(a){pushErrorStack(a,"draw2d.GraphicalViewer=function(/*:String*/ id)")}};draw2d.GraphicalViewer.prototype=new draw2d.Workflow();draw2d.GraphicalViewer.prototype.type="draw2d.GraphicalViewer";draw2d.GraphicalViewer.prototype.setEditPartFactory=function(a){this.factory=a;this.checkInit()};draw2d.GraphicalViewer.prototype.setModel=function(a){try{if(a instanceof draw2d.AbstractObjectModel){this.model=a;this.checkInit();this.model.addPropertyChangeListener(this)}else{alert("Invalid model class type:"+a.type)}}catch(b){pushErrorStack(b,"draw2d.GraphicalViewer.prototype.setModel=function(/*:draw2d.AbstractObjectModel*/ model )")}};draw2d.GraphicalViewer.prototype.propertyChange=function(a){switch(a.property){case draw2d.AbstractObjectModel.EVENT_ELEMENT_REMOVED:var b=this.getFigure(a.oldValue.getId());this.removeFigure(b);break;case draw2d.AbstractObjectModel.EVENT_ELEMENT_ADDED:var b=this.factory.createEditPart(a.newValue);b.setId(a.newValue.getId());this.addFigure(b);this.setCurrentSelection(b);break}};draw2d.GraphicalViewer.prototype.checkInit=function(){if(this.factory!==null&&this.model!==null&&this.initDone==false){try{var d=this.model.getModelChildren();var b=d.getSize();for(var a=0;a<b;a++){var h=d.get(a);var g=this.factory.createEditPart(h);g.setId(h.getId());this.addFigure(g)}}catch(f){pushErrorStack(f,"draw2d.GraphicalViewer.prototype.checkInit=function()[addFigures]")}try{var c=this.getDocument().getFigures();var b=c.getSize();for(var a=0;a<b;a++){var g=c.get(a);if(g instanceof draw2d.Node){this.refreshConnections(g)}}}catch(f){pushErrorStack(f,"draw2d.GraphicalViewer.prototype.checkInit=function()[refreshConnections]")}}};draw2d.GraphicalViewer.prototype.refreshConnections=function(p){try{var u=new draw2d.ArrayList();var t=p.getModelSourceConnections();var j=t.getSize();for(var r=0;r<j;r++){var n=t.get(r);u.add(n.getId());var l=this.getLine(n.getId());if(l===null){l=this.factory.createEditPart(n);var h=n.getSourceModel();var g=n.getTargetModel();var f=this.getFigure(h.getId());var c=this.getFigure(g.getId());var b=f.getOutputPort(n.getSourcePortName());var a=c.getInputPort(n.getTargetPortName());l.setTarget(a);l.setSource(b);l.setId(n.getId());this.addFigure(l);this.setCurrentSelection(l)}}var q=p.getOutputPorts();j=q.getSize();for(var r=0;r<j;r++){var m=q.get(r).getConnections();var k=m.getSize();for(var o=0;o<k;o++){var d=m.get(o);if(!u.contains(d.getId())){this.removeFigure(d);u.add(d.getId())}}}}catch(s){pushErrorStack(s,"draw2d.GraphicalViewer.prototype.refreshConnections=function(/*:draw2d.Node*/ node )")}};draw2d.GraphicalEditor=function(b){try{this.view=new draw2d.GraphicalViewer(b);this.initializeGraphicalViewer()}catch(a){pushErrorStack(a,"draw2d.GraphicalEditor=function(/*:String*/ id)")}};draw2d.GraphicalEditor.prototype.type="draw2d.GraphicalEditor";draw2d.GraphicalEditor.prototype.initializeGraphicalViewer=function(){};draw2d.GraphicalEditor.prototype.getGraphicalViewer=function(){return this.view};var whitespace="\n\r\t ";XMLP=function(a){a=SAXStrings.replace(a,null,null,"\r\n","\n");a=SAXStrings.replace(a,null,null,"\r","\n");this.m_xml=a;this.m_iP=0;this.m_iState=XMLP._STATE_PROLOG;this.m_stack=new Stack();this._clearAttributes()};XMLP._NONE=0;XMLP._ELM_B=1;XMLP._ELM_E=2;XMLP._ELM_EMP=3;XMLP._ATT=4;XMLP._TEXT=5;XMLP._ENTITY=6;XMLP._PI=7;XMLP._CDATA=8;XMLP._COMMENT=9;XMLP._DTD=10;XMLP._ERROR=11;XMLP._CONT_XML=0;XMLP._CONT_ALT=1;XMLP._ATT_NAME=0;XMLP._ATT_VAL=1;XMLP._STATE_PROLOG=1;XMLP._STATE_DOCUMENT=2;XMLP._STATE_MISC=3;XMLP._errs=[];XMLP._errs[XMLP.ERR_CLOSE_PI=0]="PI: missing closing sequence";XMLP._errs[XMLP.ERR_CLOSE_DTD=1]="DTD: missing closing sequence";XMLP._errs[XMLP.ERR_CLOSE_COMMENT=2]="Comment: missing closing sequence";XMLP._errs[XMLP.ERR_CLOSE_CDATA=3]="CDATA: missing closing sequence";XMLP._errs[XMLP.ERR_CLOSE_ELM=4]="Element: missing closing sequence";XMLP._errs[XMLP.ERR_CLOSE_ENTITY=5]="Entity: missing closing sequence";XMLP._errs[XMLP.ERR_PI_TARGET=6]="PI: target is required";XMLP._errs[XMLP.ERR_ELM_EMPTY=7]="Element: cannot be both empty and closing";XMLP._errs[XMLP.ERR_ELM_NAME=8]='Element: name must immediatly follow "<"';XMLP._errs[XMLP.ERR_ELM_LT_NAME=9]='Element: "<" not allowed in element names';XMLP._errs[XMLP.ERR_ATT_VALUES=10]="Attribute: values are required and must be in quotes";XMLP._errs[XMLP.ERR_ATT_LT_NAME=11]='Element: "<" not allowed in attribute names';XMLP._errs[XMLP.ERR_ATT_LT_VALUE=12]='Attribute: "<" not allowed in attribute values';XMLP._errs[XMLP.ERR_ATT_DUP=13]="Attribute: duplicate attributes not allowed";XMLP._errs[XMLP.ERR_ENTITY_UNKNOWN=14]="Entity: unknown entity";XMLP._errs[XMLP.ERR_INFINITELOOP=15]="Infininte loop";XMLP._errs[XMLP.ERR_DOC_STRUCTURE=16]="Document: only comments, processing instructions, or whitespace allowed outside of document element";XMLP._errs[XMLP.ERR_ELM_NESTING=17]="Element: must be nested correctly";XMLP.prototype._addAttribute=function(a,b){this.m_atts[this.m_atts.length]=new Array(a,b)};XMLP.prototype._checkStructure=function(a){if(XMLP._STATE_PROLOG==this.m_iState){if((XMLP._TEXT==a)||(XMLP._ENTITY==a)){if(SAXStrings.indexOfNonWhitespace(this.getContent(),this.getContentBegin(),this.getContentEnd())!=-1){return this._setErr(XMLP.ERR_DOC_STRUCTURE)}}if((XMLP._ELM_B==a)||(XMLP._ELM_EMP==a)){this.m_iState=XMLP._STATE_DOCUMENT}}if(XMLP._STATE_DOCUMENT==this.m_iState){if((XMLP._ELM_B==a)||(XMLP._ELM_EMP==a)){this.m_stack.push(this.getName())}if((XMLP._ELM_E==a)||(XMLP._ELM_EMP==a)){var b=this.m_stack.pop();if((b===null)||(b!=this.getName())){return this._setErr(XMLP.ERR_ELM_NESTING)}}if(this.m_stack.count()===0){this.m_iState=XMLP._STATE_MISC;return a}}if(XMLP._STATE_MISC==this.m_iState){if((XMLP._ELM_B==a)||(XMLP._ELM_E==a)||(XMLP._ELM_EMP==a)||(XMLP.EVT_DTD==a)){return this._setErr(XMLP.ERR_DOC_STRUCTURE)}if((XMLP._TEXT==a)||(XMLP._ENTITY==a)){if(SAXStrings.indexOfNonWhitespace(this.getContent(),this.getContentBegin(),this.getContentEnd())!=-1){return this._setErr(XMLP.ERR_DOC_STRUCTURE)}}}return a};XMLP.prototype._clearAttributes=function(){this.m_atts=[]};XMLP.prototype._findAttributeIndex=function(a){for(var b=0;b<this.m_atts.length;b++){if(this.m_atts[b][XMLP._ATT_NAME]==a){return b}}return -1};XMLP.prototype.getAttributeCount=function(){return this.m_atts?this.m_atts.length:0};XMLP.prototype.getAttributeName=function(a){return((a<0)||(a>=this.m_atts.length))?null:this.m_atts[a][XMLP._ATT_NAME]};XMLP.prototype.getAttributeValue=function(a){return((a<0)||(a>=this.m_atts.length))?null:__unescapeString(this.m_atts[a][XMLP._ATT_VAL])};XMLP.prototype.getAttributeValueByName=function(a){return this.getAttributeValue(this._findAttributeIndex(a))};XMLP.prototype.getColumnNumber=function(){return SAXStrings.getColumnNumber(this.m_xml,this.m_iP)};XMLP.prototype.getContent=function(){return(this.m_cSrc==XMLP._CONT_XML)?this.m_xml:this.m_cAlt};XMLP.prototype.getContentBegin=function(){return this.m_cB};XMLP.prototype.getContentEnd=function(){return this.m_cE};XMLP.prototype.getLineNumber=function(){return SAXStrings.getLineNumber(this.m_xml,this.m_iP)};XMLP.prototype.getName=function(){return this.m_name};XMLP.prototype.next=function(){return this._checkStructure(this._parse())};XMLP.prototype._parse=function(){if(this.m_iP==this.m_xml.length){return XMLP._NONE}if(this.m_iP==this.m_xml.indexOf("<?",this.m_iP)){return this._parsePI(this.m_iP+2)}else{if(this.m_iP==this.m_xml.indexOf("<!DOCTYPE",this.m_iP)){return this._parseDTD(this.m_iP+9)}else{if(this.m_iP==this.m_xml.indexOf("<!--",this.m_iP)){return this._parseComment(this.m_iP+4)}else{if(this.m_iP==this.m_xml.indexOf("<![CDATA[",this.m_iP)){return this._parseCDATA(this.m_iP+9)}else{if(this.m_iP==this.m_xml.indexOf("<",this.m_iP)){return this._parseElement(this.m_iP+1)}else{if(this.m_iP==this.m_xml.indexOf("&",this.m_iP)){return this._parseEntity(this.m_iP+1)}else{return this._parseText(this.m_iP)}}}}}}};XMLP.prototype._parseAttribute=function(f,d){var i,g,k,a,j;var c,b,h;this.m_cAlt="";i=SAXStrings.indexOfNonWhitespace(this.m_xml,f,d);if((i==-1)||(i>=d)){return i}k=this.m_xml.indexOf("=",i);if((k==-1)||(k>d)){return this._setErr(XMLP.ERR_ATT_VALUES)}g=SAXStrings.lastIndexOfNonWhitespace(this.m_xml,i,k);a=SAXStrings.indexOfNonWhitespace(this.m_xml,k+1,d);if((a==-1)||(a>d)){return this._setErr(XMLP.ERR_ATT_VALUES)}c=this.m_xml.charAt(a);if(SAXStrings.QUOTES.indexOf(c)==-1){return this._setErr(XMLP.ERR_ATT_VALUES)}j=this.m_xml.indexOf(c,a+1);if((j==-1)||(j>d)){return this._setErr(XMLP.ERR_ATT_VALUES)}b=this.m_xml.substring(i,g+1);h=this.m_xml.substring(a+1,j);if(b.indexOf("<")!=-1){return this._setErr(XMLP.ERR_ATT_LT_NAME)}if(h.indexOf("<")!=-1){return this._setErr(XMLP.ERR_ATT_LT_VALUE)}h=SAXStrings.replace(h,null,null,"\n"," ");h=SAXStrings.replace(h,null,null,"\t"," ");iRet=this._replaceEntities(h);if(iRet==XMLP._ERROR){return iRet}h=this.m_cAlt;if(this._findAttributeIndex(b)==-1){this._addAttribute(b,h)}else{return this._setErr(XMLP.ERR_ATT_DUP)}this.m_iP=j+2;return XMLP._ATT};XMLP.prototype._parseCDATA=function(a){var b=this.m_xml.indexOf("]]>",a);if(b==-1){return this._setErr(XMLP.ERR_CLOSE_CDATA)}this._setContent(XMLP._CONT_XML,a,b);this.m_iP=b+3;return XMLP._CDATA};XMLP.prototype._parseComment=function(a){var b=this.m_xml.indexOf("-->",a);if(b==-1){return this._setErr(XMLP.ERR_CLOSE_COMMENT)}this._setContent(XMLP._CONT_XML,a,b);this.m_iP=b+3;return XMLP._COMMENT};XMLP.prototype._parseDTD=function(b){var f,a,c,d;f=this.m_xml.indexOf(">",b);if(f==-1){return this._setErr(XMLP.ERR_CLOSE_DTD)}c=this.m_xml.indexOf("[",b);a=((c!=-1)&&(c<f))?"]>":">";while(true){if(f==d){return this._setErr(XMLP.ERR_INFINITELOOP)}d=f;f=this.m_xml.indexOf(a,b);if(f==-1){return this._setErr(XMLP.ERR_CLOSE_DTD)}if(this.m_xml.substring(f-1,f+2)!="]]>"){break}}this.m_iP=f+a.length;return XMLP._DTD};XMLP.prototype._parseElement=function(b){var h,i,g,c;var d,a,f;i=h=this.m_xml.indexOf(">",b);if(h==-1){return this._setErr(XMLP.ERR_CLOSE_ELM)}if(this.m_xml.charAt(b)=="/"){d=XMLP._ELM_E;b++}else{d=XMLP._ELM_B}if(this.m_xml.charAt(h-1)=="/"){if(d==XMLP._ELM_E){return this._setErr(XMLP.ERR_ELM_EMPTY)}d=XMLP._ELM_EMP;i--}i=SAXStrings.lastIndexOfNonWhitespace(this.m_xml,b,i);if(h-b!=1){if(SAXStrings.indexOfNonWhitespace(this.m_xml,b,i)!=b){return this._setErr(XMLP.ERR_ELM_NAME)}}this._clearAttributes();g=SAXStrings.indexOfWhitespace(this.m_xml,b,i);if(g==-1){g=i+1}else{this.m_iP=g;while(this.m_iP<i){if(this.m_iP==f){return this._setErr(XMLP.ERR_INFINITELOOP)}f=this.m_iP;c=this._parseAttribute(this.m_iP,i);if(c==XMLP._ERROR){return c}}}a=this.m_xml.substring(b,g);if(a.indexOf("<")!=-1){return this._setErr(XMLP.ERR_ELM_LT_NAME)}this.m_name=a;this.m_iP=h+1;return d};XMLP.prototype._parseEntity=function(a){var b=this.m_xml.indexOf(";",a);if(b==-1){return this._setErr(XMLP.ERR_CLOSE_ENTITY)}this.m_iP=b+1;return this._replaceEntity(this.m_xml,a,b)};XMLP.prototype._parsePI=function(b){var f,a,d,g,c;f=this.m_xml.indexOf("?>",b);if(f==-1){return this._setErr(XMLP.ERR_CLOSE_PI)}a=SAXStrings.indexOfNonWhitespace(this.m_xml,b,f);if(a==-1){return this._setErr(XMLP.ERR_PI_TARGET)}d=SAXStrings.indexOfWhitespace(this.m_xml,a,f);if(d==-1){d=f}g=SAXStrings.indexOfNonWhitespace(this.m_xml,d,f);if(g==-1){g=f}c=SAXStrings.lastIndexOfNonWhitespace(this.m_xml,g,f);if(c==-1){c=f-1}this.m_name=this.m_xml.substring(a,d);this._setContent(XMLP._CONT_XML,g,c+1);this.m_iP=f+2;return XMLP._PI};XMLP.prototype._parseText=function(b){var c,a;c=this.m_xml.indexOf("<",b);if(c==-1){c=this.m_xml.length}a=this.m_xml.indexOf("&",b);if((a!=-1)&&(a<=c)){c=a}this._setContent(XMLP._CONT_XML,b,c);this.m_iP=c;return XMLP._TEXT};XMLP.prototype._replaceEntities=function(g,b,d){if(SAXStrings.isEmpty(g)){return""}b=b||0;d=d||g.length;var c,a,f="";c=g.indexOf("&",b);a=b;while((c>0)&&(c<d)){f+=g.substring(a,c);a=g.indexOf(";",c)+1;if((a===0)||(a>d)){return this._setErr(XMLP.ERR_CLOSE_ENTITY)}iRet=this._replaceEntity(g,c+1,a-1);if(iRet==XMLP._ERROR){return iRet}f+=this.m_cAlt;c=g.indexOf("&",a)}if(a!=d){f+=g.substring(a,d)}this._setContent(XMLP._CONT_ALT,f);return XMLP._ENTITY};XMLP.prototype._replaceEntity=function(c,a,b){if(SAXStrings.isEmpty(c)){return -1}a=a||0;b=b||c.length;switch(c.substring(a,b)){case"amp":strEnt="&";break;case"lt":strEnt="<";break;case"gt":strEnt=">";break;case"apos":strEnt="'";break;case"quot":strEnt='"';break;default:if(c.charAt(a)=="#"){strEnt=String.fromCharCode(parseInt(c.substring(a+1,b)))}else{return this._setErr(XMLP.ERR_ENTITY_UNKNOWN)}break}this._setContent(XMLP._CONT_ALT,strEnt);return XMLP._ENTITY};XMLP.prototype._setContent=function(b){var a=arguments;if(XMLP._CONT_XML==b){this.m_cAlt=null;this.m_cB=a[1];this.m_cE=a[2]}else{this.m_cAlt=a[1];this.m_cB=0;this.m_cE=a[1].length}this.m_cSrc=b};XMLP.prototype._setErr=function(b){var a=XMLP._errs[b];this.m_cAlt=a;this.m_cB=0;this.m_cE=a.length;this.m_cSrc=XMLP._CONT_ALT;return XMLP._ERROR};SAXDriver=function(){this.m_hndDoc=null;this.m_hndErr=null;this.m_hndLex=null};SAXDriver.DOC_B=1;SAXDriver.DOC_E=2;SAXDriver.ELM_B=3;SAXDriver.ELM_E=4;SAXDriver.CHARS=5;SAXDriver.PI=6;SAXDriver.CD_B=7;SAXDriver.CD_E=8;SAXDriver.CMNT=9;SAXDriver.DTD_B=10;SAXDriver.DTD_E=11;SAXDriver.prototype.parse=function(b){var a=new XMLP(b);if(this.m_hndDoc&&this.m_hndDoc.setDocumentLocator){this.m_hndDoc.setDocumentLocator(this)}this.m_parser=a;this.m_bErr=false;if(!this.m_bErr){this._fireEvent(SAXDriver.DOC_B)}this._parseLoop();if(!this.m_bErr){this._fireEvent(SAXDriver.DOC_E)}this.m_xml=null;this.m_iP=0};SAXDriver.prototype.setDocumentHandler=function(a){this.m_hndDoc=a};SAXDriver.prototype.setErrorHandler=function(a){this.m_hndErr=a};SAXDriver.prototype.setLexicalHandler=function(a){this.m_hndLex=a};SAXDriver.prototype.getColumnNumber=function(){return this.m_parser.getColumnNumber()};SAXDriver.prototype.getLineNumber=function(){return this.m_parser.getLineNumber()};SAXDriver.prototype.getMessage=function(){return this.m_strErrMsg};SAXDriver.prototype.getPublicId=function(){return null};SAXDriver.prototype.getSystemId=function(){return null};SAXDriver.prototype.getLength=function(){return this.m_parser.getAttributeCount()};SAXDriver.prototype.getName=function(a){return this.m_parser.getAttributeName(a)};SAXDriver.prototype.getValue=function(a){return this.m_parser.getAttributeValue(a)};SAXDriver.prototype.getValueByName=function(a){return this.m_parser.getAttributeValueByName(a)};SAXDriver.prototype._fireError=function(a){this.m_strErrMsg=a;this.m_bErr=true;if(this.m_hndErr&&this.m_hndErr.fatalError){this.m_hndErr.fatalError(this)}};SAXDriver.prototype._fireEvent=function(c){var b,f,d=arguments,a=d.length-1;if(this.m_bErr){return}if(SAXDriver.DOC_B==c){f="startDocument";b=this.m_hndDoc}else{if(SAXDriver.DOC_E==c){f="endDocument";b=this.m_hndDoc}else{if(SAXDriver.ELM_B==c){f="startElement";b=this.m_hndDoc}else{if(SAXDriver.ELM_E==c){f="endElement";b=this.m_hndDoc}else{if(SAXDriver.CHARS==c){f="characters";b=this.m_hndDoc}else{if(SAXDriver.PI==c){f="processingInstruction";b=this.m_hndDoc}else{if(SAXDriver.CD_B==c){f="startCDATA";b=this.m_hndLex}else{if(SAXDriver.CD_E==c){f="endCDATA";b=this.m_hndLex}else{if(SAXDriver.CMNT==c){f="comment";b=this.m_hndLex}}}}}}}}}if(b&&b[f]){if(0==a){b[f]()}else{if(1==a){b[f](d[1])}else{if(2==a){b[f](d[1],d[2])}else{if(3==a){b[f](d[1],d[2],d[3])}}}}}};SAXDriver.prototype._parseLoop=function(b){var a,b;b=this.m_parser;while(!this.m_bErr){a=b.next();if(a==XMLP._ELM_B){this._fireEvent(SAXDriver.ELM_B,b.getName(),this)}else{if(a==XMLP._ELM_E){this._fireEvent(SAXDriver.ELM_E,b.getName())}else{if(a==XMLP._ELM_EMP){this._fireEvent(SAXDriver.ELM_B,b.getName(),this);this._fireEvent(SAXDriver.ELM_E,b.getName())}else{if(a==XMLP._TEXT){this._fireEvent(SAXDriver.CHARS,b.getContent(),b.getContentBegin(),b.getContentEnd()-b.getContentBegin())}else{if(a==XMLP._ENTITY){this._fireEvent(SAXDriver.CHARS,b.getContent(),b.getContentBegin(),b.getContentEnd()-b.getContentBegin())}else{if(a==XMLP._PI){this._fireEvent(SAXDriver.PI,b.getName(),b.getContent().substring(b.getContentBegin(),b.getContentEnd()))}else{if(a==XMLP._CDATA){this._fireEvent(SAXDriver.CD_B);this._fireEvent(SAXDriver.CHARS,b.getContent(),b.getContentBegin(),b.getContentEnd()-b.getContentBegin());this._fireEvent(SAXDriver.CD_E)}else{if(a==XMLP._COMMENT){this._fireEvent(SAXDriver.CMNT,b.getContent(),b.getContentBegin(),b.getContentEnd()-b.getContentBegin())}else{if(a==XMLP._DTD){}else{if(a==XMLP._ERROR){this._fireError(b.getContent())}else{if(a==XMLP._NONE){return}}}}}}}}}}}}};SAXStrings=function(){};SAXStrings.WHITESPACE=" \t\n\r";SAXStrings.QUOTES="\"'";SAXStrings.getColumnNumber=function(f,d){if(SAXStrings.isEmpty(f)){return -1}d=d||f.length;var c=f.substring(0,d).split("\n");var b=c[c.length-1];c.length--;var a=c.join("\n").length;return d-a};SAXStrings.getLineNumber=function(b,a){if(SAXStrings.isEmpty(b)){return -1}a=a||b.length;return b.substring(0,a).split("\n").length};SAXStrings.indexOfNonWhitespace=function(d,a,c){if(SAXStrings.isEmpty(d)){return -1}a=a||0;c=c||d.length;for(var b=a;b<c;b++){if(SAXStrings.WHITESPACE.indexOf(d.charAt(b))==-1){return b}}return -1};SAXStrings.indexOfWhitespace=function(d,a,c){if(SAXStrings.isEmpty(d)){return -1}a=a||0;c=c||d.length;for(var b=a;b<c;b++){if(SAXStrings.WHITESPACE.indexOf(d.charAt(b))!=-1){return b}}return -1};SAXStrings.isEmpty=function(a){return(a===null)||(a.length===0)};SAXStrings.lastIndexOfNonWhitespace=function(d,a,c){if(SAXStrings.isEmpty(d)){return -1}a=a||0;c=c||d.length;for(var b=c-1;b>=a;b--){if(SAXStrings.WHITESPACE.indexOf(d.charAt(b))==-1){return b}}return -1};SAXStrings.replace=function(f,a,d,c,b){if(SAXStrings.isEmpty(f)){return""}a=a||0;d=d||f.length;return f.substring(a,d).split(c).join(b)};Stack=function(){this.m_arr=[]};Stack.prototype.clear=function(){this.m_arr=[]};Stack.prototype.count=function(){return this.m_arr.length};Stack.prototype.destroy=function(){this.m_arr=null};Stack.prototype.peek=function(){if(this.m_arr.length===0){return null}return this.m_arr[this.m_arr.length-1]};Stack.prototype.pop=function(){if(this.m_arr.length===0){return null}var a=this.m_arr[this.m_arr.length-1];this.m_arr.length--;return a};Stack.prototype.push=function(a){this.m_arr[this.m_arr.length]=a};function isEmpty(a){return(a===null)||(a.length==0)}function trim(b,h,a){if(isEmpty(b)){return""}if(h===null){h=true}if(a===null){a=true}var g=0;var f=0;var d=0;var c=0;if(h==true){while((d<b.length)&&(whitespace.indexOf(b.charAt(d++))!=-1)){g++}}if(a==true){c=b.length-1;while((c>=g)&&(whitespace.indexOf(b.charAt(c--))!=-1)){f++}}return b.substring(g,b.length-f)}function __escapeString(g){var d=/&/g;var c=/</g;var b=/>/g;var a=/"/g;var f=/'/g;g=g.replace(d,"&amp;");g=g.replace(c,"&lt;");g=g.replace(b,"&gt;");g=g.replace(a,"&quot;");g=g.replace(f,"&apos;");return g}function __unescapeString(g){var f=/&amp;/g;var d=/&lt;/g;var c=/&gt;/g;var a=/&quot;/g;var b=/&apos;/g;g=g.replace(f,"&");g=g.replace(d,"<");g=g.replace(c,">");g=g.replace(a,'"');g=g.replace(b,"'");return g}function addClass(b,a){if(b){if(b.indexOf("|"+a+"|")<0){b+=a+"|"}}else{b="|"+a+"|"}return b}DOMException=function(a){this._class=addClass(this._class,"DOMException");this.code=a};DOMException.INDEX_SIZE_ERR=1;DOMException.DOMSTRING_SIZE_ERR=2;DOMException.HIERARCHY_REQUEST_ERR=3;DOMException.WRONG_DOCUMENT_ERR=4;DOMException.INVALID_CHARACTER_ERR=5;DOMException.NO_DATA_ALLOWED_ERR=6;DOMException.NO_MODIFICATION_ALLOWED_ERR=7;DOMException.NOT_FOUND_ERR=8;DOMException.NOT_SUPPORTED_ERR=9;DOMException.INUSE_ATTRIBUTE_ERR=10;DOMException.INVALID_STATE_ERR=11;DOMException.SYNTAX_ERR=12;DOMException.INVALID_MODIFICATION_ERR=13;DOMException.NAMESPACE_ERR=14;DOMException.INVALID_ACCESS_ERR=15;DOMImplementation=function(){this._class=addClass(this._class,"DOMImplementation");this._p=null;this.preserveWhiteSpace=false;this.namespaceAware=true;this.errorChecking=true};DOMImplementation.prototype.escapeString=function DOMNode__escapeString(a){return __escapeString(a)};DOMImplementation.prototype.unescapeString=function DOMNode__unescapeString(a){return __unescapeString(a)};DOMImplementation.prototype.hasFeature=function DOMImplementation_hasFeature(b,c){var a=false;if(b.toLowerCase()=="xml"){a=(!c||(c=="1.0")||(c=="2.0"))}else{if(b.toLowerCase()=="core"){a=(!c||(c=="2.0"))}}return a};DOMImplementation.prototype.loadXML=function DOMImplementation_loadXML(b){var a;try{a=new XMLP(b)}catch(d){alert("Error Creating the SAX Parser. Did you include xmlsax.js or tinyxmlsax.js in your web page?\nThe SAX parser is needed to populate XML for <SCRIPT>'s W3C DOM Parser with data.")}var c=new DOMDocument(this);this._parseLoop(c,a);c._parseComplete=true;return c};DOMImplementation.prototype.translateErrCode=function DOMImplementation_translateErrCode(a){var b="";switch(a){case DOMException.INDEX_SIZE_ERR:b="INDEX_SIZE_ERR: Index out of bounds";break;case DOMException.DOMSTRING_SIZE_ERR:b="DOMSTRING_SIZE_ERR: The resulting string is too long to fit in a DOMString";break;case DOMException.HIERARCHY_REQUEST_ERR:b="HIERARCHY_REQUEST_ERR: The Node can not be inserted at this location";break;case DOMException.WRONG_DOCUMENT_ERR:b="WRONG_DOCUMENT_ERR: The source and the destination Documents are not the same";break;case DOMException.INVALID_CHARACTER_ERR:b="INVALID_CHARACTER_ERR: The string contains an invalid character";break;case DOMException.NO_DATA_ALLOWED_ERR:b="NO_DATA_ALLOWED_ERR: This Node / NodeList does not support data";break;case DOMException.NO_MODIFICATION_ALLOWED_ERR:b="NO_MODIFICATION_ALLOWED_ERR: This object cannot be modified";break;case DOMException.NOT_FOUND_ERR:b="NOT_FOUND_ERR: The item cannot be found";break;case DOMException.NOT_SUPPORTED_ERR:b="NOT_SUPPORTED_ERR: This implementation does not support function";break;case DOMException.INUSE_ATTRIBUTE_ERR:b="INUSE_ATTRIBUTE_ERR: The Attribute has already been assigned to another Element";break;case DOMException.INVALID_STATE_ERR:b="INVALID_STATE_ERR: The object is no longer usable";break;case DOMException.SYNTAX_ERR:b="SYNTAX_ERR: Syntax error";break;case DOMException.INVALID_MODIFICATION_ERR:b="INVALID_MODIFICATION_ERR: Cannot change the type of the object";break;case DOMException.NAMESPACE_ERR:b="NAMESPACE_ERR: The namespace declaration is incorrect";break;case DOMException.INVALID_ACCESS_ERR:b="INVALID_ACCESS_ERR: The object does not support this function";break;default:b="UNKNOWN: Unknown Exception Code ("+a+")"}return b};DOMImplementation.prototype._parseLoop=function DOMImplementation__parseLoop(E,m){var l,r,q,k;iNodeParent=E;var t=0;var s=[];var o=[];if(this.namespaceAware){var v=E.createNamespace("");v.setValue("http://www.w3.org/2000/xmlns/");E._namespaces.setNamedItem(v)}while(true){l=m.next();if(l==XMLP._ELM_B){var j=m.getName();j=trim(j,true,true);if(!this.namespaceAware){r=E.createElement(m.getName());for(var u=0;u<m.getAttributeCount();u++){k=m.getAttributeName(u);q=r.getAttributeNode(k);if(!q){q=E.createAttribute(k)}q.setValue(m.getAttributeValue(u));r.setAttributeNode(q)}}else{r=E.createElementNS("",m.getName());r._namespaces=iNodeParent._namespaces._cloneNodes(r);for(var u=0;u<m.getAttributeCount();u++){k=m.getAttributeName(u);if(this._isNamespaceDeclaration(k)){var g=this._parseNSName(k);if(k!="xmlns"){v=E.createNamespace(k)}else{v=E.createNamespace("")}v.setValue(m.getAttributeValue(u));r._namespaces.setNamedItem(v)}else{q=r.getAttributeNode(k);if(!q){q=E.createAttributeNS("",k)}q.setValue(m.getAttributeValue(u));r.setAttributeNodeNS(q);if(this._isIdDeclaration(k)){r.id=m.getAttributeValue(u)}}}if(r._namespaces.getNamedItem(r.prefix)){r.namespaceURI=r._namespaces.getNamedItem(r.prefix).value}for(var u=0;u<r.attributes.length;u++){if(r.attributes.item(u).prefix!=""){if(r._namespaces.getNamedItem(r.attributes.item(u).prefix)){r.attributes.item(u).namespaceURI=r._namespaces.getNamedItem(r.attributes.item(u).prefix).value}}}}if(iNodeParent.nodeType==DOMNode.DOCUMENT_NODE){iNodeParent.documentElement=r}iNodeParent.appendChild(r);iNodeParent=r}else{if(l==XMLP._ELM_E){iNodeParent=iNodeParent.parentNode}else{if(l==XMLP._ELM_EMP){j=m.getName();j=trim(j,true,true);if(!this.namespaceAware){r=E.createElement(j);for(var u=0;u<m.getAttributeCount();u++){k=m.getAttributeName(u);q=r.getAttributeNode(k);if(!q){q=E.createAttribute(k)}q.setValue(m.getAttributeValue(u));r.setAttributeNode(q)}}else{r=E.createElementNS("",m.getName());r._namespaces=iNodeParent._namespaces._cloneNodes(r);for(var u=0;u<m.getAttributeCount();u++){k=m.getAttributeName(u);if(this._isNamespaceDeclaration(k)){var g=this._parseNSName(k);if(k!="xmlns"){v=E.createNamespace(k)}else{v=E.createNamespace("")}v.setValue(m.getAttributeValue(u));r._namespaces.setNamedItem(v)}else{q=r.getAttributeNode(k);if(!q){q=E.createAttributeNS("",k)}q.setValue(m.getAttributeValue(u));r.setAttributeNodeNS(q);if(this._isIdDeclaration(k)){r.id=m.getAttributeValue(u)}}}if(r._namespaces.getNamedItem(r.prefix)){r.namespaceURI=r._namespaces.getNamedItem(r.prefix).value}for(var u=0;u<r.attributes.length;u++){if(r.attributes.item(u).prefix!=""){if(r._namespaces.getNamedItem(r.attributes.item(u).prefix)){r.attributes.item(u).namespaceURI=r._namespaces.getNamedItem(r.attributes.item(u).prefix).value}}}}if(iNodeParent.nodeType==DOMNode.DOCUMENT_NODE){iNodeParent.documentElement=r}iNodeParent.appendChild(r)}else{if(l==XMLP._TEXT||l==XMLP._ENTITY){var f=m.getContent().substring(m.getContentBegin(),m.getContentEnd());if(!this.preserveWhiteSpace){if(trim(f,true,true)==""){f=""}}if(f.length>0){var d=E.createTextNode(f);iNodeParent.appendChild(d);if(l==XMLP._ENTITY){s[s.length]=d}else{o[o.length]=d}}}else{if(l==XMLP._PI){iNodeParent.appendChild(E.createProcessingInstruction(m.getName(),m.getContent().substring(m.getContentBegin(),m.getContentEnd())))}else{if(l==XMLP._CDATA){f=m.getContent().substring(m.getContentBegin(),m.getContentEnd());if(!this.preserveWhiteSpace){f=trim(f,true,true);f.replace(/ +/g," ")}if(f.length>0){iNodeParent.appendChild(E.createCDATASection(f))}}else{if(l==XMLP._COMMENT){var f=m.getContent().substring(m.getContentBegin(),m.getContentEnd());if(!this.preserveWhiteSpace){f=trim(f,true,true);f.replace(/ +/g," ")}if(f.length>0){iNodeParent.appendChild(E.createComment(f))}}else{if(l==XMLP._DTD){}else{if(l==XMLP._ERROR){throw (new DOMException(DOMException.SYNTAX_ERR))}else{if(l==XMLP._NONE){if(iNodeParent==E){break}else{throw (new DOMException(DOMException.SYNTAX_ERR))}}}}}}}}}}}}var c=s.length;for(intLoop=0;intLoop<c;intLoop++){var a=s[intLoop];var D=a.getParentNode();if(D){D.normalize();if(!this.preserveWhiteSpace){var B=D.getChildNodes();var z=B.getLength();for(intLoop2=0;intLoop2<z;intLoop2++){var h=B.item(intLoop2);if(h.getNodeType()==DOMNode.TEXT_NODE){var y=h.getData();y=trim(y,true,true);y.replace(/ +/g," ");h.setData(y)}}}}}if(!this.preserveWhiteSpace){var c=o.length;for(intLoop=0;intLoop<c;intLoop++){var n=o[intLoop];if(n.getParentNode()!==null){var b=n.getData();b=trim(b,true,true);b.replace(/ +/g," ");n.setData(b)}}}};DOMImplementation.prototype._isNamespaceDeclaration=function DOMImplementation__isNamespaceDeclaration(a){return(a.indexOf("xmlns")>-1)};DOMImplementation.prototype._isIdDeclaration=function DOMImplementation__isIdDeclaration(a){return(a.toLowerCase()=="id")};DOMImplementation.prototype._isValidName=function DOMImplementation__isValidName(a){return a.match(re_validName)};re_validName=/^[a-zA-Z_:][a-zA-Z0-9\.\-_:]*$/;DOMImplementation.prototype._isValidString=function DOMImplementation__isValidString(a){return(a.search(re_invalidStringChars)<0)};re_invalidStringChars=/\x01|\x02|\x03|\x04|\x05|\x06|\x07|\x08|\x0B|\x0C|\x0E|\x0F|\x10|\x11|\x12|\x13|\x14|\x15|\x16|\x17|\x18|\x19|\x1A|\x1B|\x1C|\x1D|\x1E|\x1F|\x7F/;DOMImplementation.prototype._parseNSName=function DOMImplementation__parseNSName(b){var a={};a.prefix=b;a.namespaceName="";delimPos=b.indexOf(":");if(delimPos>-1){a.prefix=b.substring(0,delimPos);a.namespaceName=b.substring(delimPos+1,b.length)}return a};DOMImplementation.prototype._parseQName=function DOMImplementation__parseQName(b){var a={};a.localName=b;a.prefix="";delimPos=b.indexOf(":");if(delimPos>-1){a.prefix=b.substring(0,delimPos);a.localName=b.substring(delimPos+1,b.length)}return a};DOMNodeList=function(b,a){this._class=addClass(this._class,"DOMNodeList");this._nodes=[];this.length=0;this.parentNode=a;this.ownerDocument=b;this._readonly=false};DOMNodeList.prototype.getLength=function DOMNodeList_getLength(){return this.length};DOMNodeList.prototype.item=function DOMNodeList_item(b){var a=null;if((b>=0)&&(b<this._nodes.length)){a=this._nodes[b]}return a};DOMNodeList.prototype._findItemIndex=function DOMNodeList__findItemIndex(c){var a=-1;if(c>-1){for(var b=0;b<this._nodes.length;b++){if(this._nodes[b]._id==c){a=b;break}}}return a};DOMNodeList.prototype._insertBefore=function DOMNodeList__insertBefore(c,b){if((b>=0)&&(b<this._nodes.length)){var a=[];a=this._nodes.slice(0,b);if(c.nodeType==DOMNode.DOCUMENT_FRAGMENT_NODE){a=a.concat(c.childNodes._nodes)}else{a[a.length]=c}this._nodes=a.concat(this._nodes.slice(b));this.length=this._nodes.length}};DOMNodeList.prototype._replaceChild=function DOMNodeList__replaceChild(a,d){var b=null;if((d>=0)&&(d<this._nodes.length)){b=this._nodes[d];if(a.nodeType==DOMNode.DOCUMENT_FRAGMENT_NODE){var c=[];c=this._nodes.slice(0,d);c=c.concat(a.childNodes._nodes);this._nodes=c.concat(this._nodes.slice(d+1))}else{this._nodes[d]=a}}return b};DOMNodeList.prototype._removeChild=function DOMNodeList__removeChild(c){var a=null;if(c>-1){a=this._nodes[c];var b=[];b=this._nodes.slice(0,c);this._nodes=b.concat(this._nodes.slice(c+1));this.length=this._nodes.length}return a};DOMNodeList.prototype._appendChild=function DOMNodeList__appendChild(a){if(a.nodeType==DOMNode.DOCUMENT_FRAGMENT_NODE){this._nodes=this._nodes.concat(a.childNodes._nodes)}else{this._nodes[this._nodes.length]=a}this.length=this._nodes.length};DOMNodeList.prototype._cloneNodes=function DOMNodeList__cloneNodes(a,d){var b=new DOMNodeList(this.ownerDocument,d);for(var c=0;c<this._nodes.length;c++){b._appendChild(this._nodes[c].cloneNode(a))}return b};DOMNodeList.prototype.toString=function DOMNodeList_toString(){var a="";for(var b=0;b<this.length;b++){a+=this._nodes[b].toString()}return a};DOMNamedNodeMap=function(b,a){this._class=addClass(this._class,"DOMNamedNodeMap");this.DOMNodeList=DOMNodeList;this.DOMNodeList(b,a)};DOMNamedNodeMap.prototype=new DOMNodeList;DOMNamedNodeMap.prototype.getNamedItem=function DOMNamedNodeMap_getNamedItem(c){var b=null;var a=this._findNamedItemIndex(c);if(a>-1){b=this._nodes[a]}return b};DOMNamedNodeMap.prototype.setNamedItem=function DOMNamedNodeMap_setNamedItem(b){if(this.ownerDocument.implementation.errorChecking){if(this.ownerDocument!=b.ownerDocument){throw (new DOMException(DOMException.WRONG_DOCUMENT_ERR))}if(this._readonly||(this.parentNode&&this.parentNode._readonly)){throw (new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR))}if(b.ownerElement&&(b.ownerElement!=this.parentNode)){throw (new DOMException(DOMException.INUSE_ATTRIBUTE_ERR))}}var a=this._findNamedItemIndex(b.name);var c=null;if(a>-1){c=this._nodes[a];if(this.ownerDocument.implementation.errorChecking&&c._readonly){throw (new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR))}else{this._nodes[a]=b}}else{this._nodes[this.length]=b}this.length=this._nodes.length;b.ownerElement=this.parentNode;return c};DOMNamedNodeMap.prototype.removeNamedItem=function DOMNamedNodeMap_removeNamedItem(b){var a=null;if(this.ownerDocument.implementation.errorChecking&&(this._readonly||(this.parentNode&&this.parentNode._readonly))){throw (new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR))}var d=this._findNamedItemIndex(b);if(this.ownerDocument.implementation.errorChecking&&(d<0)){throw (new DOMException(DOMException.NOT_FOUND_ERR))}var c=this._nodes[d];if(this.ownerDocument.implementation.errorChecking&&c._readonly){throw (new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR))}return this._removeChild(d)};DOMNamedNodeMap.prototype.getNamedItemNS=function DOMNamedNodeMap_getNamedItemNS(c,b){var a=null;var d=this._findNamedItemNSIndex(c,b);if(d>-1){a=this._nodes[d]}return a};DOMNamedNodeMap.prototype.setNamedItemNS=function DOMNamedNodeMap_setNamedItemNS(a){if(this.ownerDocument.implementation.errorChecking){if(this._readonly||(this.parentNode&&this.parentNode._readonly)){throw (new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR))}if(this.ownerDocument!=a.ownerDocument){throw (new DOMException(DOMException.WRONG_DOCUMENT_ERR))}if(a.ownerElement&&(a.ownerElement!=this.parentNode)){throw (new DOMException(DOMException.INUSE_ATTRIBUTE_ERR))}}var c=this._findNamedItemNSIndex(a.namespaceURI,a.localName);var b=null;if(c>-1){b=this._nodes[c];if(this.ownerDocument.implementation.errorChecking&&b._readonly){throw (new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR))}else{this._nodes[c]=a}}else{this._nodes[this.length]=a}this.length=this._nodes.length;a.ownerElement=this.parentNode;return b};DOMNamedNodeMap.prototype.removeNamedItemNS=function DOMNamedNodeMap_removeNamedItemNS(d,f){var c=null;if(this.ownerDocument.implementation.errorChecking&&(this._readonly||(this.parentNode&&this.parentNode._readonly))){throw (new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR))}var b=this._findNamedItemNSIndex(d,f);if(this.ownerDocument.implementation.errorChecking&&(b<0)){throw (new DOMException(DOMException.NOT_FOUND_ERR))}var a=this._nodes[b];if(this.ownerDocument.implementation.errorChecking&&a._readonly){throw (new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR))}return this._removeChild(b)};DOMNamedNodeMap.prototype._findNamedItemIndex=function DOMNamedNodeMap__findNamedItemIndex(b){var a=-1;for(var c=0;c<this._nodes.length;c++){if(this._nodes[c].name==b){a=c;break}}return a};DOMNamedNodeMap.prototype._findNamedItemNSIndex=function DOMNamedNodeMap__findNamedItemNSIndex(d,c){var a=-1;if(c){for(var b=0;b<this._nodes.length;b++){if((this._nodes[b].namespaceURI==d)&&(this._nodes[b].localName==c)){a=b;break}}}return a};DOMNamedNodeMap.prototype._hasAttribute=function DOMNamedNodeMap__hasAttribute(b){var a=false;var c=this._findNamedItemIndex(b);if(c>-1){a=true}return a};DOMNamedNodeMap.prototype._hasAttributeNS=function DOMNamedNodeMap__hasAttributeNS(d,c){var b=false;var a=this._findNamedItemNSIndex(d,c);if(a>-1){b=true}return b};DOMNamedNodeMap.prototype._cloneNodes=function DOMNamedNodeMap__cloneNodes(a){var c=new DOMNamedNodeMap(this.ownerDocument,a);for(var b=0;b<this._nodes.length;b++){c._appendChild(this._nodes[b].cloneNode(false))}return c};DOMNamedNodeMap.prototype.toString=function DOMNamedNodeMap_toString(){var a="";for(var b=0;b<this.length-1;b++){a+=this._nodes[b].toString()+" "}if(this.length>0){a+=this._nodes[this.length-1].toString()}return a};DOMNamespaceNodeMap=function(b,a){this._class=addClass(this._class,"DOMNamespaceNodeMap");this.DOMNamedNodeMap=DOMNamedNodeMap;this.DOMNamedNodeMap(b,a)};DOMNamespaceNodeMap.prototype=new DOMNamedNodeMap;DOMNamespaceNodeMap.prototype._findNamedItemIndex=function DOMNamespaceNodeMap__findNamedItemIndex(c){var a=-1;for(var b=0;b<this._nodes.length;b++){if(this._nodes[b].localName==c){a=b;break}}return a};DOMNamespaceNodeMap.prototype._cloneNodes=function DOMNamespaceNodeMap__cloneNodes(c){var b=new DOMNamespaceNodeMap(this.ownerDocument,c);for(var a=0;a<this._nodes.length;a++){b._appendChild(this._nodes[a].cloneNode(false))}return b};DOMNamespaceNodeMap.prototype.toString=function DOMNamespaceNodeMap_toString(){var a="";for(var c=0;c<this._nodes.length;c++){var b=null;try{var b=this.parentNode.parentNode._namespaces.getNamedItem(this._nodes[c].localName)}catch(d){break}if(!(b&&(""+b.nodeValue==""+this._nodes[c].nodeValue))){a+=this._nodes[c].toString()+" "}}return a};DOMNode=function(a){this._class=addClass(this._class,"DOMNode");if(a){this._id=a._genId()}this.namespaceURI="";this.prefix="";this.localName="";this.nodeName="";this.nodeValue="";this.nodeType=0;this.parentNode=null;this.childNodes=new DOMNodeList(a,this);this.firstChild=null;this.lastChild=null;this.previousSibling=null;this.nextSibling=null;this.attributes=new DOMNamedNodeMap(a,this);this.ownerDocument=a;this._namespaces=new DOMNamespaceNodeMap(a,this);this._readonly=false};DOMNode.ELEMENT_NODE=1;DOMNode.ATTRIBUTE_NODE=2;DOMNode.TEXT_NODE=3;DOMNode.CDATA_SECTION_NODE=4;DOMNode.ENTITY_REFERENCE_NODE=5;DOMNode.ENTITY_NODE=6;DOMNode.PROCESSING_INSTRUCTION_NODE=7;DOMNode.COMMENT_NODE=8;DOMNode.DOCUMENT_NODE=9;DOMNode.DOCUMENT_TYPE_NODE=10;DOMNode.DOCUMENT_FRAGMENT_NODE=11;DOMNode.NOTATION_NODE=12;DOMNode.NAMESPACE_NODE=13;DOMNode.prototype.hasAttributes=function DOMNode_hasAttributes(){if(this.attributes.length===0){return false}else{return true}};DOMNode.prototype.getNodeName=function DOMNode_getNodeName(){return this.nodeName};DOMNode.prototype.getNodeValue=function DOMNode_getNodeValue(){return this.nodeValue};DOMNode.prototype.setNodeValue=function DOMNode_setNodeValue(a){if(this.ownerDocument.implementation.errorChecking&&this._readonly){throw (new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR))}this.nodeValue=a};DOMNode.prototype.getNodeType=function DOMNode_getNodeType(){return this.nodeType};DOMNode.prototype.getParentNode=function DOMNode_getParentNode(){return this.parentNode};DOMNode.prototype.getChildNodes=function DOMNode_getChildNodes(){return this.childNodes};DOMNode.prototype.getFirstChild=function DOMNode_getFirstChild(){return this.firstChild};DOMNode.prototype.getLastChild=function DOMNode_getLastChild(){return this.lastChild};DOMNode.prototype.getPreviousSibling=function DOMNode_getPreviousSibling(){return this.previousSibling};DOMNode.prototype.getNextSibling=function DOMNode_getNextSibling(){return this.nextSibling};DOMNode.prototype.getAttributes=function DOMNode_getAttributes(){return this.attributes};DOMNode.prototype.getOwnerDocument=function DOMNode_getOwnerDocument(){return this.ownerDocument};DOMNode.prototype.getNamespaceURI=function DOMNode_getNamespaceURI(){return this.namespaceURI};DOMNode.prototype.getPrefix=function DOMNode_getPrefix(){return this.prefix};DOMNode.prototype.setPrefix=function DOMNode_setPrefix(a){if(this.ownerDocument.implementation.errorChecking){if(this._readonly){throw (new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR))}if(!this.ownerDocument.implementation._isValidName(a)){throw (new DOMException(DOMException.INVALID_CHARACTER_ERR))}if(!this.ownerDocument._isValidNamespace(this.namespaceURI,a+":"+this.localName)){throw (new DOMException(DOMException.NAMESPACE_ERR))}if((a=="xmlns")&&(this.namespaceURI!="http://www.w3.org/2000/xmlns/")){throw (new DOMException(DOMException.NAMESPACE_ERR))}if((a=="")&&(this.localName=="xmlns")){throw (new DOMException(DOMException.NAMESPACE_ERR))}}this.prefix=a;if(this.prefix!=""){this.nodeName=this.prefix+":"+this.localName}else{this.nodeName=this.localName}};DOMNode.prototype.getLocalName=function DOMNode_getLocalName(){return this.localName};DOMNode.prototype.insertBefore=function DOMNode_insertBefore(g,f){var d;if(this.ownerDocument.implementation.errorChecking){if(this._readonly){throw (new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR))}if(this.ownerDocument!=g.ownerDocument){throw (new DOMException(DOMException.WRONG_DOCUMENT_ERR))}if(this._isAncestor(g)){throw (new DOMException(DOMException.HIERARCHY_REQUEST_ERR))}}if(f){var c=this.childNodes._findItemIndex(f._id);if(this.ownerDocument.implementation.errorChecking&&(c<0)){throw (new DOMException(DOMException.NOT_FOUND_ERR))}var a=g.parentNode;if(a){a.removeChild(g)}this.childNodes._insertBefore(g,this.childNodes._findItemIndex(f._id));d=f.previousSibling;if(g.nodeType==DOMNode.DOCUMENT_FRAGMENT_NODE){if(g.childNodes._nodes.length>0){for(var b=0;b<g.childNodes._nodes.length;b++){g.childNodes._nodes[b].parentNode=this}f.previousSibling=g.childNodes._nodes[g.childNodes._nodes.length-1]}}else{g.parentNode=this;f.previousSibling=g}}else{d=this.lastChild;this.appendChild(g)}if(g.nodeType==DOMNode.DOCUMENT_FRAGMENT_NODE){if(g.childNodes._nodes.length>0){if(d){d.nextSibling=g.childNodes._nodes[0]}else{this.firstChild=g.childNodes._nodes[0]}g.childNodes._nodes[0].previousSibling=d;g.childNodes._nodes[g.childNodes._nodes.length-1].nextSibling=f}}else{if(d){d.nextSibling=g}else{this.firstChild=g}g.previousSibling=d;g.nextSibling=f}return g};DOMNode.prototype.replaceChild=function DOMNode_replaceChild(g,f){var b=null;if(this.ownerDocument.implementation.errorChecking){if(this._readonly){throw (new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR))}if(this.ownerDocument!=g.ownerDocument){throw (new DOMException(DOMException.WRONG_DOCUMENT_ERR))}if(this._isAncestor(g)){throw (new DOMException(DOMException.HIERARCHY_REQUEST_ERR))}}var a=this.childNodes._findItemIndex(f._id);if(this.ownerDocument.implementation.errorChecking&&(a<0)){throw (new DOMException(DOMException.NOT_FOUND_ERR))}var c=g.parentNode;if(c){c.removeChild(g)}b=this.childNodes._replaceChild(g,a);if(g.nodeType==DOMNode.DOCUMENT_FRAGMENT_NODE){if(g.childNodes._nodes.length>0){for(var d=0;d<g.childNodes._nodes.length;d++){g.childNodes._nodes[d].parentNode=this}if(f.previousSibling){f.previousSibling.nextSibling=g.childNodes._nodes[0]}else{this.firstChild=g.childNodes._nodes[0]}if(f.nextSibling){f.nextSibling.previousSibling=g}else{this.lastChild=g.childNodes._nodes[g.childNodes._nodes.length-1]}g.childNodes._nodes[0].previousSibling=f.previousSibling;g.childNodes._nodes[g.childNodes._nodes.length-1].nextSibling=f.nextSibling}}else{g.parentNode=this;if(f.previousSibling){f.previousSibling.nextSibling=g}else{this.firstChild=g}if(f.nextSibling){f.nextSibling.previousSibling=g}else{this.lastChild=g}g.previousSibling=f.previousSibling;g.nextSibling=f.nextSibling}return b};DOMNode.prototype.removeChild=function DOMNode_removeChild(b){if(this.ownerDocument.implementation.errorChecking&&(this._readonly||b._readonly)){throw (new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR))}var a=this.childNodes._findItemIndex(b._id);if(this.ownerDocument.implementation.errorChecking&&(a<0)){throw (new DOMException(DOMException.NOT_FOUND_ERR))}this.childNodes._removeChild(a);b.parentNode=null;if(b.previousSibling){b.previousSibling.nextSibling=b.nextSibling}else{this.firstChild=b.nextSibling}if(b.nextSibling){b.nextSibling.previousSibling=b.previousSibling}else{this.lastChild=b.previousSibling}b.previousSibling=null;b.nextSibling=null;return b};DOMNode.prototype.appendChild=function DOMNode_appendChild(b){if(this.ownerDocument.implementation.errorChecking){if(this._readonly){throw (new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR))}if(this.ownerDocument!=b.ownerDocument){throw (new DOMException(DOMException.WRONG_DOCUMENT_ERR))}if(this._isAncestor(b)){throw (new DOMException(DOMException.HIERARCHY_REQUEST_ERR))}}var a=b.parentNode;if(a){a.removeChild(b)}this.childNodes._appendChild(b);if(b.nodeType==DOMNode.DOCUMENT_FRAGMENT_NODE){if(b.childNodes._nodes.length>0){for(var c=0;c<b.childNodes._nodes.length;c++){b.childNodes._nodes[c].parentNode=this}if(this.lastChild){this.lastChild.nextSibling=b.childNodes._nodes[0];b.childNodes._nodes[0].previousSibling=this.lastChild;this.lastChild=b.childNodes._nodes[b.childNodes._nodes.length-1]}else{this.lastChild=b.childNodes._nodes[b.childNodes._nodes.length-1];this.firstChild=b.childNodes._nodes[0]}}}else{b.parentNode=this;if(this.lastChild){this.lastChild.nextSibling=b;b.previousSibling=this.lastChild;this.lastChild=b}else{this.lastChild=b;this.firstChild=b}}return b};DOMNode.prototype.hasChildNodes=function DOMNode_hasChildNodes(){return(this.childNodes.length>0)};DOMNode.prototype.cloneNode=function DOMNode_cloneNode(a){try{return this.ownerDocument.importNode(this,a)}catch(b){return null}};DOMNode.prototype.normalize=function DOMNode_normalize(){var d;var c=new DOMNodeList();if(this.nodeType==DOMNode.ELEMENT_NODE||this.nodeType==DOMNode.DOCUMENT_NODE){var b=null;for(var a=0;a<this.childNodes.length;a++){d=this.childNodes.item(a);if(d.nodeType==DOMNode.TEXT_NODE){if(d.length<1){c._appendChild(d)}else{if(b){b.appendData(d.data);c._appendChild(d)}else{b=d}}}else{b=null;d.normalize()}}for(var a=0;a<c.length;a++){d=c.item(a);d.parentNode.removeChild(d)}}};DOMNode.prototype.isSupported=function DOMNode_isSupported(a,b){return this.ownerDocument.implementation.hasFeature(a,b)};DOMNode.prototype.getElementsByTagName=function DOMNode_getElementsByTagName(a){return this._getElementsByTagNameRecursive(a,new DOMNodeList(this.ownerDocument))};DOMNode.prototype._getElementsByTagNameRecursive=function DOMNode__getElementsByTagNameRecursive(c,b){if(this.nodeType==DOMNode.ELEMENT_NODE||this.nodeType==DOMNode.DOCUMENT_NODE){if((this.nodeName==c)||(c=="*")){b._appendChild(this)}for(var a=0;a<this.childNodes.length;a++){b=this.childNodes.item(a)._getElementsByTagNameRecursive(c,b)}}return b};DOMNode.prototype.getXML=function DOMNode_getXML(){return this.toString()};DOMNode.prototype.getElementsByTagNameNS=function DOMNode_getElementsByTagNameNS(b,a){return this._getElementsByTagNameNSRecursive(b,a,new DOMNodeList(this.ownerDocument))};DOMNode.prototype._getElementsByTagNameNSRecursive=function DOMNode__getElementsByTagNameNSRecursive(d,c,a){if(this.nodeType==DOMNode.ELEMENT_NODE||this.nodeType==DOMNode.DOCUMENT_NODE){if(((this.namespaceURI==d)||(d=="*"))&&((this.localName==c)||(c=="*"))){a._appendChild(this)}for(var b=0;b<this.childNodes.length;b++){a=this.childNodes.item(b)._getElementsByTagNameNSRecursive(d,c,a)}}return a};DOMNode.prototype._isAncestor=function DOMNode__isAncestor(a){return((this==a)||((this.parentNode)&&(this.parentNode._isAncestor(a))))};DOMNode.prototype.importNode=function DOMNode_importNode(a,b){var c;this.getOwnerDocument()._performingImportNodeOperation=true;try{if(a.nodeType==DOMNode.ELEMENT_NODE){if(!this.ownerDocument.implementation.namespaceAware){c=this.ownerDocument.createElement(a.tagName);for(var d=0;d<a.attributes.length;d++){c.setAttribute(a.attributes.item(d).name,a.attributes.item(d).value)}}else{c=this.ownerDocument.createElementNS(a.namespaceURI,a.nodeName);for(var d=0;d<a.attributes.length;d++){c.setAttributeNS(a.attributes.item(d).namespaceURI,a.attributes.item(d).name,a.attributes.item(d).value)}for(var d=0;d<a._namespaces.length;d++){c._namespaces._nodes[d]=this.ownerDocument.createNamespace(a._namespaces.item(d).localName);c._namespaces._nodes[d].setValue(a._namespaces.item(d).value)}}}else{if(a.nodeType==DOMNode.ATTRIBUTE_NODE){if(!this.ownerDocument.implementation.namespaceAware){c=this.ownerDocument.createAttribute(a.name)}else{c=this.ownerDocument.createAttributeNS(a.namespaceURI,a.nodeName);for(var d=0;d<a._namespaces.length;d++){c._namespaces._nodes[d]=this.ownerDocument.createNamespace(a._namespaces.item(d).localName);c._namespaces._nodes[d].setValue(a._namespaces.item(d).value)}}c.setValue(a.value)}else{if(a.nodeType==DOMNode.DOCUMENT_FRAGMENT){c=this.ownerDocument.createDocumentFragment()}else{if(a.nodeType==DOMNode.NAMESPACE_NODE){c=this.ownerDocument.createNamespace(a.nodeName);c.setValue(a.value)}else{if(a.nodeType==DOMNode.TEXT_NODE){c=this.ownerDocument.createTextNode(a.data)}else{if(a.nodeType==DOMNode.CDATA_SECTION_NODE){c=this.ownerDocument.createCDATASection(a.data)}else{if(a.nodeType==DOMNode.PROCESSING_INSTRUCTION_NODE){c=this.ownerDocument.createProcessingInstruction(a.target,a.data)}else{if(a.nodeType==DOMNode.COMMENT_NODE){c=this.ownerDocument.createComment(a.data)}else{throw (new DOMException(DOMException.NOT_SUPPORTED_ERR))}}}}}}}}if(b){for(var d=0;d<a.childNodes.length;d++){c.appendChild(this.ownerDocument.importNode(a.childNodes.item(d),true))}}this.getOwnerDocument()._performingImportNodeOperation=false;return c}catch(f){this.getOwnerDocument()._performingImportNodeOperation=false;throw f}};DOMNode.prototype.__escapeString=function DOMNode__escapeString(a){return __escapeString(a)};DOMNode.prototype.__unescapeString=function DOMNode__unescapeString(a){return __unescapeString(a)};DOMDocument=function(a){this._class=addClass(this._class,"DOMDocument");this.DOMNode=DOMNode;this.DOMNode(this);this.doctype=null;this.implementation=a;this.documentElement=null;this.all=[];this.nodeName="#document";this.nodeType=DOMNode.DOCUMENT_NODE;this._id=0;this._lastId=0;this._parseComplete=false;this.ownerDocument=this;this._performingImportNodeOperation=false};DOMDocument.prototype=new DOMNode;DOMDocument.prototype.getDoctype=function DOMDocument_getDoctype(){return this.doctype};DOMDocument.prototype.getImplementation=function DOMDocument_implementation(){return this.implementation};DOMDocument.prototype.getDocumentElement=function DOMDocument_getDocumentElement(){return this.documentElement};DOMDocument.prototype.createElement=function DOMDocument_createElement(b){if(this.ownerDocument.implementation.errorChecking&&(!this.ownerDocument.implementation._isValidName(b))){throw (new DOMException(DOMException.INVALID_CHARACTER_ERR))}var a=new DOMElement(this);a.tagName=b;a.nodeName=b;this.all[this.all.length]=a;return a};DOMDocument.prototype.createDocumentFragment=function DOMDocument_createDocumentFragment(){var a=new DOMDocumentFragment(this);return a};DOMDocument.prototype.createTextNode=function DOMDocument_createTextNode(b){var a=new DOMText(this);a.data=b;a.nodeValue=b;a.length=b.length;return a};DOMDocument.prototype.createComment=function DOMDocument_createComment(b){var a=new DOMComment(this);a.data=b;a.nodeValue=b;a.length=b.length;return a};DOMDocument.prototype.createCDATASection=function DOMDocument_createCDATASection(b){var a=new DOMCDATASection(this);a.data=b;a.nodeValue=b;a.length=b.length;return a};DOMDocument.prototype.createProcessingInstruction=function DOMDocument_createProcessingInstruction(a,c){if(this.ownerDocument.implementation.errorChecking&&(!this.implementation._isValidName(a))){throw (new DOMException(DOMException.INVALID_CHARACTER_ERR))}var b=new DOMProcessingInstruction(this);b.target=a;b.nodeName=a;b.data=c;b.nodeValue=c;b.length=c.length;return b};DOMDocument.prototype.createAttribute=function DOMDocument_createAttribute(a){if(this.ownerDocument.implementation.errorChecking&&(!this.ownerDocument.implementation._isValidName(a))){throw (new DOMException(DOMException.INVALID_CHARACTER_ERR))}var b=new DOMAttr(this);b.name=a;b.nodeName=a;return b};DOMDocument.prototype.createElementNS=function DOMDocument_createElementNS(b,a){if(this.ownerDocument.implementation.errorChecking){if(!this.ownerDocument._isValidNamespace(b,a)){throw (new DOMException(DOMException.NAMESPACE_ERR))}if(!this.ownerDocument.implementation._isValidName(a)){throw (new DOMException(DOMException.INVALID_CHARACTER_ERR))}}var c=new DOMElement(this);var d=this.implementation._parseQName(a);c.nodeName=a;c.namespaceURI=b;c.prefix=d.prefix;c.localName=d.localName;c.tagName=a;this.all[this.all.length]=c;return c};DOMDocument.prototype.createAttributeNS=function DOMDocument_createAttributeNS(a,d){if(this.ownerDocument.implementation.errorChecking){if(!this.ownerDocument._isValidNamespace(a,d,true)){throw (new DOMException(DOMException.NAMESPACE_ERR))}if(!this.ownerDocument.implementation._isValidName(d)){throw (new DOMException(DOMException.INVALID_CHARACTER_ERR))}}var b=new DOMAttr(this);var c=this.implementation._parseQName(d);b.nodeName=d;b.namespaceURI=a;b.prefix=c.prefix;b.localName=c.localName;b.name=d;b.nodeValue="";return b};DOMDocument.prototype.createNamespace=function DOMDocument_createNamespace(b){var a=new DOMNamespace(this);var c=this.implementation._parseQName(b);a.nodeName=b;a.prefix=c.prefix;a.localName=c.localName;a.name=b;a.nodeValue="";return a};DOMDocument.prototype.getElementById=function DOMDocument_getElementById(b){retNode=null;for(var a=0;a<this.all.length;a++){var c=this.all[a];if((c.id==b)&&(c._isAncestor(c.ownerDocument.documentElement))){retNode=c;break}}return retNode};DOMDocument.prototype._genId=function DOMDocument__genId(){this._lastId+=1;return this._lastId};DOMDocument.prototype._isValidNamespace=function DOMDocument__isValidNamespace(d,b,a){if(this._performingImportNodeOperation==true){return true}var c=true;var f=this.implementation._parseQName(b);if(this._parseComplete==true){if(f.localName.indexOf(":")>-1){c=false}if((c)&&(!a)){if(!d){c=false}}if((c)&&(f.prefix=="")){c=false}}if((c)&&(f.prefix=="xml")&&(d!="http://www.w3.org/XML/1998/namespace")){c=false}return c};DOMDocument.prototype.toString=function DOMDocument_toString(){return""+this.childNodes};DOMElement=function(a){this._class=addClass(this._class,"DOMElement");this.DOMNode=DOMNode;this.DOMNode(a);this.tagName="";this.id="";this.nodeType=DOMNode.ELEMENT_NODE};DOMElement.prototype=new DOMNode;DOMElement.prototype.getTagName=function DOMElement_getTagName(){return this.tagName};DOMElement.prototype.getAttribute=function DOMElement_getAttribute(c){var b="";var a=this.attributes.getNamedItem(c);if(a){b=a.value}return b};DOMElement.prototype.setAttribute=function DOMElement_setAttribute(b,c){var a=this.attributes.getNamedItem(b);if(!a){a=this.ownerDocument.createAttribute(b)}var c=new String(c);if(this.ownerDocument.implementation.errorChecking){if(a._readonly){throw (new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR))}if(!this.ownerDocument.implementation._isValidString(c)){throw (new DOMException(DOMException.INVALID_CHARACTER_ERR))}}if(this.ownerDocument.implementation._isIdDeclaration(b)){this.id=c}a.value=c;a.nodeValue=c;if(c.length>0){a.specified=true}else{a.specified=false}this.attributes.setNamedItem(a)};DOMElement.prototype.removeAttribute=function DOMElement_removeAttribute(a){return this.attributes.removeNamedItem(a)};DOMElement.prototype.getAttributeNode=function DOMElement_getAttributeNode(a){return this.attributes.getNamedItem(a)};DOMElement.prototype.setAttributeNode=function DOMElement_setAttributeNode(a){if(this.ownerDocument.implementation._isIdDeclaration(a.name)){this.id=a.value}return this.attributes.setNamedItem(a)};DOMElement.prototype.removeAttributeNode=function DOMElement_removeAttributeNode(b){if(this.ownerDocument.implementation.errorChecking&&b._readonly){throw (new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR))}var a=this.attributes._findItemIndex(b._id);if(this.ownerDocument.implementation.errorChecking&&(a<0)){throw (new DOMException(DOMException.NOT_FOUND_ERR))}return this.attributes._removeChild(a)};DOMElement.prototype.getAttributeNS=function DOMElement_getAttributeNS(d,c){var b="";var a=this.attributes.getNamedItemNS(d,c);if(a){b=a.value}return b};DOMElement.prototype.setAttributeNS=function DOMElement_setAttributeNS(c,b,d){var a=this.attributes.getNamedItem(c,b);if(!a){a=this.ownerDocument.createAttributeNS(c,b)}var d=new String(d);if(this.ownerDocument.implementation.errorChecking){if(a._readonly){throw (new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR))}if(!this.ownerDocument._isValidNamespace(c,b)){throw (new DOMException(DOMException.NAMESPACE_ERR))}if(!this.ownerDocument.implementation._isValidString(d)){throw (new DOMException(DOMException.INVALID_CHARACTER_ERR))}}if(this.ownerDocument.implementation._isIdDeclaration(name)){this.id=d}a.value=d;a.nodeValue=d;if(d.length>0){a.specified=true}else{a.specified=false}this.attributes.setNamedItemNS(a)};DOMElement.prototype.removeAttributeNS=function DOMElement_removeAttributeNS(b,a){return this.attributes.removeNamedItemNS(b,a)};DOMElement.prototype.getAttributeNodeNS=function DOMElement_getAttributeNodeNS(b,a){return this.attributes.getNamedItemNS(b,a)};DOMElement.prototype.setAttributeNodeNS=function DOMElement_setAttributeNodeNS(a){if((a.prefix=="")&&this.ownerDocument.implementation._isIdDeclaration(a.name)){this.id=a.value}return this.attributes.setNamedItemNS(a)};DOMElement.prototype.hasAttribute=function DOMElement_hasAttribute(a){return this.attributes._hasAttribute(a)};DOMElement.prototype.hasAttributeNS=function DOMElement_hasAttributeNS(a,b){return this.attributes._hasAttributeNS(a,b)};DOMElement.prototype.toString=function DOMElement_toString(){var b="";var c=this._namespaces.toString();if(c.length>0){c=" "+c}var a=this.attributes.toString();if(a.length>0){a=" "+a}b+="<"+this.nodeName+c+a+">";b+=this.childNodes.toString();b+="</"+this.nodeName+">";return b};DOMAttr=function(a){this._class=addClass(this._class,"DOMAttr");this.DOMNode=DOMNode;this.DOMNode(a);this.name="";this.specified=false;this.value="";this.nodeType=DOMNode.ATTRIBUTE_NODE;this.ownerElement=null;this.childNodes=null;this.attributes=null};DOMAttr.prototype=new DOMNode;DOMAttr.prototype.getName=function DOMAttr_getName(){return this.nodeName};DOMAttr.prototype.getSpecified=function DOMAttr_getSpecified(){return this.specified};DOMAttr.prototype.getValue=function DOMAttr_getValue(){return this.nodeValue};DOMAttr.prototype.setValue=function DOMAttr_setValue(a){if(this.ownerDocument.implementation.errorChecking&&this._readonly){throw (new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR))}this.setNodeValue(a)};DOMAttr.prototype.setNodeValue=function DOMAttr_setNodeValue(a){this.nodeValue=new String(a);this.value=this.nodeValue;this.specified=(this.value.length>0)};DOMAttr.prototype.toString=function DOMAttr_toString(){var a="";a+=this.nodeName+'="'+this.__escapeString(this.nodeValue)+'"';return a};DOMAttr.prototype.getOwnerElement=function(){return this.ownerElement};DOMNamespace=function(a){this._class=addClass(this._class,"DOMNamespace");this.DOMNode=DOMNode;this.DOMNode(a);this.name="";this.specified=false;this.value="";this.nodeType=DOMNode.NAMESPACE_NODE};DOMNamespace.prototype=new DOMNode;DOMNamespace.prototype.getValue=function DOMNamespace_getValue(){return this.nodeValue};DOMNamespace.prototype.setValue=function DOMNamespace_setValue(a){this.nodeValue=new String(a);this.value=this.nodeValue};DOMNamespace.prototype.toString=function DOMNamespace_toString(){var a="";if(this.nodeName!=""){a+=this.nodeName+'="'+this.__escapeString(this.nodeValue)+'"'}else{a+='xmlns="'+this.__escapeString(this.nodeValue)+'"'}return a};DOMCharacterData=function(a){this._class=addClass(this._class,"DOMCharacterData");this.DOMNode=DOMNode;this.DOMNode(a);this.data="";this.length=0};DOMCharacterData.prototype=new DOMNode;DOMCharacterData.prototype.getData=function DOMCharacterData_getData(){return this.nodeValue};DOMCharacterData.prototype.setData=function DOMCharacterData_setData(a){this.setNodeValue(a)};DOMCharacterData.prototype.setNodeValue=function DOMCharacterData_setNodeValue(a){if(this.ownerDocument.implementation.errorChecking&&this._readonly){throw (new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR))}this.nodeValue=new String(a);this.data=this.nodeValue;this.length=this.nodeValue.length};DOMCharacterData.prototype.getLength=function DOMCharacterData_getLength(){return this.nodeValue.length};DOMCharacterData.prototype.substringData=function DOMCharacterData_substringData(c,b){var a=null;if(this.data){if(this.ownerDocument.implementation.errorChecking&&((c<0)||(c>this.data.length)||(b<0))){throw (new DOMException(DOMException.INDEX_SIZE_ERR))}if(!b){a=this.data.substring(c)}else{a=this.data.substring(c,c+b)}}return a};DOMCharacterData.prototype.appendData=function DOMCharacterData_appendData(a){if(this.ownerDocument.implementation.errorChecking&&this._readonly){throw (new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR))}this.setData(""+this.data+a)};DOMCharacterData.prototype.insertData=function DOMCharacterData_insertData(b,a){if(this.ownerDocument.implementation.errorChecking&&this._readonly){throw (new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR))}if(this.data){if(this.ownerDocument.implementation.errorChecking&&((b<0)||(b>this.data.length))){throw (new DOMException(DOMException.INDEX_SIZE_ERR))}this.setData(this.data.substring(0,b).concat(a,this.data.substring(b)))}else{if(this.ownerDocument.implementation.errorChecking&&(b!=0)){throw (new DOMException(DOMException.INDEX_SIZE_ERR))}this.setData(a)}};DOMCharacterData.prototype.deleteData=function DOMCharacterData_deleteData(b,a){if(this.ownerDocument.implementation.errorChecking&&this._readonly){throw (new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR))}if(this.data){if(this.ownerDocument.implementation.errorChecking&&((b<0)||(b>this.data.length)||(a<0))){throw (new DOMException(DOMException.INDEX_SIZE_ERR))}if(!a||(b+a)>this.data.length){this.setData(this.data.substring(0,b))}else{this.setData(this.data.substring(0,b).concat(this.data.substring(b+a)))}}};DOMCharacterData.prototype.replaceData=function DOMCharacterData_replaceData(c,b,a){if(this.ownerDocument.implementation.errorChecking&&this._readonly){throw (new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR))}if(this.data){if(this.ownerDocument.implementation.errorChecking&&((c<0)||(c>this.data.length)||(b<0))){throw (new DOMException(DOMException.INDEX_SIZE_ERR))}this.setData(this.data.substring(0,c).concat(a,this.data.substring(c+b)))}else{this.setData(a)}};DOMText=function(a){this._class=addClass(this._class,"DOMText");this.DOMCharacterData=DOMCharacterData;this.DOMCharacterData(a);this.nodeName="#text";this.nodeType=DOMNode.TEXT_NODE};DOMText.prototype=new DOMCharacterData;DOMText.prototype.splitText=function DOMText_splitText(a){var b,c;if(this.ownerDocument.implementation.errorChecking){if(this._readonly){throw (new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR))}if((a<0)||(a>this.data.length)){throw (new DOMException(DOMException.INDEX_SIZE_ERR))}}if(this.parentNode){b=this.substringData(a);c=this.ownerDocument.createTextNode(b);if(this.nextSibling){this.parentNode.insertBefore(c,this.nextSibling)}else{this.parentNode.appendChild(c)}this.deleteData(a)}return c};DOMText.prototype.toString=function DOMText_toString(){return this.__escapeString(""+this.nodeValue)};DOMCDATASection=function(a){this._class=addClass(this._class,"DOMCDATASection");this.DOMCharacterData=DOMCharacterData;this.DOMCharacterData(a);this.nodeName="#cdata-section";this.nodeType=DOMNode.CDATA_SECTION_NODE};DOMCDATASection.prototype=new DOMCharacterData;DOMCDATASection.prototype.splitText=function DOMCDATASection_splitText(a){var b,c;if(this.ownerDocument.implementation.errorChecking){if(this._readonly){throw (new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR))}if((a<0)||(a>this.data.length)){throw (new DOMException(DOMException.INDEX_SIZE_ERR))}}if(this.parentNode){b=this.substringData(a);c=this.ownerDocument.createCDATASection(b);if(this.nextSibling){this.parentNode.insertBefore(c,this.nextSibling)}else{this.parentNode.appendChild(c)}this.deleteData(a)}return c};DOMCDATASection.prototype.toString=function DOMCDATASection_toString(){var a="";a+="<![CDATA["+this.nodeValue+"]]>";return a};DOMComment=function(a){this._class=addClass(this._class,"DOMComment");this.DOMCharacterData=DOMCharacterData;this.DOMCharacterData(a);this.nodeName="#comment";this.nodeType=DOMNode.COMMENT_NODE};DOMComment.prototype=new DOMCharacterData;DOMComment.prototype.toString=function DOMComment_toString(){var a="";a+="<!--"+this.nodeValue+"-->";return a};DOMProcessingInstruction=function(a){this._class=addClass(this._class,"DOMProcessingInstruction");this.DOMNode=DOMNode;this.DOMNode(a);this.target="";this.data="";this.nodeType=DOMNode.PROCESSING_INSTRUCTION_NODE};DOMProcessingInstruction.prototype=new DOMNode;DOMProcessingInstruction.prototype.getTarget=function DOMProcessingInstruction_getTarget(){return this.nodeName};DOMProcessingInstruction.prototype.getData=function DOMProcessingInstruction_getData(){return this.nodeValue};DOMProcessingInstruction.prototype.setData=function DOMProcessingInstruction_setData(a){this.setNodeValue(a)};DOMProcessingInstruction.prototype.setNodeValue=function DOMProcessingInstruction_setNodeValue(a){if(this.ownerDocument.implementation.errorChecking&&this._readonly){throw (new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR))}this.nodeValue=new String(a);this.data=this.nodeValue};DOMProcessingInstruction.prototype.toString=function DOMProcessingInstruction_toString(){var a="";a+="<?"+this.nodeName+" "+this.nodeValue+" ?>";return a};DOMDocumentFragment=function(a){this._class=addClass(this._class,"DOMDocumentFragment");this.DOMNode=DOMNode;this.DOMNode(a);this.nodeName="#document-fragment";this.nodeType=DOMNode.DOCUMENT_FRAGMENT_NODE};DOMDocumentFragment.prototype=new DOMNode;DOMDocumentFragment.prototype.toString=function DOMDocumentFragment_toString(){var a="";var b=this.getChildNodes().getLength();for(intLoop=0;intLoop<b;intLoop++){a+=this.getChildNodes().item(intLoop).toString()}return a};DOMDocumentType=function(){alert("DOMDocumentType.constructor(): Not Implemented")};DOMEntity=function(){alert("DOMEntity.constructor(): Not Implemented")};DOMEntityReference=function(){alert("DOMEntityReference.constructor(): Not Implemented")};DOMNotation=function(){alert("DOMNotation.constructor(): Not Implemented")};Strings=new Object();Strings.WHITESPACE=" \t\n\r";Strings.QUOTES="\"'";Strings.isEmpty=function Strings_isEmpty(a){return(a===null)||(a.length===0)};Strings.indexOfNonWhitespace=function Strings_indexOfNonWhitespace(d,a,c){if(Strings.isEmpty(d)){return -1}a=a||0;c=c||d.length;for(var b=a;b<c;b++){if(Strings.WHITESPACE.indexOf(d.charAt(b))==-1){return b}}return -1};Strings.lastIndexOfNonWhitespace=function Strings_lastIndexOfNonWhitespace(d,a,c){if(Strings.isEmpty(d)){return -1}a=a||0;c=c||d.length;for(var b=c-1;b>=a;b--){if(Strings.WHITESPACE.indexOf(d.charAt(b))==-1){return b}}return -1};Strings.indexOfWhitespace=function Strings_indexOfWhitespace(d,a,c){if(Strings.isEmpty(d)){return -1}a=a||0;c=c||d.length;for(var b=a;b<c;b++){if(Strings.WHITESPACE.indexOf(d.charAt(b))!=-1){return b}}return -1};Strings.replace=function Strings_replace(f,a,d,c,b){if(Strings.isEmpty(f)){return""}a=a||0;d=d||f.length;return f.substring(a,d).split(c).join(b)};Strings.getLineNumber=function Strings_getLineNumber(b,a){if(Strings.isEmpty(b)){return -1}a=a||b.length;return b.substring(0,a).split("\n").length};Strings.getColumnNumber=function Strings_getColumnNumber(f,d){if(Strings.isEmpty(f)){return -1}d=d||f.length;var a=f.substring(0,d).split("\n");var c=a[a.length-1];a.length--;var b=a.join("\n").length;return d-b};StringBuffer=function(){this._a=[]};StringBuffer.prototype.append=function StringBuffer_append(a){this._a[this._a.length]=a};StringBuffer.prototype.toString=function StringBuffer_toString(){return this._a.join("")};draw2d.XMLSerializer=function(){alert("do not init this class. Use the static methods instead")};draw2d.XMLSerializer.toXML=function(c,f,b){if(f==undefined){f="model"}b=b?b:"";var j=draw2d.XMLSerializer.getTypeName(c);var k=b+"<"+f+' type="'+j+'">';switch(j){case"int":case"number":case"boolean":k+=c;break;case"string":k+=draw2d.XMLSerializer.xmlEncode(c);break;case"date":k+=c.toLocaleString();break;case"Array":case"array":k+="\n";var h=b+"   ";for(var d=0;d<c.length;d++){k+=draw2d.XMLSerializer.toXML(c[d],("element"),h)}k+=b;break;default:if(c!==null){k+="\n";if(c instanceof draw2d.ArrayList){c.trimToSize()}var g=c.getPersistentAttributes();var h=b+"   ";for(var a in g){k+=draw2d.XMLSerializer.toXML(g[a],a,h)}k+=b}break}k+="</"+f+">\n";return k};draw2d.XMLSerializer.isSimpleVar=function(a){switch(a){case"int":case"string":case"String":case"Number":case"number":case"Boolean":case"boolean":case"bool":case"dateTime":case"Date":case"date":case"float":return true}return false};draw2d.XMLSerializer.getTypeName=function(b){if(b===null){return"undefined"}if(b instanceof Array){return"Array"}if(b instanceof Date){return"Date"}var a=typeof(b);if(a=="number"){return(parseInt(b).toString()==b)?"int":"number"}if(draw2d.XMLSerializer.isSimpleVar(a)){return a}return b.type.replace("@NAMESPACE@","")};draw2d.XMLSerializer.xmlEncode=function(h){var g=h;var i=/&/gi;var b=/>/gi;var k=/</gi;var j=/"/gi;var l=/'/gi;var m="&#62;";var f="&#38;#60;";var d="&#38;#38;";var c="&#34;";var a="&#39;";g=g.replace(i,d);g=g.replace(j,c);g=g.replace(k,f);g=g.replace(b,m);g=g.replace(l,a);return g};draw2d.XMLDeserializer=function(){alert("do not init this class. Use the static methods instead")};draw2d.XMLDeserializer.fromXML=function(node,_4fe9){var _4fea=""+node.getAttributes().getNamedItem("type").getNodeValue();var value=node.getNodeValue();switch(_4fea){case"int":try{return parseInt(""+node.getChildNodes().item(0).getNodeValue())}catch(e){alert("Error:"+e+"\nDataType:"+_4fea+"\nXML Node:"+node)}case"string":case"String":try{if(node.getChildNodes().getLength()>0){return""+node.getChildNodes().item(0).getNodeValue()}return""}catch(e){alert("Error:"+e+"\nDataType:"+_4fea+"\nXML Node:"+node)}case"Number":case"number":try{return parseFloat(""+node.getChildNodes().item(0).getNodeValue())}catch(e){alert("Error:"+e+"\nDataType:"+_4fea+"\nXML Node:"+node)}case"Boolean":case"boolean":case"bool":try{return"true"==(""+node.getChildNodes().item(0).getNodeValue()).toLowerCase()}catch(e){alert("Error:"+e+"\nDataType:"+_4fea+"\nXML Node:"+node)}case"dateTime":case"Date":case"date":try{return new Date(""+node.getChildNodes().item(0).getNodeValue())}catch(e){alert("Error:"+e+"\nDataType:"+_4fea+"\nXML Node:"+node)}case"float":try{return parseFloat(""+node.getChildNodes().item(0).getNodeValue())}catch(e){alert("Error:"+e+"\nDataType:"+_4fea+"\nXML Node:"+node)}break}_4fea=_4fea.replace("@NAMESPACE@","");var obj=eval("new "+_4fea+"()");if(_4fe9!=undefined&&obj.setModelParent!=undefined){obj.setModelParent(_4fe9)}var _4fed=node.getChildNodes();for(var i=0;i<_4fed.length;i++){var child=_4fed.item(i);var _4ff0=child.getNodeName();if(obj instanceof Array){_4ff0=i}obj[_4ff0]=draw2d.XMLDeserializer.fromXML(child,obj instanceof draw2d.AbstractObjectModel?obj:_4fe9)}return obj};draw2d.EditPolicy=function(a){this.policy=a};draw2d.EditPolicy.DELETE="DELETE";draw2d.EditPolicy.MOVE="MOVE";draw2d.EditPolicy.CONNECT="CONNECT";draw2d.EditPolicy.RESIZE="RESIZE";draw2d.EditPolicy.prototype.type="draw2d.EditPolicy";draw2d.EditPolicy.prototype.getPolicy=function(){return this.policy};draw2d.AbstractPalettePart=function(){this.x=0;this.y=0;this.html=null};draw2d.AbstractPalettePart.prototype.type="draw2d.AbstractPalettePart";draw2d.AbstractPalettePart.prototype=new draw2d.Draggable();draw2d.AbstractPalettePart.prototype.createHTMLElement=function(){var a=document.createElement("div");a.id=this.id;a.style.position="absolute";a.style.height="24px";a.style.width="24px";return a};draw2d.AbstractPalettePart.prototype.setEnviroment=function(b,a){this.palette=a;this.workflow=b};draw2d.AbstractPalettePart.prototype.getHTMLElement=function(){if(this.html===null){this.html=this.createHTMLElement();draw2d.Draggable.call(this,this.html)}return this.html};draw2d.AbstractPalettePart.prototype.onDrop=function(g,f){var d=this.workflow.getScrollLeft();var c=this.workflow.getScrollTop();var b=this.workflow.getAbsoluteX();var a=this.workflow.getAbsoluteY();this.setPosition(this.x,this.y);this.execute(g+d-b,f+c-a)};draw2d.AbstractPalettePart.prototype.execute=function(a,b){alert("inerited class should override the method 'draw2d.AbstractPalettePart.prototype.execute'")};draw2d.AbstractPalettePart.prototype.setTooltip=function(a){this.tooltip=a;if(this.tooltip!==null){this.html.title=this.tooltip}else{this.html.title=""}};draw2d.AbstractPalettePart.prototype.setDimension=function(a,b){this.width=a;this.height=b;if(this.html===null){return}this.html.style.width=this.width+"px";this.html.style.height=this.height+"px"};draw2d.AbstractPalettePart.prototype.setPosition=function(b,a){this.x=Math.max(0,b);this.y=Math.max(0,a);if(this.html===null){return}this.html.style.left=this.x+"px";this.html.style.top=this.y+"px";this.html.style.cursor="move"};draw2d.AbstractPalettePart.prototype.getWidth=function(){return this.width};draw2d.AbstractPalettePart.prototype.getHeight=function(){return this.height};draw2d.AbstractPalettePart.prototype.getY=function(){return this.y};draw2d.AbstractPalettePart.prototype.getX=function(){return this.x};draw2d.AbstractPalettePart.prototype.getPosition=function(){return new draw2d.Point(this.x,this.y)};draw2d.AbstractPalettePart.prototype.disableTextSelection=function(a){if(typeof a.onselectstart!="undefined"){a.onselectstart=function(){return false}}else{if(typeof a.style.MozUserSelect!="undefined"){a.style.MozUserSelect="none"}}};draw2d.ExternalPalette=function(b,a){this.html=document.getElementById(a);this.workflow=b;this.parts=new draw2d.ArrayList()};draw2d.ExternalPalette.prototype.type="draw2d.ExternalPalette";draw2d.ExternalPalette.prototype.getHTMLElement=function(){return this.html};draw2d.ExternalPalette.prototype.addPalettePart=function(a){if(!(a instanceof draw2d.AbstractPalettePart)){throw"parameter is not instanceof [draw2d.AbstractPalettePart]"}this.parts.add(a);this.html.appendChild(a.getHTMLElement());a.setEnviroment(this.workflow,this)};var MooCanvas=new Class({initialize:function(c,b){var a;if($type(c)=="string"){b=$merge({width:300,height:150},b,{id:c});a=new Element("canvas",b);if(!a.getContext){if(!CanvasRenderingContext2D.cssFixed){document.createStyleSheet().cssText="canvas{display:inline-block;overflow:hidden;text-align:left;cursor:default;}v\\:*{behavior:url(#default#VML)}o\\:*{behavior:url(#default#VML)}";CanvasRenderingContext2D.cssFixed=true}a.set({styles:{width:b.width,height:b.height,display:"inline-block",overflow:"hidden"},getContext:function(){this.context=this.context||new CanvasRenderingContext2D(a);return this.context}})}}return a}});var CanvasRenderingContext2D=new Class({initialize:function(a){this.parent=a;this.fragment=document.createDocumentFragment();this.element=new Element("div",{styles:{width:a.clientWidth||a.width,height:a.clientHeight||a.height,overflow:"hidden",position:"absolute"}});this.fragment.appendChild(this.element);this.m=[[1,0,0],[0,1,0],[0,0,1]];this.rot=0;this.state=[];this.path=[];this.delay=30;this.max=10;this.i=0;this.Z=10;this.Z2=this.Z/2;this.arcScaleX=1;this.arcScaleY=1;this.currentX=0;this.currentY=0;this.miterLimit=this.Z*1},lineWidth:1,strokeStyle:"#000",fillStyle:"#fff",globalAlpha:1,globalCompositeOperation:"source-over",lineCap:"butt",lineJoin:"miter",shadowBlur:0,shadowColor:"#000",shadowOffsetX:0,shadowOffsetY:0});CanvasRenderingContext2D.implement({beginPath:function(){this.path=[];this.moved=false},moveTo:function(a,b){this.path.push("m",this.coord(a,b));this.currentX=a;this.currentY=b;this.moved=true},closePath:function(){this.path.push("x")},lineTo:function(a,b){this.path.push((this.moved?"l":","),this.coord(a,b));this.currentX=a;this.currentY=b;this.moved=false},quadraticCurveTo:function(d,c,b,g){var a=2*d,f=2*c;this.bezierCurveTo((a+this.currentX)/3,(f+this.currentY)/3,(a+b)/3,(f+g)/3,b,g)},bezierCurveTo:function(b,g,d,c,a,f){this.path.push(" c ",this.coord(b,g),",",this.coord(d,c),",",this.coord(a,f));this.currentX=a;this.currentY=f},arcTo:function(a,d,b,c){},arc:function(l,j,i,f,b,g){if(this.rot===0){i*=this.Z}var d=Math.cos(f)*i,m=Math.sin(f)*i,a=Math.cos(b)*i,k=Math.sin(b)*i;if(this.rot!==0){var n=Math.PI/24;this.lineTo(d+l,m+j);if(g){if(f<b){f+=2*Math.PI}while(f-n>b){this.lineTo(l+Math.cos(f-=n)*i,j+Math.sin(f)*i)}}else{if(b<f){b+=2*Math.PI}while(f+n<b){this.lineTo(l+Math.cos(f+=n)*i,j+Math.sin(f)*i)}}this.lineTo(a+l,k+j);return}if(d==a&&!g){d+=0.125}var h=this.getCoords(l,j);this.path.push(g?"at ":"wa ",Math.round(h.x-this.arcScaleX*i)+","+Math.round(h.y-this.arcScaleY*i)," ",Math.round(h.x+this.arcScaleX*i)+","+Math.round(h.y+this.arcScaleY*i)," ",this.coord(d+l-this.Z2,m+j-this.Z2)," ",this.coord(a+l-this.Z2,k+j-this.Z2))},rect:function(a,d,b,c){this.moveTo(a,d);this.lineTo(a+b,d);this.lineTo(a+b,d+c);this.lineTo(a,d+c);this.closePath()},fill:function(){this.stroke(true)},stroke:function(d){if(!this.path.length){return}var b,c;if(d){b=[1000,"<v:fill "+this.processColorObject(this.fillStyle)+"></v:fill>"]}else{c=this.processColor(this.strokeStyle);b=[10,'<v:stroke endcap="'+((this.lineCap=="butt")?"flat":this.lineCap)+'" joinstyle="'+this.lineJoin+'" color="'+c.color+'" opacity="'+c.opacity+'"/>']}this.element.insertAdjacentHTML("beforeEnd",'<v:shape path="'+this.path.join("")+'e" stroked="'+!d+'" '+(!d?('strokeweight="'+0.8*this.lineWidth*this.m[0][0]+'" '):"")+'filled="'+!!d+'" coordsize="'+this.Z*b[0]+","+this.Z*b[0]+'" style="width:'+b[0]+"px; height:"+b[0]+'px; position: absolute;">'+b[1]+"</v:shape>");this.parent.appendChild(this.fragment);if(d&&this.fillStyle.img){this.element.getLast().fill.alignshape=false}this.path=[]},clip:function(){},isPointInPath:function(a,b){},processColor:function(c){var b=this.globalAlpha;if(c.substr(0,3)=="rgb"){if(c.charAt(3)=="a"){b*=c.match(/([\d.]*)\)$/)[1]}c=c.rgbToHex()}return{color:c,opacity:b}},processColorObject:function(f){var c="",b;if(f.addColorStop){c+=((f.r0)?('type="gradientradial" focusposition="0.2, 0.2" focussize="0.2, 0.2" '):('type="gradient" focus="0" angle="'+(180+(180*f.angle(f.x0,f.y0,f.x1,f.y1)/Math.PI))+'" '))+'color="'+f.col0.color+'" opacity="'+f.col0.opacity*100+'%" color2="'+f.col1.color+'" o:opacity2="'+f.col1.opacity*100+'%" colors="';if(f.stops){for(var d=0,a=f.stops.length;d<a;d++){c+=Math.round(100*f.stops[d][0])+"% "+f.stops[d][1]}}c+='" '}else{if(f.img){c+='type="tile" src="'+f.img.src+'" '}else{b=this.processColor(f);c+='color="'+b.color+'" opacity="'+b.opacity+'" '}}return c},getCoords:function(b,c){var a=this.m;return{x:this.Z*(b*a[0][0]+c*a[1][0]+a[2][0])-this.Z2,y:this.Z*(b*a[0][1]+c*a[1][1]+a[2][1])-this.Z2}},coord:function(b,c){var a=this.m;return[Math.round(this.Z*(b*a[0][0]+c*a[1][0]+a[2][0])-this.Z2),",",Math.round(this.Z*(b*a[0][1]+c*a[1][1]+a[2][1])-this.Z2)].join("")}});CanvasRenderingContext2D.implement({clearRect:function(a,d,b,c){this.element.innerHTML=""},fillRect:function(a,d,b,c){this.rect(a,d,b,c);this.fill()},strokeRect:function(a,d,b,c){this.rect(a,d,b,c);this.stroke()}});CanvasRenderingContext2D.implement({scale:function(a,b){this.arcScaleX*=a;this.arcScaleY*=b;this.matMult([[a,0,0],[0,b,0],[0,0,1]])},rotate:function(a){this.rot+=a;var d=Math.cos(a),b=Math.sin(a);this.matMult([[d,b,0],[-b,d,0],[0,0,1]])},translate:function(a,b){this.matMult([[1,0,0],[0,1,0],[a,b,1]])},transform:function(d,c,g,f,b,a){this.matMult([[d,g,b],[c,f,a],[0,0,1]])},setTransform:function(d,c,g,f,b,a){this.m=[[1,0,0],[0,1,0],[0,0,1]];this.transform(d,c,g,f,b,a)},matMult:function(c){var a=this.m,f=[[0,0,0],[0,0,0],[0,0,0]];for(var d=0;d<3;d++){if(c[0][d]!==0){this.sum(f[0],this.mult(c[0][d],a[d]))}if(c[1][d]!==0){this.sum(f[1],this.mult(c[1][d],a[d]))}if(c[2][d]!==0){this.sum(f[2],this.mult(c[2][d],a[d]))}}this.m=[f[0],f[1],f[2]]},mult:function(a,b){return[a*b[0],a*b[1],a*b[2]]},sum:function(b,a){b[0]+=a[0];b[1]+=a[1];b[2]+=a[2]}});CanvasRenderingContext2D.implement({drawImage:function(o,f){var a=arguments,b=a.length,y=(b==9)?4:0;if(!((b+"").test(/3|5|9/))){throw"Wrong number of arguments"}var k=o.runtimeStyle.width,c=o.runtimeStyle.height;o.runtimeStyle.width="auto";o.runtimeStyle.height="auto";var i=o.width,r=o.height;o.runtimeStyle.width=k;o.runtimeStyle.height=c;var n=0,m=0,p=i,v=r,j=a[1+y],g=a[2+y],l=a[3+y]||i,t=a[4+y]||r;if(b==9){n=a[1];m=a[2];p=a[3];v=a[4]}var u=this.getCoords(j,g),s='<v:group coordsize="'+this.Z*10+","+this.Z*10+'" coordorigin="0,0" style="width:10;height:10;position:absolute;';if(this.m[0][0]!=1||this.m[0][1]){var q=Math.max(this.getCoords(j+l,g),this.getCoords(j,g+t),this.getCoords(j+l,g+t));s+="padding:0;padding-right:"+Math.round(Math.max(u.x,q)/this.Z)+"px;padding-bottom:"+Math.round(Math.max(u.y,q)/this.Z)+"px;filter:progid:DXImageTransform.Microsoft.Matrix(M11='"+this.m[0][0]+"', M12='"+this.m[1][0]+"', M21='"+this.m[0][1]+"', M22='"+this.m[1][1]+"', Dx='"+Math.round(u.x/this.Z)+"', Dy='"+Math.round(u.y/this.Z)+"', sizingmethod='clip');"}else{s+="top:"+Math.round(u.y/this.Z)+"px;left:"+Math.round(u.x/this.Z)+"px;"}this.element.insertAdjacentHTML("BeforeEnd",s+'"><v:image src="'+o.src+'" style="width:'+this.Z*l+";height:"+this.Z*t+';" cropleft="'+n/i+'" croptop="'+m/r+'" cropright="'+(i-n-p)/i+'" cropbottom="'+(r-m-v)/r+'" /></v:group>');this.parent.appendChild(this.fragment)},drawImageFromRect:Function.empty,getImageData:function(d,c,a,b){},putImageData:function(c,b,a){},getCoords:function(b,c){var a=this.m;return{x:this.Z*(b*a[0][0]+c*a[1][0]+a[2][0])-this.Z2,y:this.Z*(b*a[0][1]+c*a[1][1]+a[2][1])-this.Z2}}});draw2d.shape={};draw2d.shape.uml={};draw2d.shape.uml.Actor=function(a){this.portRight=null;draw2d.VectorFigure.call(this);this.setName(a);this.setDimension(50,90)};draw2d.shape.uml.Actor.prototype=new draw2d.VectorFigure();draw2d.shape.uml.Actor.prototype.type="shape.uml.Actor";draw2d.shape.uml.Actor.prototype.setName=function(a){this.label.innerHTML=a};draw2d.shape.uml.Actor.prototype.setWorkflow=function(a){draw2d.VectorFigure.prototype.setWorkflow.call(this,a);if(a!==null&&this.portRight===null){this.portRight=new draw2d.Port();this.portRight.setWorkflow(a);this.addPort(this.portRight,this.width,this.height/2);this.portLeft=new draw2d.Port();this.portLeft.setWorkflow(a);this.addPort(this.portLeft,0,this.height/2)}};draw2d.shape.uml.Actor.prototype.createHTMLElement=function(){var a=draw2d.Figure.prototype.createHTMLElement.call(this);this.label=document.createElement("div");this.label.style.width="100%";this.label.style.height="20px";this.label.style.position="absolute";this.label.style.textAlign="center";this.label.style.top="0px";this.label.style.left="0px";this.label.style.fontSize="8pt";this.disableTextSelection(this.label);return a};draw2d.shape.uml.Actor.prototype.setDimension=function(a,b){draw2d.VectorFigure.prototype.setDimension.call(this,a,b);if(this.portRight!==null){this.portRight.setPosition(this.width,this.height/2);this.portLeft.setPosition(0,this.height/2)}};draw2d.shape.uml.Actor.prototype.paint=function(){draw2d.VectorFigure.prototype.paint.call(this);var b=this.getWidth()/2;var g=this.getWidth()/4;var d=this.getHeight()/2;var f=parseInt(this.label.style.height);var a=this.getWidth()*0.2;var c=this.getHeight()*0.1;this.graphics.drawOval(b-a/2,0,a,c);this.graphics.drawLine(b,c,b,d);this.graphics.drawLine(g,c*2,this.getWidth()-g,c*2);this.graphics.drawLine(b,d,g,this.getHeight()-f);this.graphics.drawLine(b,d,this.getWidth()-g,this.getHeight()-f);this.graphics.paint();this.label.style.top=(this.getHeight()-f)+"px";this.html.appendChild(this.label)};draw2d.shape.uml.Class=function(a){this.portTop=null;this.portRight=null;this.portBottom=null;this.portLeft=null;draw2d.Node.call(this);this.setDimension(50,50);this.setResizeable(false);this.setClassName(a)};draw2d.shape.uml.Class.prototype=new draw2d.Node;draw2d.shape.uml.Class.prototype.type="shape.uml.Class";draw2d.shape.uml.Class.prototype.setWorkflow=function(a){draw2d.Node.prototype.setWorkflow.call(this,a);if(a!==null&&this.portTop===null){this.portTop=new draw2d.shape.uml.InheritancePort();this.portTop.setWorkflow(a);this.addPort(this.portTop,0,0);this.portRight=new draw2d.shape.uml.InheritancePort();this.portRight.setWorkflow(a);this.addPort(this.portRight,0,0);this.portBottom=new draw2d.shape.uml.InheritancePort();this.portBottom.setWorkflow(a);this.addPort(this.portBottom,0,0);this.portLeft=new draw2d.shape.uml.InheritancePort();this.portLeft.setWorkflow(a);this.addPort(this.portLeft,0,0);this.recalculateSize()}};draw2d.shape.uml.Class.prototype.setClassName=function(a){this.headerLabel.innerHTML=a;this.recalculateSize()};draw2d.shape.uml.Class.prototype.addAttribute=function(b,c,a){var d=document.createElement("tr");this.table.appendChild(d);var f=document.createElement("td");f.style.whiteSpace="nowrap";d.appendChild(f);this.disableTextSelection(f);if(a){f.innerHTML=b+" : "+c+" = "+a}else{f.innerHTML=b+" : "+c}this.recalculateSize()};draw2d.shape.uml.Class.prototype.setDimension=function(a,b){draw2d.Node.prototype.setDimension.call(this,a,b);if(this.portTop!==null){this.portTop.setPosition(this.width/2,0);this.portRight.setPosition(this.width,this.height/2);this.portBottom.setPosition(this.width/2,this.height);this.portLeft.setPosition(0,this.height/2)}};draw2d.shape.uml.Class.prototype.createHTMLElement=function(){var a=document.createElement("div");a.id=this.id;a.style.position="absolute";a.style.left=this.x+"px";a.style.top=this.y+"px";a.style.height=this.width+"px";a.style.width=this.height+"px";a.style.margin="0px";a.style.padding="0px";a.style.outline="none";a.style.border="1px solid black";a.style.zIndex=""+draw2d.Figure.ZOrderBaseIndex;a.style.backgroundColor="rgb(255,255,206)";this.disableTextSelection(a);this.table=document.createElement("table");this.table.style.width="100%";this.table.style.height="100%";this.table.style.margin="0px";this.table.style.padding="0px";a.appendChild(this.table);var c=document.createElement("tbody");this.table.appendChild(c);var b=document.createElement("tr");c.appendChild(b);this.headerLabel=document.createElement("td");this.headerLabel.style.align="left";this.headerLabel.style.verticalAlign="top";this.headerLabel.style.borderBottom="1px solid black";this.headerLabel.style.fontWeight="bold";this.headerLabel.style.textAlign="center";b.appendChild(this.headerLabel);this.headerLabel.innerHTML="";return a};draw2d.shape.uml.Class.prototype.recalculateSize=function(a){this.setDimension(this.getWidth(),this.getHeight())};draw2d.shape.uml.Class.prototype.getWidth=function(){if(this.workflow===null){return 10}if(this.table.xgetBoundingClientRect){return this.table.getBoundingClientRect().right-this.table.getBoundingClientRect().left}else{if(document.getBoxObjectFor){return document.getBoxObjectFor(this.table).width}else{return this.table.offsetWidth}}};draw2d.shape.uml.Class.prototype.getHeight=function(){if(this.workflow===null){return 10}if(this.table.xgetBoundingClientRect){return this.table.getBoundingClientRect().bottom-this.table.getBoundingClientRect().top}else{if(document.getBoxObjectFor){return document.getBoxObjectFor(this.table).height}else{return this.table.offsetHeight}}};draw2d.shape.uml.InheritanceConnection=function(){draw2d.Connection.call(this);this.setTargetDecorator(new draw2d.shape.uml.InheritanceConnectionDecorator());this.setSourceAnchor(new draw2d.ChopboxConnectionAnchor());this.setTargetAnchor(new draw2d.ChopboxConnectionAnchor());this.setRouter(new draw2d.NullConnectionRouter())};draw2d.shape.uml.InheritanceConnection.prototype=new draw2d.Connection();draw2d.shape.uml.InheritanceConnectionDecorator=function(){this.setBackgroundColor(new draw2d.Color(255,255,255))};draw2d.shape.uml.InheritanceConnectionDecorator.prototype=new draw2d.ConnectionDecorator();draw2d.shape.uml.InheritanceConnectionDecorator.prototype.type="shape.uml.InheritanceConnectionDecorator";draw2d.shape.uml.InheritanceConnectionDecorator.prototype.paint=function(a){if(this.backgroundColor!==null){a.setColor(this.backgroundColor);a.fillPolygon([3,20,20,3],[0,8,-8,0])}a.setColor(this.color);a.setStroke(1);a.drawPolygon([3,20,20,3],[0,8,-8,0])};draw2d.shape.uml.InheritancePort=function(){draw2d.Port.call(this,new draw2d.Rectangle());this.setBackgroundColor(new draw2d.Color(255,255,190))};draw2d.shape.uml.InheritancePort.prototype=new draw2d.Port();draw2d.shape.uml.InheritancePort.prototype.type="shape.uml.InheritancePort";draw2d.shape.uml.InheritancePort.prototype.onDrop=function(a){if(this.parentNode.id==a.parentNode.id){}else{var b=new draw2d.CommandConnect(this.parentNode.workflow,this,a);b.setConnection(new draw2d.shape.uml.InheritanceConnection());this.parentNode.workflow.getCommandStack().execute(b)}};var jg_ok,jg_ie,jg_fast,jg_dom,jg_moz;function _chkDHTM(c,a,b){a=c.document.body||null;jg_ie=a&&typeof a.insertAdjacentHTML!="undefined"&&c.document.createElement;jg_dom=(a&&!jg_ie&&typeof a.appendChild!="undefined"&&typeof c.document.createRange!="undefined"&&typeof(b=c.document.createRange()).setStartBefore!="undefined"&&typeof b.createContextualFragment!="undefined");jg_fast=jg_ie&&c.document.all&&!c.opera;jg_moz=jg_dom&&typeof a.style.MozOpacity!="undefined";jg_ok=!!(jg_ie||jg_dom)}function _pntCnvDom(){var a=this.wnd.document.createRange();a.setStartBefore(this.cnv);a=a.createContextualFragment(jg_fast?this._htmRpc():this.htm);if(this.cnv){this.cnv.appendChild(a)}this.htm=""}function _pntCnvIe(){if(this.cnv){this.cnv.insertAdjacentHTML("BeforeEnd",jg_fast?this._htmRpc():this.htm)}this.htm=""}function _pntDoc(){this.wnd.document.write(jg_fast?this._htmRpc():this.htm);this.htm=""}function _pntN(){}function _mkDiv(a,d,b,c){this.htm+='<div style="position:absolute;left:'+a+"px;top:"+d+"px;width:"+b+"px;height:"+c+"px;clip:rect(0,"+b+"px,"+c+"px,0);background-color:"+this.color+(!jg_moz?";overflow:hidden":"")+';"></div>'}function _mkDivIe(a,d,b,c){this.htm+="%%"+this.color+";"+a+";"+d+";"+b+";"+c+";"}function _mkDivPrt(a,d,b,c){this.htm+='<div style="position:absolute;border-left:'+b+"px solid "+this.color+";left:"+a+"px;top:"+d+"px;width:0px;height:"+c+"px;clip:rect(0,"+b+"px,"+c+"px,0);background-color:"+this.color+(!jg_moz?";overflow:hidden":"")+';"></div>'}var _regex=/%%([^;]+);([^;]+);([^;]+);([^;]+);([^;]+);/g;function _htmRpc(){return this.htm.replace(_regex,'<div style="overflow:hidden;position:absolute;background-color:$1;left:$2px;top:$3px;width:$4px;height:$5px"></div>\n')}function _htmPrtRpc(){return this.htm.replace(_regex,'<div style="overflow:hidden;position:absolute;background-color:$1;left:$2px;top:$3px;width:$4px;height:$5px;border-left:$4px solid $1"></div>\n')}function _mkLin(f,n,b,l){if(f>b){var k=b;var h=l;b=f;l=n;f=k;n=h}var r=b-f,q=Math.abs(l-n),m=f,j=n,o=(n>l)?-1:1;if(r>=q){var a=q<<1,i=a-(r<<1),d=a-r,g=m;while(r>0){--r;++m;if(d>0){this._mkDiv(g,j,m-g,1);j+=o;d+=i;g=m}else{d+=a}}this._mkDiv(g,j,b-g+1,1)}else{var a=r<<1,i=a-(q<<1),d=a-q,c=j;if(l<=n){while(q>0){--q;if(d>0){this._mkDiv(m++,j,1,c-j+1);j+=o;d+=i;c=j}else{j+=o;d+=a}}this._mkDiv(b,l,1,c-l+1)}else{while(q>0){--q;j+=o;if(d>0){this._mkDiv(m++,c,1,j-c);d+=i;c=j}else{d+=a}}this._mkDiv(b,c,1,l-c+1)}}}function _mkLin2D(t,b,r,a){if(t>r){var g=r;var o=a;r=t;a=b;t=g;b=o}var k=r-t,j=Math.abs(a-b),i=t,h=b,n=(b>a)?-1:1;var l=this.stroke;if(k>=j){if(k>0&&l-3>0){var u=(l*k*Math.sqrt(1+j*j/(k*k))-k-(l>>1)*j)/k;u=(!(l-4)?Math.ceil(u):Math.round(u))+1}else{var u=l}var v=Math.ceil(l/2);var q=j<<1,f=q-(k<<1),m=q-k,d=i;while(k>0){--k;++i;if(m>0){this._mkDiv(d,h,i-d+v,u);h+=n;m+=f;d=i}else{m+=q}}this._mkDiv(d,h,r-d+v+1,u)}else{if(l-3>0){var u=(l*j*Math.sqrt(1+k*k/(j*j))-(l>>1)*k-j)/j;u=(!(l-4)?Math.ceil(u):Math.round(u))+1}else{var u=l}var v=Math.round(l/2);var q=k<<1,f=q-(j<<1),m=q-j,c=h;if(a<=b){++v;while(j>0){--j;if(m>0){this._mkDiv(i++,h,u,c-h+v);h+=n;m+=f;c=h}else{h+=n;m+=q}}this._mkDiv(r,a,u,c-a+v)}else{while(j>0){--j;h+=n;if(m>0){this._mkDiv(i++,c,u,h-c+v);m+=f;c=h}else{m+=q}}this._mkDiv(r,c,u,a-c+v+1)}}}function _mkLinDott(d,l,b,j){if(d>b){var i=b;var f=j;b=d;j=l;d=i;l=f}var q=b-d,o=Math.abs(j-l),k=d,h=l,n=(l>j)?-1:1,m=true;if(q>=o){var a=o<<1,g=a-(q<<1),c=a-q;while(q>0){--q;if(m){this._mkDiv(k,h,1,1)}m=!m;if(c>0){h+=n;c+=g}else{c+=a}++k}}else{var a=q<<1,g=a-(o<<1),c=a-o;while(o>0){--o;if(m){this._mkDiv(k,h,1,1)}m=!m;h+=n;if(c>0){++k;c+=g}else{c+=a}}}if(m){this._mkDiv(k,h,1,1)}}function _mkOv(i,r,v,t){var E=(++v)>>1,D=(++t)>>1,p=v&1,g=t&1,f=i+E,d=r+D,m=0,l=D,k=0,j=D,u=(E*E)<<1,s=u<<1,q=(D*D)<<1,o=q<<1,z=(u>>1)*(1-(D<<1))+q,c=(q>>1)-u*((D<<1)-1),n,B;while(l>0){if(z<0){z+=q*((m<<1)+3);c+=o*(++m)}else{if(c<0){z+=q*((m<<1)+3)-s*(l-1);c+=o*(++m)-u*(((l--)<<1)-3);n=m-k;B=j-l;if((n&2)&&(B&2)){this._mkOvQds(f,d,m-2,l+2,1,1,p,g);this._mkOvQds(f,d,m-1,l+1,1,1,p,g)}else{this._mkOvQds(f,d,m-1,j,n,B,p,g)}k=m;j=l}else{c-=u*((l<<1)-3);z-=s*(--l)}}}n=E-k+1;B=(j<<1)+g;l=d-j;this._mkDiv(f-E,l,n,B);this._mkDiv(f+k+p-1,l,n,B)}function _mkOv2D(j,n,c,d){var P=this.stroke;c+=P+1;d+=P+1;var Z=c>>1,X=d>>1,W=c&1,I=d&1,r=j+Z,q=n+X,N=0,K=X,E=(Z*Z)<<1,B=E<<1,m=(X*X)<<1,g=m<<1,o=(E>>1)*(1-(X<<1))+m,V=(m>>1)-E*((X<<1)-1);if(P-4<0&&(!(P-2)||c-51>0&&d-51>0)){var v=0,u=X,O,T,G;while(K>0){if(o<0){o+=m*((N<<1)+3);V+=g*(++N)}else{if(V<0){o+=m*((N<<1)+3)-B*(K-1);V+=g*(++N)-E*(((K--)<<1)-3);O=N-v;T=u-K;if(O-1){G=O+1+(P&1);T=P}else{if(T-1){G=P;T+=1+(P&1)}else{G=T=P}}this._mkOvQds(r,q,N-1,u,G,T,W,I);v=N;u=K}else{V-=E*((K<<1)-3);o-=B*(--K)}}}this._mkDiv(r-Z,q-u,P,(u<<1)+I);this._mkDiv(r+Z+W-P,q-u,P,(u<<1)+I)}else{var aa=(c-(P<<1))>>1,Y=(d-(P<<1))>>1,L=0,J=Y,D=(aa*aa)<<1,z=D<<1,k=(Y*Y)<<1,f=k<<1,p=(D>>1)*(1-(Y<<1))+k,U=(k>>1)-D*((Y<<1)-1),M=new Array(),H=new Array(),Q=[];M[0]=0;H[0]=X;Q[0]=Y-1;while(K>0){if(o<0){M[M.length]=N;H[H.length]=K;o+=m*((N<<1)+3);V+=g*(++N)}else{if(V<0){M[M.length]=N;o+=m*((N<<1)+3)-B*(K-1);V+=g*(++N)-E*(((K--)<<1)-3);H[H.length]=K}else{V-=E*((K<<1)-3);o-=B*(--K)}}if(J>0){if(p<0){p+=k*((L<<1)+3);U+=f*(++L);Q[Q.length]=J-1}else{if(U<0){p+=k*((L<<1)+3)-z*(J-1);U+=f*(++L)-D*(((J--)<<1)-3);Q[Q.length]=J-1}else{U-=D*((J<<1)-3);p-=z*(--J);Q[Q.length-1]--}}}}var v=-W,u=X,t=Q[0],R=M.length,O,T;for(var S=0;S<R;S++){if(typeof Q[S]!="undefined"){if(Q[S]<t||H[S]<u){N=M[S];this._mkOvQds(r,q,N,u,N-v,u-t,W,I);v=N;u=H[S];t=Q[S]}}else{N=M[S];this._mkDiv(r-N,q-u,1,(u<<1)+I);this._mkDiv(r+v+W,q-u,1,(u<<1)+I);v=N;u=H[S]}}this._mkDiv(r-Z,q-u,1,(u<<1)+I);this._mkDiv(r+v+W,q-u,1,(u<<1)+I)}}function _mkOvDott(h,o,t,r){var z=(++t)>>1,v=(++r)>>1,m=t&1,g=r&1,k=g^1,f=h+z,d=o+v,j=0,i=v,s=(z*z)<<1,p=s<<1,n=(v*v)<<1,l=n<<1,u=(s>>1)*(1-(v<<1))+n,c=(n>>1)-s*((v<<1)-1),q=true;while(i>0){if(u<0){u+=n*((j<<1)+3);c+=l*(++j)}else{if(c<0){u+=n*((j<<1)+3)-p*(i-1);c+=l*(++j)-s*(((i--)<<1)-3)}else{c-=s*((i<<1)-3);u-=p*(--i)}}if(q&&i>=k){this._mkOvQds(f,d,j,i,1,1,m,g)}q=!q}}function _mkRect(a,f,b,d){var c=this.stroke;this._mkDiv(a,f,b,c);this._mkDiv(a+b,f,c,d);this._mkDiv(a,f+d,b+c,c);this._mkDiv(a,f+c,c,d-c)}function _mkRectDott(a,d,b,c){this.drawLine(a,d,a+b,d);this.drawLine(a+b,d,a+b,d+c);this.drawLine(a,d+c,a+b,d+c);this.drawLine(a,d,a,d+c)}function jsgFont(){this.PLAIN="font-weight:normal;";this.BOLD="font-weight:bold;";this.ITALIC="font-style:italic;";this.ITALIC_BOLD=this.ITALIC+this.BOLD;this.BOLD_ITALIC=this.ITALIC_BOLD}var Font=new jsgFont();function jsgStroke(){this.DOTTED=-1}var Stroke=new jsgStroke();function jsGraphics(a,b){this.setColor=function(c){this.color=c.toLowerCase()};this.setStroke=function(c){this.stroke=c;if(!(c+1)){this.drawLine=_mkLinDott;this._mkOv=_mkOvDott;this.drawRect=_mkRectDott}else{if(c-1>0){this.drawLine=_mkLin2D;this._mkOv=_mkOv2D;this.drawRect=_mkRect}else{this.drawLine=_mkLin;this._mkOv=_mkOv;this.drawRect=_mkRect}}};this.setPrintable=function(c){this.printable=c;if(jg_fast){this._mkDiv=_mkDivIe;this._htmRpc=c?_htmPrtRpc:_htmRpc}else{this._mkDiv=c?_mkDivPrt:_mkDiv}};this.setFont=function(d,f,c){this.ftFam=d;this.ftSz=f;this.ftSty=c||Font.PLAIN};this.drawPolyline=this.drawPolyLine=function(c,f){for(var d=c.length-1;d;){--d;this.drawLine(c[d],f[d],c[d+1],f[d+1])}};this.fillRect=function(c,g,d,f){this._mkDiv(c,g,d,f)};this.drawPolygon=function(c,d){this.drawPolyline(c,d);this.drawLine(c[c.length-1],d[c.length-1],c[0],d[0])};this.drawEllipse=this.drawOval=function(c,g,d,f){this._mkOv(c,g,d,f)};this.fillEllipse=this.fillOval=function(i,s,n,z){var E=n>>1,D=z>>1,o=n&1,g=z&1,f=i+E,d=s+D,l=0,k=D,j=D,u=(E*E)<<1,t=u<<1,q=(D*D)<<1,m=q<<1,v=(u>>1)*(1-(D<<1))+q,c=(q>>1)-u*((D<<1)-1),r,p,B;if(n){while(k>0){if(v<0){v+=q*((l<<1)+3);c+=m*(++l)}else{if(c<0){v+=q*((l<<1)+3)-t*(k-1);r=f-l;p=(l<<1)+o;c+=m*(++l)-u*(((k--)<<1)-3);B=j-k;this._mkDiv(r,d-j,p,B);this._mkDiv(r,d+k+g,p,B);j=k}else{c-=u*((k<<1)-3);v-=t*(--k)}}}}this._mkDiv(f-E,d-j,n,(j<<1)+g)};this.fillArc=function(f,L,G,j,g,v){var K=G>>1,J=j>>1,r=(G&1)|((j&1)<<16),h=f+K,d=L+J,p=0,n=J,l=p,k=n,z=(K*K)<<1,u=z<<1,s=(J*J)<<1,q=s<<1,D=(z>>1)*(1-(J<<1))+s,c=(s>>1)-z*((J<<1)-1),E,o,m,I,H=(1<<(Math.floor((g%=360)/180)<<3))|(2<<(Math.floor((v%=360)/180)<<3))|((g>=v)<<16),i=new Array(J+1),B=new Array(J+1);g*=Math.PI/180;v*=Math.PI/180;E=h+Math.round(K*Math.cos(g));o=d+Math.round(-J*Math.sin(g));_mkLinVirt(i,h,d,E,o);m=h+Math.round(K*Math.cos(v));I=d+Math.round(-J*Math.sin(v));_mkLinVirt(B,h,d,m,I);while(n>0){if(D<0){D+=s*((p<<1)+3);c+=q*(++p)}else{if(c<0){D+=s*((p<<1)+3)-u*(n-1);l=p;c+=q*(++p)-z*(((n--)<<1)-3);this._mkArcDiv(l,n,k,h,d,r,i,B,H);k=n}else{c-=z*((n<<1)-3);D-=u*(--n);if(n&&(i[n]!=i[n-1]||B[n]!=B[n-1])){this._mkArcDiv(p,n,k,h,d,r,i,B,H);l=p;k=n}}}}this._mkArcDiv(p,0,k,h,d,r,i,B,H);if(r>>16){if(H>>16){var t=(o<=d||I>d)?(h-p):h;this._mkDiv(t,d,p+h-t+(r&65535),1)}else{if((H&1)&&I>d){this._mkDiv(h-p,d,p,1)}}}};this.fillPolygon=function(k,j){var l;var r;var t,p;var d,s;var c,q;var o,m;var f;var g=k.length;if(!g){return}t=j[0];p=j[0];for(l=1;l<g;l++){if(j[l]<t){t=j[l]}if(j[l]>p){p=j[l]}}for(r=t;r<=p;r++){var h=[];f=0;for(l=0;l<g;l++){if(!l){o=g-1;m=0}else{o=l-1;m=l}s=j[o];q=j[m];if(s<q){d=k[o];c=k[m]}else{if(s>q){q=j[o];s=j[m];c=k[o];d=k[m]}else{continue}}if((r>=s)&&(r<q)){h[f++]=Math.round((r-s)*(c-d)/(q-s)+d)}else{if((r==p)&&(r>s)&&(r<=q)){h[f++]=Math.round((r-s)*(c-d)/(q-s)+d)}}}h.sort(_CompInt);for(l=0;l<f;l+=2){this._mkDiv(h[l],r,h[l+1]-h[l]+1,1)}}};this.drawString=function(d,c,f){this.htm+='<div style="position:absolute;white-space:nowrap;left:'+c+"px;top:"+f+"px;font-family:"+this.ftFam+";font-size:"+this.ftSz+";color:"+this.color+";"+this.ftSty+'">'+d+"</div>"};this.drawStringRect=function(d,c,h,f,g){this.htm+='<div style="position:absolute;overflow:hidden;left:'+c+"px;top:"+h+"px;width:"+f+"px;text-align:"+g+";font-family:"+this.ftFam+";font-size:"+this.ftSz+";color:"+this.color+";"+this.ftSty+'">'+d+"</div>"};this.drawImage=function(i,c,j,f,g,d){this.htm+='<div style="position:absolute;left:'+c+"px;top:"+j+"px;"+(f?("width:"+f+"px;"):"")+(g?("height:"+g+"px;"):"")+'"><img src="'+i+'"'+(f?(' width="'+f+'"'):"")+(g?(' height="'+g+'"'):"")+(d?(" "+d):"")+"></div>"};this.clear=function(){this.htm="";if(this.cnv){this.cnv.innerHTML=""}};this._mkOvQds=function(f,d,m,l,n,g,p,k){var i=f-m,c=f+m+p-n,o=d-l,j=d+l+k-g;if(c>i+n){this._mkDiv(c,o,n,g);this._mkDiv(c,j,n,g)}else{n=c-i+n}this._mkDiv(i,o,n,g);this._mkDiv(i,j,n,g)};this._mkArcDiv=function(q,p,d,j,i,f,n,m,s){var c=j+q+(f&65535),o,k=d-p,l,g,r;if(!k){k=1}q=j-q;if(s&16711680){o=i-p-k;if(s&255){if(s&2){l=Math.max(q,m[p]);r=c-l;if(r>0){this._mkDiv(l,o,r,k)}}if(s&1){g=Math.min(c,n[p]);r=g-q;if(r>0){this._mkDiv(q,o,r,k)}}}else{this._mkDiv(q,o,c-q,k)}o=i+p+(f>>16);if(s&65280){if(s&256){l=Math.max(q,n[p]);r=c-l;if(r>0){this._mkDiv(l,o,r,k)}}if(s&512){g=Math.min(c,m[p]);r=g-q;if(r>0){this._mkDiv(q,o,r,k)}}}else{this._mkDiv(q,o,c-q,k)}}else{if(s&255){if(s&2){l=Math.max(q,m[p])}else{l=q}if(s&1){g=Math.min(c,n[p])}else{g=c}o=i-p-k;r=g-l;if(r>0){this._mkDiv(l,o,r,k)}}if(s&65280){if(s&256){l=Math.max(q,n[p])}else{l=q}if(s&512){g=Math.min(c,m[p])}else{g=c}o=i+p+(f>>16);r=g-l;if(r>0){this._mkDiv(l,o,r,k)}}}};this.setStroke(1);this.setFont("verdana,geneva,helvetica,sans-serif","12px",Font.PLAIN);this.color="#000000";this.htm="";this.wnd=b||window;if(!jg_ok){_chkDHTM(this.wnd)}if(jg_ok){if(a){if(typeof(a)=="string"){this.cont=document.all?(this.wnd.document.all[a]||null):document.getElementById?(this.wnd.document.getElementById(a)||null):null}else{if(a==window.document){this.cont=document.getElementsByTagName("body")[0]}else{this.cont=a}}this.cnv=this.wnd.document.createElement("div");this.cnv.style.fontSize=0;this.cont.appendChild(this.cnv);this.paint=jg_dom?_pntCnvDom:_pntCnvIe}else{this.paint=_pntDoc}}else{this.paint=_pntN}this.setPrintable(false)}function _mkLinVirt(o,f,m,c,l){var s=Math.abs(c-f),r=Math.abs(l-m),n=f,k=m,a=(f>c)?-1:1,q=(m>l)?-1:1,d,g=0;if(s>=r){var b=r<<1,j=b-(s<<1);d=b-s;while(s>0){--s;if(d>0){o[g++]=n;k+=q;d+=j}else{d+=b}n+=a}}else{var b=s<<1,j=b-(r<<1);d=b-r;while(r>0){--r;k+=q;o[g++]=n;if(d>0){n+=a;d+=j}else{d+=b}}}for(var h=o.length,g=h-g;g;){o[h-(g--)]=n}}function _CompInt(a,b){return(a-b)}JsHamcrest={version:"0.6.6",isMatcher:function(a){return a instanceof JsHamcrest.SimpleMatcher},areArraysEqual:function(h,f){if(h instanceof Array||f instanceof Array){if(h.length!=f.length){return false}for(var g=0;g<h.length;g++){var d=h[g];var c=f[g];if(d instanceof Array||c instanceof Array){if(!JsHamcrest.areArraysEqual(d,c)){return false}}else{if(d!=c){return false}}}return true}else{return h==f}},SimpleMatcher:function(a){a=a||{};this.matches=a.matches;this.describeTo=a.describeTo;if(a.describeValueTo){this.describeValueTo=a.describeValueTo}},CombinableMatcher:function(a){JsHamcrest.SimpleMatcher.apply(this,arguments);a=a||{};this.and=function(c){var b=JsHamcrest.Matchers.allOf(this,c);return new JsHamcrest.CombinableMatcher({matches:b.matches,describeTo:function(d){d.appendDescriptionOf(b)}})};this.or=function(c){var b=JsHamcrest.Matchers.anyOf(this,c);return new JsHamcrest.CombinableMatcher({matches:b.matches,describeTo:function(d){d.appendDescriptionOf(b)}})}},Description:function(){var a="";this.get=function(){return a};this.appendDescriptionOf=function(b){if(b){b.describeTo(this)}return this};this.append=function(b){if(b!=null){a+=b}return this};this.appendLiteral=function(b){var c;if(b===c){this.append("undefined")}else{if(b===null){this.append("null")}else{if(b instanceof Array){this.appendValueList("[",", ","]",b)}else{if(typeof b=="string"){this.append('"'+b+'"')}else{if(b instanceof Function){this.append("Function"+(b.name?" "+b.name:""))}else{this.append(b)}}}}}return this};this.appendValueList=function(g,f,b,d){this.append(g);for(var c=0;c<d.length;c++){if(c>0){this.append(f)}this.appendLiteral(d[c])}this.append(b);return this};this.appendList=function(g,f,b,d){this.append(g);for(var c=0;c<d.length;c++){if(c>0){this.append(f)}this.appendDescriptionOf(d[c])}this.append(b);return this}}};JsHamcrest.SimpleMatcher.prototype.describeValueTo=function(b,a){a.appendLiteral(b)};JsHamcrest.CombinableMatcher.prototype=new JsHamcrest.SimpleMatcher();JsHamcrest.CombinableMatcher.prototype.constructor=JsHamcrest.CombinableMatcher;JsHamcrest.Matchers={};JsHamcrest.Matchers.truth=function(){return new JsHamcrest.SimpleMatcher({matches:function(a){return a},describeTo:function(a){a.append("truth")}})};JsHamcrest.Matchers.is=function(a){if(!JsHamcrest.isMatcher(a)){a=JsHamcrest.Matchers.equalTo(a)}return new JsHamcrest.SimpleMatcher({matches:function(b){return a.matches(b)},describeTo:function(b){b.append("is ").appendDescriptionOf(a)}})};JsHamcrest.Matchers.not=function(a){if(!JsHamcrest.isMatcher(a)){a=JsHamcrest.Matchers.equalTo(a)}return new JsHamcrest.SimpleMatcher({matches:function(b){return !a.matches(b)},describeTo:function(b){b.append("not ").appendDescriptionOf(a)}})};JsHamcrest.Matchers.equalTo=function(a){return new JsHamcrest.SimpleMatcher({matches:function(b){if(a instanceof Array||b instanceof Array){return JsHamcrest.areArraysEqual(a,b)}return b==a},describeTo:function(b){b.append("equal to ").appendLiteral(a)}})};JsHamcrest.Matchers.anything=function(){return new JsHamcrest.SimpleMatcher({matches:function(a){return true},describeTo:function(a){a.append("anything")}})};JsHamcrest.Matchers.nil=function(){return new JsHamcrest.SimpleMatcher({matches:function(a){return a==null},describeTo:function(a){a.appendLiteral(null)}})};JsHamcrest.Matchers.sameAs=function(a){return new JsHamcrest.SimpleMatcher({matches:function(b){return b===a},describeTo:function(b){b.append("same as ").appendLiteral(a)}})};JsHamcrest.Matchers.raises=function(a){return new JsHamcrest.SimpleMatcher({matches:function(c){try{c()}catch(b){if(instanceOf(b,a)||(b.name&&b.name==a)||(b.options.name&&b.options.name==a)){return true}else{throw b}}return false},describeTo:function(b){b.append("raises ").append(a)}})};JsHamcrest.Matchers.raisesAnything=function(){return new JsHamcrest.SimpleMatcher({matches:function(b){try{b()}catch(a){return true}return false},describeTo:function(a){a.append("raises anything")}})};JsHamcrest.Matchers.both=function(a){if(!JsHamcrest.isMatcher(a)){a=JsHamcrest.Matchers.equalTo(a)}return new JsHamcrest.CombinableMatcher({matches:a.matches,describeTo:function(b){b.append("both ").appendDescriptionOf(a)}})};JsHamcrest.Matchers.either=function(a){if(!JsHamcrest.isMatcher(a)){a=JsHamcrest.Matchers.equalTo(a)}return new JsHamcrest.CombinableMatcher({matches:a.matches,describeTo:function(b){b.append("either ").appendDescriptionOf(a)}})};JsHamcrest.Matchers.allOf=function(){var a=arguments;if(a[0] instanceof Array){a=a[0]}return new JsHamcrest.SimpleMatcher({matches:function(d){for(var b=0;b<a.length;b++){var c=a[b];if(!JsHamcrest.isMatcher(c)){c=JsHamcrest.Matchers.equalTo(c)}if(!c.matches(d)){return false}}return true},describeTo:function(b){b.appendList("("," and ",")",a)}})};JsHamcrest.Matchers.anyOf=function(){var a=arguments;if(a[0] instanceof Array){a=a[0]}return new JsHamcrest.SimpleMatcher({matches:function(d){for(var b=0;b<a.length;b++){var c=a[b];if(!JsHamcrest.isMatcher(c)){c=JsHamcrest.Matchers.equalTo(c)}if(c.matches(d)){return true}}return false},describeTo:function(b){b.appendList("("," or ",")",a)}})};JsHamcrest.Matchers.greaterThan=function(a){return new JsHamcrest.SimpleMatcher({matches:function(b){return b>a},describeTo:function(b){b.append("greater than ").appendLiteral(a)}})};JsHamcrest.Matchers.greaterThanOrEqualTo=function(a){return new JsHamcrest.SimpleMatcher({matches:function(b){return b>=a},describeTo:function(b){b.append("greater than or equal to ").appendLiteral(a)}})};JsHamcrest.Matchers.lessThan=function(a){return new JsHamcrest.SimpleMatcher({matches:function(b){return b<a},describeTo:function(b){b.append("less than ").appendLiteral(a)}})};JsHamcrest.Matchers.lessThanOrEqualTo=function(a){return new JsHamcrest.SimpleMatcher({matches:function(b){return b<=a},describeTo:function(b){b.append("less than or equal to ").append(a)}})};JsHamcrest.Matchers.notANumber=function(){return new JsHamcrest.SimpleMatcher({matches:function(a){return isNaN(a)},describeTo:function(a){a.append("not a number")}})};JsHamcrest.Matchers.divisibleBy=function(a){return new JsHamcrest.SimpleMatcher({matches:function(b){return b%a===0},describeTo:function(b){b.append("divisible by ").appendLiteral(a)}})};JsHamcrest.Matchers.even=function(){return new JsHamcrest.SimpleMatcher({matches:function(a){return a%2===0},describeTo:function(a){a.append("even")}})};JsHamcrest.Matchers.odd=function(){return new JsHamcrest.SimpleMatcher({matches:function(a){return a%2!==0},describeTo:function(a){a.append("odd")}})};JsHamcrest.Matchers.between=function(a){return{and:function(b){var d=b;var c=a;if(a>b){d=a;c=b}return new JsHamcrest.SimpleMatcher({matches:function(f){return f>=c&&f<=d},describeTo:function(f){f.append("between ").appendLiteral(c).append(" and ").appendLiteral(d)}})}}};JsHamcrest.Matchers.closeTo=function(a,b){if(!b){b=0}return new JsHamcrest.SimpleMatcher({matches:function(c){return(Math.abs(c-a)-b)<=0},describeTo:function(c){c.append("number within ").appendLiteral(b).append(" of ").appendLiteral(a)}})};JsHamcrest.Matchers.zero=function(){return new JsHamcrest.SimpleMatcher({matches:function(a){return a===0},describeTo:function(a){a.append("zero")}})};JsHamcrest.Matchers.equalIgnoringCase=function(a){return new JsHamcrest.SimpleMatcher({matches:function(b){return b.toUpperCase()==a.toUpperCase()},describeTo:function(b){b.append('equal ignoring case "').append(a).append('"')}})};JsHamcrest.Matchers.containsString=function(a){return new JsHamcrest.SimpleMatcher({matches:function(b){return b.indexOf(a)>=0},describeTo:function(b){b.append('contains string "').append(a).append('"')}})};JsHamcrest.Matchers.startsWith=function(a){return new JsHamcrest.SimpleMatcher({matches:function(b){return b.indexOf(a)===0},describeTo:function(b){b.append("starts with ").appendLiteral(a)}})};JsHamcrest.Matchers.endsWith=function(a){return new JsHamcrest.SimpleMatcher({matches:function(b){return b.lastIndexOf(a)+a.length==b.length},describeTo:function(b){b.append("ends with ").appendLiteral(a)}})};JsHamcrest.Matchers.matches=function(a){return new JsHamcrest.SimpleMatcher({matches:function(b){return a.test(b)},describeTo:function(b){b.append("matches ").appendLiteral(a)}})};JsHamcrest.Matchers.emailAddress=function(){var a=/^([a-z0-9_\.\-\+])+\@(([a-z0-9\-])+\.)+([a-z0-9]{2,4})+$/i;return new JsHamcrest.SimpleMatcher({matches:function(b){return a.test(b)},describeTo:function(b){b.append("email address")}})};JsHamcrest.Matchers.hasMember=function(a,c){var b;if(c===b){c=JsHamcrest.Matchers.anything()}else{if(!JsHamcrest.isMatcher(c)){c=JsHamcrest.Matchers.equalTo(c)}}return new JsHamcrest.SimpleMatcher({matches:function(d){if(d&&a in d){return c.matches(d[a])}return false},describeTo:function(d){d.append("has member ").appendLiteral(a).append(" (").appendDescriptionOf(c).append(")")}})};JsHamcrest.Matchers.hasFunction=function(a){return new JsHamcrest.SimpleMatcher({matches:function(b){if(b){return a in b&&b[a] instanceof Function}return false},describeTo:function(b){b.append("has function ").appendLiteral(a)}})};JsHamcrest.Matchers.instanceOf=function(a){return new JsHamcrest.SimpleMatcher({matches:function(b){return !!(b instanceof a)&&!!instanceOf(b,a)},describeTo:function(c){var b=a.name?a.name:"a class";c.append("instance of ").append(b)}})};JsHamcrest.Matchers.typeOf=function(a){return new JsHamcrest.SimpleMatcher({matches:function(b){return(typeof b==a)},describeTo:function(b){b.append("typeof ").append('"').append(a).append('"')}})};JsHamcrest.Matchers.object=function(){return new JsHamcrest.Matchers.instanceOf(Object)};JsHamcrest.Matchers.string=function(){return new JsHamcrest.Matchers.typeOf("string")};JsHamcrest.Matchers.number=function(){return new JsHamcrest.Matchers.typeOf("number")};JsHamcrest.Matchers.bool=function(){return new JsHamcrest.Matchers.typeOf("boolean")};JsHamcrest.Matchers.func=function(){return new JsHamcrest.Matchers.instanceOf(Function)};JsHamcrest.Matchers.hasItem=function(a){if(!JsHamcrest.isMatcher(a)){a=JsHamcrest.Matchers.equalTo(a)}return new JsHamcrest.SimpleMatcher({matches:function(c){if(!instanceOf(c,Array)){return false}for(var b=0;b<c.length;b++){if(a.matches(c[b])){return true}}return false},describeTo:function(b){b.append("array contains item ").appendDescriptionOf(a)}})};JsHamcrest.Matchers.hasItems=function(){var a=[];for(var b=0;b<arguments.length;b++){a.push(JsHamcrest.Matchers.hasItem(arguments[b]))}return JsHamcrest.Matchers.allOf(a)};JsHamcrest.Matchers.everyItem=function(a){if(!JsHamcrest.isMatcher(a)){a=JsHamcrest.Matchers.equalTo(a)}return new JsHamcrest.SimpleMatcher({matches:function(c){if(!(c instanceof Array)){return false}for(var b=0;b<c.length;b++){if(!a.matches(c[b])){return false}}return true},describeTo:function(b){b.append("every item ").appendDescriptionOf(a)}})};JsHamcrest.Matchers.isIn=function(){var a=JsHamcrest.Matchers.equalTo;var b=arguments;if(b[0] instanceof Array){b=b[0]}return new JsHamcrest.SimpleMatcher({matches:function(d){for(var c=0;c<b.length;c++){if(a(b[c]).matches(d)){return true}}return false},describeTo:function(c){c.append("one of ").appendLiteral(b)}})};JsHamcrest.Matchers.oneOf=JsHamcrest.Matchers.isIn;JsHamcrest.Matchers.empty=function(){return new JsHamcrest.SimpleMatcher({matches:function(a){return a.length===0},describeTo:function(a){a.append("empty")}})};JsHamcrest.Matchers.hasSize=function(a){if(!JsHamcrest.isMatcher(a)){a=JsHamcrest.Matchers.equalTo(a)}return new JsHamcrest.SimpleMatcher({matches:function(b){return a.matches(b.length)},describeTo:function(b){b.append("has size ").appendDescriptionOf(a)},describeValueTo:function(c,b){b.append(c.length)}})};JsHamcrest.Operators={};JsHamcrest.Operators.filter=function(d,c){if(!(d instanceof Array)||c==null){return d}if(!(c instanceof JsHamcrest.SimpleMatcher)){c=JsHamcrest.Matchers.equalTo(c)}var a=[];for(var b=0;b<d.length;b++){if(c.matches(d[b])){a.push(d[b])}}return a};JsHamcrest.Operators.assert=function(d,c,a){a=a?a:{};var b=new JsHamcrest.Description();if(c==null){c=JsHamcrest.Matchers.truth()}else{if(!JsHamcrest.isMatcher(c)){c=JsHamcrest.Matchers.equalTo(c)}}if(a.message){b.append(a.message).append(". ")}b.append("Expected ");c.describeTo(b);if(!c.matches(d)){b.passed=false;b.append(" but was ");c.describeValueTo(d,b);if(a.fail){a.fail(b.get())}}else{b.append(": Success");b.passed=true;if(a.pass){a.pass(b.get())}}return b};JsHamcrest.Operators.callTo=function(){var b=[].shift.call(arguments);var a=arguments;return function(){return b.apply(this,a)}};JsHamcrest.Integration=(function(){var a=this;return{copyMembers:function(b,c){if(arguments.length==1){c=b;JsHamcrest.Integration.copyMembers(JsHamcrest.Matchers,c);JsHamcrest.Integration.copyMembers(JsHamcrest.Operators,c)}else{if(b){for(var d in b){if(!(d in c)){c[d]=b[d]}}}}},installMatchers:function(b){var c=JsHamcrest.Matchers;JsHamcrest.Integration.copyMembers(b,c)},installOperators:function(b){var c=JsHamcrest.Operators;JsHamcrest.Integration.copyMembers(b,c)},WebBrowser:function(){JsHamcrest.Integration.copyMembers(a);a.assertThat=function(d,c,b){return JsHamcrest.Operators.assert(d,c,{message:b,fail:function(f){alert("[FAIL] "+f)},pass:function(f){alert("[SUCCESS] "+f)}})}},ProcessPuzzle:function(){JsHamcrest.Integration.copyMembers(a);a.assertThat=function(d,c,b){return JsHamcrest.Operators.assert(d,c,{message:b,fail:function(g){var f=Class.getInstanceOf(WebUILogger);if(f!=null){f.error(g)}else{alert(g)}},pass:function(f){}})}},Rhino:function(){JsHamcrest.Integration.copyMembers(a);a.assertThat=function(d,c,b){return JsHamcrest.Operators.assert(d,c,{message:b,fail:function(f){print("[FAIL] "+f+"\n")},pass:function(f){print("[SUCCESS] "+f+"\n")}})}},JsTestDriver:function(d){d=d?d:{};var c=d.scope||a;JsHamcrest.Integration.copyMembers(c);function b(l){var g=new Error(l);g.name="AssertError";try{var k=new RegExp("jshamcrest.*.js:","i");var f=g.stack.split("\n");var h="";for(var j=0;j<f.length;j++){if(!k.test(f[j])){h+=f[j]+"\n"}}g.stack=h}catch(m){}throw g}c.assertThat=function(h,g,f){return JsHamcrest.Operators.assert(h,g,{message:f,fail:b})}},JsUnit:function(){JsHamcrest.Integration.copyMembers(a);a.assertThat=function(f,d,c){var b=this;return JsHamcrest.Operators.assert(f,d,{message:c,fail:fail})};a.assumeThat=function(f,d,c){var b=this;return JsHamcrest.Operators.assert(f,d,{message:c,fail:fail})}},JsUnitTest:function(c){c=c?c:{};var b=c.scope||JsUnitTest.Unit.Testcase.prototype;JsHamcrest.Integration.copyMembers(b);b.assertThat=function(h,g,f){var d=this;return JsHamcrest.Operators.assert(h,g,{message:f,fail:function(i){d.fail(i)},pass:function(){d.pass()}})}},YUITest:function(c){c=c?c:{};var b=c.scope||a;JsHamcrest.Integration.copyMembers(b);b.Assert=YAHOO.util.Assert;YAHOO.util.Assert.that=function(g,f,d){return JsHamcrest.Operators.assert(g,f,{message:d,fail:function(h){YAHOO.util.Assert.fail(h)}})}},QUnit:function(c){c=c?c:{};var b=c.scope||a;JsHamcrest.Integration.copyMembers(b);b.assertThat=function(g,f,d){return JsHamcrest.Operators.assert(g,f,{message:d,fail:function(h){QUnit.ok(false,h)},pass:function(h){QUnit.ok(true,h)}})}},jsUnity:function(d){d=d?d:{};var c=d.scope||jsUnity.env.defaultScope;var b=d.attachAssertions||false;JsHamcrest.Integration.copyMembers(c);if(b){jsUnity.attachAssertions(c)}c.assertThat=function(h,g,f){return JsHamcrest.Operators.assert(h,g,{message:f,fail:function(i){throw i}})}},screwunit:function(c){c=c?c:{};var b=c.scope||Screw.Matchers;JsHamcrest.Integration.copyMembers(b);b.assertThat=function(g,f,d){return JsHamcrest.Operators.assert(g,f,{message:d,fail:function(h){throw h}})}},jasmine:function(c){c=c?c:{};var b=c.scope||a;JsHamcrest.Integration.copyMembers(b);b.assertThat=function(g,f,d){return JsHamcrest.Operators.assert(g,f,{message:d,fail:function(h){jasmine.getEnv().currentSpec.addMatcherResult(new jasmine.ExpectationResult({passed:false,message:h}))},pass:function(h){jasmine.getEnv().currentSpec.addMatcherResult(new jasmine.ExpectationResult({passed:true,message:h}))}})}}}})();if(!Array.prototype.push){Array.prototype.push=function(){for(var b=0,a=arguments.length;b<a;b++){this[this.length]=arguments[b]}return this.length}}if(!Array.prototype.shift){Array.prototype.shift=function(){if(this.length>0){var c=this[0];for(var b=0,a=this.length-1;b<a;b++){this[b]=this[b+1]}this.length=this.length-1;return c}}}if(!Array.prototype.splice){Array.prototype.splice=function(j,f){var b=this.slice(j+f);var c=this.slice(j,j+f);this.length=j;var g=[];for(var d=0,a=arguments.length;d<a;d++){g[d]=arguments[d]}var h=(g.length>2)?b=g.slice(2).concat(b):b;for(d=0,a=h.length;d<a;d++){this.push(h[d])}return c}}var log4javascript;(function(){function isUndefined(obj){return typeof obj=="undefined"}function EventSupport(){}EventSupport.prototype={eventTypes:[],eventListeners:{},setEventTypes:function(eventTypesParam){if(eventTypesParam instanceof Array){this.eventTypes=eventTypesParam;this.eventListeners={};for(var i=0,len=this.eventTypes.length;i<len;i++){this.eventListeners[this.eventTypes[i]]=[]}}else{handleError("log4javascript.EventSupport ["+this+"]: setEventTypes: eventTypes parameter must be an Array")}},addEventListener:function(eventType,listener){if(typeof listener=="function"){if(!array_contains(this.eventTypes,eventType)){handleError("log4javascript.EventSupport ["+this+"]: addEventListener: no event called '"+eventType+"'")}this.eventListeners[eventType].push(listener)}else{handleError("log4javascript.EventSupport ["+this+"]: addEventListener: listener must be a function")}},removeEventListener:function(eventType,listener){if(typeof listener=="function"){if(!array_contains(this.eventTypes,eventType)){handleError("log4javascript.EventSupport ["+this+"]: removeEventListener: no event called '"+eventType+"'")}array_remove(this.eventListeners[eventType],listener)}else{handleError("log4javascript.EventSupport ["+this+"]: removeEventListener: listener must be a function")}},dispatchEvent:function(eventType,eventArgs){if(array_contains(this.eventTypes,eventType)){var listeners=this.eventListeners[eventType];for(var i=0,len=listeners.length;i<len;i++){listeners[i](this,eventType,eventArgs)}}else{handleError("log4javascript.EventSupport ["+this+"]: dispatchEvent: no event called '"+eventType+"'")}}};var applicationStartDate=new Date();var uniqueId="log4javascript_"+applicationStartDate.getTime()+"_"+Math.floor(Math.random()*100000000);var emptyFunction=function(){};var newLine="\r\n";var pageLoaded=false;function Log4JavaScript(){}Log4JavaScript.prototype=new EventSupport();log4javascript=new Log4JavaScript();log4javascript.version="1.4.1";log4javascript.edition="log4javascript";function toStr(obj){if(obj&&obj.toString){return obj.toString()}else{return String(obj)}}function getExceptionMessage(ex){if(ex.message){return ex.message}else{if(ex.description){return ex.description}else{return toStr(ex)}}}function getUrlFileName(url){var lastSlashIndex=Math.max(url.lastIndexOf("/"),url.lastIndexOf("\\"));return url.substr(lastSlashIndex+1)}function getExceptionStringRep(ex){if(ex){var exStr="Exception: "+getExceptionMessage(ex);try{if(ex.lineNumber){exStr+=" on line number "+ex.lineNumber}if(ex.fileName){exStr+=" in file "+getUrlFileName(ex.fileName)}}catch(localEx){logLog.warn("Unable to obtain file and line information for error")}if(showStackTraces&&ex.stack){exStr+=newLine+"Stack trace:"+newLine+ex.stack}return exStr}return null}function bool(obj){return Boolean(obj)}function trim(str){return str.replace(/^\s+/,"").replace(/\s+$/,"")}function splitIntoLines(text){var text2=text.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return text2.split("\n")}function urlEncode(str){return escape(str).replace(/\+/g,"%2B").replace(/"/g,"%22").replace(/'/g,"%27").replace(/\//g,"%2F").replace(/=/g,"%3D")}function urlDecode(str){return unescape(str).replace(/%2B/g,"+").replace(/%22/g,'"').replace(/%27/g,"'").replace(/%2F/g,"/").replace(/%3D/g,"=")}function array_remove(arr,val){var index=-1;for(var i=0,len=arr.length;i<len;i++){if(arr[i]===val){index=i;break}}if(index>=0){arr.splice(index,1);return true}else{return false}}function array_contains(arr,val){for(var i=0,len=arr.length;i<len;i++){if(arr[i]==val){return true}}return false}function extractBooleanFromParam(param,defaultValue){if(isUndefined(param)){return defaultValue}else{return bool(param)}}function extractStringFromParam(param,defaultValue){if(isUndefined(param)){return defaultValue}else{return String(param)}}function extractIntFromParam(param,defaultValue){if(isUndefined(param)){return defaultValue}else{try{var value=parseInt(param,10);return isNaN(value)?defaultValue:value}catch(ex){logLog.warn("Invalid int param "+param,ex);return defaultValue}}}function extractFunctionFromParam(param,defaultValue){if(typeof param=="function"){return param}else{return defaultValue}}function isError(err){return(err instanceof Error)}if(!Function.prototype.apply){Function.prototype.apply=function(obj,args){var methodName="__apply__";if(typeof obj[methodName]!="undefined"){methodName+=String(Math.random()).substr(2)}obj[methodName]=this;var argsStrings=[];for(var i=0,len=args.length;i<len;i++){argsStrings[i]="args["+i+"]"}var script="obj."+methodName+"("+argsStrings.join(",")+")";var returnValue=eval(script);delete obj[methodName];return returnValue}}if(!Function.prototype.call){Function.prototype.call=function(obj){var args=[];for(var i=1,len=arguments.length;i<len;i++){args[i-1]=arguments[i]}return this.apply(obj,args)}}function getListenersPropertyName(eventName){return"__log4javascript_listeners__"+eventName}function addEvent(node,eventName,listener,useCapture,win){win=win?win:window;if(node.addEventListener){node.addEventListener(eventName,listener,useCapture)}else{if(node.attachEvent){node.attachEvent("on"+eventName,listener)}else{var propertyName=getListenersPropertyName(eventName);if(!node[propertyName]){node[propertyName]=[];node["on"+eventName]=function(evt){evt=getEvent(evt,win);var listenersPropertyName=getListenersPropertyName(eventName);var listeners=this[listenersPropertyName].concat([]);var currentListener;while((currentListener=listeners.shift())){currentListener.call(this,evt)}}}node[propertyName].push(listener)}}}function removeEvent(node,eventName,listener,useCapture){if(node.removeEventListener){node.removeEventListener(eventName,listener,useCapture)}else{if(node.detachEvent){node.detachEvent("on"+eventName,listener)}else{var propertyName=getListenersPropertyName(eventName);if(node[propertyName]){array_remove(node[propertyName],listener)}}}}function getEvent(evt,win){win=win?win:window;return evt?evt:win.event}function stopEventPropagation(evt){if(evt.stopPropagation){evt.stopPropagation()}else{if(typeof evt.cancelBubble!="undefined"){evt.cancelBubble=true}}evt.returnValue=false}var logLog={quietMode:false,debugMessages:[],setQuietMode:function(quietMode){this.quietMode=bool(quietMode)},numberOfErrors:0,alertAllErrors:false,setAlertAllErrors:function(alertAllErrors){this.alertAllErrors=alertAllErrors},debug:function(message){this.debugMessages.push(message)},displayDebug:function(){alert(this.debugMessages.join(newLine))},warn:function(message,exception){},error:function(message,exception){if(++this.numberOfErrors==1||this.alertAllErrors){if(!this.quietMode){var alertMessage="log4javascript error: "+message;if(exception){alertMessage+=newLine+newLine+"Original error: "+getExceptionStringRep(exception)}alert(alertMessage)}}}};log4javascript.logLog=logLog;log4javascript.setEventTypes(["load","error"]);function handleError(message,exception){logLog.error(message,exception);log4javascript.dispatchEvent("error",{message:message,exception:exception})}log4javascript.handleError=handleError;var enabled=!((typeof log4javascript_disabled!="undefined")&&log4javascript_disabled);log4javascript.setEnabled=function(enable){enabled=bool(enable)};log4javascript.isEnabled=function(){return enabled};var useTimeStampsInMilliseconds=true;log4javascript.setTimeStampsInMilliseconds=function(timeStampsInMilliseconds){useTimeStampsInMilliseconds=bool(timeStampsInMilliseconds)};log4javascript.isTimeStampsInMilliseconds=function(){return useTimeStampsInMilliseconds};log4javascript.evalInScope=function(expr){return eval(expr)};var showStackTraces=false;log4javascript.setShowStackTraces=function(show){showStackTraces=bool(show)};var Level=function(level,name){this.level=level;this.name=name};Level.prototype={toString:function(){return this.name},equals:function(level){return this.level==level.level},isGreaterOrEqual:function(level){return this.level>=level.level}};Level.ALL=new Level(Number.MIN_VALUE,"ALL");Level.TRACE=new Level(10000,"TRACE");Level.DEBUG=new Level(20000,"DEBUG");Level.INFO=new Level(30000,"INFO");Level.WARN=new Level(40000,"WARN");Level.ERROR=new Level(50000,"ERROR");Level.FATAL=new Level(60000,"FATAL");Level.OFF=new Level(Number.MAX_VALUE,"OFF");log4javascript.Level=Level;function Timer(name,level){this.name=name;this.level=isUndefined(level)?Level.INFO:level;this.start=new Date()}Timer.prototype.getElapsedTime=function(){return new Date().getTime()-this.start.getTime()};var anonymousLoggerName="[anonymous]";var defaultLoggerName="[default]";var nullLoggerName="[null]";var rootLoggerName="root";function Logger(name){this.name=name;this.parent=null;this.children=[];var appenders=[];var loggerLevel=null;var isRoot=(this.name===rootLoggerName);var isNull=(this.name===nullLoggerName);var appenderCache=null;var appenderCacheInvalidated=false;this.addChild=function(childLogger){this.children.push(childLogger);childLogger.parent=this;childLogger.invalidateAppenderCache()};var additive=true;this.getAdditivity=function(){return additive};this.setAdditivity=function(additivity){var valueChanged=(additive!=additivity);additive=additivity;if(valueChanged){this.invalidateAppenderCache()}};this.addAppender=function(appender){if(isNull){handleError("Logger.addAppender: you may not add an appender to the null logger")}else{if(appender instanceof log4javascript.Appender){if(!array_contains(appenders,appender)){appenders.push(appender);appender.setAddedToLogger(this);this.invalidateAppenderCache()}}else{handleError("Logger.addAppender: appender supplied ('"+toStr(appender)+"') is not a subclass of Appender")}}};this.removeAppender=function(appender){array_remove(appenders,appender);appender.setRemovedFromLogger(this);this.invalidateAppenderCache()};this.removeAllAppenders=function(){var appenderCount=appenders.length;if(appenderCount>0){for(var i=0;i<appenderCount;i++){appenders[i].setRemovedFromLogger(this)}appenders.length=0;this.invalidateAppenderCache()}};this.getEffectiveAppenders=function(){if(appenderCache===null||appenderCacheInvalidated){var parentEffectiveAppenders=(isRoot||!this.getAdditivity())?[]:this.parent.getEffectiveAppenders();appenderCache=parentEffectiveAppenders.concat(appenders);appenderCacheInvalidated=false}return appenderCache};this.invalidateAppenderCache=function(){appenderCacheInvalidated=true;for(var i=0,len=this.children.length;i<len;i++){this.children[i].invalidateAppenderCache()}};this.log=function(level,params){if(level.isGreaterOrEqual(this.getEffectiveLevel())){var exception;var finalParamIndex=params.length-1;var lastParam=params[params.length-1];if(params.length>1&&isError(lastParam)){exception=lastParam;finalParamIndex--}var messages=[];for(var i=0;i<=finalParamIndex;i++){messages[i]=params[i]}var loggingEvent=new LoggingEvent(this,new Date(),level,messages,exception);this.callAppenders(loggingEvent)}};this.callAppenders=function(loggingEvent){var effectiveAppenders=this.getEffectiveAppenders();for(var i=0,len=effectiveAppenders.length;i<len;i++){effectiveAppenders[i].doAppend(loggingEvent)}};this.setLevel=function(level){if(isRoot&&level===null){handleError("Logger.setLevel: you cannot set the level of the root logger to null")}else{if(level instanceof Level){loggerLevel=level}else{handleError("Logger.setLevel: level supplied to logger "+this.name+" is not an instance of log4javascript.Level")}}};this.getLevel=function(){return loggerLevel};this.getEffectiveLevel=function(){for(var logger=this;logger!==null;logger=logger.parent){var level=logger.getLevel();if(level!==null){return level}}};this.group=function(name,initiallyExpanded){var effectiveAppenders=this.getEffectiveAppenders();for(var i=0,len=effectiveAppenders.length;i<len;i++){effectiveAppenders[i].group(name,initiallyExpanded)}};this.groupEnd=function(name){var effectiveAppenders=this.getEffectiveAppenders();for(var i=0,len=effectiveAppenders.length;i<len;i++){effectiveAppenders[i].groupEnd()}};var timers={};this.time=function(name,level){if(isUndefined(name)){handleError("Logger.time: a name for the timer must be supplied")}else{if(level&&!(level instanceof Level)){handleError("Logger.time: level supplied to timer "+name+" is not an instance of log4javascript.Level")}else{timers[name]=new Timer(name,level)}}};this.timeEnd=function(name){if(isUndefined(name)){handleError("Logger.timeEnd: a name for the timer must be supplied")}else{if(timers[name]){var timer=timers[name];var milliseconds=timer.getElapsedTime();this.log(timer.level,["Timer "+toStr(name)+" completed in "+milliseconds+"ms"]);delete timers[name]}else{logLog.warn("Logger.timeEnd: no timer found with name "+name)}}};this.assert=function(expr){if(!expr){var args=[];for(var i=1,len=arguments.length;i<len;i++){args.push(arguments[i])}args=(args.length>0)?args:["Assertion Failure"];args.push(newLine);args.push(expr);this.log(Level.ERROR,args)}};this.toString=function(){return"Logger["+this.name+"]"}}Logger.prototype={trace:function(){this.log(Level.TRACE,arguments)},debug:function(){this.log(Level.DEBUG,arguments)},info:function(){this.log(Level.INFO,arguments)},warn:function(){this.log(Level.WARN,arguments)},error:function(){this.log(Level.ERROR,arguments)},fatal:function(){this.log(Level.FATAL,arguments)},isEnabledFor:function(level){return level.isGreaterOrEqual(this.getEffectiveLevel())},isTraceEnabled:function(){return this.isEnabledFor(Level.TRACE)},isDebugEnabled:function(){return this.isEnabledFor(Level.DEBUG)},isInfoEnabled:function(){return this.isEnabledFor(Level.INFO)},isWarnEnabled:function(){return this.isEnabledFor(Level.WARN)},isErrorEnabled:function(){return this.isEnabledFor(Level.ERROR)},isFatalEnabled:function(){return this.isEnabledFor(Level.FATAL)}};Logger.prototype.trace.isEntryPoint=true;Logger.prototype.debug.isEntryPoint=true;Logger.prototype.info.isEntryPoint=true;Logger.prototype.warn.isEntryPoint=true;Logger.prototype.error.isEntryPoint=true;Logger.prototype.fatal.isEntryPoint=true;var loggers={};var loggerNames=[];var ROOT_LOGGER_DEFAULT_LEVEL=Level.DEBUG;var rootLogger=new Logger(rootLoggerName);rootLogger.setLevel(ROOT_LOGGER_DEFAULT_LEVEL);log4javascript.getRootLogger=function(){return rootLogger};log4javascript.getLogger=function(loggerName){if(!(typeof loggerName=="string")){loggerName=anonymousLoggerName;logLog.warn("log4javascript.getLogger: non-string logger name "+toStr(loggerName)+" supplied, returning anonymous logger")}if(loggerName==rootLoggerName){handleError("log4javascript.getLogger: root logger may not be obtained by name")}if(!loggers[loggerName]){var logger=new Logger(loggerName);loggers[loggerName]=logger;loggerNames.push(loggerName);var lastDotIndex=loggerName.lastIndexOf(".");var parentLogger;if(lastDotIndex>-1){var parentLoggerName=loggerName.substring(0,lastDotIndex);parentLogger=log4javascript.getLogger(parentLoggerName)}else{parentLogger=rootLogger}parentLogger.addChild(logger)}return loggers[loggerName]};var defaultLogger=null;log4javascript.getDefaultLogger=function(){if(!defaultLogger){defaultLogger=log4javascript.getLogger(defaultLoggerName);var a=new log4javascript.PopUpAppender();defaultLogger.addAppender(a)}return defaultLogger};var nullLogger=null;log4javascript.getNullLogger=function(){if(!nullLogger){nullLogger=new Logger(nullLoggerName);nullLogger.setLevel(Level.OFF)}return nullLogger};log4javascript.resetConfiguration=function(){rootLogger.setLevel(ROOT_LOGGER_DEFAULT_LEVEL);loggers={}};var LoggingEvent=function(logger,timeStamp,level,messages,exception){this.logger=logger;this.timeStamp=timeStamp;this.timeStampInMilliseconds=timeStamp.getTime();this.timeStampInSeconds=Math.floor(this.timeStampInMilliseconds/1000);this.milliseconds=this.timeStamp.getMilliseconds();this.level=level;this.messages=messages;this.exception=exception};LoggingEvent.prototype={getThrowableStrRep:function(){return this.exception?getExceptionStringRep(this.exception):""},getCombinedMessages:function(){return(this.messages.length==1)?this.messages[0]:this.messages.join(newLine)},toString:function(){return"LoggingEvent["+this.level+"]"}};log4javascript.LoggingEvent=LoggingEvent;var Layout=function(){};Layout.prototype={defaults:{loggerKey:"logger",timeStampKey:"timestamp",millisecondsKey:"milliseconds",levelKey:"level",messageKey:"message",exceptionKey:"exception",urlKey:"url"},loggerKey:"logger",timeStampKey:"timestamp",millisecondsKey:"milliseconds",levelKey:"level",messageKey:"message",exceptionKey:"exception",urlKey:"url",batchHeader:"",batchFooter:"",batchSeparator:"",returnsPostData:false,overrideTimeStampsSetting:false,useTimeStampsInMilliseconds:null,format:function(loggingEvent){handleError("Layout.format: layout supplied has no format() method")},ignoresThrowable:function(){handleError("Layout.ignoresThrowable: layout supplied has no ignoresThrowable() method")},getContentType:function(){return"text/plain"},allowBatching:function(){return true},setTimeStampsInMilliseconds:function(timeStampsInMilliseconds){this.overrideTimeStampsSetting=true;this.useTimeStampsInMilliseconds=bool(timeStampsInMilliseconds)},isTimeStampsInMilliseconds:function(){return this.overrideTimeStampsSetting?this.useTimeStampsInMilliseconds:useTimeStampsInMilliseconds},getTimeStampValue:function(loggingEvent){return this.isTimeStampsInMilliseconds()?loggingEvent.timeStampInMilliseconds:loggingEvent.timeStampInSeconds},getDataValues:function(loggingEvent,combineMessages){var dataValues=[[this.loggerKey,loggingEvent.logger.name],[this.timeStampKey,this.getTimeStampValue(loggingEvent)],[this.levelKey,loggingEvent.level.name],[this.urlKey,window.location.href],[this.messageKey,combineMessages?loggingEvent.getCombinedMessages():loggingEvent.messages]];if(!this.isTimeStampsInMilliseconds()){dataValues.push([this.millisecondsKey,loggingEvent.milliseconds])}if(loggingEvent.exception){dataValues.push([this.exceptionKey,getExceptionStringRep(loggingEvent.exception)])}if(this.hasCustomFields()){for(var i=0,len=this.customFields.length;i<len;i++){var val=this.customFields[i].value;if(typeof val==="function"){val=val(this,loggingEvent)}dataValues.push([this.customFields[i].name,val])}}return dataValues},setKeys:function(loggerKey,timeStampKey,levelKey,messageKey,exceptionKey,urlKey,millisecondsKey){this.loggerKey=extractStringFromParam(loggerKey,this.defaults.loggerKey);this.timeStampKey=extractStringFromParam(timeStampKey,this.defaults.timeStampKey);this.levelKey=extractStringFromParam(levelKey,this.defaults.levelKey);this.messageKey=extractStringFromParam(messageKey,this.defaults.messageKey);this.exceptionKey=extractStringFromParam(exceptionKey,this.defaults.exceptionKey);this.urlKey=extractStringFromParam(urlKey,this.defaults.urlKey);this.millisecondsKey=extractStringFromParam(millisecondsKey,this.defaults.millisecondsKey)},setCustomField:function(name,value){var fieldUpdated=false;for(var i=0,len=this.customFields.length;i<len;i++){if(this.customFields[i].name===name){this.customFields[i].value=value;fieldUpdated=true}}if(!fieldUpdated){this.customFields.push({name:name,value:value})}},hasCustomFields:function(){return(this.customFields.length>0)},toString:function(){handleError("Layout.toString: all layouts must override this method")}};log4javascript.Layout=Layout;var Appender=function(){};Appender.prototype=new EventSupport();Appender.prototype.layout=new PatternLayout();Appender.prototype.threshold=Level.ALL;Appender.prototype.loggers=[];Appender.prototype.doAppend=function(loggingEvent){if(enabled&&loggingEvent.level.level>=this.threshold.level){this.append(loggingEvent)}};Appender.prototype.append=function(loggingEvent){};Appender.prototype.setLayout=function(layout){if(layout instanceof Layout){this.layout=layout}else{handleError("Appender.setLayout: layout supplied to "+this.toString()+" is not a subclass of Layout")}};Appender.prototype.getLayout=function(){return this.layout};Appender.prototype.setThreshold=function(threshold){if(threshold instanceof Level){this.threshold=threshold}else{handleError("Appender.setThreshold: threshold supplied to "+this.toString()+" is not a subclass of Level")}};Appender.prototype.getThreshold=function(){return this.threshold};Appender.prototype.setAddedToLogger=function(logger){this.loggers.push(logger)};Appender.prototype.setRemovedFromLogger=function(logger){array_remove(this.loggers,logger)};Appender.prototype.group=emptyFunction;Appender.prototype.groupEnd=emptyFunction;Appender.prototype.toString=function(){handleError("Appender.toString: all appenders must override this method")};log4javascript.Appender=Appender;function SimpleLayout(){this.customFields=[]}SimpleLayout.prototype=new Layout();SimpleLayout.prototype.format=function(loggingEvent){return loggingEvent.level.name+" - "+loggingEvent.getCombinedMessages()};SimpleLayout.prototype.ignoresThrowable=function(){return true};SimpleLayout.prototype.toString=function(){return"SimpleLayout"};log4javascript.SimpleLayout=SimpleLayout;function NullLayout(){this.customFields=[]}NullLayout.prototype=new Layout();NullLayout.prototype.format=function(loggingEvent){return loggingEvent.messages};NullLayout.prototype.ignoresThrowable=function(){return true};NullLayout.prototype.toString=function(){return"NullLayout"};log4javascript.NullLayout=NullLayout;function XmlLayout(combineMessages){this.combineMessages=extractBooleanFromParam(combineMessages,true);this.customFields=[]}XmlLayout.prototype=new Layout();XmlLayout.prototype.isCombinedMessages=function(){return this.combineMessages};XmlLayout.prototype.getContentType=function(){return"text/xml"};XmlLayout.prototype.escapeCdata=function(str){return str.replace(/\]\]>/,"]]>]]&gt;<![CDATA[")};XmlLayout.prototype.format=function(loggingEvent){var layout=this;var i,len;function formatMessage(message){message=(typeof message==="string")?message:toStr(message);return"<log4javascript:message><![CDATA["+layout.escapeCdata(message)+"]]></log4javascript:message>"}var str='<log4javascript:event logger="'+loggingEvent.logger.name+'" timestamp="'+this.getTimeStampValue(loggingEvent)+'"';if(!this.isTimeStampsInMilliseconds()){str+=' milliseconds="'+loggingEvent.milliseconds+'"'}str+=' level="'+loggingEvent.level.name+'">'+newLine;if(this.combineMessages){str+=formatMessage(loggingEvent.getCombinedMessages())}else{str+="<log4javascript:messages>"+newLine;for(i=0,len=loggingEvent.messages.length;i<len;i++){str+=formatMessage(loggingEvent.messages[i])+newLine}str+="</log4javascript:messages>"+newLine}if(this.hasCustomFields()){for(i=0,len=this.customFields.length;i<len;i++){str+='<log4javascript:customfield name="'+this.customFields[i].name+'"><![CDATA['+this.customFields[i].value.toString()+"]]></log4javascript:customfield>"+newLine}}if(loggingEvent.exception){str+="<log4javascript:exception><![CDATA["+getExceptionStringRep(loggingEvent.exception)+"]]></log4javascript:exception>"+newLine}str+="</log4javascript:event>"+newLine+newLine;return str};XmlLayout.prototype.ignoresThrowable=function(){return false};XmlLayout.prototype.toString=function(){return"XmlLayout"};log4javascript.XmlLayout=XmlLayout;function escapeNewLines(str){return str.replace(/\r\n|\r|\n/g,"\\r\\n")}function JsonLayout(readable,combineMessages){this.readable=extractBooleanFromParam(readable,false);this.combineMessages=extractBooleanFromParam(combineMessages,true);this.batchHeader=this.readable?"["+newLine:"[";this.batchFooter=this.readable?"]"+newLine:"]";this.batchSeparator=this.readable?","+newLine:",";this.setKeys();this.colon=this.readable?": ":":";this.tab=this.readable?"\t":"";this.lineBreak=this.readable?newLine:"";this.customFields=[]}JsonLayout.prototype=new Layout();JsonLayout.prototype.isReadable=function(){return this.readable};JsonLayout.prototype.isCombinedMessages=function(){return this.combineMessages};JsonLayout.prototype.format=function(loggingEvent){var layout=this;var dataValues=this.getDataValues(loggingEvent,this.combineMessages);var str="{"+this.lineBreak;var i;function formatValue(val,prefix,expand){var formattedValue;var valType=typeof val;if(val instanceof Date){formattedValue=String(val.getTime())}else{if(expand&&(val instanceof Array)){formattedValue="["+layout.lineBreak;for(i=0,len=val.length;i<len;i++){var childPrefix=prefix+layout.tab;formattedValue+=childPrefix+formatValue(val[i],childPrefix,false);if(i<val.length-1){formattedValue+=","}formattedValue+=layout.lineBreak}formattedValue+=prefix+"]"}else{if(valType!=="number"&&valType!=="boolean"){formattedValue='"'+escapeNewLines(toStr(val).replace(/\"/g,'\\"'))+'"'}else{formattedValue=val}}}return formattedValue}for(i=0,len=dataValues.length;i<len;i++){str+=this.tab+'"'+dataValues[i][0]+'"'+this.colon+formatValue(dataValues[i][1],this.tab,true);if(i<dataValues.length-1){str+=","}str+=this.lineBreak}str+="}"+this.lineBreak;return str};JsonLayout.prototype.ignoresThrowable=function(){return false};JsonLayout.prototype.toString=function(){return"JsonLayout"};JsonLayout.prototype.getContentType=function(){return"application/json"};log4javascript.JsonLayout=JsonLayout;function HttpPostDataLayout(){this.setKeys();this.customFields=[];this.returnsPostData=true}HttpPostDataLayout.prototype=new Layout();HttpPostDataLayout.prototype.allowBatching=function(){return false};HttpPostDataLayout.prototype.format=function(loggingEvent){var dataValues=this.getDataValues(loggingEvent);var queryBits=[];for(var i=0,len=dataValues.length;i<len;i++){var val=(dataValues[i][1] instanceof Date)?String(dataValues[i][1].getTime()):dataValues[i][1];queryBits.push(urlEncode(dataValues[i][0])+"="+urlEncode(val))}return queryBits.join("&")};HttpPostDataLayout.prototype.ignoresThrowable=function(loggingEvent){return false};HttpPostDataLayout.prototype.toString=function(){return"HttpPostDataLayout"};log4javascript.HttpPostDataLayout=HttpPostDataLayout;function formatObjectExpansion(obj,depth,indentation){var objectsExpanded=[];function doFormat(obj,depth,indentation){var i,j,len,childDepth,childIndentation,childLines,expansion,childExpansion;if(!indentation){indentation=""}function formatString(text){var lines=splitIntoLines(text);for(var j=1,jLen=lines.length;j<jLen;j++){lines[j]=indentation+lines[j]}return lines.join(newLine)}if(obj===null){return"null"}else{if(typeof obj=="undefined"){return"undefined"}else{if(typeof obj=="string"){return formatString(obj)}else{if(typeof obj=="object"&&array_contains(objectsExpanded,obj)){try{expansion=toStr(obj)}catch(ex){expansion="Error formatting property. Details: "+getExceptionStringRep(ex)}return expansion+" [already expanded]"}else{if((obj instanceof Array)&&depth>0){objectsExpanded.push(obj);expansion="["+newLine;childDepth=depth-1;childIndentation=indentation+"  ";childLines=[];for(i=0,len=obj.length;i<len;i++){try{childExpansion=doFormat(obj[i],childDepth,childIndentation);childLines.push(childIndentation+childExpansion)}catch(ex){childLines.push(childIndentation+"Error formatting array member. Details: "+getExceptionStringRep(ex)+"")}}expansion+=childLines.join(","+newLine)+newLine+indentation+"]";return expansion}else{if(typeof obj=="object"&&depth>0){objectsExpanded.push(obj);expansion="{"+newLine;childDepth=depth-1;childIndentation=indentation+"  ";childLines=[];for(i in obj){try{childExpansion=doFormat(obj[i],childDepth,childIndentation);childLines.push(childIndentation+i+": "+childExpansion)}catch(ex){childLines.push(childIndentation+i+": Error formatting property. Details: "+getExceptionStringRep(ex))}}expansion+=childLines.join(","+newLine)+newLine+indentation+"}";return expansion}else{return formatString(toStr(obj))}}}}}}}return doFormat(obj,depth,indentation)}var SimpleDateFormat;(function(){var regex=/('[^']*')|(G+|y+|M+|w+|W+|D+|d+|F+|E+|a+|H+|k+|K+|h+|m+|s+|S+|Z+)|([a-zA-Z]+)|([^a-zA-Z']+)/;var monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];var dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];var TEXT2=0,TEXT3=1,NUMBER=2,YEAR=3,MONTH=4,TIMEZONE=5;var types={G:TEXT2,y:YEAR,M:MONTH,w:NUMBER,W:NUMBER,D:NUMBER,d:NUMBER,F:NUMBER,E:TEXT3,a:TEXT2,H:NUMBER,k:NUMBER,K:NUMBER,h:NUMBER,m:NUMBER,s:NUMBER,S:NUMBER,Z:TIMEZONE};var ONE_DAY=24*60*60*1000;var ONE_WEEK=7*ONE_DAY;var DEFAULT_MINIMAL_DAYS_IN_FIRST_WEEK=1;var newDateAtMidnight=function(year,month,day){var d=new Date(year,month,day,0,0,0);d.setMilliseconds(0);return d};Date.prototype.getDifference=function(date){return this.getTime()-date.getTime()};Date.prototype.isBefore=function(d){return this.getTime()<d.getTime()};Date.prototype.getUTCTime=function(){return Date.UTC(this.getFullYear(),this.getMonth(),this.getDate(),this.getHours(),this.getMinutes(),this.getSeconds(),this.getMilliseconds())};Date.prototype.getTimeSince=function(d){return this.getUTCTime()-d.getUTCTime()};Date.prototype.getPreviousSunday=function(){var midday=new Date(this.getFullYear(),this.getMonth(),this.getDate(),12,0,0);var previousSunday=new Date(midday.getTime()-this.getDay()*ONE_DAY);return newDateAtMidnight(previousSunday.getFullYear(),previousSunday.getMonth(),previousSunday.getDate())};Date.prototype.getWeekInYear=function(minimalDaysInFirstWeek){if(isUndefined(this.minimalDaysInFirstWeek)){minimalDaysInFirstWeek=DEFAULT_MINIMAL_DAYS_IN_FIRST_WEEK}var previousSunday=this.getPreviousSunday();var startOfYear=newDateAtMidnight(this.getFullYear(),0,1);var numberOfSundays=previousSunday.isBefore(startOfYear)?0:1+Math.floor(previousSunday.getTimeSince(startOfYear)/ONE_WEEK);var numberOfDaysInFirstWeek=7-startOfYear.getDay();var weekInYear=numberOfSundays;if(numberOfDaysInFirstWeek<minimalDaysInFirstWeek){weekInYear--}return weekInYear};Date.prototype.getWeekInMonth=function(minimalDaysInFirstWeek){if(isUndefined(this.minimalDaysInFirstWeek)){minimalDaysInFirstWeek=DEFAULT_MINIMAL_DAYS_IN_FIRST_WEEK}var previousSunday=this.getPreviousSunday();var startOfMonth=newDateAtMidnight(this.getFullYear(),this.getMonth(),1);var numberOfSundays=previousSunday.isBefore(startOfMonth)?0:1+Math.floor(previousSunday.getTimeSince(startOfMonth)/ONE_WEEK);var numberOfDaysInFirstWeek=7-startOfMonth.getDay();var weekInMonth=numberOfSundays;if(numberOfDaysInFirstWeek>=minimalDaysInFirstWeek){weekInMonth++}return weekInMonth};Date.prototype.getDayInYear=function(){var startOfYear=newDateAtMidnight(this.getFullYear(),0,1);return 1+Math.floor(this.getTimeSince(startOfYear)/ONE_DAY)};SimpleDateFormat=function(formatString){this.formatString=formatString};SimpleDateFormat.prototype.setMinimalDaysInFirstWeek=function(days){this.minimalDaysInFirstWeek=days};SimpleDateFormat.prototype.getMinimalDaysInFirstWeek=function(){return isUndefined(this.minimalDaysInFirstWeek)?DEFAULT_MINIMAL_DAYS_IN_FIRST_WEEK:this.minimalDaysInFirstWeek};var padWithZeroes=function(str,len){while(str.length<len){str="0"+str}return str};var formatText=function(data,numberOfLetters,minLength){return(numberOfLetters>=4)?data:data.substr(0,Math.max(minLength,numberOfLetters))};var formatNumber=function(data,numberOfLetters){var dataString=""+data;return padWithZeroes(dataString,numberOfLetters)};SimpleDateFormat.prototype.format=function(date){var formattedString="";var result;var searchString=this.formatString;while((result=regex.exec(searchString))){var quotedString=result[1];var patternLetters=result[2];var otherLetters=result[3];var otherCharacters=result[4];if(quotedString){if(quotedString=="''"){formattedString+="'"}else{formattedString+=quotedString.substring(1,quotedString.length-1)}}else{if(otherLetters){}else{if(otherCharacters){formattedString+=otherCharacters}else{if(patternLetters){var patternLetter=patternLetters.charAt(0);var numberOfLetters=patternLetters.length;var rawData="";switch(patternLetter){case"G":rawData="AD";break;case"y":rawData=date.getFullYear();break;case"M":rawData=date.getMonth();break;case"w":rawData=date.getWeekInYear(this.getMinimalDaysInFirstWeek());break;case"W":rawData=date.getWeekInMonth(this.getMinimalDaysInFirstWeek());break;case"D":rawData=date.getDayInYear();break;case"d":rawData=date.getDate();break;case"F":rawData=1+Math.floor((date.getDate()-1)/7);break;case"E":rawData=dayNames[date.getDay()];break;case"a":rawData=(date.getHours()>=12)?"PM":"AM";break;case"H":rawData=date.getHours();break;case"k":rawData=date.getHours()||24;break;case"K":rawData=date.getHours()%12;break;case"h":rawData=(date.getHours()%12)||12;break;case"m":rawData=date.getMinutes();break;case"s":rawData=date.getSeconds();break;case"S":rawData=date.getMilliseconds();break;case"Z":rawData=date.getTimezoneOffset();break}switch(types[patternLetter]){case TEXT2:formattedString+=formatText(rawData,numberOfLetters,2);break;case TEXT3:formattedString+=formatText(rawData,numberOfLetters,3);break;case NUMBER:formattedString+=formatNumber(rawData,numberOfLetters);break;case YEAR:if(numberOfLetters<=3){var dataString=""+rawData;formattedString+=dataString.substr(2,2)}else{formattedString+=formatNumber(rawData,numberOfLetters)}break;case MONTH:if(numberOfLetters>=3){formattedString+=formatText(monthNames[rawData],numberOfLetters,numberOfLetters)}else{formattedString+=formatNumber(rawData+1,numberOfLetters)}break;case TIMEZONE:var isPositive=(rawData>0);var prefix=isPositive?"-":"+";var absData=Math.abs(rawData);var hours=""+Math.floor(absData/60);hours=padWithZeroes(hours,2);var minutes=""+(absData%60);minutes=padWithZeroes(minutes,2);formattedString+=prefix+hours+minutes;break}}}}}searchString=searchString.substr(result.index+result[0].length)}return formattedString}})();log4javascript.SimpleDateFormat=SimpleDateFormat;function PatternLayout(pattern){if(pattern){this.pattern=pattern}else{this.pattern=PatternLayout.DEFAULT_CONVERSION_PATTERN}this.customFields=[]}PatternLayout.TTCC_CONVERSION_PATTERN="%r %p %c - %m%n";PatternLayout.DEFAULT_CONVERSION_PATTERN="%m%n";PatternLayout.ISO8601_DATEFORMAT="yyyy-MM-dd HH:mm:ss,SSS";PatternLayout.DATETIME_DATEFORMAT="dd MMM yyyy HH:mm:ss,SSS";PatternLayout.ABSOLUTETIME_DATEFORMAT="HH:mm:ss,SSS";PatternLayout.prototype=new Layout();PatternLayout.prototype.format=function(loggingEvent){var regex=/%(-?[0-9]+)?(\.?[0-9]+)?([acdfmMnpr%])(\{([^\}]+)\})?|([^%]+)/;var formattedString="";var result;var searchString=this.pattern;while((result=regex.exec(searchString))){var matchedString=result[0];var padding=result[1];var truncation=result[2];var conversionCharacter=result[3];var specifier=result[5];var text=result[6];if(text){formattedString+=""+text}else{var replacement="";switch(conversionCharacter){case"a":case"m":var depth=0;if(specifier){depth=parseInt(specifier,10);if(isNaN(depth)){handleError("PatternLayout.format: invalid specifier '"+specifier+"' for conversion character '"+conversionCharacter+"' - should be a number");depth=0}}var messages=(conversionCharacter==="a")?loggingEvent.messages[0]:loggingEvent.messages;for(var i=0,len=messages.length;i<len;i++){if(i>0&&(replacement.charAt(replacement.length-1)!==" ")){replacement+=""}if(depth===0){replacement+=messages[i]}else{replacement+=formatObjectExpansion(messages[i],depth)}}break;case"c":var loggerName=loggingEvent.logger.name;if(specifier){var precision=parseInt(specifier,10);var loggerNameBits=loggingEvent.logger.name.split(".");if(precision>=loggerNameBits.length){replacement=loggerName}else{replacement=loggerNameBits.slice(loggerNameBits.length-precision).join(".")}}else{replacement=loggerName}break;case"d":var dateFormat=PatternLayout.ISO8601_DATEFORMAT;if(specifier){dateFormat=specifier;if(dateFormat=="ISO8601"){dateFormat=PatternLayout.ISO8601_DATEFORMAT}else{if(dateFormat=="ABSOLUTE"){dateFormat=PatternLayout.ABSOLUTETIME_DATEFORMAT}else{if(dateFormat=="DATE"){dateFormat=PatternLayout.DATETIME_DATEFORMAT}}}}replacement=(new SimpleDateFormat(dateFormat)).format(loggingEvent.timeStamp);break;case"f":if(this.hasCustomFields()){var fieldIndex=0;if(specifier){fieldIndex=parseInt(specifier,10);if(isNaN(fieldIndex)){handleError("PatternLayout.format: invalid specifier '"+specifier+"' for conversion character 'f' - should be a number")}else{if(fieldIndex===0){handleError("PatternLayout.format: invalid specifier '"+specifier+"' for conversion character 'f' - must be greater than zero")}else{if(fieldIndex>this.customFields.length){handleError("PatternLayout.format: invalid specifier '"+specifier+"' for conversion character 'f' - there aren't that many custom fields")}else{fieldIndex=fieldIndex-1}}}}replacement=this.customFields[fieldIndex].value}break;case"n":replacement=newLine;break;case"p":replacement=loggingEvent.level.name;break;case"r":replacement=""+loggingEvent.timeStamp.getDifference(applicationStartDate);break;case"%":replacement="%";break;default:replacement=matchedString;break}var l;if(truncation){l=parseInt(truncation.substr(1),10);var strLen=replacement.length;if(l<strLen){replacement=replacement.substring(strLen-l,strLen)}}if(padding){if(padding.charAt(0)=="-"){l=parseInt(padding.substr(1),10);while(replacement.length<l){replacement+=" "}}else{l=parseInt(padding,10);while(replacement.length<l){replacement=" "+replacement}}}formattedString+=replacement}searchString=searchString.substr(result.index+result[0].length)}return formattedString};PatternLayout.prototype.ignoresThrowable=function(){return true};PatternLayout.prototype.toString=function(){return"PatternLayout"};log4javascript.PatternLayout=PatternLayout;function AlertAppender(){}AlertAppender.prototype=new Appender();AlertAppender.prototype.layout=new SimpleLayout();AlertAppender.prototype.append=function(loggingEvent){var formattedMessage=this.getLayout().format(loggingEvent);if(this.getLayout().ignoresThrowable()){formattedMessage+=loggingEvent.getThrowableStrRep()}alert(formattedMessage)};AlertAppender.prototype.toString=function(){return"AlertAppender"};log4javascript.AlertAppender=AlertAppender;function BrowserConsoleAppender(){}BrowserConsoleAppender.prototype=new log4javascript.Appender();BrowserConsoleAppender.prototype.layout=new NullLayout();BrowserConsoleAppender.prototype.threshold=Level.DEBUG;BrowserConsoleAppender.prototype.append=function(loggingEvent){var appender=this;var getFormattedMessage=function(){var layout=appender.getLayout();var formattedMessage=layout.format(loggingEvent);if(layout.ignoresThrowable()&&loggingEvent.exception){formattedMessage+=loggingEvent.getThrowableStrRep()}return formattedMessage};if((typeof opera!="undefined")&&opera.postError){opera.postError(getFormattedMessage())}else{if(window.console&&window.console.log){var formattedMesage=getFormattedMessage();if(window.console.debug&&Level.DEBUG.isGreaterOrEqual(loggingEvent.level)){window.console.debug(formattedMesage)}else{if(window.console.info&&Level.INFO.equals(loggingEvent.level)){window.console.info(formattedMesage)}else{if(window.console.warn&&Level.WARN.equals(loggingEvent.level)){window.console.warn(formattedMesage)}else{if(window.console.error&&loggingEvent.level.isGreaterOrEqual(Level.ERROR)){window.console.error(formattedMesage)}else{window.console.log(formattedMesage)}}}}}}};BrowserConsoleAppender.prototype.group=function(name){if(window.console&&window.console.group){window.console.group(name)}};BrowserConsoleAppender.prototype.groupEnd=function(){if(window.console&&window.console.groupEnd){window.console.groupEnd()}};BrowserConsoleAppender.prototype.toString=function(){return"BrowserConsoleAppender"};log4javascript.BrowserConsoleAppender=BrowserConsoleAppender;function getXmlHttp(errorHandler){var xmlHttp=null;if(typeof XMLHttpRequest=="object"||typeof XMLHttpRequest=="function"){xmlHttp=new XMLHttpRequest()}else{try{xmlHttp=new ActiveXObject("Msxml2.XMLHTTP")}catch(e1){try{xmlHttp=new ActiveXObject("Microsoft.XMLHTTP")}catch(e2){if(errorHandler){errorHandler()}else{handleError("getXmlHttp: unable to obtain XMLHttpRequest object")}}}}return xmlHttp}function isHttpRequestSuccessful(xmlHttp){return(isUndefined(xmlHttp.status)||xmlHttp.status===0||(xmlHttp.status>=200&&xmlHttp.status<300))}function AjaxAppender(url){var appender=this;var isSupported=true;if(!url){handleError("AjaxAppender: URL must be specified in constructor");isSupported=false}var timed=this.defaults.timed;var waitForResponse=this.defaults.waitForResponse;var batchSize=this.defaults.batchSize;var timerInterval=this.defaults.timerInterval;var requestSuccessCallback=this.defaults.requestSuccessCallback;var failCallback=this.defaults.failCallback;var postVarName=this.defaults.postVarName;var sendAllOnUnload=this.defaults.sendAllOnUnload;var sessionId=null;var queuedLoggingEvents=[];var queuedRequests=[];var sending=false;var initialized=false;function checkCanConfigure(configOptionName){if(initialized){handleError("AjaxAppender: configuration option '"+configOptionName+"' may not be set after the appender has been initialized");return false}return true}this.getSessionId=function(){return sessionId};this.setSessionId=function(sessionIdParam){sessionId=extractStringFromParam(sessionIdParam,null);this.layout.setCustomField("sessionid",sessionId)};this.setLayout=function(layoutParam){if(checkCanConfigure("layout")){this.layout=layoutParam;if(sessionId!==null){this.setSessionId(sessionId)}}};this.isTimed=function(){return timed};this.setTimed=function(timedParam){if(checkCanConfigure("timed")){timed=bool(timedParam)}};this.getTimerInterval=function(){return timerInterval};this.setTimerInterval=function(timerIntervalParam){if(checkCanConfigure("timerInterval")){timerInterval=extractIntFromParam(timerIntervalParam,timerInterval)}};this.isWaitForResponse=function(){return waitForResponse};this.setWaitForResponse=function(waitForResponseParam){if(checkCanConfigure("waitForResponse")){waitForResponse=bool(waitForResponseParam)}};this.getBatchSize=function(){return batchSize};this.setBatchSize=function(batchSizeParam){if(checkCanConfigure("batchSize")){batchSize=extractIntFromParam(batchSizeParam,batchSize)}};this.isSendAllOnUnload=function(){return sendAllOnUnload};this.setSendAllOnUnload=function(sendAllOnUnloadParam){if(checkCanConfigure("sendAllOnUnload")){sendAllOnUnload=extractIntFromParam(sendAllOnUnloadParam,sendAllOnUnload)}};this.setRequestSuccessCallback=function(requestSuccessCallbackParam){requestSuccessCallback=extractFunctionFromParam(requestSuccessCallbackParam,requestSuccessCallback)};this.setFailCallback=function(failCallbackParam){failCallback=extractFunctionFromParam(failCallbackParam,failCallback)};this.getPostVarName=function(){return postVarName};this.setPostVarName=function(postVarNameParam){if(checkCanConfigure("postVarName")){postVarName=extractStringFromParam(postVarNameParam,postVarName)}};function sendAll(){if(isSupported&&enabled){sending=true;var currentRequestBatch;if(waitForResponse){if(queuedRequests.length>0){currentRequestBatch=queuedRequests.shift();sendRequest(preparePostData(currentRequestBatch),sendAll)}else{sending=false;if(timed){scheduleSending()}}}else{while((currentRequestBatch=queuedRequests.shift())){sendRequest(preparePostData(currentRequestBatch))}sending=false;if(timed){scheduleSending()}}}}this.sendAll=sendAll;function sendAllRemaining(){if(isSupported&&enabled){var actualBatchSize=appender.getLayout().allowBatching()?batchSize:1;var currentLoggingEvent;var postData="";var batchedLoggingEvents=[];while((currentLoggingEvent=queuedLoggingEvents.shift())){batchedLoggingEvents.push(currentLoggingEvent);if(queuedLoggingEvents.length>=actualBatchSize){queuedRequests.push(batchedLoggingEvents);batchedLoggingEvents=[]}}if(batchedLoggingEvents.length>0){queuedRequests.push(batchedLoggingEvents)}waitForResponse=false;timed=false;sendAll()}}function preparePostData(batchedLoggingEvents){var formattedMessages=[];var currentLoggingEvent;var postData="";while((currentLoggingEvent=batchedLoggingEvents.shift())){var currentFormattedMessage=appender.getLayout().format(currentLoggingEvent);if(appender.getLayout().ignoresThrowable()){currentFormattedMessage+=loggingEvent.getThrowableStrRep()}formattedMessages.push(currentFormattedMessage)}if(batchedLoggingEvents.length==1){postData=formattedMessages.join("")}else{postData=appender.getLayout().batchHeader+formattedMessages.join(appender.getLayout().batchSeparator)+appender.getLayout().batchFooter}postData=appender.getLayout().returnsPostData?postData:urlEncode(postVarName)+"="+urlEncode(postData);if(postData.length>0){postData+="&"}return postData+"layout="+urlEncode(appender.getLayout().toString())}function scheduleSending(){setTimeout(sendAll,timerInterval)}function xmlHttpErrorHandler(){var msg="AjaxAppender: could not create XMLHttpRequest object. AjaxAppender disabled";handleError(msg);isSupported=false;if(failCallback){failCallback(msg)}}function sendRequest(postData,successCallback){try{var xmlHttp=getXmlHttp(xmlHttpErrorHandler);if(isSupported){if(xmlHttp.overrideMimeType){xmlHttp.overrideMimeType(appender.getLayout().getContentType())}xmlHttp.onreadystatechange=function(){if(xmlHttp.readyState==4){if(isHttpRequestSuccessful(xmlHttp)){if(requestSuccessCallback){requestSuccessCallback(xmlHttp)}if(successCallback){successCallback(xmlHttp)}}else{var msg="AjaxAppender.append: XMLHttpRequest request to URL "+url+" returned status code "+xmlHttp.status;handleError(msg);if(failCallback){failCallback(msg)}}xmlHttp.onreadystatechange=emptyFunction;xmlHttp=null}};xmlHttp.open("POST",url,true);try{xmlHttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}catch(headerEx){var msg="AjaxAppender.append: your browser's XMLHttpRequest implementation does not support setRequestHeader, therefore cannot post data. AjaxAppender disabled";handleError(msg);isSupported=false;if(failCallback){failCallback(msg)}return}xmlHttp.send(postData)}}catch(ex){var errMsg="AjaxAppender.append: error sending log message to "+url;handleError(errMsg,ex);isSupported=false;if(failCallback){failCallback(errMsg+". Details: "+getExceptionStringRep(ex))}}}this.append=function(loggingEvent){if(isSupported){if(!initialized){init()}queuedLoggingEvents.push(loggingEvent);var actualBatchSize=this.getLayout().allowBatching()?batchSize:1;if(queuedLoggingEvents.length>=actualBatchSize){var currentLoggingEvent;var postData="";var batchedLoggingEvents=[];while((currentLoggingEvent=queuedLoggingEvents.shift())){batchedLoggingEvents.push(currentLoggingEvent)}queuedRequests.push(batchedLoggingEvents);if(!timed){if(!waitForResponse||(waitForResponse&&!sending)){sendAll()}}}}};function init(){initialized=true;if(sendAllOnUnload){addEvent(window,"unload",sendAllRemaining)}if(timed){scheduleSending()}}}AjaxAppender.prototype=new Appender();AjaxAppender.prototype.defaults={waitForResponse:false,timed:false,timerInterval:1000,batchSize:1,sendAllOnUnload:true,requestSuccessCallback:null,failCallback:null,postVarName:"data"};AjaxAppender.prototype.layout=new HttpPostDataLayout();AjaxAppender.prototype.toString=function(){return"AjaxAppender"};log4javascript.AjaxAppender=AjaxAppender;function setCookie(name,value,days,path){var expires;path=path?"; path="+path:"";if(days){var date=new Date();date.setTime(date.getTime()+(days*24*60*60*1000));expires="; expires="+date.toGMTString()}else{expires=""}document.cookie=escape(name)+"="+escape(value)+expires+path}function getCookie(name){var nameEquals=escape(name)+"=";var ca=document.cookie.split(";");for(var i=0,len=ca.length;i<len;i++){var c=ca[i];while(c.charAt(0)===" "){c=c.substring(1,c.length)}if(c.indexOf(nameEquals)===0){return unescape(c.substring(nameEquals.length,c.length))}}return null}function getBaseUrl(){var scripts=document.getElementsByTagName("script");for(var i=0,len=scripts.length;i<len;++i){if(scripts[i].src.indexOf("log4javascript")!=-1){var lastSlash=scripts[i].src.lastIndexOf("/");return(lastSlash==-1)?"":scripts[i].src.substr(0,lastSlash+1)}}return null}function isLoaded(win){try{return bool(win.loaded)}catch(ex){return false}}var ConsoleAppender;(function(){var getConsoleHtmlLines=function(){return['<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">','<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">',"	<head>","		<title>log4javascript</title>",'		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />',"		<!-- Make IE8 behave like IE7, having gone to all the trouble of making IE work -->",'		<meta http-equiv="X-UA-Compatible" content="IE=7" />','		<script type="text/javascript">var isIe = false, isIePre7 = false;<\/script>','		<!--[if IE]><script type="text/javascript">isIe = true<\/script><![endif]-->','		<!--[if lt IE 7]><script type="text/javascript">isIePre7 = true<\/script><![endif]-->','		<script type="text/javascript">',"			//<![CDATA[","			var loggingEnabled = true;","			var logQueuedEventsTimer = null;","			var logEntries = [];","			var logEntriesAndSeparators = [];","			var logItems = [];","			var renderDelay = 100;","			var unrenderedLogItemsExist = false;","			var rootGroup, currentGroup = null;","			var loaded = false;","			var currentLogItem = null;","			var logMainContainer;","","			function copyProperties(obj, props) {","				for (var i in props) {","					obj[i] = props[i];","				}","			}","","			/*----------------------------------------------------------------*/","","			function LogItem() {","			}","","			LogItem.prototype = {","				mainContainer: null,","				wrappedContainer: null,","				unwrappedContainer: null,","				group: null,","","				appendToLog: function() {","					for (var i = 0, len = this.elementContainers.length; i < len; i++) {","						this.elementContainers[i].appendToLog();","					}","					this.group.update();","				},","","				doRemove: function(doUpdate, removeFromGroup) {","					if (this.rendered) {","						for (var i = 0, len = this.elementContainers.length; i < len; i++) {","							this.elementContainers[i].remove();","						}","						this.unwrappedElementContainer = null;","						this.wrappedElementContainer = null;","						this.mainElementContainer = null;","					}","					if (this.group && removeFromGroup) {","						this.group.removeChild(this, doUpdate);","					}","					if (this === currentLogItem) {","						currentLogItem = null;","					}","				},","","				remove: function(doUpdate, removeFromGroup) {","					this.doRemove(doUpdate, removeFromGroup);","				},","","				render: function() {},","","				accept: function(visitor) {","					visitor.visit(this);","				},","","				getUnwrappedDomContainer: function() {","					return this.group.unwrappedElementContainer.contentDiv;","				},","","				getWrappedDomContainer: function() {","					return this.group.wrappedElementContainer.contentDiv;","				},","","				getMainDomContainer: function() {","					return this.group.mainElementContainer.contentDiv;","				}","			};","","			LogItem.serializedItemKeys = {LOG_ENTRY: 0, GROUP_START: 1, GROUP_END: 2};","","			/*----------------------------------------------------------------*/","","			function LogItemContainerElement() {","			}","","			LogItemContainerElement.prototype = {","				appendToLog: function() {","					var insertBeforeFirst = (newestAtTop && this.containerDomNode.hasChildNodes());","					if (insertBeforeFirst) {","						this.containerDomNode.insertBefore(this.mainDiv, this.containerDomNode.firstChild);","					} else {","						this.containerDomNode.appendChild(this.mainDiv);","					}","				}","			};","","			/*----------------------------------------------------------------*/","","			function SeparatorElementContainer(containerDomNode) {","				this.containerDomNode = containerDomNode;",'				this.mainDiv = document.createElement("div");','				this.mainDiv.className = "separator";','				this.mainDiv.innerHTML = "&nbsp;";',"			}","","			SeparatorElementContainer.prototype = new LogItemContainerElement();","","			SeparatorElementContainer.prototype.remove = function() {","				this.mainDiv.parentNode.removeChild(this.mainDiv);","				this.mainDiv = null;","			};","","			/*----------------------------------------------------------------*/","","			function Separator() {","				this.rendered = false;","			}","","			Separator.prototype = new LogItem();","","			copyProperties(Separator.prototype, {","				render: function() {","					var containerDomNode = this.group.contentDiv;","					if (isIe) {","						this.unwrappedElementContainer = new SeparatorElementContainer(this.getUnwrappedDomContainer());","						this.wrappedElementContainer = new SeparatorElementContainer(this.getWrappedDomContainer());","						this.elementContainers = [this.unwrappedElementContainer, this.wrappedElementContainer];","					} else {","						this.mainElementContainer = new SeparatorElementContainer(this.getMainDomContainer());","						this.elementContainers = [this.mainElementContainer];","					}","					this.content = this.formattedMessage;","					this.rendered = true;","				}","			});","","			/*----------------------------------------------------------------*/","","			function GroupElementContainer(group, containerDomNode, isRoot, isWrapped) {","				this.group = group;","				this.containerDomNode = containerDomNode;","				this.isRoot = isRoot;","				this.isWrapped = isWrapped;","				this.expandable = false;","","				if (this.isRoot) {","					if (isIe) {",'						this.contentDiv = logMainContainer.appendChild(document.createElement("div"));','						this.contentDiv.id = this.isWrapped ? "log_wrapped" : "log_unwrapped";',"					} else {","						this.contentDiv = logMainContainer;","					}","				} else {","					var groupElementContainer = this;","					",'					this.mainDiv = document.createElement("div");','					this.mainDiv.className = "group";',"",'					this.headingDiv = this.mainDiv.appendChild(document.createElement("div"));','					this.headingDiv.className = "groupheading";',"",'					this.expander = this.headingDiv.appendChild(document.createElement("span"));','					this.expander.className = "expander unselectable greyedout";',"					this.expander.unselectable = true;",'					var expanderText = this.group.expanded ? "-" : "+";',"					this.expanderTextNode = this.expander.appendChild(document.createTextNode(expanderText));","					",'					this.headingDiv.appendChild(document.createTextNode(" " + this.group.name));',"",'					this.contentDiv = this.mainDiv.appendChild(document.createElement("div"));','					var contentCssClass = this.group.expanded ? "expanded" : "collapsed";','					this.contentDiv.className = "groupcontent " + contentCssClass;',"","					this.expander.onclick = function() {","						if (groupElementContainer.group.expandable) {","							groupElementContainer.group.toggleExpanded();","						}","					};","				}","			}","","			GroupElementContainer.prototype = new LogItemContainerElement();","","			copyProperties(GroupElementContainer.prototype, {","				toggleExpanded: function() {","					if (!this.isRoot) {","						var oldCssClass, newCssClass, expanderText;","						if (this.group.expanded) {",'							newCssClass = "expanded";','							oldCssClass = "collapsed";','							expanderText = "-";',"						} else {",'							newCssClass = "collapsed";','							oldCssClass = "expanded";','							expanderText = "+";',"						}","						replaceClass(this.contentDiv, newCssClass, oldCssClass);","						this.expanderTextNode.nodeValue = expanderText;","					}","				},","","				remove: function() {","					if (!this.isRoot) {","						this.headingDiv = null;","						this.expander.onclick = null;","						this.expander = null;","						this.expanderTextNode = null;","						this.contentDiv = null;","						this.containerDomNode = null;","						this.mainDiv.parentNode.removeChild(this.mainDiv);","						this.mainDiv = null;","					}","				},","","				reverseChildren: function() {","					// Invert the order of the log entries","					var node = null;","","					// Remove all the log container nodes","					var childDomNodes = [];","					while ((node = this.contentDiv.firstChild)) {","						this.contentDiv.removeChild(node);","						childDomNodes.push(node);","					}","","					// Put them all back in reverse order","					while ((node = childDomNodes.pop())) {","						this.contentDiv.appendChild(node);","					}","				},","","				update: function() {","					if (!this.isRoot) {","						if (this.group.expandable) {",'							removeClass(this.expander, "greyedout");',"						} else {",'							addClass(this.expander, "greyedout");',"						}","					}","				},","","				clear: function() {","					if (this.isRoot) {",'						this.contentDiv.innerHTML = "";',"					}","				}","			});","","			/*----------------------------------------------------------------*/","","			function Group(name, isRoot, initiallyExpanded) {","				this.name = name;","				this.group = null;","				this.isRoot = isRoot;","				this.initiallyExpanded = initiallyExpanded;","				this.elementContainers = [];","				this.children = [];","				this.expanded = initiallyExpanded;","				this.rendered = false;","				this.expandable = false;","			}","","			Group.prototype = new LogItem();","","			copyProperties(Group.prototype, {","				addChild: function(logItem) {","					this.children.push(logItem);","					logItem.group = this;","				},","","				render: function() {","					if (isIe) {","						var unwrappedDomContainer, wrappedDomContainer;","						if (this.isRoot) {","							unwrappedDomContainer = logMainContainer;","							wrappedDomContainer = logMainContainer;","						} else {","							unwrappedDomContainer = this.getUnwrappedDomContainer();","							wrappedDomContainer = this.getWrappedDomContainer();","						}","						this.unwrappedElementContainer = new GroupElementContainer(this, unwrappedDomContainer, this.isRoot, false);","						this.wrappedElementContainer = new GroupElementContainer(this, wrappedDomContainer, this.isRoot, true);","						this.elementContainers = [this.unwrappedElementContainer, this.wrappedElementContainer];","					} else {","						var mainDomContainer = this.isRoot ? logMainContainer : this.getMainDomContainer();","						this.mainElementContainer = new GroupElementContainer(this, mainDomContainer, this.isRoot, false);","						this.elementContainers = [this.mainElementContainer];","					}","					this.rendered = true;","				},","","				toggleExpanded: function() {","					this.expanded = !this.expanded;","					for (var i = 0, len = this.elementContainers.length; i < len; i++) {","						this.elementContainers[i].toggleExpanded();","					}","				},","","				expand: function() {","					if (!this.expanded) {","						this.toggleExpanded();","					}","				},","","				accept: function(visitor) {","					visitor.visitGroup(this);","				},","","				reverseChildren: function() {","					if (this.rendered) {","						for (var i = 0, len = this.elementContainers.length; i < len; i++) {","							this.elementContainers[i].reverseChildren();","						}","					}","				},","","				update: function() {","					var previouslyExpandable = this.expandable;","					this.expandable = (this.children.length !== 0);","					if (this.expandable !== previouslyExpandable) {","						for (var i = 0, len = this.elementContainers.length; i < len; i++) {","							this.elementContainers[i].update();","						}","					}","				},","","				flatten: function() {","					var visitor = new GroupFlattener();","					this.accept(visitor);","					return visitor.logEntriesAndSeparators;","				},","","				removeChild: function(child, doUpdate) {","					array_remove(this.children, child);","					child.group = null;","					if (doUpdate) {","						this.update();","					}","				},","","				remove: function(doUpdate, removeFromGroup) {","					for (var i = 0, len = this.children.length; i < len; i++) {","						this.children[i].remove(false, false);","					}","					this.children = [];","					this.update();","					if (this === currentGroup) {","						currentGroup = this.group;","					}","					this.doRemove(doUpdate, removeFromGroup);","				},","","				serialize: function(items) {","					items.push([LogItem.serializedItemKeys.GROUP_START, this.name]);","					for (var i = 0, len = this.children.length; i < len; i++) {","						this.children[i].serialize(items);","					}","					if (this !== currentGroup) {","						items.push([LogItem.serializedItemKeys.GROUP_END]);","					}","				},","","				clear: function() {","					for (var i = 0, len = this.elementContainers.length; i < len; i++) {","						this.elementContainers[i].clear();","					}","				}","			});","","			/*----------------------------------------------------------------*/","","			function LogEntryElementContainer() {","			}","","			LogEntryElementContainer.prototype = new LogItemContainerElement();","","			copyProperties(LogEntryElementContainer.prototype, {","				remove: function() {","					this.doRemove();","				},","","				doRemove: function() {","					this.mainDiv.parentNode.removeChild(this.mainDiv);","					this.mainDiv = null;","					this.contentElement = null;","					this.containerDomNode = null;","				},","","				setContent: function(content, wrappedContent) {","					if (content === this.formattedMessage) {",'						this.contentElement.innerHTML = "";',"						this.contentElement.appendChild(document.createTextNode(this.formattedMessage));","					} else {","						this.contentElement.innerHTML = content;","					}","				},","","				setSearchMatch: function(isMatch) {",'					var oldCssClass = isMatch ? "searchnonmatch" : "searchmatch";','					var newCssClass = isMatch ? "searchmatch" : "searchnonmatch";',"					replaceClass(this.mainDiv, newCssClass, oldCssClass);","				},","","				clearSearch: function() {",'					removeClass(this.mainDiv, "searchmatch");','					removeClass(this.mainDiv, "searchnonmatch");',"				}","			});","","			/*----------------------------------------------------------------*/","","			function LogEntryWrappedElementContainer(logEntry, containerDomNode) {","				this.logEntry = logEntry;","				this.containerDomNode = containerDomNode;",'				this.mainDiv = document.createElement("div");',"				this.mainDiv.appendChild(document.createTextNode(this.logEntry.formattedMessage));",'				this.mainDiv.className = "logentry wrapped " + this.logEntry.level;',"				this.contentElement = this.mainDiv;","			}","","			LogEntryWrappedElementContainer.prototype = new LogEntryElementContainer();","","			LogEntryWrappedElementContainer.prototype.setContent = function(content, wrappedContent) {","				if (content === this.formattedMessage) {",'					this.contentElement.innerHTML = "";',"					this.contentElement.appendChild(document.createTextNode(this.formattedMessage));","				} else {","					this.contentElement.innerHTML = wrappedContent;","				}","			};","","			/*----------------------------------------------------------------*/","","			function LogEntryUnwrappedElementContainer(logEntry, containerDomNode) {","				this.logEntry = logEntry;","				this.containerDomNode = containerDomNode;",'				this.mainDiv = document.createElement("div");','				this.mainDiv.className = "logentry unwrapped " + this.logEntry.level;','				this.pre = this.mainDiv.appendChild(document.createElement("pre"));',"				this.pre.appendChild(document.createTextNode(this.logEntry.formattedMessage));",'				this.pre.className = "unwrapped";',"				this.contentElement = this.pre;","			}","","			LogEntryUnwrappedElementContainer.prototype = new LogEntryElementContainer();","","			LogEntryUnwrappedElementContainer.prototype.remove = function() {","				this.doRemove();","				this.pre = null;","			};","","			/*----------------------------------------------------------------*/","","			function LogEntryMainElementContainer(logEntry, containerDomNode) {","				this.logEntry = logEntry;","				this.containerDomNode = containerDomNode;",'				this.mainDiv = document.createElement("div");','				this.mainDiv.className = "logentry nonielogentry " + this.logEntry.level;','				this.contentElement = this.mainDiv.appendChild(document.createElement("span"));',"				this.contentElement.appendChild(document.createTextNode(this.logEntry.formattedMessage));","			}","","			LogEntryMainElementContainer.prototype = new LogEntryElementContainer();","","			/*----------------------------------------------------------------*/","","			function LogEntry(level, formattedMessage) {","				this.level = level;","				this.formattedMessage = formattedMessage;","				this.rendered = false;","			}","","			LogEntry.prototype = new LogItem();","","			copyProperties(LogEntry.prototype, {","				render: function() {","					var logEntry = this;","					var containerDomNode = this.group.contentDiv;","","					// Support for the CSS attribute white-space in IE for Windows is","					// non-existent pre version 6 and slightly odd in 6, so instead","					// use two different HTML elements","					if (isIe) {",'						this.formattedMessage = this.formattedMessage.replace(/\\r\\n/g, "\\r"); // Workaround for IE\'s treatment of white space',"						this.unwrappedElementContainer = new LogEntryUnwrappedElementContainer(this, this.getUnwrappedDomContainer());","						this.wrappedElementContainer = new LogEntryWrappedElementContainer(this, this.getWrappedDomContainer());","						this.elementContainers = [this.unwrappedElementContainer, this.wrappedElementContainer];","					} else {","						this.mainElementContainer = new LogEntryMainElementContainer(this, this.getMainDomContainer());","						this.elementContainers = [this.mainElementContainer];","					}","					this.content = this.formattedMessage;","					this.rendered = true;","				},","","				setContent: function(content, wrappedContent) {","					if (content != this.content) {","						if (isIe && (content !== this.formattedMessage)) {",'							content = content.replace(/\\r\\n/g, "\\r"); // Workaround for IE\'s treatment of white space',"						}","						for (var i = 0, len = this.elementContainers.length; i < len; i++) {","							this.elementContainers[i].setContent(content, wrappedContent);","						}","						this.content = content;","					}","				},","","				getSearchMatches: function() {","					var matches = [];","					var i, len;","					if (isIe) {",'						var unwrappedEls = getElementsByClass(this.unwrappedElementContainer.mainDiv, "searchterm", "span");','						var wrappedEls = getElementsByClass(this.wrappedElementContainer.mainDiv, "searchterm", "span");',"						for (i = 0, len = unwrappedEls.length; i < len; i++) {","							matches[i] = new Match(this.level, null, unwrappedEls[i], wrappedEls[i]);","						}","					} else {",'						var els = getElementsByClass(this.mainElementContainer.mainDiv, "searchterm", "span");',"						for (i = 0, len = els.length; i < len; i++) {","							matches[i] = new Match(this.level, els[i]);","						}","					}","					return matches;","				},","","				setSearchMatch: function(isMatch) {","					for (var i = 0, len = this.elementContainers.length; i < len; i++) {","						this.elementContainers[i].setSearchMatch(isMatch);","					}","				},","","				clearSearch: function() {","					for (var i = 0, len = this.elementContainers.length; i < len; i++) {","						this.elementContainers[i].clearSearch();","					}","				},","","				accept: function(visitor) {","					visitor.visitLogEntry(this);","				},","","				serialize: function(items) {","					items.push([LogItem.serializedItemKeys.LOG_ENTRY, this.level, this.formattedMessage]);","				}","			});","","			/*----------------------------------------------------------------*/","","			function LogItemVisitor() {","			}","","			LogItemVisitor.prototype = {","				visit: function(logItem) {","				},","","				visitParent: function(logItem) {","					if (logItem.group) {","						logItem.group.accept(this);","					}","				},","","				visitChildren: function(logItem) {","					for (var i = 0, len = logItem.children.length; i < len; i++) {","						logItem.children[i].accept(this);","					}","				},","","				visitLogEntry: function(logEntry) {","					this.visit(logEntry);","				},","","				visitSeparator: function(separator) {","					this.visit(separator);","				},","","				visitGroup: function(group) {","					this.visit(group);","				}","			};","","			/*----------------------------------------------------------------*/","","			function GroupFlattener() {","				this.logEntriesAndSeparators = [];","			}","","			GroupFlattener.prototype = new LogItemVisitor();","","			GroupFlattener.prototype.visitGroup = function(group) {","				this.visitChildren(group);","			};","","			GroupFlattener.prototype.visitLogEntry = function(logEntry) {","				this.logEntriesAndSeparators.push(logEntry);","			};","","			GroupFlattener.prototype.visitSeparator = function(separator) {","				this.logEntriesAndSeparators.push(separator);","			};","","			/*----------------------------------------------------------------*/","","			window.onload = function() {","				// Sort out document.domain","				if (location.search) {",'					var queryBits = unescape(location.search).substr(1).split("&"), nameValueBits;',"					for (var i = 0, len = queryBits.length; i < len; i++) {",'						nameValueBits = queryBits[i].split("=");','						if (nameValueBits[0] == "log4javascript_domain") {',"							document.domain = nameValueBits[1];","							break;","						}","					}","				}","","				// Create DOM objects",'				logMainContainer = $("log");',"				if (isIePre7) {",'					addClass(logMainContainer, "oldIe");',"				}","",'				rootGroup = new Group("root", true);',"				rootGroup.render();","				currentGroup = rootGroup;","				","				setCommandInputWidth();","				setLogContainerHeight();","				toggleLoggingEnabled();","				toggleSearchEnabled();","				toggleSearchFilter();","				toggleSearchHighlight();","				applyFilters();","				checkAllLevels();","				toggleWrap();","				toggleNewestAtTop();","				toggleScrollToLatest();","				renderQueuedLogItems();","				loaded = true;",'				$("command").value = "";','				$("command").autocomplete = "off";','				$("command").onkeydown = function(evt) {',"					evt = getEvent(evt);","					if (evt.keyCode == 10 || evt.keyCode == 13) { // Return/Enter","						evalCommandLine();","						stopPropagation(evt);","					} else if (evt.keyCode == 27) { // Escape",'						this.value = "";',"						this.focus();","					} else if (evt.keyCode == 38 && commandHistory.length > 0) { // Up","						currentCommandIndex = Math.max(0, currentCommandIndex - 1);","						this.value = commandHistory[currentCommandIndex];","						moveCaretToEnd(this);","					} else if (evt.keyCode == 40 && commandHistory.length > 0) { // Down","						currentCommandIndex = Math.min(commandHistory.length - 1, currentCommandIndex + 1);","						this.value = commandHistory[currentCommandIndex];","						moveCaretToEnd(this);","					}","				};","","				// Prevent the keypress moving the caret in Firefox",'				$("command").onkeypress = function(evt) {',"					evt = getEvent(evt);","					if (evt.keyCode == 38 && commandHistory.length > 0 && evt.preventDefault) { // Up","						evt.preventDefault();","					}","				};","","				// Prevent the keyup event blurring the input in Opera",'				$("command").onkeyup = function(evt) {',"					evt = getEvent(evt);","					if (evt.keyCode == 27 && evt.preventDefault) { // Up","						evt.preventDefault();","						this.focus();","					}","				};","","				// Add document keyboard shortcuts","				document.onkeydown = function keyEventHandler(evt) {","					evt = getEvent(evt);","					switch (evt.keyCode) {","						case 69: // Ctrl + shift + E: re-execute last command","							if (evt.shiftKey && (evt.ctrlKey || evt.metaKey)) {","								evalLastCommand();","								cancelKeyEvent(evt);","								return false;","							}","							break;","						case 75: // Ctrl + shift + K: focus search","							if (evt.shiftKey && (evt.ctrlKey || evt.metaKey)) {","								focusSearch();","								cancelKeyEvent(evt);","								return false;","							}","							break;","						case 40: // Ctrl + shift + down arrow: focus command line","						case 76: // Ctrl + shift + L: focus command line","							if (evt.shiftKey && (evt.ctrlKey || evt.metaKey)) {","								focusCommandLine();","								cancelKeyEvent(evt);","								return false;","							}","							break;","					}","				};","","				// Workaround to make sure log div starts at the correct size","				setTimeout(setLogContainerHeight, 20);","","				setShowCommandLine(showCommandLine);","				doSearch();","			};","","			window.onunload = function() {","				if (mainWindowExists()) {","					appender.unload();","				}","				appender = null;","			};","","			/*----------------------------------------------------------------*/","","			function toggleLoggingEnabled() {",'				setLoggingEnabled($("enableLogging").checked);',"			}","","			function setLoggingEnabled(enable) {","				loggingEnabled = enable;","			}","","			var appender = null;","","			function setAppender(appenderParam) {","				appender = appenderParam;","			}","","			function setShowCloseButton(showCloseButton) {",'				$("closeButton").style.display = showCloseButton ? "inline" : "none";',"			}","","			function setShowHideButton(showHideButton) {",'				$("hideButton").style.display = showHideButton ? "inline" : "none";',"			}","","			var newestAtTop = false;","","			/*----------------------------------------------------------------*/","","			function LogItemContentReverser() {","			}","			","			LogItemContentReverser.prototype = new LogItemVisitor();","			","			LogItemContentReverser.prototype.visitGroup = function(group) {","				group.reverseChildren();","				this.visitChildren(group);","			};","","			/*----------------------------------------------------------------*/","","			function setNewestAtTop(isNewestAtTop) {","				var oldNewestAtTop = newestAtTop;","				var i, iLen, j, jLen;","				newestAtTop = Boolean(isNewestAtTop);","				if (oldNewestAtTop != newestAtTop) {","					var visitor = new LogItemContentReverser();","					rootGroup.accept(visitor);","","					// Reassemble the matches array","					if (currentSearch) {","						var currentMatch = currentSearch.matches[currentMatchIndex];","						var matchIndex = 0;","						var matches = [];","						var actOnLogEntry = function(logEntry) {","							var logEntryMatches = logEntry.getSearchMatches();","							for (j = 0, jLen = logEntryMatches.length; j < jLen; j++) {","								matches[matchIndex] = logEntryMatches[j];","								if (currentMatch && logEntryMatches[j].equals(currentMatch)) {","									currentMatchIndex = matchIndex;","								}","								matchIndex++;","							}","						};","						if (newestAtTop) {","							for (i = logEntries.length - 1; i >= 0; i--) {","								actOnLogEntry(logEntries[i]);","							}","						} else {","							for (i = 0, iLen = logEntries.length; i < iLen; i++) {","								actOnLogEntry(logEntries[i]);","							}","						}","						currentSearch.matches = matches;","						if (currentMatch) {","							currentMatch.setCurrent();","						}","					} else if (scrollToLatest) {","						doScrollToLatest();","					}","				}",'				$("newestAtTop").checked = isNewestAtTop;',"			}","","			function toggleNewestAtTop() {",'				var isNewestAtTop = $("newestAtTop").checked;',"				setNewestAtTop(isNewestAtTop);","			}","","			var scrollToLatest = true;","","			function setScrollToLatest(isScrollToLatest) {","				scrollToLatest = isScrollToLatest;","				if (scrollToLatest) {","					doScrollToLatest();","				}",'				$("scrollToLatest").checked = isScrollToLatest;',"			}","","			function toggleScrollToLatest() {",'				var isScrollToLatest = $("scrollToLatest").checked;',"				setScrollToLatest(isScrollToLatest);","			}","","			function doScrollToLatest() {","				var l = logMainContainer;",'				if (typeof l.scrollTop != "undefined") {',"					if (newestAtTop) {","						l.scrollTop = 0;","					} else {","						var latestLogEntry = l.lastChild;","						if (latestLogEntry) {","							l.scrollTop = l.scrollHeight;","						}","					}","				}","			}","","			var closeIfOpenerCloses = true;","","			function setCloseIfOpenerCloses(isCloseIfOpenerCloses) {","				closeIfOpenerCloses = isCloseIfOpenerCloses;","			}","","			var maxMessages = null;","","			function setMaxMessages(max) {","				maxMessages = max;","				pruneLogEntries();","			}","","			var showCommandLine = false;","","			function setShowCommandLine(isShowCommandLine) {","				showCommandLine = isShowCommandLine;","				if (loaded) {",'					$("commandLine").style.display = showCommandLine ? "block" : "none";',"					setCommandInputWidth();","					setLogContainerHeight();","				}","			}","","			function focusCommandLine() {","				if (loaded) {",'					$("command").focus();',"				}","			}","","			function focusSearch() {","				if (loaded) {",'					$("searchBox").focus();',"				}","			}","","			function getLogItems() {","				var items = [];","				for (var i = 0, len = logItems.length; i < len; i++) {","					logItems[i].serialize(items);","				}","				return items;","			}","","			function setLogItems(items) {","				var loggingReallyEnabled = loggingEnabled;","				// Temporarily turn logging on","				loggingEnabled = true;","				for (var i = 0, len = items.length; i < len; i++) {","					switch (items[i][0]) {","						case LogItem.serializedItemKeys.LOG_ENTRY:","							log(items[i][1], items[i][2]);","							break;","						case LogItem.serializedItemKeys.GROUP_START:","							group(items[i][1]);","							break;","						case LogItem.serializedItemKeys.GROUP_END:","							groupEnd();","							break;","					}","				}","				loggingEnabled = loggingReallyEnabled;","			}","","			function log(logLevel, formattedMessage) {","				if (loggingEnabled) {","					var logEntry = new LogEntry(logLevel, formattedMessage);","					logEntries.push(logEntry);","					logEntriesAndSeparators.push(logEntry);","					logItems.push(logEntry);","					currentGroup.addChild(logEntry);","					if (loaded) {","						if (logQueuedEventsTimer !== null) {","							clearTimeout(logQueuedEventsTimer);","						}","						logQueuedEventsTimer = setTimeout(renderQueuedLogItems, renderDelay);","						unrenderedLogItemsExist = true;","					}","				}","			}","","			function renderQueuedLogItems() {","				logQueuedEventsTimer = null;","				var pruned = pruneLogEntries();","","				// Render any unrendered log entries and apply the current search to them","				var initiallyHasMatches = currentSearch ? currentSearch.hasMatches() : false;","				for (var i = 0, len = logItems.length; i < len; i++) {","					if (!logItems[i].rendered) {","						logItems[i].render();","						logItems[i].appendToLog();","						if (currentSearch && (logItems[i] instanceof LogEntry)) {","							currentSearch.applyTo(logItems[i]);","						}","					}","				}","				if (currentSearch) {","					if (pruned) {","						if (currentSearch.hasVisibleMatches()) {","							if (currentMatchIndex === null) {","								setCurrentMatchIndex(0);","							}","							displayMatches();","						} else {","							displayNoMatches();","						}","					} else if (!initiallyHasMatches && currentSearch.hasVisibleMatches()) {","						setCurrentMatchIndex(0);","						displayMatches();","					}","				}","				if (scrollToLatest) {","					doScrollToLatest();","				}","				unrenderedLogItemsExist = false;","			}","","			function pruneLogEntries() {","				if ((maxMessages !== null) && (logEntriesAndSeparators.length > maxMessages)) {","					var numberToDelete = logEntriesAndSeparators.length - maxMessages;","					var prunedLogEntries = logEntriesAndSeparators.slice(0, numberToDelete);","					if (currentSearch) {","						currentSearch.removeMatches(prunedLogEntries);","					}","					var group;","					for (var i = 0; i < numberToDelete; i++) {","						group = logEntriesAndSeparators[i].group;","						array_remove(logItems, logEntriesAndSeparators[i]);","						array_remove(logEntries, logEntriesAndSeparators[i]);","						logEntriesAndSeparators[i].remove(true, true);","						if (group.children.length === 0 && group !== currentGroup && group !== rootGroup) {","							array_remove(logItems, group);","							group.remove(true, true);","						}","					}","					logEntriesAndSeparators = array_removeFromStart(logEntriesAndSeparators, numberToDelete);","					return true;","				}","				return false;","			}","","			function group(name, startExpanded) {","				if (loggingEnabled) {",'					initiallyExpanded = (typeof startExpanded === "undefined") ? true : Boolean(startExpanded);',"					var newGroup = new Group(name, false, initiallyExpanded);","					currentGroup.addChild(newGroup);","					currentGroup = newGroup;","					logItems.push(newGroup);","					if (loaded) {","						if (logQueuedEventsTimer !== null) {","							clearTimeout(logQueuedEventsTimer);","						}","						logQueuedEventsTimer = setTimeout(renderQueuedLogItems, renderDelay);","						unrenderedLogItemsExist = true;","					}","				}","			}","","			function groupEnd() {","				currentGroup = (currentGroup === rootGroup) ? rootGroup : currentGroup.group;","			}","","			function mainPageReloaded() {","				currentGroup = rootGroup;","				var separator = new Separator();","				logEntriesAndSeparators.push(separator);","				logItems.push(separator);","				currentGroup.addChild(separator);","			}","","			function closeWindow() {","				if (appender && mainWindowExists()) {","					appender.close(true);","				} else {","					window.close();","				}","			}","","			function hide() {","				if (appender && mainWindowExists()) {","					appender.hide();","				}","			}","","			var mainWindow = window;",'			var windowId = "log4javascriptConsoleWindow_" + new Date().getTime() + "_" + ("" + Math.random()).substr(2);',"","			function setMainWindow(win) {","				mainWindow = win;","				mainWindow[windowId] = window;","				// If this is a pop-up, poll the opener to see if it's closed","				if (opener && closeIfOpenerCloses) {","					pollOpener();","				}","			}","","			function pollOpener() {","				if (closeIfOpenerCloses) {","					if (mainWindowExists()) {","						setTimeout(pollOpener, 500);","					} else {","						closeWindow();","					}","				}","			}","","			function mainWindowExists() {","				try {","					return (mainWindow && !mainWindow.closed &&","						mainWindow[windowId] == window);","				} catch (ex) {}","				return false;","			}","",'			var logLevels = ["TRACE", "DEBUG", "INFO", "WARN", "ERROR", "FATAL"];',"","			function getCheckBox(logLevel) {",'				return $("switch_" + logLevel);',"			}","","			function getIeWrappedLogContainer() {",'				return $("log_wrapped");',"			}","","			function getIeUnwrappedLogContainer() {",'				return $("log_unwrapped");',"			}","","			function applyFilters() {","				for (var i = 0; i < logLevels.length; i++) {","					if (getCheckBox(logLevels[i]).checked) {","						addClass(logMainContainer, logLevels[i]);","					} else {","						removeClass(logMainContainer, logLevels[i]);","					}","				}","				updateSearchFromFilters();","			}","","			function toggleAllLevels() {",'				var turnOn = $("switch_ALL").checked;',"				for (var i = 0; i < logLevels.length; i++) {","					getCheckBox(logLevels[i]).checked = turnOn;","					if (turnOn) {","						addClass(logMainContainer, logLevels[i]);","					} else {","						removeClass(logMainContainer, logLevels[i]);","					}","				}","			}","","			function checkAllLevels() {","				for (var i = 0; i < logLevels.length; i++) {","					if (!getCheckBox(logLevels[i]).checked) {",'						getCheckBox("ALL").checked = false;',"						return;","					}","				}",'				getCheckBox("ALL").checked = true;',"			}","","			function clearLog() {","				rootGroup.clear();","				currentGroup = rootGroup;","				logEntries = [];","				logItems = [];","				logEntriesAndSeparators = [];"," 				doSearch();","			}","","			function toggleWrap() {",'				var enable = $("wrap").checked;',"				if (enable) {",'					addClass(logMainContainer, "wrap");',"				} else {",'					removeClass(logMainContainer, "wrap");',"				}","				refreshCurrentMatch();","			}","","			/* ------------------------------------------------------------------- */","","			// Search","","			var searchTimer = null;","","			function scheduleSearch() {","				try {","					clearTimeout(searchTimer);","				} catch (ex) {","					// Do nothing","				}","				searchTimer = setTimeout(doSearch, 500);","			}","","			function Search(searchTerm, isRegex, searchRegex, isCaseSensitive) {","				this.searchTerm = searchTerm;","				this.isRegex = isRegex;","				this.searchRegex = searchRegex;","				this.isCaseSensitive = isCaseSensitive;","				this.matches = [];","			}","","			Search.prototype = {","				hasMatches: function() {","					return this.matches.length > 0;","				},","","				hasVisibleMatches: function() {","					if (this.hasMatches()) {","						for (var i = 0; i < this.matches.length; i++) {","							if (this.matches[i].isVisible()) {","								return true;","							}","						}","					}","					return false;","				},","","				match: function(logEntry) {","					var entryText = String(logEntry.formattedMessage);","					var matchesSearch = false;","					if (this.isRegex) {","						matchesSearch = this.searchRegex.test(entryText);","					} else if (this.isCaseSensitive) {","						matchesSearch = (entryText.indexOf(this.searchTerm) > -1);","					} else {","						matchesSearch = (entryText.toLowerCase().indexOf(this.searchTerm.toLowerCase()) > -1);","					}","					return matchesSearch;","				},","","				getNextVisibleMatchIndex: function() {","					for (var i = currentMatchIndex + 1; i < this.matches.length; i++) {","						if (this.matches[i].isVisible()) {","							return i;","						}","					}","					// Start again from the first match","					for (i = 0; i <= currentMatchIndex; i++) {","						if (this.matches[i].isVisible()) {","							return i;","						}","					}","					return -1;","				},","","				getPreviousVisibleMatchIndex: function() {","					for (var i = currentMatchIndex - 1; i >= 0; i--) {","						if (this.matches[i].isVisible()) {","							return i;","						}","					}","					// Start again from the last match","					for (var i = this.matches.length - 1; i >= currentMatchIndex; i--) {","						if (this.matches[i].isVisible()) {","							return i;","						}","					}","					return -1;","				},","","				applyTo: function(logEntry) {","					var doesMatch = this.match(logEntry);","					if (doesMatch) {","						logEntry.group.expand();","						logEntry.setSearchMatch(true);","						var logEntryContent;","						var wrappedLogEntryContent;",'						var searchTermReplacementStartTag = "<span class=\\"searchterm\\">";','						var searchTermReplacementEndTag = "<" + "/span>";','						var preTagName = isIe ? "pre" : "span";','						var preStartTag = "<" + preTagName + " class=\\"pre\\">";','						var preEndTag = "<" + "/" + preTagName + ">";',"						var startIndex = 0;","						var searchIndex, matchedText, textBeforeMatch;","						if (this.isRegex) {",'							var flags = this.isCaseSensitive ? "g" : "gi";','							var capturingRegex = new RegExp("(" + this.searchRegex.source + ")", flags);',"","							// Replace the search term with temporary tokens for the start and end tags",'							var rnd = ("" + Math.random()).substr(2);','							var startToken = "%%s" + rnd + "%%";','							var endToken = "%%e" + rnd + "%%";','							logEntryContent = logEntry.formattedMessage.replace(capturingRegex, startToken + "$1" + endToken);',"","							// Escape the HTML to get rid of angle brackets","							logEntryContent = escapeHtml(logEntryContent);","","							// Substitute the proper HTML back in for the search match","							var result;","							var searchString = logEntryContent;",'							logEntryContent = "";','							wrappedLogEntryContent = "";',"							while ((searchIndex = searchString.indexOf(startToken, startIndex)) > -1) {","								var endTokenIndex = searchString.indexOf(endToken, searchIndex);","								matchedText = searchString.substring(searchIndex + startToken.length, endTokenIndex);","								textBeforeMatch = searchString.substring(startIndex, searchIndex);","								logEntryContent += preStartTag + textBeforeMatch + preEndTag;","								logEntryContent += searchTermReplacementStartTag + preStartTag + matchedText +","									preEndTag + searchTermReplacementEndTag;","								if (isIe) {","									wrappedLogEntryContent += textBeforeMatch + searchTermReplacementStartTag +","										matchedText + searchTermReplacementEndTag;","								}","								startIndex = endTokenIndex + endToken.length;","							}","							logEntryContent += preStartTag + searchString.substr(startIndex) + preEndTag;","							if (isIe) {","								wrappedLogEntryContent += searchString.substr(startIndex);","							}","						} else {",'							logEntryContent = "";','							wrappedLogEntryContent = "";',"							var searchTermReplacementLength = searchTermReplacementStartTag.length +","								this.searchTerm.length + searchTermReplacementEndTag.length;","							var searchTermLength = this.searchTerm.length;","							var searchTermLowerCase = this.searchTerm.toLowerCase();","							var logTextLowerCase = logEntry.formattedMessage.toLowerCase();","							while ((searchIndex = logTextLowerCase.indexOf(searchTermLowerCase, startIndex)) > -1) {","								matchedText = escapeHtml(logEntry.formattedMessage.substr(searchIndex, this.searchTerm.length));","								textBeforeMatch = escapeHtml(logEntry.formattedMessage.substring(startIndex, searchIndex));","								var searchTermReplacement = searchTermReplacementStartTag +","									preStartTag + matchedText + preEndTag + searchTermReplacementEndTag;","								logEntryContent += preStartTag + textBeforeMatch + preEndTag + searchTermReplacement;","								if (isIe) {","									wrappedLogEntryContent += textBeforeMatch + searchTermReplacementStartTag +","										matchedText + searchTermReplacementEndTag;","								}","								startIndex = searchIndex + searchTermLength;","							}","							var textAfterLastMatch = escapeHtml(logEntry.formattedMessage.substr(startIndex));","							logEntryContent += preStartTag + textAfterLastMatch + preEndTag;","							if (isIe) {","								wrappedLogEntryContent += textAfterLastMatch;","							}","						}","						logEntry.setContent(logEntryContent, wrappedLogEntryContent);","						var logEntryMatches = logEntry.getSearchMatches();","						this.matches = this.matches.concat(logEntryMatches);","					} else {","						logEntry.setSearchMatch(false);","						logEntry.setContent(logEntry.formattedMessage, logEntry.formattedMessage);","					}","					return doesMatch;","				},","","				removeMatches: function(logEntries) {","					var matchesToRemoveCount = 0;","					var currentMatchRemoved = false;","					var matchesToRemove = [];","					var i, iLen, j, jLen;","","					// Establish the list of matches to be removed","					for (i = 0, iLen = this.matches.length; i < iLen; i++) {","						for (j = 0, jLen = logEntries.length; j < jLen; j++) {","							if (this.matches[i].belongsTo(logEntries[j])) {","								matchesToRemove.push(this.matches[i]);","								if (i === currentMatchIndex) {","									currentMatchRemoved = true;","								}","							}","						}","					}","","					// Set the new current match index if the current match has been deleted","					// This will be the first match that appears after the first log entry being","					// deleted, if one exists; otherwise, it's the first match overall","					var newMatch = currentMatchRemoved ? null : this.matches[currentMatchIndex];","					if (currentMatchRemoved) {","						for (i = currentMatchIndex, iLen = this.matches.length; i < iLen; i++) {","							if (this.matches[i].isVisible() && !array_contains(matchesToRemove, this.matches[i])) {","								newMatch = this.matches[i];","								break;","							}","						}","					}","","					// Remove the matches","					for (i = 0, iLen = matchesToRemove.length; i < iLen; i++) {","						array_remove(this.matches, matchesToRemove[i]);","						matchesToRemove[i].remove();","					}","","					// Set the new match, if one exists","					if (this.hasVisibleMatches()) {","						if (newMatch === null) {","							setCurrentMatchIndex(0);","						} else {","							// Get the index of the new match","							var newMatchIndex = 0;","							for (i = 0, iLen = this.matches.length; i < iLen; i++) {","								if (newMatch === this.matches[i]) {","									newMatchIndex = i;","									break;","								}","							}","							setCurrentMatchIndex(newMatchIndex);","						}","					} else {","						currentMatchIndex = null;","						displayNoMatches();","					}","				}","			};","","			function getPageOffsetTop(el, container) {","				var currentEl = el;","				var y = 0;","				while (currentEl && currentEl != container) {","					y += currentEl.offsetTop;","					currentEl = currentEl.offsetParent;","				}","				return y;","			}","","			function scrollIntoView(el) {","				var logContainer = logMainContainer;","				// Check if the whole width of the element is visible and centre if not",'				if (!$("wrap").checked) {',"					var logContainerLeft = logContainer.scrollLeft;","					var logContainerRight = logContainerLeft  + logContainer.offsetWidth;","					var elLeft = el.offsetLeft;","					var elRight = elLeft + el.offsetWidth;","					if (elLeft < logContainerLeft || elRight > logContainerRight) {","						logContainer.scrollLeft = elLeft - (logContainer.offsetWidth - el.offsetWidth) / 2;","					}","				}","				// Check if the whole height of the element is visible and centre if not","				var logContainerTop = logContainer.scrollTop;","				var logContainerBottom = logContainerTop  + logContainer.offsetHeight;","				var elTop = getPageOffsetTop(el) - getToolBarsHeight();","				var elBottom = elTop + el.offsetHeight;","				if (elTop < logContainerTop || elBottom > logContainerBottom) {","					logContainer.scrollTop = elTop - (logContainer.offsetHeight - el.offsetHeight) / 2;","				}","			}","","			function Match(logEntryLevel, spanInMainDiv, spanInUnwrappedPre, spanInWrappedDiv) {","				this.logEntryLevel = logEntryLevel;","				this.spanInMainDiv = spanInMainDiv;","				if (isIe) {","					this.spanInUnwrappedPre = spanInUnwrappedPre;","					this.spanInWrappedDiv = spanInWrappedDiv;","				}","				this.mainSpan = isIe ? spanInUnwrappedPre : spanInMainDiv;","			}","","			Match.prototype = {","				equals: function(match) {","					return this.mainSpan === match.mainSpan;","				},","","				setCurrent: function() {","					if (isIe) {",'						addClass(this.spanInUnwrappedPre, "currentmatch");','						addClass(this.spanInWrappedDiv, "currentmatch");',"						// Scroll the visible one into view",'						var elementToScroll = $("wrap").checked ? this.spanInWrappedDiv : this.spanInUnwrappedPre;',"						scrollIntoView(elementToScroll);","					} else {",'						addClass(this.spanInMainDiv, "currentmatch");',"						scrollIntoView(this.spanInMainDiv);","					}","				},","","				belongsTo: function(logEntry) {","					if (isIe) {","						return isDescendant(this.spanInUnwrappedPre, logEntry.unwrappedPre);","					} else {","						return isDescendant(this.spanInMainDiv, logEntry.mainDiv);","					}","				},","","				setNotCurrent: function() {","					if (isIe) {",'						removeClass(this.spanInUnwrappedPre, "currentmatch");','						removeClass(this.spanInWrappedDiv, "currentmatch");',"					} else {",'						removeClass(this.spanInMainDiv, "currentmatch");',"					}","				},","","				isOrphan: function() {","					return isOrphan(this.mainSpan);","				},","","				isVisible: function() {","					return getCheckBox(this.logEntryLevel).checked;","				},","","				remove: function() {","					if (isIe) {","						this.spanInUnwrappedPre = null;","						this.spanInWrappedDiv = null;","					} else {","						this.spanInMainDiv = null;","					}","				}","			};","","			var currentSearch = null;","			var currentMatchIndex = null;","","			function doSearch() {",'				var searchBox = $("searchBox");',"				var searchTerm = searchBox.value;",'				var isRegex = $("searchRegex").checked;','				var isCaseSensitive = $("searchCaseSensitive").checked;',"				var i;","",'				if (searchTerm === "") {','					$("searchReset").disabled = true;','					$("searchNav").style.display = "none";','					removeClass(document.body, "searching");','					removeClass(searchBox, "hasmatches");','					removeClass(searchBox, "nomatches");',"					for (i = 0; i < logEntries.length; i++) {","						logEntries[i].clearSearch();","						logEntries[i].setContent(logEntries[i].formattedMessage, logEntries[i].formattedMessage);","					}","					currentSearch = null;","					setLogContainerHeight();","				} else {",'					$("searchReset").disabled = false;','					$("searchNav").style.display = "block";',"					var searchRegex;","					var regexValid;","					if (isRegex) {","						try {",'							searchRegex = isCaseSensitive ? new RegExp(searchTerm, "g") : new RegExp(searchTerm, "gi");',"							regexValid = true;",'							replaceClass(searchBox, "validregex", "invalidregex");','							searchBox.title = "Valid regex";',"						} catch (ex) {","							regexValid = false;",'							replaceClass(searchBox, "invalidregex", "validregex");','							searchBox.title = "Invalid regex: " + (ex.message ? ex.message : (ex.description ? ex.description : "unknown error"));',"							return;","						}","					} else {",'						searchBox.title = "";','						removeClass(searchBox, "validregex");','						removeClass(searchBox, "invalidregex");',"					}",'					addClass(document.body, "searching");',"					currentSearch = new Search(searchTerm, isRegex, searchRegex, isCaseSensitive);","					for (i = 0; i < logEntries.length; i++) {","						currentSearch.applyTo(logEntries[i]);","					}","					setLogContainerHeight();","","					// Highlight the first search match","					if (currentSearch.hasVisibleMatches()) {","						setCurrentMatchIndex(0);","						displayMatches();","					} else {","						displayNoMatches();","					}","				}","			}","","			function updateSearchFromFilters() {","				if (currentSearch) {","					if (currentSearch.hasMatches()) {","						if (currentMatchIndex === null) {","							currentMatchIndex = 0;","						}","						var currentMatch = currentSearch.matches[currentMatchIndex];","						if (currentMatch.isVisible()) {","							displayMatches();","							setCurrentMatchIndex(currentMatchIndex);","						} else {","							currentMatch.setNotCurrent();","							// Find the next visible match, if one exists","							var nextVisibleMatchIndex = currentSearch.getNextVisibleMatchIndex();","							if (nextVisibleMatchIndex > -1) {","								setCurrentMatchIndex(nextVisibleMatchIndex);","								displayMatches();","							} else {","								displayNoMatches();","							}","						}","					} else {","						displayNoMatches();","					}","				}","			}","","			function refreshCurrentMatch() {","				if (currentSearch && currentSearch.hasVisibleMatches()) {","					setCurrentMatchIndex(currentMatchIndex);","				}","			}","","			function displayMatches() {",'				replaceClass($("searchBox"), "hasmatches", "nomatches");','				$("searchBox").title = "" + currentSearch.matches.length + " matches found";','				$("searchNav").style.display = "block";',"				setLogContainerHeight();","			}","","			function displayNoMatches() {",'				replaceClass($("searchBox"), "nomatches", "hasmatches");','				$("searchBox").title = "No matches found";','				$("searchNav").style.display = "none";',"				setLogContainerHeight();","			}","","			function toggleSearchEnabled(enable) {",'				enable = (typeof enable == "undefined") ? !$("searchDisable").checked : enable;','				$("searchBox").disabled = !enable;','				$("searchReset").disabled = !enable;','				$("searchRegex").disabled = !enable;','				$("searchNext").disabled = !enable;','				$("searchPrevious").disabled = !enable;','				$("searchCaseSensitive").disabled = !enable;','				$("searchNav").style.display = (enable && ($("searchBox").value !== "") &&',"						currentSearch && currentSearch.hasVisibleMatches()) ?",'					"block" : "none";',"				if (enable) {",'					removeClass($("search"), "greyedout");','					addClass(document.body, "searching");','					if ($("searchHighlight").checked) {','						addClass(logMainContainer, "searchhighlight");',"					} else {",'						removeClass(logMainContainer, "searchhighlight");',"					}",'					if ($("searchFilter").checked) {','						addClass(logMainContainer, "searchfilter");',"					} else {",'						removeClass(logMainContainer, "searchfilter");',"					}",'					$("searchDisable").checked = !enable;',"				} else {",'					addClass($("search"), "greyedout");','					removeClass(document.body, "searching");','					removeClass(logMainContainer, "searchhighlight");','					removeClass(logMainContainer, "searchfilter");',"				}","				setLogContainerHeight();","			}","","			function toggleSearchFilter() {",'				var enable = $("searchFilter").checked;',"				if (enable) {",'					addClass(logMainContainer, "searchfilter");',"				} else {",'					removeClass(logMainContainer, "searchfilter");',"				}","				refreshCurrentMatch();","			}","","			function toggleSearchHighlight() {",'				var enable = $("searchHighlight").checked;',"				if (enable) {",'					addClass(logMainContainer, "searchhighlight");',"				} else {",'					removeClass(logMainContainer, "searchhighlight");',"				}","			}","","			function clearSearch() {",'				$("searchBox").value = "";',"				doSearch();","			}","","			function searchNext() {","				if (currentSearch !== null && currentMatchIndex !== null) {","					currentSearch.matches[currentMatchIndex].setNotCurrent();","					var nextMatchIndex = currentSearch.getNextVisibleMatchIndex();",'					if (nextMatchIndex > currentMatchIndex || confirm("Reached the end of the page. Start from the top?")) {',"						setCurrentMatchIndex(nextMatchIndex);","					}","				}","			}","","			function searchPrevious() {","				if (currentSearch !== null && currentMatchIndex !== null) {","					currentSearch.matches[currentMatchIndex].setNotCurrent();","					var previousMatchIndex = currentSearch.getPreviousVisibleMatchIndex();",'					if (previousMatchIndex < currentMatchIndex || confirm("Reached the start of the page. Continue from the bottom?")) {',"						setCurrentMatchIndex(previousMatchIndex);","					}","				}","			}","","			function setCurrentMatchIndex(index) {","				currentMatchIndex = index;","				currentSearch.matches[currentMatchIndex].setCurrent();","			}","","			/* ------------------------------------------------------------------------- */","","			// CSS Utilities","","			function addClass(el, cssClass) {","				if (!hasClass(el, cssClass)) {","					if (el.className) {",'						el.className += " " + cssClass;',"					} else {","						el.className = cssClass;","					}","				}","			}","","			function hasClass(el, cssClass) {","				if (el.className) {",'					var classNames = el.className.split(" ");',"					return array_contains(classNames, cssClass);","				}","				return false;","			}","","			function removeClass(el, cssClass) {","				if (hasClass(el, cssClass)) {","					// Rebuild the className property",'					var existingClasses = el.className.split(" ");',"					var newClasses = [];","					for (var i = 0, len = existingClasses.length; i < len; i++) {","						if (existingClasses[i] != cssClass) {","							newClasses[newClasses.length] = existingClasses[i];","						}","					}",'					el.className = newClasses.join(" ");',"				}","			}","","			function replaceClass(el, newCssClass, oldCssClass) {","				removeClass(el, oldCssClass);","				addClass(el, newCssClass);","			}","","			/* ------------------------------------------------------------------------- */","","			// Other utility functions","","			function getElementsByClass(el, cssClass, tagName) {","				var elements = el.getElementsByTagName(tagName);","				var matches = [];","				for (var i = 0, len = elements.length; i < len; i++) {","					if (hasClass(elements[i], cssClass)) {","						matches.push(elements[i]);","					}","				}","				return matches;","			}","","			// Syntax borrowed from Prototype library","			function $(id) {","				return document.getElementById(id);","			}","","			function isDescendant(node, ancestorNode) {","				while (node != null) {","					if (node === ancestorNode) {","						return true;","					}","					node = node.parentNode;","				}","				return false;","			}","","			function isOrphan(node) {","				var currentNode = node;","				while (currentNode) {","					if (currentNode == document.body) {","						return false;","					}","					currentNode = currentNode.parentNode;","				}","				return true;","			}","","			function escapeHtml(str) {",'				return str.replace(/&/g, "&amp;").replace(/[<]/g, "&lt;").replace(/>/g, "&gt;");',"			}","","			function getWindowWidth() {","				if (window.innerWidth) {","					return window.innerWidth;","				} else if (document.documentElement && document.documentElement.clientWidth) {","					return document.documentElement.clientWidth;","				} else if (document.body) {","					return document.body.clientWidth;","				}","				return 0;","			}","","			function getWindowHeight() {","				if (window.innerHeight) {","					return window.innerHeight;","				} else if (document.documentElement && document.documentElement.clientHeight) {","					return document.documentElement.clientHeight;","				} else if (document.body) {","					return document.body.clientHeight;","				}","				return 0;","			}","","			function getToolBarsHeight() {",'				return $("switches").offsetHeight;',"			}","","			function getChromeHeight() {","				var height = getToolBarsHeight();","				if (showCommandLine) {",'					height += $("commandLine").offsetHeight;',"				}","				return height;","			}","","			function setLogContainerHeight() {","				if (logMainContainer) {","					var windowHeight = getWindowHeight();",'					$("body").style.height = getWindowHeight() + "px";','					logMainContainer.style.height = "" +','						Math.max(0, windowHeight - getChromeHeight()) + "px";',"				}","			}","","			function setCommandInputWidth() {","				if (showCommandLine) {",'					$("command").style.width = "" + Math.max(0, $("commandLineContainer").offsetWidth -','						($("evaluateButton").offsetWidth + 13)) + "px";',"				}","			}","","			window.onresize = function() {","				setCommandInputWidth();","				setLogContainerHeight();","			};","","			if (!Array.prototype.push) {","				Array.prototype.push = function() {","			        for (var i = 0, len = arguments.length; i < len; i++){","			            this[this.length] = arguments[i];","			        }","			        return this.length;","				};","			}","","			if (!Array.prototype.pop) {","				Array.prototype.pop = function() {","					if (this.length > 0) {","						var val = this[this.length - 1];","						this.length = this.length - 1;","						return val;","					}","				};","			}","","			if (!Array.prototype.shift) {","				Array.prototype.shift = function() {","					if (this.length > 0) {","						var firstItem = this[0];","						for (var i = 0, len = this.length - 1; i < len; i++) {","							this[i] = this[i + 1];","						}","						this.length = this.length - 1;","						return firstItem;","					}","				};","			}","","			if (!Array.prototype.splice) {","				Array.prototype.splice = function(startIndex, deleteCount) {","					var itemsAfterDeleted = this.slice(startIndex + deleteCount);","					var itemsDeleted = this.slice(startIndex, startIndex + deleteCount);","					this.length = startIndex;","					// Copy the arguments into a proper Array object","					var argumentsArray = [];","					for (var i = 0, len = arguments.length; i < len; i++) {","						argumentsArray[i] = arguments[i];","					}","					var itemsToAppend = (argumentsArray.length > 2) ?","						itemsAfterDeleted = argumentsArray.slice(2).concat(itemsAfterDeleted) : itemsAfterDeleted;","					for (i = 0, len = itemsToAppend.length; i < len; i++) {","						this.push(itemsToAppend[i]);","					}","					return itemsDeleted;","				};","			}","","			function array_remove(arr, val) {","				var index = -1;","				for (var i = 0, len = arr.length; i < len; i++) {","					if (arr[i] === val) {","						index = i;","						break;","					}","				}","				if (index >= 0) {","					arr.splice(index, 1);","					return index;","				} else {","					return false;","				}","			}","","			function array_removeFromStart(array, numberToRemove) {","				if (Array.prototype.splice) {","					array.splice(0, numberToRemove);","				} else {","					for (var i = numberToRemove, len = array.length; i < len; i++) {","						array[i - numberToRemove] = array[i];","					}","					array.length = array.length - numberToRemove;","				}","				return array;","			}","","			function array_contains(arr, val) {","				for (var i = 0, len = arr.length; i < len; i++) {","					if (arr[i] == val) {","						return true;","					}","				}","				return false;","			}","","			function getErrorMessage(ex) {","				if (ex.message) {","					return ex.message;","				} else if (ex.description) {","					return ex.description;","				}",'				return "" + ex;',"			}","","			function moveCaretToEnd(input) {","				if (input.setSelectionRange) {","					input.focus();","					var length = input.value.length;","					input.setSelectionRange(length, length);","				} else if (input.createTextRange) {","					var range = input.createTextRange();","					range.collapse(false);","					range.select();","				}","				input.focus();","			}","","			function stopPropagation(evt) {","				if (evt.stopPropagation) {","					evt.stopPropagation();",'				} else if (typeof evt.cancelBubble != "undefined") {',"					evt.cancelBubble = true;","				}","			}","","			function getEvent(evt) {","				return evt ? evt : event;","			}","","			function getTarget(evt) {","				return evt.target ? evt.target : evt.srcElement;","			}","","			function getRelatedTarget(evt) {","				if (evt.relatedTarget) {","					return evt.relatedTarget;","				} else if (evt.srcElement) {","					switch(evt.type) {",'						case "mouseover":',"							return evt.fromElement;",'						case "mouseout":',"							return evt.toElement;","						default:","							return evt.srcElement;","					}","				}","			}","","			function cancelKeyEvent(evt) {","				evt.returnValue = false;","				stopPropagation(evt);","			}","","			function evalCommandLine() {",'				var expr = $("command").value;',"				evalCommand(expr);",'				$("command").value = "";',"			}","","			function evalLastCommand() {","				if (lastCommand != null) {","					evalCommand(lastCommand);","				}","			}","","			var lastCommand = null;","			var commandHistory = [];","			var currentCommandIndex = 0;","","			function evalCommand(expr) {","				if (appender) {","					appender.evalCommandAndAppend(expr);","				} else {",'					var prefix = ">>> " + expr + "\\r\\n";',"					try {",'						log("INFO", prefix + eval(expr));',"					} catch (ex) {",'						log("ERROR", prefix + "Error: " + getErrorMessage(ex));',"					}","				}","				// Update command history","				if (expr != commandHistory[commandHistory.length - 1]) {","					commandHistory.push(expr);","					// Update the appender","					if (appender) {","						appender.storeCommandHistory(commandHistory);","					}","				}","				currentCommandIndex = (expr == commandHistory[currentCommandIndex]) ? currentCommandIndex + 1 : commandHistory.length;","				lastCommand = expr;","			}","			//]]>","		<\/script>",'		<style type="text/css">',"			body {","				background-color: white;","				color: black;","				padding: 0;","				margin: 0;","				font-family: tahoma, verdana, arial, helvetica, sans-serif;","				overflow: hidden;","			}","","			div#switchesContainer input {","				margin-bottom: 0;","			}","","			div.toolbar {","				border-top: solid #ffffff 1px;","				border-bottom: solid #aca899 1px;","				background-color: #f1efe7;","				padding: 3px 5px;","				font-size: 68.75%;","			}","","			div.toolbar, div#search input {","				font-family: tahoma, verdana, arial, helvetica, sans-serif;","			}","","			div.toolbar input.button {","				padding: 0 5px;","				font-size: 100%;","			}","","			div.toolbar input.hidden {","				display: none;","			}","","			div#switches input#clearButton {","				margin-left: 20px;","			}","","			div#levels label {","				font-weight: bold;","			}","","			div#levels label, div#options label {","				margin-right: 5px;","			}","","			div#levels label#wrapLabel {","				font-weight: normal;","			}","","			div#search label {","				margin-right: 10px;","			}","","			div#search label.searchboxlabel {","				margin-right: 0;","			}","","			div#search input {","				font-size: 100%;","			}","","			div#search input.validregex {","				color: green;","			}","","			div#search input.invalidregex {","				color: red;","			}","","			div#search input.nomatches {","				color: white;","				background-color: #ff6666;","			}","","			div#search input.nomatches {","				color: white;","				background-color: #ff6666;","			}","","			div#searchNav {","				display: none;","			}","","			div#commandLine {","				display: none;","			}","","			div#commandLine input#command {","				font-size: 100%;","				font-family: Courier New, Courier;","			}","","			div#commandLine input#evaluateButton {","			}","","			*.greyedout {","				color: gray !important;","				border-color: gray !important;","			}","","			*.greyedout *.alwaysenabled { color: black; }","","			*.unselectable {","				-khtml-user-select: none;","				-moz-user-select: none;","				user-select: none;","			}","","			div#log {","				font-family: Courier New, Courier;","				font-size: 75%;","				width: 100%;","				overflow: auto;","				clear: both;","				position: relative;","			}","","			div.group {","				border-color: #cccccc;","				border-style: solid;","				border-width: 1px 0 1px 1px;","				overflow: visible;","			}","","			div.oldIe div.group, div.oldIe div.group *, div.oldIe *.logentry {","				height: 1%;","			}","","			div.group div.groupheading span.expander {","				border: solid black 1px;","				font-family: Courier New, Courier;","				font-size: 0.833em;","				background-color: #eeeeee;","				position: relative;","				top: -1px;","				color: black;","				padding: 0 2px;","				cursor: pointer;","				cursor: hand;","				height: 1%;","			}","","			div.group div.groupcontent {","				margin-left: 10px;","				padding-bottom: 2px;","				overflow: visible;","			}","","			div.group div.expanded {","				display: block;","			}","","			div.group div.collapsed {","				display: none;","			}","","			*.logentry {","				overflow: visible;","				display: none;","				white-space: pre;","			}","","			span.pre {","				white-space: pre;","			}","			","			pre.unwrapped {","				display: inline !important;","			}","","			pre.unwrapped pre.pre, div.wrapped pre.pre {","				display: inline;","			}","","			div.wrapped pre.pre {","				white-space: normal;","			}","","			div.wrapped {","				display: none;","			}","","			body.searching *.logentry span.currentmatch {","				color: white !important;","				background-color: green !important;","			}","","			body.searching div.searchhighlight *.logentry span.searchterm {","				color: black;","				background-color: yellow;","			}","","			div.wrap *.logentry {","				white-space: normal !important;","				border-width: 0 0 1px 0;","				border-color: #dddddd;","				border-style: dotted;","			}","","			div.wrap #log_wrapped, #log_unwrapped {","				display: block;","			}","","			div.wrap #log_unwrapped, #log_wrapped {","				display: none;","			}","","			div.wrap *.logentry span.pre {","				overflow: visible;","				white-space: normal;","			}","","			div.wrap *.logentry pre.unwrapped {","				display: none;","			}","","			div.wrap *.logentry span.wrapped {","				display: inline;","			}","","			div.searchfilter *.searchnonmatch {","				display: none !important;","			}","","			div#log *.TRACE, label#label_TRACE {","				color: #666666;","			}","","			div#log *.DEBUG, label#label_DEBUG {","				color: green;","			}","","			div#log *.INFO, label#label_INFO {","				color: #000099;","			}","","			div#log *.WARN, label#label_WARN {","				color: #999900;","			}","","			div#log *.ERROR, label#label_ERROR {","				color: red;","			}","","			div#log *.FATAL, label#label_FATAL {","				color: #660066;","			}","","			div.TRACE#log *.TRACE,","			div.DEBUG#log *.DEBUG,","			div.INFO#log *.INFO,","			div.WARN#log *.WARN,","			div.ERROR#log *.ERROR,","			div.FATAL#log *.FATAL {","				display: block;","			}","","			div#log div.separator {","				background-color: #cccccc;","				margin: 5px 0;","				line-height: 1px;","			}","		</style>","	</head>","",'	<body id="body">','		<div id="switchesContainer">','			<div id="switches">','				<div id="levels" class="toolbar">',"					Filters:",'					<input type="checkbox" id="switch_TRACE" onclick="applyFilters(); checkAllLevels()" checked="checked" title="Show/hide trace messages" /><label for="switch_TRACE" id="label_TRACE">trace</label>','					<input type="checkbox" id="switch_DEBUG" onclick="applyFilters(); checkAllLevels()" checked="checked" title="Show/hide debug messages" /><label for="switch_DEBUG" id="label_DEBUG">debug</label>','					<input type="checkbox" id="switch_INFO" onclick="applyFilters(); checkAllLevels()" checked="checked" title="Show/hide info messages" /><label for="switch_INFO" id="label_INFO">info</label>','					<input type="checkbox" id="switch_WARN" onclick="applyFilters(); checkAllLevels()" checked="checked" title="Show/hide warn messages" /><label for="switch_WARN" id="label_WARN">warn</label>','					<input type="checkbox" id="switch_ERROR" onclick="applyFilters(); checkAllLevels()" checked="checked" title="Show/hide error messages" /><label for="switch_ERROR" id="label_ERROR">error</label>','					<input type="checkbox" id="switch_FATAL" onclick="applyFilters(); checkAllLevels()" checked="checked" title="Show/hide fatal messages" /><label for="switch_FATAL" id="label_FATAL">fatal</label>','					<input type="checkbox" id="switch_ALL" onclick="toggleAllLevels(); applyFilters()" checked="checked" title="Show/hide all messages" /><label for="switch_ALL" id="label_ALL">all</label>',"				</div>",'				<div id="search" class="toolbar">','					<label for="searchBox" class="searchboxlabel">Search:</label> <input type="text" id="searchBox" onclick="toggleSearchEnabled(true)" onkeyup="scheduleSearch()" size="20" />','					<input type="button" id="searchReset" disabled="disabled" value="Reset" onclick="clearSearch()" class="button" title="Reset the search" />','					<input type="checkbox" id="searchRegex" onclick="doSearch()" title="If checked, search is treated as a regular expression" /><label for="searchRegex">Regex</label>','					<input type="checkbox" id="searchCaseSensitive" onclick="doSearch()" title="If checked, search is case sensitive" /><label for="searchCaseSensitive">Match case</label>','					<input type="checkbox" id="searchDisable" onclick="toggleSearchEnabled()" title="Enable/disable search" /><label for="searchDisable" class="alwaysenabled">Disable</label>','					<div id="searchNav">','						<input type="button" id="searchNext" disabled="disabled" value="Next" onclick="searchNext()" class="button" title="Go to the next matching log entry" />','						<input type="button" id="searchPrevious" disabled="disabled" value="Previous" onclick="searchPrevious()" class="button" title="Go to the previous matching log entry" />','						<input type="checkbox" id="searchFilter" onclick="toggleSearchFilter()" title="If checked, non-matching log entries are filtered out" /><label for="searchFilter">Filter</label>','						<input type="checkbox" id="searchHighlight" onclick="toggleSearchHighlight()" title="Highlight matched search terms" /><label for="searchHighlight" class="alwaysenabled">Highlight all</label>',"					</div>","				</div>",'				<div id="options" class="toolbar">',"					Options:",'					<input type="checkbox" id="enableLogging" onclick="toggleLoggingEnabled()" checked="checked" title="Enable/disable logging" /><label for="enableLogging" id="enableLoggingLabel">Log</label>','					<input type="checkbox" id="wrap" onclick="toggleWrap()" title="Enable / disable word wrap" /><label for="wrap" id="wrapLabel">Wrap</label>','					<input type="checkbox" id="newestAtTop" onclick="toggleNewestAtTop()" title="If checked, causes newest messages to appear at the top" /><label for="newestAtTop" id="newestAtTopLabel">Newest at the top</label>','					<input type="checkbox" id="scrollToLatest" onclick="toggleScrollToLatest()" checked="checked" title="If checked, window automatically scrolls to a new message when it is added" /><label for="scrollToLatest" id="scrollToLatestLabel">Scroll to latest</label>','					<input type="button" id="clearButton" value="Clear" onclick="clearLog()" class="button" title="Clear all log messages"  />','					<input type="button" id="hideButton" value="Hide" onclick="hide()" class="hidden button" title="Hide the console" />','					<input type="button" id="closeButton" value="Close" onclick="closeWindow()" class="hidden button" title="Close the window" />',"				</div>","			</div>","		</div>",'		<div id="log" class="TRACE DEBUG INFO WARN ERROR FATAL"></div>','		<div id="commandLine" class="toolbar">','			<div id="commandLineContainer">','				<input type="text" id="command" title="Enter a JavaScript command here and hit return or press \'Evaluate\'" />','				<input type="button" id="evaluateButton" value="Evaluate" class="button" title="Evaluate the command" onclick="evalCommandLine()" />',"			</div>","		</div>","	</body>","</html>",""]};var defaultCommandLineFunctions=[];ConsoleAppender=function(){};var consoleAppenderIdCounter=1;ConsoleAppender.prototype=new Appender();ConsoleAppender.prototype.create=function(inPage,container,lazyInit,initiallyMinimized,useDocumentWrite,width,height,focusConsoleWindow){var appender=this;var initialized=false;var consoleWindowCreated=false;var consoleWindowLoaded=false;var consoleClosed=false;var queuedLoggingEvents=[];var isSupported=true;var consoleAppenderId=consoleAppenderIdCounter++;initiallyMinimized=extractBooleanFromParam(initiallyMinimized,this.defaults.initiallyMinimized);lazyInit=extractBooleanFromParam(lazyInit,this.defaults.lazyInit);useDocumentWrite=extractBooleanFromParam(useDocumentWrite,this.defaults.useDocumentWrite);var newestMessageAtTop=this.defaults.newestMessageAtTop;var scrollToLatestMessage=this.defaults.scrollToLatestMessage;width=width?width:this.defaults.width;height=height?height:this.defaults.height;var maxMessages=this.defaults.maxMessages;var showCommandLine=this.defaults.showCommandLine;var commandLineObjectExpansionDepth=this.defaults.commandLineObjectExpansionDepth;var showHideButton=this.defaults.showHideButton;var showCloseButton=this.defaults.showCloseButton;var showLogEntryDeleteButtons=this.defaults.showLogEntryDeleteButtons;this.setLayout(this.defaults.layout);var init,createWindow,safeToAppend,getConsoleWindow,open;var appenderName=inPage?"InPageAppender":"PopUpAppender";var checkCanConfigure=function(configOptionName){if(consoleWindowCreated){handleError(appenderName+": configuration option '"+configOptionName+"' may not be set after the appender has been initialized");return false}return true};var consoleWindowExists=function(){return(consoleWindowLoaded&&isSupported&&!consoleClosed)};this.isNewestMessageAtTop=function(){return newestMessageAtTop};this.setNewestMessageAtTop=function(newestMessageAtTopParam){newestMessageAtTop=bool(newestMessageAtTopParam);if(consoleWindowExists()){getConsoleWindow().setNewestAtTop(newestMessageAtTop)}};this.isScrollToLatestMessage=function(){return scrollToLatestMessage};this.setScrollToLatestMessage=function(scrollToLatestMessageParam){scrollToLatestMessage=bool(scrollToLatestMessageParam);if(consoleWindowExists()){getConsoleWindow().setScrollToLatest(scrollToLatestMessage)}};this.getWidth=function(){return width};this.setWidth=function(widthParam){if(checkCanConfigure("width")){width=extractStringFromParam(widthParam,width)}};this.getHeight=function(){return height};this.setHeight=function(heightParam){if(checkCanConfigure("height")){height=extractStringFromParam(heightParam,height)}};this.getMaxMessages=function(){return maxMessages};this.setMaxMessages=function(maxMessagesParam){maxMessages=extractIntFromParam(maxMessagesParam,maxMessages);if(consoleWindowExists()){getConsoleWindow().setMaxMessages(maxMessages)}};this.isShowCommandLine=function(){return showCommandLine};this.setShowCommandLine=function(showCommandLineParam){showCommandLine=bool(showCommandLineParam);if(consoleWindowExists()){getConsoleWindow().setShowCommandLine(showCommandLine)}};this.isShowHideButton=function(){return showHideButton};this.setShowHideButton=function(showHideButtonParam){showHideButton=bool(showHideButtonParam);if(consoleWindowExists()){getConsoleWindow().setShowHideButton(showHideButton)}};this.isShowCloseButton=function(){return showCloseButton};this.setShowCloseButton=function(showCloseButtonParam){showCloseButton=bool(showCloseButtonParam);if(consoleWindowExists()){getConsoleWindow().setShowCloseButton(showCloseButton)}};this.getCommandLineObjectExpansionDepth=function(){return commandLineObjectExpansionDepth};this.setCommandLineObjectExpansionDepth=function(commandLineObjectExpansionDepthParam){commandLineObjectExpansionDepth=extractIntFromParam(commandLineObjectExpansionDepthParam,commandLineObjectExpansionDepth)};var minimized=initiallyMinimized;this.isInitiallyMinimized=function(){return initiallyMinimized};this.setInitiallyMinimized=function(initiallyMinimizedParam){if(checkCanConfigure("initiallyMinimized")){initiallyMinimized=bool(initiallyMinimizedParam);minimized=initiallyMinimized}};this.isUseDocumentWrite=function(){return useDocumentWrite};this.setUseDocumentWrite=function(useDocumentWriteParam){if(checkCanConfigure("useDocumentWrite")){useDocumentWrite=bool(useDocumentWriteParam)}};function QueuedLoggingEvent(loggingEvent,formattedMessage){this.loggingEvent=loggingEvent;this.levelName=loggingEvent.level.name;this.formattedMessage=formattedMessage}QueuedLoggingEvent.prototype.append=function(){getConsoleWindow().log(this.levelName,this.formattedMessage)};function QueuedGroup(name,initiallyExpanded){this.name=name;this.initiallyExpanded=initiallyExpanded}QueuedGroup.prototype.append=function(){getConsoleWindow().group(this.name,this.initiallyExpanded)};function QueuedGroupEnd(){}QueuedGroupEnd.prototype.append=function(){getConsoleWindow().groupEnd()};var checkAndAppend=function(){safeToAppend();if(!initialized){init()}else{if(consoleClosed&&reopenWhenClosed){createWindow()}}if(safeToAppend()){appendQueuedLoggingEvents()}};this.append=function(loggingEvent){if(isSupported){var formattedMessage=appender.getLayout().format(loggingEvent);if(this.getLayout().ignoresThrowable()){formattedMessage+=loggingEvent.getThrowableStrRep()}queuedLoggingEvents.push(new QueuedLoggingEvent(loggingEvent,formattedMessage));checkAndAppend()}};this.group=function(name,initiallyExpanded){if(isSupported){queuedLoggingEvents.push(new QueuedGroup(name,initiallyExpanded));checkAndAppend()}};this.groupEnd=function(){if(isSupported){queuedLoggingEvents.push(new QueuedGroupEnd());checkAndAppend()}};var appendQueuedLoggingEvents=function(){var currentLoggingEvent;while(queuedLoggingEvents.length>0){queuedLoggingEvents.shift().append()}if(focusConsoleWindow){getConsoleWindow().focus()}};this.setAddedToLogger=function(logger){this.loggers.push(logger);if(enabled&&!lazyInit){init()}};this.clear=function(){if(consoleWindowExists()){getConsoleWindow().clearLog()}queuedLoggingEvents.length=0};this.focus=function(){if(consoleWindowExists()){getConsoleWindow().focus()}};this.focusCommandLine=function(){if(consoleWindowExists()){getConsoleWindow().focusCommandLine()}};this.focusSearch=function(){if(consoleWindowExists()){getConsoleWindow().focusSearch()}};var commandWindow=window;this.getCommandWindow=function(){return commandWindow};this.setCommandWindow=function(commandWindowParam){commandWindow=commandWindowParam};this.executeLastCommand=function(){if(consoleWindowExists()){getConsoleWindow().evalLastCommand()}};var commandLayout=new PatternLayout("%m");this.getCommandLayout=function(){return commandLayout};this.setCommandLayout=function(commandLayoutParam){commandLayout=commandLayoutParam};this.evalCommandAndAppend=function(expr){var commandReturnValue={appendResult:true,isError:false};var commandOutput="";try{var result,i;if(!commandWindow.eval&&commandWindow.execScript){commandWindow.execScript("null")}var commandLineFunctionsHash={};for(i=0,len=commandLineFunctions.length;i<len;i++){commandLineFunctionsHash[commandLineFunctions[i][0]]=commandLineFunctions[i][1]}var objectsToRestore=[];var addObjectToRestore=function(name){objectsToRestore.push([name,commandWindow[name]])};addObjectToRestore("appender");commandWindow.appender=appender;addObjectToRestore("commandReturnValue");commandWindow.commandReturnValue=commandReturnValue;addObjectToRestore("commandLineFunctionsHash");commandWindow.commandLineFunctionsHash=commandLineFunctionsHash;var addFunctionToWindow=function(name){addObjectToRestore(name);commandWindow[name]=function(){return this.commandLineFunctionsHash[name](appender,arguments,commandReturnValue)}};for(i=0,len=commandLineFunctions.length;i<len;i++){addFunctionToWindow(commandLineFunctions[i][0])}if(commandWindow===window&&commandWindow.execScript){addObjectToRestore("evalExpr");addObjectToRestore("result");window.evalExpr=expr;commandWindow.execScript("window.result=eval(window.evalExpr);");result=window.result}else{result=commandWindow.eval(expr)}commandOutput=isUndefined(result)?result:formatObjectExpansion(result,commandLineObjectExpansionDepth);for(i=0,len=objectsToRestore.length;i<len;i++){commandWindow[objectsToRestore[i][0]]=objectsToRestore[i][1]}}catch(ex){commandOutput="Error evaluating command: "+getExceptionStringRep(ex);commandReturnValue.isError=true}if(commandReturnValue.appendResult){var message=">>> "+expr;if(!isUndefined(commandOutput)){message+=newLine+commandOutput}var level=commandReturnValue.isError?Level.ERROR:Level.INFO;var loggingEvent=new LoggingEvent(null,new Date(),level,[message],null);var mainLayout=this.getLayout();this.setLayout(commandLayout);this.append(loggingEvent);this.setLayout(mainLayout)}};var commandLineFunctions=defaultCommandLineFunctions.concat([]);this.addCommandLineFunction=function(functionName,commandLineFunction){commandLineFunctions.push([functionName,commandLineFunction])};var commandHistoryCookieName="log4javascriptCommandHistory";this.storeCommandHistory=function(commandHistory){setCookie(commandHistoryCookieName,commandHistory.join(","))};var writeHtml=function(doc){var lines=getConsoleHtmlLines();doc.open();for(var i=0,len=lines.length;i<len;i++){doc.writeln(lines[i])}doc.close()};this.setEventTypes(["load","unload"]);var consoleWindowLoadHandler=function(){var win=getConsoleWindow();win.setAppender(appender);win.setNewestAtTop(newestMessageAtTop);win.setScrollToLatest(scrollToLatestMessage);win.setMaxMessages(maxMessages);win.setShowCommandLine(showCommandLine);win.setShowHideButton(showHideButton);win.setShowCloseButton(showCloseButton);win.setMainWindow(window);var storedValue=getCookie(commandHistoryCookieName);if(storedValue){win.commandHistory=storedValue.split(",");win.currentCommandIndex=win.commandHistory.length}appender.dispatchEvent("load",{win:win})};this.unload=function(){logLog.debug("unload "+this+", caller: "+this.unload.caller);if(!consoleClosed){logLog.debug("really doing unload "+this);consoleClosed=true;consoleWindowLoaded=false;consoleWindowCreated=false;appender.dispatchEvent("unload",{})}};var pollConsoleWindow=function(windowTest,interval,successCallback,errorMessage){function doPoll(){try{if(consoleClosed){clearInterval(poll)}if(windowTest(getConsoleWindow())){clearInterval(poll);successCallback()}}catch(ex){clearInterval(poll);isSupported=false;handleError(errorMessage,ex)}}var poll=setInterval(doPoll,interval)};var getConsoleUrl=function(){var documentDomainSet=(document.domain!=location.hostname);return useDocumentWrite?"":getBaseUrl()+"console_uncompressed.html"+(documentDomainSet?"?log4javascript_domain="+escape(document.domain):"")};if(inPage){var containerElement=null;var cssProperties=[];this.addCssProperty=function(name,value){if(checkCanConfigure("cssProperties")){cssProperties.push([name,value])}};var windowCreationStarted=false;var iframeContainerDiv;var iframeId=uniqueId+"_InPageAppender_"+consoleAppenderId;this.hide=function(){if(initialized&&consoleWindowCreated){if(consoleWindowExists()){getConsoleWindow().$("command").blur()}iframeContainerDiv.style.display="none";minimized=true}};this.show=function(){if(initialized){if(consoleWindowCreated){iframeContainerDiv.style.display="block";this.setShowCommandLine(showCommandLine);minimized=false}else{if(!windowCreationStarted){createWindow(true)}}}};this.isVisible=function(){return !minimized&&!consoleClosed};this.close=function(fromButton){if(!consoleClosed&&(!fromButton||confirm("This will permanently remove the console from the page. No more messages will be logged. Do you wish to continue?"))){iframeContainerDiv.parentNode.removeChild(iframeContainerDiv);this.unload()}};open=function(){var initErrorMessage="InPageAppender.open: unable to create console iframe";function finalInit(){try{if(!initiallyMinimized){appender.show()}consoleWindowLoadHandler();consoleWindowLoaded=true;appendQueuedLoggingEvents()}catch(ex){isSupported=false;handleError(initErrorMessage,ex)}}function writeToDocument(){try{var windowTest=function(win){return isLoaded(win)};if(useDocumentWrite){writeHtml(getConsoleWindow().document)}if(windowTest(getConsoleWindow())){finalInit()}else{pollConsoleWindow(windowTest,100,finalInit,initErrorMessage)}}catch(ex){isSupported=false;handleError(initErrorMessage,ex)}}minimized=false;iframeContainerDiv=containerElement.appendChild(document.createElement("div"));iframeContainerDiv.style.width=width;iframeContainerDiv.style.height=height;iframeContainerDiv.style.border="solid gray 1px";for(var i=0,len=cssProperties.length;i<len;i++){iframeContainerDiv.style[cssProperties[i][0]]=cssProperties[i][1]}var iframeSrc=useDocumentWrite?"":" src='"+getConsoleUrl()+"'";iframeContainerDiv.innerHTML="<iframe id='"+iframeId+"' name='"+iframeId+"' width='100%' height='100%' frameborder='0'"+iframeSrc+"scrolling='no'></iframe>";consoleClosed=false;var iframeDocumentExistsTest=function(win){try{return bool(win)&&bool(win.document)}catch(ex){return false}};if(iframeDocumentExistsTest(getConsoleWindow())){writeToDocument()}else{pollConsoleWindow(iframeDocumentExistsTest,100,writeToDocument,initErrorMessage)}consoleWindowCreated=true};createWindow=function(show){if(show||!initiallyMinimized){var pageLoadHandler=function(){if(!container){containerElement=document.createElement("div");containerElement.style.position="fixed";containerElement.style.left="0";containerElement.style.right="0";containerElement.style.bottom="0";document.body.appendChild(containerElement);appender.addCssProperty("borderWidth","1px 0 0 0");appender.addCssProperty("zIndex",1000000);open()}else{try{var el=document.getElementById(container);if(el.nodeType==1){containerElement=el}open()}catch(ex){handleError("InPageAppender.init: invalid container element '"+container+"' supplied",ex)}}};if(pageLoaded&&container&&container.appendChild){containerElement=container;open()}else{if(pageLoaded){pageLoadHandler()}else{log4javascript.addEventListener("load",pageLoadHandler)}}windowCreationStarted=true}};init=function(){createWindow();initialized=true};getConsoleWindow=function(){var iframe=window.frames[iframeId];if(iframe){return iframe}};safeToAppend=function(){if(isSupported&&!consoleClosed){if(consoleWindowCreated&&!consoleWindowLoaded&&getConsoleWindow()&&isLoaded(getConsoleWindow())){consoleWindowLoaded=true}return consoleWindowLoaded}return false}}else{var useOldPopUp=appender.defaults.useOldPopUp;var complainAboutPopUpBlocking=appender.defaults.complainAboutPopUpBlocking;var reopenWhenClosed=this.defaults.reopenWhenClosed;this.isUseOldPopUp=function(){return useOldPopUp};this.setUseOldPopUp=function(useOldPopUpParam){if(checkCanConfigure("useOldPopUp")){useOldPopUp=bool(useOldPopUpParam)}};this.isComplainAboutPopUpBlocking=function(){return complainAboutPopUpBlocking};this.setComplainAboutPopUpBlocking=function(complainAboutPopUpBlockingParam){if(checkCanConfigure("complainAboutPopUpBlocking")){complainAboutPopUpBlocking=bool(complainAboutPopUpBlockingParam)}};this.isFocusPopUp=function(){return focusConsoleWindow};this.setFocusPopUp=function(focusPopUpParam){focusConsoleWindow=bool(focusPopUpParam)};this.isReopenWhenClosed=function(){return reopenWhenClosed};this.setReopenWhenClosed=function(reopenWhenClosedParam){reopenWhenClosed=bool(reopenWhenClosedParam)};this.close=function(){logLog.debug("close "+this);try{popUp.close();this.unload()}catch(ex){}};this.hide=function(){logLog.debug("hide "+this);if(consoleWindowExists()){this.close()}};this.show=function(){logLog.debug("show "+this);if(!consoleWindowCreated){open()}};this.isVisible=function(){return safeToAppend()};var popUp;open=function(){var windowProperties="width="+width+",height="+height+",status,resizable";var windowName="PopUp_"+location.host.replace(/[^a-z0-9]/gi,"_")+"_"+consoleAppenderId;if(!useOldPopUp||!useDocumentWrite){windowName=windowName+"_"+uniqueId}var checkPopUpClosed=function(win){if(consoleClosed){return true}else{try{return bool(win)&&win.closed}catch(ex){}}return false};var popUpClosedCallback=function(){if(!consoleClosed){appender.unload()}};function finalInit(){getConsoleWindow().setCloseIfOpenerCloses(!useOldPopUp||!useDocumentWrite);consoleWindowLoadHandler();consoleWindowLoaded=true;appendQueuedLoggingEvents();pollConsoleWindow(checkPopUpClosed,500,popUpClosedCallback,"PopUpAppender.checkPopUpClosed: error checking pop-up window")}try{popUp=window.open(getConsoleUrl(),windowName,windowProperties);consoleClosed=false;consoleWindowCreated=true;if(popUp){if(useDocumentWrite&&useOldPopUp&&isLoaded(popUp)){popUp.mainPageReloaded();finalInit()}else{if(useDocumentWrite){writeHtml(popUp.document)}var popUpLoadedTest=function(win){return bool(win)&&isLoaded(win)};if(isLoaded(popUp)){finalInit()}else{pollConsoleWindow(popUpLoadedTest,100,finalInit,"PopUpAppender.init: unable to create console window")}}}else{isSupported=false;logLog.warn("PopUpAppender.init: pop-ups blocked, please unblock to use PopUpAppender");if(complainAboutPopUpBlocking){handleError("log4javascript: pop-up windows appear to be blocked. Please unblock them to use pop-up logging.")}}}catch(ex){handleError("PopUpAppender.init: error creating pop-up",ex)}};createWindow=function(){if(!initiallyMinimized){open()}};init=function(){createWindow();initialized=true};getConsoleWindow=function(){return popUp};safeToAppend=function(){if(isSupported&&!isUndefined(popUp)&&!consoleClosed){if(popUp.closed||(consoleWindowLoaded&&isUndefined(popUp.closed))){appender.unload();logLog.debug("PopUpAppender: pop-up closed");return false}if(!consoleWindowLoaded&&isLoaded(popUp)){consoleWindowLoaded=true}}return isSupported&&consoleWindowLoaded&&!consoleClosed}}this.getConsoleWindow=getConsoleWindow};ConsoleAppender.addGlobalCommandLineFunction=function(functionName,commandLineFunction){defaultCommandLineFunctions.push([functionName,commandLineFunction])};function PopUpAppender(lazyInit,initiallyMinimized,useDocumentWrite,width,height){this.create(false,null,lazyInit,initiallyMinimized,useDocumentWrite,width,height,this.defaults.focusPopUp)}PopUpAppender.prototype=new ConsoleAppender();PopUpAppender.prototype.defaults={layout:new PatternLayout("%d{HH:mm:ss} %-5p - %m{1}%n"),initiallyMinimized:false,focusPopUp:false,lazyInit:true,useOldPopUp:true,complainAboutPopUpBlocking:true,newestMessageAtTop:false,scrollToLatestMessage:true,width:"600",height:"400",reopenWhenClosed:false,maxMessages:null,showCommandLine:true,commandLineObjectExpansionDepth:1,showHideButton:false,showCloseButton:true,showLogEntryDeleteButtons:true,useDocumentWrite:true};PopUpAppender.prototype.toString=function(){return"PopUpAppender"};log4javascript.PopUpAppender=PopUpAppender;function InPageAppender(container,lazyInit,initiallyMinimized,useDocumentWrite,width,height){this.create(true,container,lazyInit,initiallyMinimized,useDocumentWrite,width,height,false)}InPageAppender.prototype=new ConsoleAppender();InPageAppender.prototype.defaults={layout:new PatternLayout("%d{HH:mm:ss} %-5p - %m{1}%n"),initiallyMinimized:false,lazyInit:true,newestMessageAtTop:false,scrollToLatestMessage:true,width:"100%",height:"220px",maxMessages:null,showCommandLine:true,commandLineObjectExpansionDepth:1,showHideButton:false,showCloseButton:false,showLogEntryDeleteButtons:true,useDocumentWrite:true};InPageAppender.prototype.toString=function(){return"InPageAppender"};log4javascript.InPageAppender=InPageAppender;log4javascript.InlineAppender=InPageAppender})();function padWithSpaces(str,len){if(str.length<len){var spaces=[];var numberOfSpaces=Math.max(0,len-str.length);for(var i=0;i<numberOfSpaces;i++){spaces[i]=" "}str+=spaces.join("")}return str}(function(){function dir(obj){var maxLen=0;for(var p in obj){maxLen=Math.max(toStr(p).length,maxLen)}var propList=[];for(p in obj){var propNameStr="  "+padWithSpaces(toStr(p),maxLen+2);var propVal;try{propVal=splitIntoLines(toStr(obj[p])).join(padWithSpaces(newLine,maxLen+6))}catch(ex){propVal="[Error obtaining property. Details: "+getExceptionMessage(ex)+"]"}propList.push(propNameStr+propVal)}return propList.join(newLine)}var nodeTypes={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12};var preFormattedElements=["script","pre"];var emptyElements=["br","img","hr","param","link","area","input","col","base","meta"];var indentationUnit="  ";function getXhtml(rootNode,includeRootNode,indentation,startNewLine,preformatted){includeRootNode=(typeof includeRootNode=="undefined")?true:(includeRootNode?true:false);if(typeof indentation!="string"){indentation=""}startNewLine=startNewLine?true:false;preformatted=preformatted?true:false;var xhtml;function isWhitespace(node){return((node.nodeType==nodeTypes.TEXT_NODE)&&/^[ \t\r\n]*$/.test(node.nodeValue))}function fixAttributeValue(attrValue){return attrValue.toString().replace(/\&/g,"&amp;").replace(/</g,"&lt;").replace(/\"/g,"&quot;")}function getStyleAttributeValue(el){var stylePairs=el.style.cssText.split(";");var styleValue="";var isFirst=true;for(var j=0,len=stylePairs.length;j<len;j++){var nameValueBits=stylePairs[j].split(":");var props=[];if(!/^\s*$/.test(nameValueBits[0])){props.push(trim(nameValueBits[0]).toLowerCase()+":"+trim(nameValueBits[1]))}styleValue=props.join(";")}return styleValue}function getNamespace(el){if(el.prefix){return el.prefix}else{if(el.outerHTML){var regex=new RegExp("<([^:]+):"+el.tagName+"[^>]*>","i");if(regex.test(el.outerHTML)){return RegExp.$1.toLowerCase()}}}return""}var lt="<";var gt=">";if(includeRootNode&&rootNode.nodeType!=nodeTypes.DOCUMENT_FRAGMENT_NODE){switch(rootNode.nodeType){case nodeTypes.ELEMENT_NODE:var tagName=rootNode.tagName.toLowerCase();xhtml=startNewLine?newLine+indentation:"";xhtml+=lt;var prefix=getNamespace(rootNode);var hasPrefix=prefix?true:false;if(hasPrefix){xhtml+=prefix+":"}xhtml+=tagName;for(i=0,len=rootNode.attributes.length;i<len;i++){var currentAttr=rootNode.attributes[i];if(!currentAttr.specified||currentAttr.nodeValue===null||currentAttr.nodeName.toLowerCase()==="style"||typeof currentAttr.nodeValue!=="string"||currentAttr.nodeName.indexOf("_moz")===0){continue}xhtml+=" "+currentAttr.nodeName.toLowerCase()+'="';xhtml+=fixAttributeValue(currentAttr.nodeValue);xhtml+='"'}if(rootNode.style.cssText){var styleValue=getStyleAttributeValue(rootNode);if(styleValue!==""){xhtml+=' style="'+getStyleAttributeValue(rootNode)+'"'}}if(array_contains(emptyElements,tagName)||(hasPrefix&&!rootNode.hasChildNodes())){xhtml+="/"+gt}else{xhtml+=gt;var childStartNewLine=!(rootNode.childNodes.length===1&&rootNode.childNodes[0].nodeType===nodeTypes.TEXT_NODE);var childPreformatted=array_contains(preFormattedElements,tagName);for(var i=0,len=rootNode.childNodes.length;i<len;i++){xhtml+=getXhtml(rootNode.childNodes[i],true,indentation+indentationUnit,childStartNewLine,childPreformatted)}var endTag=lt+"/"+tagName+gt;xhtml+=childStartNewLine?newLine+indentation+endTag:endTag}return xhtml;case nodeTypes.TEXT_NODE:if(isWhitespace(rootNode)){xhtml=""}else{if(preformatted){xhtml=rootNode.nodeValue}else{var lines=splitIntoLines(trim(rootNode.nodeValue));var trimmedLines=[];for(var i=0,len=lines.length;i<len;i++){trimmedLines[i]=trim(lines[i])}xhtml=trimmedLines.join(newLine+indentation)}if(startNewLine){xhtml=newLine+indentation+xhtml}}return xhtml;case nodeTypes.CDATA_SECTION_NODE:return"<![CDATA["+rootNode.nodeValue+"]]>"+newLine;case nodeTypes.DOCUMENT_NODE:xhtml="";for(var i=0,len=rootNode.childNodes.length;i<len;i++){xhtml+=getXhtml(rootNode.childNodes[i],true,indentation)}return xhtml;default:return""}}else{xhtml="";for(var i=0,len=rootNode.childNodes.length;i<len;i++){xhtml+=getXhtml(rootNode.childNodes[i],true,indentation+indentationUnit)}return xhtml}}var layouts={};function createCommandLineFunctions(appender){ConsoleAppender.addGlobalCommandLineFunction("$",function(appender,args,returnValue){return document.getElementById(args[0])});ConsoleAppender.addGlobalCommandLineFunction("dir",function(appender,args,returnValue){var lines=[];for(var i=0,len=args.length;i<len;i++){lines[i]=dir(args[i])}return lines.join(newLine+newLine)});ConsoleAppender.addGlobalCommandLineFunction("dirxml",function(appender,args,returnValue){var lines=[];for(var i=0,len=args.length;i<len;i++){var win=appender.getCommandWindow();lines[i]=getXhtml(args[i])}return lines.join(newLine+newLine)});ConsoleAppender.addGlobalCommandLineFunction("cd",function(appender,args,returnValue){var win,message;if(args.length===0||args[0]===""){win=window;message="Command line set to run in main window"}else{if(args[0].window==args[0]){win=args[0];message="Command line set to run in frame '"+args[0].name+"'"}else{win=window.frames[args[0]];if(win){message="Command line set to run in frame '"+args[0]+"'"}else{returnValue.isError=true;message="Frame '"+args[0]+"' does not exist";win=appender.getCommandWindow()}}}appender.setCommandWindow(win);return message});ConsoleAppender.addGlobalCommandLineFunction("clear",function(appender,args,returnValue){returnValue.appendResult=false;appender.clear()});ConsoleAppender.addGlobalCommandLineFunction("keys",function(appender,args,returnValue){var keys=[];for(var k in args[0]){keys.push(k)}return keys});ConsoleAppender.addGlobalCommandLineFunction("values",function(appender,args,returnValue){var values=[];for(var k in args[0]){try{values.push(args[0][k])}catch(ex){logLog.warn("values(): Unable to obtain value for key "+k+". Details: "+getExceptionMessage(ex))}}return values});ConsoleAppender.addGlobalCommandLineFunction("expansionDepth",function(appender,args,returnValue){var expansionDepth=parseInt(args[0],10);if(isNaN(expansionDepth)||expansionDepth<0){returnValue.isError=true;return""+args[0]+" is not a valid expansion depth"}else{appender.setCommandLineObjectExpansionDepth(expansionDepth);return"Object expansion depth set to "+expansionDepth}})}function init(){createCommandLineFunctions();initialized=true}init()})();function addWindowLoadListener(listener){var oldOnload=window.onload;if(typeof window.onload!="function"){window.onload=listener}else{window.onload=function(evt){if(oldOnload){oldOnload(evt)}listener(evt)}}}addWindowLoadListener(function(){pageLoaded=true;log4javascript.dispatchEvent("load",{})});window.log4javascript=log4javascript})();function Sarissa(){}Sarissa.VERSION="0.9.9.5";Sarissa.PARSED_OK="Document contains no parsing errors";Sarissa.PARSED_EMPTY="Document is empty";Sarissa.PARSED_UNKNOWN_ERROR="Not well-formed or other error";Sarissa.IS_ENABLED_TRANSFORM_NODE=false;Sarissa.REMOTE_CALL_FLAG="gr.abiss.sarissa.REMOTE_CALL_FLAG";Sarissa._lastUniqueSuffix=0;Sarissa._getUniqueSuffix=function(){return Sarissa._lastUniqueSuffix++};Sarissa._SARISSA_IEPREFIX4XSLPARAM="";Sarissa._SARISSA_HAS_DOM_IMPLEMENTATION=document.implementation&&true;Sarissa._SARISSA_HAS_DOM_CREATE_DOCUMENT=Sarissa._SARISSA_HAS_DOM_IMPLEMENTATION&&document.implementation.createDocument;Sarissa._SARISSA_HAS_DOM_FEATURE=Sarissa._SARISSA_HAS_DOM_IMPLEMENTATION&&document.implementation.hasFeature;Sarissa._SARISSA_IS_MOZ=Sarissa._SARISSA_HAS_DOM_CREATE_DOCUMENT&&Sarissa._SARISSA_HAS_DOM_FEATURE;Sarissa._SARISSA_IS_SAFARI=navigator.userAgent.toLowerCase().indexOf("safari")!=-1||navigator.userAgent.toLowerCase().indexOf("konqueror")!=-1;Sarissa._SARISSA_IS_SAFARI_OLD=Sarissa._SARISSA_IS_SAFARI&&(parseInt((navigator.userAgent.match(/AppleWebKit\/(\d+)/)||{})[1],10)<420);Sarissa._SARISSA_IS_IE=document.all&&window.ActiveXObject&&navigator.userAgent.toLowerCase().indexOf("msie")>-1&&navigator.userAgent.toLowerCase().indexOf("opera")==-1;Sarissa._SARISSA_IS_OPERA=navigator.userAgent.toLowerCase().indexOf("opera")!=-1;if(!window.Node||!Node.ELEMENT_NODE){Node={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12}}if(Sarissa._SARISSA_IS_SAFARI_OLD){HTMLHtmlElement=document.createElement("html").constructor;Node=HTMLElement={};HTMLElement.prototype=HTMLHtmlElement.__proto__.__proto__;HTMLDocument=Document=document.constructor;var x=new DOMParser();XMLDocument=x.constructor;Element=x.parseFromString("<Single />","text/xml").documentElement.constructor;x=null}if(typeof XMLDocument=="undefined"&&typeof Document!="undefined"){XMLDocument=Document}if(Sarissa._SARISSA_IS_IE){Sarissa._SARISSA_IEPREFIX4XSLPARAM="xsl:";var _SARISSA_DOM_PROGID="";var _SARISSA_XMLHTTP_PROGID="";var _SARISSA_DOM_XMLWRITER="";Sarissa.pickRecentProgID=function(f){var d=false,h;var g;for(var b=0;b<f.length&&!d;b++){try{var a=new ActiveXObject(f[b]);g=f[b];d=true}catch(c){h=c}}if(!d){throw"Could not retrieve a valid progID of Class: "+f[f.length-1]+". (original exception: "+h+")"}f=null;return g};_SARISSA_DOM_PROGID=null;_SARISSA_THREADEDDOM_PROGID=null;_SARISSA_XSLTEMPLATE_PROGID=null;_SARISSA_XMLHTTP_PROGID=null;XMLHttpRequest=function(){if(!_SARISSA_XMLHTTP_PROGID){_SARISSA_XMLHTTP_PROGID=Sarissa.pickRecentProgID(["Msxml2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"])}return new ActiveXObject(_SARISSA_XMLHTTP_PROGID)};Sarissa.getDomDocument=function(f,d){if(!_SARISSA_DOM_PROGID){try{_SARISSA_DOM_PROGID=Sarissa.pickRecentProgID(["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.3.0","MSXML2.DOMDocument","MSXML.DOMDocument","Microsoft.XMLDOM"])}catch(c){_SARISSA_DOM_PROGID="noActiveX"}}var a=_SARISSA_DOM_PROGID=="noActiveX"?document.createElement("xml"):new ActiveXObject(_SARISSA_DOM_PROGID);try{a.validateOnParse=false;a.resolveExternals="false";a.setProperty("ProhibitDTD",false)}catch(c){}if(d){var b="";if(f){if(d.indexOf(":")>1){b=d.substring(0,d.indexOf(":"));d=d.substring(d.indexOf(":")+1)}else{b="a"+Sarissa._getUniqueSuffix()}}if(f){a.loadXML("<"+b+":"+d+" xmlns:"+b+'="'+f+'" />')}else{a.loadXML("<"+d+" />")}}return a};Sarissa.getParseErrorText=function(a){var c=Sarissa.PARSED_OK;if(a&&a.parseError&&a.parseError.errorCode&&a.parseError.errorCode!=0){c="XML Parsing Error: "+a.parseError.reason+"\nLocation: "+a.parseError.url+"\nLine Number "+a.parseError.line+", Column "+a.parseError.linepos+":\n"+a.parseError.srcText+"\n";for(var b=0;b<a.parseError.linepos;b++){c+="-"}c+="^\n"}else{if(a.documentElement===null){c=Sarissa.PARSED_EMPTY}}return c};Sarissa.setXpathNamespaces=function(a,b){a.setProperty("SelectionLanguage","XPath");a.setProperty("SelectionNamespaces",b)};XSLTProcessor=function(){if(!_SARISSA_XSLTEMPLATE_PROGID){_SARISSA_XSLTEMPLATE_PROGID=Sarissa.pickRecentProgID(["Msxml2.XSLTemplate.6.0","MSXML2.XSLTemplate.3.0"])}this.template=new ActiveXObject(_SARISSA_XSLTEMPLATE_PROGID);this.processor=null};XSLTProcessor.prototype.importStylesheet=function(d){if(!_SARISSA_THREADEDDOM_PROGID){_SARISSA_THREADEDDOM_PROGID=Sarissa.pickRecentProgID(["MSXML2.FreeThreadedDOMDocument.6.0","MSXML2.FreeThreadedDOMDocument.3.0"])}d.setProperty("SelectionLanguage","XPath");d.setProperty("SelectionNamespaces","xmlns:xsl='http://www.w3.org/1999/XSL/Transform'");var c=new ActiveXObject(_SARISSA_THREADEDDOM_PROGID);try{c.resolveExternals=true;c.setProperty("AllowDocumentFunction",true);c.setProperty("AllowXsltScript",true)}catch(b){}if(d.url&&d.selectSingleNode("//xsl:*[local-name() = 'import' or local-name() = 'include']")!=null){c.async=false;c.load(d.url)}else{c.loadXML(d.xml)}c.setProperty("SelectionNamespaces","xmlns:xsl='http://www.w3.org/1999/XSL/Transform'");var a=c.selectSingleNode("//xsl:output");if(a){this.outputMethod=a.getAttribute("method")}else{delete this.outputMethod}this.template.stylesheet=c;this.processor=this.template.createProcessor();this.paramsSet=[]};XSLTProcessor.prototype.transformToDocument=function(c){var b;if(_SARISSA_THREADEDDOM_PROGID){this.processor.input=c;b=new ActiveXObject(_SARISSA_DOM_PROGID);this.processor.output=b;this.processor.transform();return b}else{if(!_SARISSA_DOM_XMLWRITER){_SARISSA_DOM_XMLWRITER=Sarissa.pickRecentProgID(["Msxml2.MXXMLWriter.6.0","Msxml2.MXXMLWriter.3.0","MSXML2.MXXMLWriter","MSXML.MXXMLWriter","Microsoft.XMLDOM"])}this.processor.input=c;b=new ActiveXObject(_SARISSA_DOM_XMLWRITER);this.processor.output=b;this.processor.transform();var a=new ActiveXObject(_SARISSA_DOM_PROGID);a.loadXML(b.output+"");return a}};XSLTProcessor.prototype.transformToFragment=function(i,d){this.processor.input=i;this.processor.transform();var g=this.processor.output;var h=d.createDocumentFragment();var b;if(this.outputMethod=="text"){h.appendChild(d.createTextNode(g))}else{if(d.body&&d.body.innerHTML){b=d.createElement("div");b.innerHTML=g;while(b.hasChildNodes()){h.appendChild(b.firstChild)}}else{var a=new ActiveXObject(_SARISSA_DOM_PROGID);if(g.substring(0,5)=="<?xml"){g=g.substring(g.indexOf("?>")+2)}var c="".concat("<my>",g,"</my>");a.loadXML(c);b=a.documentElement;while(b.hasChildNodes()){h.appendChild(b.firstChild)}}}return h};XSLTProcessor.prototype.setParameter=function(c,a,b){b=b?b:"";if(c){this.processor.addParameter(a,b,c)}else{this.processor.addParameter(a,b)}c=""+(c||"");if(!this.paramsSet[c]){this.paramsSet[c]=[]}this.paramsSet[c][a]=b};XSLTProcessor.prototype.getParameter=function(b,a){b=""+(b||"");if(this.paramsSet[b]&&this.paramsSet[b][a]){return this.paramsSet[b][a]}else{return null}};XSLTProcessor.prototype.clearParameters=function(){for(var b in this.paramsSet){for(var a in this.paramsSet[b]){if(b!=""){this.processor.addParameter(a,"",b)}else{this.processor.addParameter(a,"")}}}this.paramsSet=[]}}else{if(Sarissa._SARISSA_HAS_DOM_CREATE_DOCUMENT){Sarissa.__handleLoad__=function(a){Sarissa.__setReadyState__(a,4)};_sarissa_XMLDocument_onload=function(){Sarissa.__handleLoad__(this)};Sarissa.__setReadyState__=function(a,b){a.readyState=b;a.readystate=b;if(a.onreadystatechange!=null&&typeof a.onreadystatechange=="function"){a.onreadystatechange()}};Sarissa.getDomDocument=function(c,b){var a=document.implementation.createDocument(c?c:null,b?b:null,null);if(!a.onreadystatechange){a.onreadystatechange=null}if(!a.readyState){a.readyState=0}a.addEventListener("load",_sarissa_XMLDocument_onload,false);return a};if(window.XMLDocument){}else{if(Sarissa._SARISSA_HAS_DOM_FEATURE&&window.Document&&!Document.prototype.load&&document.implementation.hasFeature("LS","3.0")){Sarissa.getDomDocument=function(c,b){var a=document.implementation.createDocument(c?c:null,b?b:null,null);return a}}else{Sarissa.getDomDocument=function(c,b){var a=document.implementation.createDocument(c?c:null,b?b:null,null);if(a&&(c||b)&&!a.documentElement){a.appendChild(a.createElementNS(c,b))}return a}}}}}if(!window.DOMParser){if(Sarissa._SARISSA_IS_SAFARI){DOMParser=function(){};DOMParser.prototype.parseFromString=function(b,c){var a=new XMLHttpRequest();a.open("GET","data:text/xml;charset=utf-8,"+encodeURIComponent(b),false);a.send(null);return a.responseXML}}else{if(Sarissa.getDomDocument&&Sarissa.getDomDocument()&&Sarissa.getDomDocument(null,"bar").xml){DOMParser=function(){};DOMParser.prototype.parseFromString=function(a,d){var c=Sarissa.getDomDocument();try{c.validateOnParse=false;c.setProperty("ProhibitDTD",false)}catch(b){}c.loadXML(a);return c}}}}if((typeof(document.importNode)=="undefined")&&Sarissa._SARISSA_IS_IE){try{document.importNode=function(c,b){var a;if(c.nodeName=="#text"){return document.createTextNode(c.data)}else{if(c.nodeName=="tbody"||c.nodeName=="tr"){a=document.createElement("table")}else{if(c.nodeName=="td"){a=document.createElement("tr")}else{if(c.nodeName=="option"){a=document.createElement("select")}else{a=document.createElement("div")}}}if(b){a.innerHTML=c.xml?c.xml:c.outerHTML}else{a.innerHTML=c.xml?c.cloneNode(false).xml:c.cloneNode(false).outerHTML}return a.getElementsByTagName("*")[0]}}}catch(e){}}if(!Sarissa.getParseErrorText){Sarissa.getParseErrorText=function(a){var c=Sarissa.PARSED_OK;if((!a)||(!a.documentElement)){c=Sarissa.PARSED_EMPTY}else{if(a.documentElement.tagName=="parsererror"){c=a.documentElement.firstChild.data;c+="\n"+a.documentElement.firstChild.nextSibling.firstChild.data}else{if(a.getElementsByTagName("parsererror").length>0){var b=a.getElementsByTagName("parsererror")[0];c=Sarissa.getText(b,true)+"\n"}else{if(a.parseError&&a.parseError.errorCode!=0){c=Sarissa.PARSED_UNKNOWN_ERROR}}}}return c}}Sarissa.getText=function(h,b){var f="";var c=h.childNodes;if(h.nodeType==Node.ATTRIBUTE_NODE&&c.length==0){return h.value}for(var d=0;d<c.length;d++){var g=c[d];var a=g.nodeType;if(a==Node.TEXT_NODE||a==Node.CDATA_SECTION_NODE){f+=g.data}else{if(b===true&&(a==Node.ELEMENT_NODE||a==Node.DOCUMENT_NODE||a==Node.DOCUMENT_FRAGMENT_NODE)){f+=Sarissa.getText(g,true)}}}return f};if(!window.XMLSerializer&&Sarissa.getDomDocument&&Sarissa.getDomDocument("","foo",null).xml){XMLSerializer=function(){};XMLSerializer.prototype.serializeToString=function(a){return a.xml}}Sarissa.stripTags=function(a){return a?a.replace(/<[^>]+>/g,""):a};Sarissa.clearChildNodes=function(a){while(a.firstChild){a.removeChild(a.firstChild)}};Sarissa.copyChildNodes=function(d,f,g){if(Sarissa._SARISSA_IS_SAFARI&&f.nodeType==Node.DOCUMENT_NODE){f=f.documentElement}if((!d)||(!f)){throw"Both source and destination nodes must be provided"}if(!g){Sarissa.clearChildNodes(f)}var b=f.nodeType==Node.DOCUMENT_NODE?f:f.ownerDocument;var a=d.childNodes;var c;if(typeof(b.importNode)!="undefined"){for(c=0;c<a.length;c++){f.appendChild(b.importNode(a[c],true))}}else{for(c=0;c<a.length;c++){f.appendChild(a[c].cloneNode(true))}}};Sarissa.moveChildNodes=function(d,f,g){if((!d)||(!f)){throw"Both source and destination nodes must be provided"}if(!g){Sarissa.clearChildNodes(f)}var a=d.childNodes;if(d.ownerDocument==f.ownerDocument){while(d.firstChild){f.appendChild(d.firstChild)}}else{var b=f.nodeType==Node.DOCUMENT_NODE?f:f.ownerDocument;var c;if(typeof(b.importNode)!="undefined"){for(c=0;c<a.length;c++){f.appendChild(b.importNode(a[c],true))}}else{for(c=0;c<a.length;c++){f.appendChild(a[c].cloneNode(true))}}Sarissa.clearChildNodes(d)}};Sarissa.xmlize=function(g,i,d,f){d=d?d:"";var h=d+"<"+i+">";var b=false;if(!(g instanceof Object)||g instanceof Number||g instanceof String||g instanceof Boolean||g instanceof Date){h+=(f?Sarissa.escape(g):g);b=true}else{h+="\n";var a=g instanceof Array;for(var c in g){if(g[c] instanceof Function){continue}h+=Sarissa.xmlize(g[c],(a?'array-item key="'+c+'"':c),d+" ")}h+=d}return(h+=(i.indexOf(" ")!=-1?"</array-item>\n":"</"+i+">\n"))};Sarissa.escape=function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")};Sarissa.unescape=function(a){return a.replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&")};Sarissa.updateCursor=function(b,a){if(b&&b.style&&b.style.cursor!=undefined){b.style.cursor=a}};Sarissa.updateContentFromURI=function(c,i,a,h,f){try{Sarissa.updateCursor(i,"wait");var b=new XMLHttpRequest();b.open("GET",c,true);b.onreadystatechange=function(){if(b.readyState==4){try{var j=b.responseXML;if(j&&Sarissa.getParseErrorText(j)==Sarissa.PARSED_OK){Sarissa.updateContentFromNode(b.responseXML,i,a);if(h){h(c,i)}}else{throw Sarissa.getParseErrorText(j)}}catch(k){if(h){h(c,i,k)}else{throw k}}}};if(f){var g="Sat, 1 Jan 2000 00:00:00 GMT";b.setRequestHeader("If-Modified-Since",g)}b.send("")}catch(d){Sarissa.updateCursor(i,"auto");if(h){h(c,i,d)}else{throw d}}};Sarissa.updateContentFromNode=function(f,g,a){try{Sarissa.updateCursor(g,"wait");Sarissa.clearChildNodes(g);var b=f.nodeType==Node.DOCUMENT_NODE?f:f.ownerDocument;if(b.parseError&&b.parseError.errorCode!=0){var d=document.createElement("pre");d.appendChild(document.createTextNode(Sarissa.getParseErrorText(b)));g.appendChild(d)}else{if(a){f=a.transformToDocument(f)}if(g.tagName.toLowerCase()=="textarea"||g.tagName.toLowerCase()=="input"){g.value=new XMLSerializer().serializeToString(f)}else{try{g.appendChild(g.ownerDocument.importNode(f,true))}catch(c){g.innerHTML=new XMLSerializer().serializeToString(f)}}}}catch(c){throw c}finally{Sarissa.updateCursor(g,"auto")}};Sarissa.formToQueryString=function(h){var a="";for(var g=0;g<h.elements.length;g++){var f=h.elements[g];var d=f.getAttribute("name")?f.getAttribute("name"):f.getAttribute("id");if(d&&((!f.disabled)||f.type=="hidden")){switch(f.type){case"hidden":case"text":case"textarea":case"password":a+=d+"="+encodeURIComponent(f.value)+"&";break;case"select-one":a+=d+"="+encodeURIComponent(f.options[f.selectedIndex].value)+"&";break;case"select-multiple":for(var c=0;c<f.length;c++){var b=f.options[c];if(b.selected===true){a+=d+"[]="+encodeURIComponent(b.value)+"&"}}break;case"checkbox":case"radio":if(f.checked){a+=d+"="+encodeURIComponent(f.value)+"&"}break}}}return a.substr(0,a.length-1)};Sarissa.updateContentFromForm=function(g,i,a,h){try{Sarissa.updateCursor(i,"wait");var f=Sarissa.formToQueryString(g)+"&"+Sarissa.REMOTE_CALL_FLAG+"=true";var b=new XMLHttpRequest();var c=g.getAttribute("method")&&g.getAttribute("method").toLowerCase()=="get";if(c){b.open("GET",g.getAttribute("action")+"?"+f,true)}else{b.open("POST",g.getAttribute("action"),true);b.setRequestHeader("Content-type","application/x-www-form-urlencoded");b.setRequestHeader("Content-length",f.length);b.setRequestHeader("Connection","close")}b.onreadystatechange=function(){try{if(b.readyState==4){var j=b.responseXML;if(j&&Sarissa.getParseErrorText(j)==Sarissa.PARSED_OK){Sarissa.updateContentFromNode(b.responseXML,i,a);if(h){h(g,i)}}else{throw Sarissa.getParseErrorText(j)}}}catch(k){if(h){h(g,i,k)}else{throw k}}};b.send(c?"":f)}catch(d){Sarissa.updateCursor(i,"auto");if(h){h(g,i,d)}else{throw d}}return false};Sarissa.getFunctionName=function(c){if(!c||(typeof c!="function")){throw"The value of parameter 'oFunc' must be a function"}if(c.name){return c.name}var a=c.toString();alert("sFunc: "+a);var b=a.substring(a.indexOf("function")+8,a.indexOf("("));if(!b||b.length==0||b==" "){b="SarissaAnonymous"+Sarissa._getUniqueSuffix();window[b]=c}return b};Sarissa.setRemoteJsonCallback=function(a,h,b){if(!b){b="callback"}var g=Sarissa.getFunctionName(h);var f="sarissa_json_script_id_"+Sarissa._getUniqueSuffix();var d=document.getElementsByTagName("head")[0];var c=document.createElement("script");c.type="text/javascript";c.id=f;c.onload=function(){};if(a.indexOf("?")!=-1){a+=("&"+b+"="+g)}else{a+=("?"+b+"="+g)}c.src=a;d.appendChild(c);return f};if(Sarissa._SARISSA_HAS_DOM_FEATURE&&document.implementation.hasFeature("XPath","3.0")){SarissaNodeList=function(a){this.length=a};SarissaNodeList.prototype=[];SarissaNodeList.prototype.constructor=Array;SarissaNodeList.prototype.item=function(a){return(a<0||a>=this.length)?null:this[a]};SarissaNodeList.prototype.expr="";if(window.XMLDocument&&(!XMLDocument.prototype.setProperty)){XMLDocument.prototype.setProperty=function(a,b){}}Sarissa.setXpathNamespaces=function(h,c){h._sarissa_useCustomResolver=true;var a=c.indexOf(" ")>-1?c.split(" "):[c];h._sarissa_xpathNamespaces=[];for(var d=0;d<a.length;d++){var g=a[d];var j=g.indexOf(":");var k=g.indexOf("=");if(j>0&&k>j+1){var f=g.substring(j+1,k);var b=g.substring(k+2,g.length-1);h._sarissa_xpathNamespaces[f]=b}else{throw"Bad format on namespace declaration(s) given"}}};XMLDocument.prototype._sarissa_useCustomResolver=false;XMLDocument.prototype._sarissa_xpathNamespaces=[];XMLDocument.prototype.selectNodes=function(c,h,a){var f=this;var b;if(this._sarissa_useCustomResolver){b=function(l){var i=f._sarissa_xpathNamespaces[l];if(i){return i}else{throw"No namespace URI found for prefix: '"+l+"'"}}}else{b=this.createNSResolver(this.documentElement)}var k=null;if(!a){var j=this.evaluate(c,(h?h:this),b,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);var d=new SarissaNodeList(j.snapshotLength);d.expr=c;for(var g=0;g<d.length;g++){d[g]=j.snapshotItem(g)}k=d}else{k=this.evaluate(c,(h?h:this),b,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}return k};Element.prototype.selectNodes=function(a){var b=this.ownerDocument;if(b.selectNodes){return b.selectNodes(a,this)}else{throw"Method selectNodes is only supported by XML Elements"}};XMLDocument.prototype.selectSingleNode=function(c,b){var a=b?b:null;return this.selectNodes(c,a,true)};Element.prototype.selectSingleNode=function(a){var b=this.ownerDocument;if(b.selectSingleNode){return b.selectSingleNode(a,this)}else{throw"Method selectNodes is only supported by XML Elements"}};Sarissa.IS_ENABLED_SELECT_NODES=true}Sarissa.XPATH_INITIALIZED=true;
/*!
	Slimbox v1.8 - The ultimate lightweight Lightbox clone
	(c) 2007-2011 Christophe Beyls <http://www.digitalia.be>
	MIT-style license.
*/
var Slimbox=(function(){var L=window,o=Browser.ie6,v,h,M=-1,p,z,K,y,D,S,t,n={},u=new Image(),Q=new Image(),O,a,i,r,P,f,N,c,G,R,B,j,d,I;L.addEvent("domready",function(){$(document.body).adopt($$(O=new Element("div#lbOverlay",{events:{click:J}}),a=new Element("div#lbCenter"),N=new Element("div#lbBottomContainer")).setStyle("display","none"));i=new Element("div#lbImage").inject(a).adopt(r=new Element("div",{styles:{position:"relative"}}).adopt(P=new Element("a#lbPrevLink[href=#]",{events:{click:H}}),f=new Element("a#lbNextLink[href=#]",{events:{click:g}})));c=new Element("div#lbBottom").inject(N).adopt(new Element("a#lbCloseLink[href=#]",{events:{click:J}}),G=new Element("div#lbCaption"),R=new Element("div#lbNumber"),new Element("div",{styles:{clear:"both"}}))});function E(){var T=L.getScroll(),U=L.getSize();$$(a,N).setStyle("left",T.x+(U.x/2));if(y){O.setStyles({left:T.x,top:T.y,width:U.x,height:U.y})}}function m(T){["object",o?"select":"embed"].forEach(function(V){Array.forEach(document.getElementsByTagName(V),function(W){if(T){W._slimbox=W.style.visibility}W.style.visibility=T?"hidden":W._slimbox})});O.style.display=T?"":"none";var U=T?"addEvent":"removeEvent";L[U]("scroll",E)[U]("resize",E);document[U]("keydown",q)}function q(U){var T=U.code;return v.closeKeys.contains(T)?J():v.nextKeys.contains(T)?g():v.previousKeys.contains(T)?H():false}function H(){return b(z)}function g(){return b(K)}function b(T){if(T>=0){M=T;p=h[T][0];z=(M||(v.loop?h.length:0))-1;K=((M+1)%h.length)||(v.loop?0:-1);s();a.className="lbLoading";n=new Image();n.onload=l;n.src=p}return false}function l(){a.className="";d.set(0);i.setStyles({backgroundImage:"url("+p+")",display:""});r.setStyle("width",n.width);$$(r,P,f).setStyle("height",n.height);G.set("html",h[M][1]||"");R.set("html",(((h.length>1)&&v.counterText)||"").replace(/{x}/,M+1).replace(/{y}/,h.length));if(z>=0){u.src=h[z][0]}if(K>=0){Q.src=h[K][0]}S=i.offsetWidth;t=i.offsetHeight;var V=Math.max(0,D-(t/2)),T=0,U;if(a.offsetHeight!=t){T=j.start({height:t,top:V})}if(a.offsetWidth!=S){T=j.start({width:S,marginLeft:-S/2})}U=function(){N.setStyles({width:S,top:V+t,marginLeft:-S/2,visibility:"hidden",display:""});d.start(1)};if(T){j.chain(U)}else{U()}}function k(){if(z>=0){P.style.display=""}if(K>=0){f.style.display=""}I.set(-c.offsetHeight).start(0);N.style.visibility=""}function s(){n.onload=null;n.src=u.src=Q.src=p;j.cancel();d.cancel();I.cancel();$$(P,f,i,N).setStyle("display","none")}function J(){if(M>=0){s();M=z=K=-1;a.style.display="none";B.cancel().chain(m).start(0)}return false}Element.implement({slimbox:function(T,U){$$(this).slimbox(T,U);return this}});Elements.implement({slimbox:function(T,W,V){W=W||function(X){return[X.href,X.title]};V=V||function(){return true};var U=this;U.removeEvents("click").addEvent("click",function(){var X=U.filter(V,this);return Slimbox.open(X.map(W),X.indexOf(this),T)});return U}});return{open:function(V,U,T){v=Object.append({loop:false,overlayOpacity:0.8,overlayFadeDuration:400,resizeDuration:400,resizeTransition:false,initialWidth:250,initialHeight:250,imageFadeDuration:400,captionAnimationDuration:400,counterText:"Image {x} of {y}",closeKeys:[27,88,67],previousKeys:[37,80],nextKeys:[39,78]},T||{});B=new Fx.Tween(O,{property:"opacity",duration:v.overlayFadeDuration});j=new Fx.Morph(a,Object.append({duration:v.resizeDuration,link:"chain"},v.resizeTransition?{transition:v.resizeTransition}:{}));d=new Fx.Tween(i,{property:"opacity",duration:v.imageFadeDuration,onComplete:k});I=new Fx.Tween(c,{property:"margin-top",duration:v.captionAnimationDuration});if(typeof V=="string"){V=[[V,U]];U=0}D=L.getScrollTop()+(L.getHeight()/2);S=v.initialWidth;t=v.initialHeight;a.setStyles({top:Math.max(0,D-(t/2)),width:S,height:t,marginLeft:-S/2,display:""});y=o||(O.currentStyle&&(O.currentStyle.position!="fixed"));if(y){O.style.position="absolute"}B.set(0).start(v.overlayOpacity);E();m(1);h=V;v.loop=v.loop&&(h.length>1);return b(U)}}})();SAXEventHandler=function(){this.characterData=""};SAXEventHandler.prototype.characters=function(b,c,a){this.characterData+=b.substr(c,a)};SAXEventHandler.prototype.endDocument=function(){this._handleCharacterData()};SAXEventHandler.prototype.endElement=function(a){this._handleCharacterData()};SAXEventHandler.prototype.processingInstruction=function(b,a){this._handleCharacterData()};SAXEventHandler.prototype.setDocumentLocator=function(a){this._handleCharacterData()};SAXEventHandler.prototype.startElement=function(a,b){this._handleCharacterData()};SAXEventHandler.prototype.startDocument=function(){this._handleCharacterData()};SAXEventHandler.prototype.comment=function(b,c,a){this._handleCharacterData()};SAXEventHandler.prototype.endCDATA=function(){this._handleCharacterData()};SAXEventHandler.prototype.startCDATA=function(){this._handleCharacterData()};SAXEventHandler.prototype.error=function(a){this._handleCharacterData()};SAXEventHandler.prototype.fatalError=function(a){this._handleCharacterData()};SAXEventHandler.prototype.warning=function(a){this._handleCharacterData()};SAXEventHandler.prototype._fullCharacterDataReceived=function(a){};SAXEventHandler.prototype._handleCharacterData=function(){if(this.characterData!=""){this._fullCharacterDataReceived(this.characterData)}this.characterData=""};var whitespace="\n\r\t ";XMLP=function(a){a=SAXStrings.replace(a,null,null,"\r\n","\n");a=SAXStrings.replace(a,null,null,"\r","\n");this.m_xml=a;this.m_iP=0;this.m_iState=XMLP._STATE_PROLOG;this.m_stack=new Stack();this._clearAttributes()};XMLP._NONE=0;XMLP._ELM_B=1;XMLP._ELM_E=2;XMLP._ELM_EMP=3;XMLP._ATT=4;XMLP._TEXT=5;XMLP._ENTITY=6;XMLP._PI=7;XMLP._CDATA=8;XMLP._COMMENT=9;XMLP._DTD=10;XMLP._ERROR=11;XMLP._CONT_XML=0;XMLP._CONT_ALT=1;XMLP._ATT_NAME=0;XMLP._ATT_VAL=1;XMLP._STATE_PROLOG=1;XMLP._STATE_DOCUMENT=2;XMLP._STATE_MISC=3;XMLP._errs=new Array();XMLP._errs[XMLP.ERR_CLOSE_PI=0]="PI: missing closing sequence";XMLP._errs[XMLP.ERR_CLOSE_DTD=1]="DTD: missing closing sequence";XMLP._errs[XMLP.ERR_CLOSE_COMMENT=2]="Comment: missing closing sequence";XMLP._errs[XMLP.ERR_CLOSE_CDATA=3]="CDATA: missing closing sequence";XMLP._errs[XMLP.ERR_CLOSE_ELM=4]="Element: missing closing sequence";XMLP._errs[XMLP.ERR_CLOSE_ENTITY=5]="Entity: missing closing sequence";XMLP._errs[XMLP.ERR_PI_TARGET=6]="PI: target is required";XMLP._errs[XMLP.ERR_ELM_EMPTY=7]="Element: cannot be both empty and closing";XMLP._errs[XMLP.ERR_ELM_NAME=8]='Element: name must immediatly follow "<"';XMLP._errs[XMLP.ERR_ELM_LT_NAME=9]='Element: "<" not allowed in element names';XMLP._errs[XMLP.ERR_ATT_VALUES=10]="Attribute: values are required and must be in quotes";XMLP._errs[XMLP.ERR_ATT_LT_NAME=11]='Element: "<" not allowed in attribute names';XMLP._errs[XMLP.ERR_ATT_LT_VALUE=12]='Attribute: "<" not allowed in attribute values';XMLP._errs[XMLP.ERR_ATT_DUP=13]="Attribute: duplicate attributes not allowed";XMLP._errs[XMLP.ERR_ENTITY_UNKNOWN=14]="Entity: unknown entity";XMLP._errs[XMLP.ERR_INFINITELOOP=15]="Infininte loop";XMLP._errs[XMLP.ERR_DOC_STRUCTURE=16]="Document: only comments, processing instructions, or whitespace allowed outside of document element";XMLP._errs[XMLP.ERR_ELM_NESTING=17]="Element: must be nested correctly";XMLP.prototype._addAttribute=function(a,b){this.m_atts[this.m_atts.length]=new Array(a,b)};XMLP.prototype._checkStructure=function(b){if(XMLP._STATE_PROLOG==this.m_iState){if((XMLP._TEXT==b)||(XMLP._ENTITY==b)){if(SAXStrings.indexOfNonWhitespace(this.getContent(),this.getContentBegin(),this.getContentEnd())!=-1){return this._setErr(XMLP.ERR_DOC_STRUCTURE)}}if((XMLP._ELM_B==b)||(XMLP._ELM_EMP==b)){this.m_iState=XMLP._STATE_DOCUMENT}}if(XMLP._STATE_DOCUMENT==this.m_iState){if((XMLP._ELM_B==b)||(XMLP._ELM_EMP==b)){this.m_stack.push(this.getName())}if((XMLP._ELM_E==b)||(XMLP._ELM_EMP==b)){var a=this.m_stack.pop();if((a==null)||(a!=this.getName())){return this._setErr(XMLP.ERR_ELM_NESTING)}}if(this.m_stack.count()==0){this.m_iState=XMLP._STATE_MISC;return b}}if(XMLP._STATE_MISC==this.m_iState){if((XMLP._ELM_B==b)||(XMLP._ELM_E==b)||(XMLP._ELM_EMP==b)||(XMLP.EVT_DTD==b)){return this._setErr(XMLP.ERR_DOC_STRUCTURE)}if((XMLP._TEXT==b)||(XMLP._ENTITY==b)){if(SAXStrings.indexOfNonWhitespace(this.getContent(),this.getContentBegin(),this.getContentEnd())!=-1){return this._setErr(XMLP.ERR_DOC_STRUCTURE)}}}return b};XMLP.prototype._clearAttributes=function(){this.m_atts=new Array()};XMLP.prototype._findAttributeIndex=function(a){for(var b=0;b<this.m_atts.length;b++){if(this.m_atts[b][XMLP._ATT_NAME]==a){return b}}return -1};XMLP.prototype.getAttributeCount=function(){return this.m_atts?this.m_atts.length:0};XMLP.prototype.getAttributeName=function(a){return((a<0)||(a>=this.m_atts.length))?null:this.m_atts[a][XMLP._ATT_NAME]};XMLP.prototype.getAttributeValue=function(a){return((a<0)||(a>=this.m_atts.length))?null:__unescapeString(this.m_atts[a][XMLP._ATT_VAL])};XMLP.prototype.getAttributeValueByName=function(a){return this.getAttributeValue(this._findAttributeIndex(a))};XMLP.prototype.getColumnNumber=function(){return SAXStrings.getColumnNumber(this.m_xml,this.m_iP)};XMLP.prototype.getContent=function(){return(this.m_cSrc==XMLP._CONT_XML)?this.m_xml:this.m_cAlt};XMLP.prototype.getContentBegin=function(){return this.m_cB};XMLP.prototype.getContentEnd=function(){return this.m_cE};XMLP.prototype.getLineNumber=function(){return SAXStrings.getLineNumber(this.m_xml,this.m_iP)};XMLP.prototype.getName=function(){return this.m_name};XMLP.prototype.next=function(){return this._checkStructure(this._parse())};XMLP.prototype._parse=function(){if(this.m_iP==this.m_xml.length){return XMLP._NONE}if(this.m_iP==this.m_xml.indexOf("<?",this.m_iP)){return this._parsePI(this.m_iP+2)}else{if(this.m_iP==this.m_xml.indexOf("<!DOCTYPE",this.m_iP)){return this._parseDTD(this.m_iP+9)}else{if(this.m_iP==this.m_xml.indexOf("<!--",this.m_iP)){return this._parseComment(this.m_iP+4)}else{if(this.m_iP==this.m_xml.indexOf("<![CDATA[",this.m_iP)){return this._parseCDATA(this.m_iP+9)}else{if(this.m_iP==this.m_xml.indexOf("<",this.m_iP)){return this._parseElement(this.m_iP+1)}else{if(this.m_iP==this.m_xml.indexOf("&",this.m_iP)){return this._parseEntity(this.m_iP+1)}else{return this._parseText(this.m_iP)}}}}}}};XMLP.prototype._parseAttribute=function(f,d){var i,g,k,a,j;var c,b,h;this.m_cAlt="";i=SAXStrings.indexOfNonWhitespace(this.m_xml,f,d);if((i==-1)||(i>=d)){return i}k=this.m_xml.indexOf("=",i);if((k==-1)||(k>d)){return this._setErr(XMLP.ERR_ATT_VALUES)}g=SAXStrings.lastIndexOfNonWhitespace(this.m_xml,i,k);a=SAXStrings.indexOfNonWhitespace(this.m_xml,k+1,d);if((a==-1)||(a>d)){return this._setErr(XMLP.ERR_ATT_VALUES)}c=this.m_xml.charAt(a);if(SAXStrings.QUOTES.indexOf(c)==-1){return this._setErr(XMLP.ERR_ATT_VALUES)}j=this.m_xml.indexOf(c,a+1);if((j==-1)||(j>d)){return this._setErr(XMLP.ERR_ATT_VALUES)}b=this.m_xml.substring(i,g+1);h=this.m_xml.substring(a+1,j);if(b.indexOf("<")!=-1){return this._setErr(XMLP.ERR_ATT_LT_NAME)}if(h.indexOf("<")!=-1){return this._setErr(XMLP.ERR_ATT_LT_VALUE)}h=SAXStrings.replace(h,null,null,"\n"," ");h=SAXStrings.replace(h,null,null,"\t"," ");iRet=this._replaceEntities(h);if(iRet==XMLP._ERROR){return iRet}h=this.m_cAlt;if(this._findAttributeIndex(b)==-1){this._addAttribute(b,h)}else{return this._setErr(XMLP.ERR_ATT_DUP)}this.m_iP=j+2;return XMLP._ATT};XMLP.prototype._parseCDATA=function(a){var b=this.m_xml.indexOf("]]>",a);if(b==-1){return this._setErr(XMLP.ERR_CLOSE_CDATA)}this._setContent(XMLP._CONT_XML,a,b);this.m_iP=b+3;return XMLP._CDATA};XMLP.prototype._parseComment=function(a){var b=this.m_xml.indexOf("-->",a);if(b==-1){return this._setErr(XMLP.ERR_CLOSE_COMMENT)}this._setContent(XMLP._CONT_XML,a,b);this.m_iP=b+3;return XMLP._COMMENT};XMLP.prototype._parseDTD=function(b){var f,a,c,d;f=this.m_xml.indexOf(">",b);if(f==-1){return this._setErr(XMLP.ERR_CLOSE_DTD)}c=this.m_xml.indexOf("[",b);a=((c!=-1)&&(c<f))?"]>":">";while(true){if(f==d){return this._setErr(XMLP.ERR_INFINITELOOP)}d=f;f=this.m_xml.indexOf(a,b);if(f==-1){return this._setErr(XMLP.ERR_CLOSE_DTD)}if(this.m_xml.substring(f-1,f+2)!="]]>"){break}}this.m_iP=f+a.length;return XMLP._DTD};XMLP.prototype._parseElement=function(b){var h,i,g,c;var d,a,f;i=h=this.m_xml.indexOf(">",b);if(h==-1){return this._setErr(XMLP.ERR_CLOSE_ELM)}if(this.m_xml.charAt(b)=="/"){d=XMLP._ELM_E;b++}else{d=XMLP._ELM_B}if(this.m_xml.charAt(h-1)=="/"){if(d==XMLP._ELM_E){return this._setErr(XMLP.ERR_ELM_EMPTY)}d=XMLP._ELM_EMP;i--}i=SAXStrings.lastIndexOfNonWhitespace(this.m_xml,b,i);if(h-b!=1){if(SAXStrings.indexOfNonWhitespace(this.m_xml,b,i)!=b){return this._setErr(XMLP.ERR_ELM_NAME)}}this._clearAttributes();g=SAXStrings.indexOfWhitespace(this.m_xml,b,i);if(g==-1){g=i+1}else{this.m_iP=g;while(this.m_iP<i){if(this.m_iP==f){return this._setErr(XMLP.ERR_INFINITELOOP)}f=this.m_iP;c=this._parseAttribute(this.m_iP,i);if(c==XMLP._ERROR){return c}}}a=this.m_xml.substring(b,g);if(a.indexOf("<")!=-1){return this._setErr(XMLP.ERR_ELM_LT_NAME)}this.m_name=a;this.m_iP=h+1;return d};XMLP.prototype._parseEntity=function(a){var b=this.m_xml.indexOf(";",a);if(b==-1){return this._setErr(XMLP.ERR_CLOSE_ENTITY)}this.m_iP=b+1;return this._replaceEntity(this.m_xml,a,b)};XMLP.prototype._parsePI=function(b){var f,a,d,g,c;f=this.m_xml.indexOf("?>",b);if(f==-1){return this._setErr(XMLP.ERR_CLOSE_PI)}a=SAXStrings.indexOfNonWhitespace(this.m_xml,b,f);if(a==-1){return this._setErr(XMLP.ERR_PI_TARGET)}d=SAXStrings.indexOfWhitespace(this.m_xml,a,f);if(d==-1){d=f}g=SAXStrings.indexOfNonWhitespace(this.m_xml,d,f);if(g==-1){g=f}c=SAXStrings.lastIndexOfNonWhitespace(this.m_xml,g,f);if(c==-1){c=f-1}this.m_name=this.m_xml.substring(a,d);this._setContent(XMLP._CONT_XML,g,c+1);this.m_iP=f+2;return XMLP._PI};XMLP.prototype._parseText=function(b){var c,a;c=this.m_xml.indexOf("<",b);if(c==-1){c=this.m_xml.length}a=this.m_xml.indexOf("&",b);if((a!=-1)&&(a<=c)){c=a}this._setContent(XMLP._CONT_XML,b,c);this.m_iP=c;return XMLP._TEXT};XMLP.prototype._replaceEntities=function(g,b,d){if(SAXStrings.isEmpty(g)){return""}b=b||0;d=d||g.length;var c,a,f="";c=g.indexOf("&",b);a=b;while((c>0)&&(c<d)){f+=g.substring(a,c);a=g.indexOf(";",c)+1;if((a==0)||(a>d)){return this._setErr(XMLP.ERR_CLOSE_ENTITY)}iRet=this._replaceEntity(g,c+1,a-1);if(iRet==XMLP._ERROR){return iRet}f+=this.m_cAlt;c=g.indexOf("&",a)}if(a!=d){f+=g.substring(a,d)}this._setContent(XMLP._CONT_ALT,f);return XMLP._ENTITY};XMLP.prototype._replaceEntity=function(c,a,b){if(SAXStrings.isEmpty(c)){return -1}a=a||0;b=b||c.length;switch(c.substring(a,b)){case"amp":strEnt="&";break;case"lt":strEnt="<";break;case"gt":strEnt=">";break;case"apos":strEnt="'";break;case"quot":strEnt='"';break;default:if(c.charAt(a)=="#"){strEnt=String.fromCharCode(parseInt(c.substring(a+1,b)))}else{return this._setErr(XMLP.ERR_ENTITY_UNKNOWN)}break}this._setContent(XMLP._CONT_ALT,strEnt);return XMLP._ENTITY};XMLP.prototype._setContent=function(b){var a=arguments;if(XMLP._CONT_XML==b){this.m_cAlt=null;this.m_cB=a[1];this.m_cE=a[2]}else{this.m_cAlt=a[1];this.m_cB=0;this.m_cE=a[1].length}this.m_cSrc=b};XMLP.prototype._setErr=function(b){var a=XMLP._errs[b];this.m_cAlt=a;this.m_cB=0;this.m_cE=a.length;this.m_cSrc=XMLP._CONT_ALT;return XMLP._ERROR};SAXDriver=function(){this.m_hndDoc=null;this.m_hndErr=null;this.m_hndLex=null};SAXDriver.DOC_B=1;SAXDriver.DOC_E=2;SAXDriver.ELM_B=3;SAXDriver.ELM_E=4;SAXDriver.CHARS=5;SAXDriver.PI=6;SAXDriver.CD_B=7;SAXDriver.CD_E=8;SAXDriver.CMNT=9;SAXDriver.DTD_B=10;SAXDriver.DTD_E=11;SAXDriver.prototype.parse=function(b){var a=new XMLP(b);if(this.m_hndDoc&&this.m_hndDoc.setDocumentLocator){this.m_hndDoc.setDocumentLocator(this)}this.m_parser=a;this.m_bErr=false;if(!this.m_bErr){this._fireEvent(SAXDriver.DOC_B)}this._parseLoop();if(!this.m_bErr){this._fireEvent(SAXDriver.DOC_E)}this.m_xml=null;this.m_iP=0};SAXDriver.prototype.setDocumentHandler=function(a){this.m_hndDoc=a};SAXDriver.prototype.setErrorHandler=function(a){this.m_hndErr=a};SAXDriver.prototype.setLexicalHandler=function(a){this.m_hndLex=a};SAXDriver.prototype.getColumnNumber=function(){return this.m_parser.getColumnNumber()};SAXDriver.prototype.getLineNumber=function(){return this.m_parser.getLineNumber()};SAXDriver.prototype.getMessage=function(){return this.m_strErrMsg};SAXDriver.prototype.getPublicId=function(){return null};SAXDriver.prototype.getSystemId=function(){return null};SAXDriver.prototype.getLength=function(){return this.m_parser.getAttributeCount()};SAXDriver.prototype.getName=function(a){return this.m_parser.getAttributeName(a)};SAXDriver.prototype.getValue=function(a){return this.m_parser.getAttributeValue(a)};SAXDriver.prototype.getValueByName=function(a){return this.m_parser.getAttributeValueByName(a)};SAXDriver.prototype._fireError=function(a){this.m_strErrMsg=a;this.m_bErr=true;if(this.m_hndErr&&this.m_hndErr.fatalError){this.m_hndErr.fatalError(this)}};SAXDriver.prototype._fireEvent=function(c){var b,f,d=arguments,a=d.length-1;if(this.m_bErr){return}if(SAXDriver.DOC_B==c){f="startDocument";b=this.m_hndDoc}else{if(SAXDriver.DOC_E==c){f="endDocument";b=this.m_hndDoc}else{if(SAXDriver.ELM_B==c){f="startElement";b=this.m_hndDoc}else{if(SAXDriver.ELM_E==c){f="endElement";b=this.m_hndDoc}else{if(SAXDriver.CHARS==c){f="characters";b=this.m_hndDoc}else{if(SAXDriver.PI==c){f="processingInstruction";b=this.m_hndDoc}else{if(SAXDriver.CD_B==c){f="startCDATA";b=this.m_hndLex}else{if(SAXDriver.CD_E==c){f="endCDATA";b=this.m_hndLex}else{if(SAXDriver.CMNT==c){f="comment";b=this.m_hndLex}}}}}}}}}if(b&&b[f]){if(0==a){b[f]()}else{if(1==a){b[f](d[1])}else{if(2==a){b[f](d[1],d[2])}else{if(3==a){b[f](d[1],d[2],d[3])}}}}}};SAXDriver.prototype._parseLoop=function(b){var a,b;b=this.m_parser;while(!this.m_bErr){a=b.next();if(a==XMLP._ELM_B){this._fireEvent(SAXDriver.ELM_B,b.getName(),this)}else{if(a==XMLP._ELM_E){this._fireEvent(SAXDriver.ELM_E,b.getName())}else{if(a==XMLP._ELM_EMP){this._fireEvent(SAXDriver.ELM_B,b.getName(),this);this._fireEvent(SAXDriver.ELM_E,b.getName())}else{if(a==XMLP._TEXT){this._fireEvent(SAXDriver.CHARS,b.getContent(),b.getContentBegin(),b.getContentEnd()-b.getContentBegin())}else{if(a==XMLP._ENTITY){this._fireEvent(SAXDriver.CHARS,b.getContent(),b.getContentBegin(),b.getContentEnd()-b.getContentBegin())}else{if(a==XMLP._PI){this._fireEvent(SAXDriver.PI,b.getName(),b.getContent().substring(b.getContentBegin(),b.getContentEnd()))}else{if(a==XMLP._CDATA){this._fireEvent(SAXDriver.CD_B);this._fireEvent(SAXDriver.CHARS,b.getContent(),b.getContentBegin(),b.getContentEnd()-b.getContentBegin());this._fireEvent(SAXDriver.CD_E)}else{if(a==XMLP._COMMENT){this._fireEvent(SAXDriver.CMNT,b.getContent(),b.getContentBegin(),b.getContentEnd()-b.getContentBegin())}else{if(a==XMLP._DTD){}else{if(a==XMLP._ERROR){this._fireError(b.getContent())}else{if(a==XMLP._NONE){return}}}}}}}}}}}}};SAXStrings=function(){};SAXStrings.WHITESPACE=" \t\n\r";SAXStrings.QUOTES="\"'";SAXStrings.getColumnNumber=function(f,d){if(SAXStrings.isEmpty(f)){return -1}d=d||f.length;var b=f.substring(0,d).split("\n");var a=b[b.length-1];b.length--;var c=b.join("\n").length;return d-c};SAXStrings.getLineNumber=function(b,a){if(SAXStrings.isEmpty(b)){return -1}a=a||b.length;return b.substring(0,a).split("\n").length};SAXStrings.indexOfNonWhitespace=function(d,a,c){if(SAXStrings.isEmpty(d)){return -1}a=a||0;c=c||d.length;for(var b=a;b<c;b++){if(SAXStrings.WHITESPACE.indexOf(d.charAt(b))==-1){return b}}return -1};SAXStrings.indexOfWhitespace=function(d,a,c){if(SAXStrings.isEmpty(d)){return -1}a=a||0;c=c||d.length;for(var b=a;b<c;b++){if(SAXStrings.WHITESPACE.indexOf(d.charAt(b))!=-1){return b}}return -1};SAXStrings.isEmpty=function(a){return(a==null)||(a.length==0)};SAXStrings.lastIndexOfNonWhitespace=function(d,a,c){if(SAXStrings.isEmpty(d)){return -1}a=a||0;c=c||d.length;for(var b=c-1;b>=a;b--){if(SAXStrings.WHITESPACE.indexOf(d.charAt(b))==-1){return b}}return -1};SAXStrings.replace=function(f,a,d,c,b){if(SAXStrings.isEmpty(f)){return""}a=a||0;d=d||f.length;return f.substring(a,d).split(c).join(b)};Stack=function(){this.m_arr=new Array()};Stack.prototype.clear=function(){this.m_arr=new Array()};Stack.prototype.count=function(){return this.m_arr.length};Stack.prototype.destroy=function(){this.m_arr=null};Stack.prototype.peek=function(){if(this.m_arr.length==0){return null}return this.m_arr[this.m_arr.length-1]};Stack.prototype.pop=function(){if(this.m_arr.length==0){return null}var a=this.m_arr[this.m_arr.length-1];this.m_arr.length--;return a};Stack.prototype.push=function(a){this.m_arr[this.m_arr.length]=a};function isEmpty(a){return(a==null)||(a.length==0)}function trim(a,b,g){if(isEmpty(a)){return""}if(b==null){b=true}if(g==null){g=true}var h=0;var f=0;var d=0;var c=0;if(b==true){while((d<a.length)&&(whitespace.indexOf(a.charAt(d++))!=-1)){h++}}if(g==true){c=a.length-1;while((c>=h)&&(whitespace.indexOf(a.charAt(c--))!=-1)){f++}}return a.substring(h,a.length-f)}function __escapeString(f){var g=/&/g;var c=/</g;var a=/>/g;var b=/"/g;var d=/'/g;f=f.replace(g,"&amp;");f=f.replace(c,"&lt;");f=f.replace(a,"&gt;");f=f.replace(b,"&quot;");f=f.replace(d,"&apos;");return f}function __unescapeString(f){var g=/&amp;/g;var c=/&lt;/g;var a=/&gt;/g;var b=/&quot;/g;var d=/&apos;/g;f=f.replace(g,"&");f=f.replace(c,"<");f=f.replace(a,">");f=f.replace(b,'"');f=f.replace(d,"'");return f}function xmlEscapeXMLToHTML(c){var a;var d=c;a=-1;while(d.indexOf("<",a+1)>-1){var a=d.indexOf("<",a+1);var b=d.substr(0,a);b+="";b=b+d.substr(a+1,d.length);d=b}a=-1;while(d.indexOf(">",a+1)>-1){var a=d.indexOf(">",a+1);var b=d.substr(0,a);b+="";b=b+d.substr(a+1,d.length);d=b}a=-1;while(d.indexOf("&",a+1)>-1){var a=d.indexOf("&",a+1);var b=d.substr(0,a);b+="";b=b+d.substr(a+1,d.length);d=b}return d}function xmlUnescapeHTMLToXML(c){var d=c;var a;a=-1;while(d.indexOf("",a+1)>-1){var a=d.indexOf("",a+1);var b=d.substr(0,a);b+="<";b=b+d.substr(a+1,d.length);d=b}a=-1;while(d.indexOf("",a+1)>-1){var a=d.indexOf("",a+1);var b=d.substr(0,a);b+=">";b=b+d.substr(a+1,d.length);d=b}a=-1;while(d.indexOf("",a+1)>-1){var a=d.indexOf("",a+1);var b=d.substr(0,a);b+="&";b=b+d.substr(a+1,d.length);d=b}return d}var _xmlIOProxyGetLastLoadStatus="";var _xmlIOLoadLocalDataCallbackFunction="";var _xmlIOLoadlocalDataIFrameID="";var _xmlIOLoadLocalDataLastLoadStatus="";var _xmlIOLoadLocalDataRetryCount=0;function xmlIODeleteData(a){a=":::"+a+":::";var b=new Date("January 01, 1980").toGMTString();document.cookie=a+"=;expires="+b}function xmlIOGetData(a){var f=a;a=":::"+a+":::";var d=" "+document.cookie+";";var h=" "+a;var b=d.indexOf(h);var c;var g="";if(b!=-1){b+=h.length;c=d.indexOf(";",b);g=unescape(d.substring((b+1),c))}if(g==""&&document.cookie.indexOf(String.fromCharCode(171))>-1){a=String.fromCharCode(171)+f+String.fromCharCode(187);var d=" "+document.cookie+";";var h=" "+a;var b=d.indexOf(h);var c;if(b!=-1){b+=h.length;c=d.indexOf(";",b)}var g=unescape(d.substring((b+1),c))}return g}function xmlIOListSavedDataNames(){var c=new Array();var a=document.cookie.split(":::");var b=a.length;for(intLoop=0;intLoop<b;intLoop++){if(a[intLoop].indexOf("=")>-1||a[intLoop]==""){}else{c[c.length]=a[intLoop]}}return c}function xmlIOSaveData(b,d,c){var g;if(c==null){var a=new Date();var f=a.getFullYear()+10;var h=new Date("January 01, "+f);g=h.toGMTString()}else{g=c.toGMTString()}b=":::"+b+":::";document.cookie=b+"="+escape(d)+" ;expires="+g}function xmlIOProxyGetLastLoadStatus(){return _xmlIOProxyGetLastLoadStatus}function xmlIOProxyLoadData(a,g,d,b){var f=document.createElement("iframe");var c="guid"+new Date().getTime();f.id=c;f.src=__trim(a,true,true)+"?resourceID="+g+"&guid="+c+"&callbackFunction="+d+"&authenticationCode="+b;f.style.position="absolute";f.style.left="-2000px";document.body.appendChild(f);return c}function __getXMLFromIFrame(callbackGUID,callbackFunction,proxyReturnCode,xml){var retXML="";try{document.body.removeChild(document.getElementById(callbackGUID))}catch(e){}try{retXML=xmlUnescapeHTMLToXML(xml)}catch(e){retXML="The function xmlUnescapeHTMLToXML was not found. Did you include xmlEscape.js (from the jsTools directory) in your HTML file?";proxyReturnCode="error"}if(callbackFunction==""){alert("xmlIO error in __getXMLFromIFrame:\nErrorString: "+retXML+"\nguid: "+callbackGUID+"\ncallbackFunction: "+callbackFunction+"\nproxyReturnCode: "+proxyReturnCode)}else{try{_xmlIOProxyGetLastLoadStatus="xmlIOProxyLoadData-Called callbackFunction";eval(callbackFunction+"(retXML, callbackGUID, proxyReturnCode)")}catch(e){_xmlIOProxyGetLastLoadStatus="xmlIOProxyLoadData-Error: xmlIO error in __getXMLFromIFrame:\nErrorString: "+e.toString()+"\nguid: "+callbackGUID+"\ncallbackFunction: "+callbackFunction+"\nproxyReturnCode: "+proxyReturnCode}}}function xmlIOLoadLocalData(f,b){_xmlIOLoadLocalDataCallbackFunction=b;_xmlIOLoadLocalDataLastLoadStatus="Starting xmlIOLoadLocalData";var a=0;var g;try{try{g=document.createElement("iframe");g.src=f;g.id=new Date().valueOf();g.style.position="absolute";g.style.left="-2000px";_xmlIOLoadlocalDataIFrameID=g.id;document.body.appendChild(g)}catch(c){_xmlIOLoadLocalDataLastLoadStatus="ERROR: xmlIOLoadLocalData cannot be used in this browser"}if(!document.readyState){g.onload=__loadLocalIFrameXML}else{window.setTimeout("__readyStateChecker()",250)}}catch(d){_xmlIOLoadLocalDataLastLoadStatus=d}_xmlIOLoadLocalDataLastLoadStatus="Ending xmlIOLoadLocalData"}function __readyStateChecker(){var d;_xmlIOLoadLocalDataLastLoadStatus="Starting __readyStateChecker";try{d=document.getElementById(_xmlIOLoadlocalDataIFrameID).contentDocument.readyState}catch(a){try{d=document.getElementById(_xmlIOLoadlocalDataIFrameID).contentWindow.document.readyState}catch(b){try{if(_xmlIOLoadLocalDataRetryCount<41){if(__trim(window.frames[_xmlIOLoadlocalDataIFrameID].document.body.innerHTML,true,true)==""){_xmlIOLoadLocalDataRetryCount++;_xmlIOLoadLocalDataLastLoadStatus="Calling __readyStateChecker again";window.setTimeout("__readyStateChecker()",250);return}else{_xmlIOLoadLocalDataLastLoadStatus="Calling __loadLocalIFrameXML";__loadLocalIFrameXML();return}}else{_xmlIOLoadLocalDataLastLoadStatus="__readyStateChecker TimeOut - calling __loadLocalIFrameXML anyway";__loadLocalIFrameXML()}return}catch(c){_xmlIOLoadLocalDataLastLoadStatus="__readStateChecker unrecoverable error: "+c;return}}}if(d.toLowerCase()!="complete"){if(_xmlIOLoadLocalDataRetryCount>40){_xmlIOLoadLocalDataLastLoadStatus="__readyStateChecker TimeOut - calling __loadLocalIFrameXML anyway";__loadLocalIFrameXML()}else{_xmlIOLoadLocalDataRetryCount++;_xmlIOLoadLocalDataLastLoadStatus="Calling __readyStateChecker again";window.setTimeout("__readyStateChecker()",250)}}else{_xmlIOLoadLocalDataLastLoadStatus="Calling __loadLocalIFrameXML";__loadLocalIFrameXML()}}function __loadLocalIFrameXML(){_xmlIOLoadLocalDataLastLoadStatus="Starting __loadLocalIFrameXML";var xmlString="";try{var dataFrame=document.getElementById(_xmlIOLoadlocalDataIFrameID);try{xmlString=dataFrame.contentDocument.body.innerHTML}catch(imIE){try{xmlString=dataFrame.contentWindow.document.body.innerHTML}catch(imIEMac){xmlString=window.frames[_xmlIOLoadlocalDataIFrameID].document.body.innerHTML}}try{document.body.removeChild(dataFrame)}catch(badFailure){_xmlIOLoadLocalDataLastLoadStatus="__loadLocalIFrameXML unrecoverable error(1): "+badFailure}}catch(badFailure2){_xmlIOLoadLocalDataLastLoadStatus="__loadLocalIFrameXML unrecoverable error(2): "+badFailure2}try{xmlString=xmlUnescapeHTMLToXML(xmlString)}catch(e){alert(e);_xmlIOLoadLocalDataLastLoadStatus="__loadLocalIFrameXML unrecoverable error: The function xmlUnescapeHTMLToXML was not found. Did you include xmlEscape.js (from the jsTools directory) in your HTML file?"}try{eval(_xmlIOLoadLocalDataCallbackFunction+"(xmlString)");_xmlIOLoadLocalDataLastLoadStatus="__loadLocalIFrameXML successfully called callback function"}catch(e){_xmlIOLoadLocalDataLastLoadStatus="__loadLocalIFrameXML unrecoverable error: Is your callback function correct?"}}function xmlIOLoadLocalGetLastLoadStatus(){return _xmlIOLoadLocalDataLastLoadStatus}function __trim(a,b,h){var d="\n\r\t ";if(__isEmpty(a)){return""}if(b==null){b=true}if(h==null){h=true}var j=0;var g=0;var f=0;var c=0;if(b==true){while((f<a.length)&&(d.indexOf(a.charAt(f++))!=-1)){j++}}if(h==true){c=a.length-1;while((c>=j)&&(d.indexOf(a.charAt(c--))!=-1)){g++}}return a.substring(j,a.length-g)}function __isEmpty(a){return(a==null)||(a.length==0)}var whitespace="\n\r\t ";XMLP=function(a){a=SAXStrings.replace(a,null,null,"\r\n","\n");a=SAXStrings.replace(a,null,null,"\r","\n");this.m_xml=a;this.m_iP=0;this.m_iState=XMLP._STATE_PROLOG;this.m_stack=new Stack();this._clearAttributes()};XMLP._NONE=0;XMLP._ELM_B=1;XMLP._ELM_E=2;XMLP._ELM_EMP=3;XMLP._ATT=4;XMLP._TEXT=5;XMLP._ENTITY=6;XMLP._PI=7;XMLP._CDATA=8;XMLP._COMMENT=9;XMLP._DTD=10;XMLP._ERROR=11;XMLP._CONT_XML=0;XMLP._CONT_ALT=1;XMLP._ATT_NAME=0;XMLP._ATT_VAL=1;XMLP._STATE_PROLOG=1;XMLP._STATE_DOCUMENT=2;XMLP._STATE_MISC=3;XMLP._errs=new Array();XMLP._errs[XMLP.ERR_CLOSE_PI=0]="PI: missing closing sequence";XMLP._errs[XMLP.ERR_CLOSE_DTD=1]="DTD: missing closing sequence";XMLP._errs[XMLP.ERR_CLOSE_COMMENT=2]="Comment: missing closing sequence";XMLP._errs[XMLP.ERR_CLOSE_CDATA=3]="CDATA: missing closing sequence";XMLP._errs[XMLP.ERR_CLOSE_ELM=4]="Element: missing closing sequence";XMLP._errs[XMLP.ERR_CLOSE_ENTITY=5]="Entity: missing closing sequence";XMLP._errs[XMLP.ERR_PI_TARGET=6]="PI: target is required";XMLP._errs[XMLP.ERR_ELM_EMPTY=7]="Element: cannot be both empty and closing";XMLP._errs[XMLP.ERR_ELM_NAME=8]='Element: name must immediatly follow "<"';XMLP._errs[XMLP.ERR_ELM_LT_NAME=9]='Element: "<" not allowed in element names';XMLP._errs[XMLP.ERR_ATT_VALUES=10]="Attribute: values are required and must be in quotes";XMLP._errs[XMLP.ERR_ATT_LT_NAME=11]='Element: "<" not allowed in attribute names';XMLP._errs[XMLP.ERR_ATT_LT_VALUE=12]='Attribute: "<" not allowed in attribute values';XMLP._errs[XMLP.ERR_ATT_DUP=13]="Attribute: duplicate attributes not allowed";XMLP._errs[XMLP.ERR_ENTITY_UNKNOWN=14]="Entity: unknown entity";XMLP._errs[XMLP.ERR_INFINITELOOP=15]="Infininte loop";XMLP._errs[XMLP.ERR_DOC_STRUCTURE=16]="Document: only comments, processing instructions, or whitespace allowed outside of document element";XMLP._errs[XMLP.ERR_ELM_NESTING=17]="Element: must be nested correctly";XMLP.prototype._addAttribute=function(a,b){this.m_atts[this.m_atts.length]=new Array(a,b)};XMLP.prototype._checkStructure=function(b){if(XMLP._STATE_PROLOG==this.m_iState){if((XMLP._TEXT==b)||(XMLP._ENTITY==b)){if(SAXStrings.indexOfNonWhitespace(this.getContent(),this.getContentBegin(),this.getContentEnd())!=-1){return this._setErr(XMLP.ERR_DOC_STRUCTURE)}}if((XMLP._ELM_B==b)||(XMLP._ELM_EMP==b)){this.m_iState=XMLP._STATE_DOCUMENT}}if(XMLP._STATE_DOCUMENT==this.m_iState){if((XMLP._ELM_B==b)||(XMLP._ELM_EMP==b)){this.m_stack.push(this.getName())}if((XMLP._ELM_E==b)||(XMLP._ELM_EMP==b)){var a=this.m_stack.pop();if((a==null)||(a!=this.getName())){return this._setErr(XMLP.ERR_ELM_NESTING)}}if(this.m_stack.count()==0){this.m_iState=XMLP._STATE_MISC;return b}}if(XMLP._STATE_MISC==this.m_iState){if((XMLP._ELM_B==b)||(XMLP._ELM_E==b)||(XMLP._ELM_EMP==b)||(XMLP.EVT_DTD==b)){return this._setErr(XMLP.ERR_DOC_STRUCTURE)}if((XMLP._TEXT==b)||(XMLP._ENTITY==b)){if(SAXStrings.indexOfNonWhitespace(this.getContent(),this.getContentBegin(),this.getContentEnd())!=-1){return this._setErr(XMLP.ERR_DOC_STRUCTURE)}}}return b};XMLP.prototype._clearAttributes=function(){this.m_atts=new Array()};XMLP.prototype._findAttributeIndex=function(a){for(var b=0;b<this.m_atts.length;b++){if(this.m_atts[b][XMLP._ATT_NAME]==a){return b}}return -1};XMLP.prototype.getAttributeCount=function(){return this.m_atts?this.m_atts.length:0};XMLP.prototype.getAttributeName=function(a){return((a<0)||(a>=this.m_atts.length))?null:this.m_atts[a][XMLP._ATT_NAME]};XMLP.prototype.getAttributeValue=function(a){return((a<0)||(a>=this.m_atts.length))?null:__unescapeString(this.m_atts[a][XMLP._ATT_VAL])};XMLP.prototype.getAttributeValueByName=function(a){return this.getAttributeValue(this._findAttributeIndex(a))};XMLP.prototype.getColumnNumber=function(){return SAXStrings.getColumnNumber(this.m_xml,this.m_iP)};XMLP.prototype.getContent=function(){return(this.m_cSrc==XMLP._CONT_XML)?this.m_xml:this.m_cAlt};XMLP.prototype.getContentBegin=function(){return this.m_cB};XMLP.prototype.getContentEnd=function(){return this.m_cE};XMLP.prototype.getLineNumber=function(){return SAXStrings.getLineNumber(this.m_xml,this.m_iP)};XMLP.prototype.getName=function(){return this.m_name};XMLP.prototype.next=function(){return this._checkStructure(this._parse())};XMLP.prototype._parse=function(){if(this.m_iP==this.m_xml.length){return XMLP._NONE}if(this.m_iP==this.m_xml.indexOf("<?",this.m_iP)){return this._parsePI(this.m_iP+2)}else{if(this.m_iP==this.m_xml.indexOf("<!DOCTYPE",this.m_iP)){return this._parseDTD(this.m_iP+9)}else{if(this.m_iP==this.m_xml.indexOf("<!--",this.m_iP)){return this._parseComment(this.m_iP+4)}else{if(this.m_iP==this.m_xml.indexOf("<![CDATA[",this.m_iP)){return this._parseCDATA(this.m_iP+9)}else{if(this.m_iP==this.m_xml.indexOf("<",this.m_iP)){return this._parseElement(this.m_iP+1)}else{if(this.m_iP==this.m_xml.indexOf("&",this.m_iP)){return this._parseEntity(this.m_iP+1)}else{return this._parseText(this.m_iP)}}}}}}};XMLP.prototype._parseAttribute=function(f,d){var i,g,k,a,j;var c,b,h;this.m_cAlt="";i=SAXStrings.indexOfNonWhitespace(this.m_xml,f,d);if((i==-1)||(i>=d)){return i}k=this.m_xml.indexOf("=",i);if((k==-1)||(k>d)){return this._setErr(XMLP.ERR_ATT_VALUES)}g=SAXStrings.lastIndexOfNonWhitespace(this.m_xml,i,k);a=SAXStrings.indexOfNonWhitespace(this.m_xml,k+1,d);if((a==-1)||(a>d)){return this._setErr(XMLP.ERR_ATT_VALUES)}c=this.m_xml.charAt(a);if(SAXStrings.QUOTES.indexOf(c)==-1){return this._setErr(XMLP.ERR_ATT_VALUES)}j=this.m_xml.indexOf(c,a+1);if((j==-1)||(j>d)){return this._setErr(XMLP.ERR_ATT_VALUES)}b=this.m_xml.substring(i,g+1);h=this.m_xml.substring(a+1,j);if(b.indexOf("<")!=-1){return this._setErr(XMLP.ERR_ATT_LT_NAME)}if(h.indexOf("<")!=-1){return this._setErr(XMLP.ERR_ATT_LT_VALUE)}h=SAXStrings.replace(h,null,null,"\n"," ");h=SAXStrings.replace(h,null,null,"\t"," ");iRet=this._replaceEntities(h);if(iRet==XMLP._ERROR){return iRet}h=this.m_cAlt;if(this._findAttributeIndex(b)==-1){this._addAttribute(b,h)}else{return this._setErr(XMLP.ERR_ATT_DUP)}this.m_iP=j+2;return XMLP._ATT};XMLP.prototype._parseCDATA=function(a){var b=this.m_xml.indexOf("]]>",a);if(b==-1){return this._setErr(XMLP.ERR_CLOSE_CDATA)}this._setContent(XMLP._CONT_XML,a,b);this.m_iP=b+3;return XMLP._CDATA};XMLP.prototype._parseComment=function(a){var b=this.m_xml.indexOf("-->",a);if(b==-1){return this._setErr(XMLP.ERR_CLOSE_COMMENT)}this._setContent(XMLP._CONT_XML,a,b);this.m_iP=b+3;return XMLP._COMMENT};XMLP.prototype._parseDTD=function(b){var f,a,c,d;f=this.m_xml.indexOf(">",b);if(f==-1){return this._setErr(XMLP.ERR_CLOSE_DTD)}c=this.m_xml.indexOf("[",b);a=((c!=-1)&&(c<f))?"]>":">";while(true){if(f==d){return this._setErr(XMLP.ERR_INFINITELOOP)}d=f;f=this.m_xml.indexOf(a,b);if(f==-1){return this._setErr(XMLP.ERR_CLOSE_DTD)}if(this.m_xml.substring(f-1,f+2)!="]]>"){break}}this.m_iP=f+a.length;return XMLP._DTD};XMLP.prototype._parseElement=function(b){var h,i,g,c;var d,a,f;i=h=this.m_xml.indexOf(">",b);if(h==-1){return this._setErr(XMLP.ERR_CLOSE_ELM)}if(this.m_xml.charAt(b)=="/"){d=XMLP._ELM_E;b++}else{d=XMLP._ELM_B}if(this.m_xml.charAt(h-1)=="/"){if(d==XMLP._ELM_E){return this._setErr(XMLP.ERR_ELM_EMPTY)}d=XMLP._ELM_EMP;i--}i=SAXStrings.lastIndexOfNonWhitespace(this.m_xml,b,i);if(h-b!=1){if(SAXStrings.indexOfNonWhitespace(this.m_xml,b,i)!=b){return this._setErr(XMLP.ERR_ELM_NAME)}}this._clearAttributes();g=SAXStrings.indexOfWhitespace(this.m_xml,b,i);if(g==-1){g=i+1}else{this.m_iP=g;while(this.m_iP<i){if(this.m_iP==f){return this._setErr(XMLP.ERR_INFINITELOOP)}f=this.m_iP;c=this._parseAttribute(this.m_iP,i);if(c==XMLP._ERROR){return c}}}a=this.m_xml.substring(b,g);if(a.indexOf("<")!=-1){return this._setErr(XMLP.ERR_ELM_LT_NAME)}this.m_name=a;this.m_iP=h+1;return d};XMLP.prototype._parseEntity=function(a){var b=this.m_xml.indexOf(";",a);if(b==-1){return this._setErr(XMLP.ERR_CLOSE_ENTITY)}this.m_iP=b+1;return this._replaceEntity(this.m_xml,a,b)};XMLP.prototype._parsePI=function(b){var f,a,d,g,c;f=this.m_xml.indexOf("?>",b);if(f==-1){return this._setErr(XMLP.ERR_CLOSE_PI)}a=SAXStrings.indexOfNonWhitespace(this.m_xml,b,f);if(a==-1){return this._setErr(XMLP.ERR_PI_TARGET)}d=SAXStrings.indexOfWhitespace(this.m_xml,a,f);if(d==-1){d=f}g=SAXStrings.indexOfNonWhitespace(this.m_xml,d,f);if(g==-1){g=f}c=SAXStrings.lastIndexOfNonWhitespace(this.m_xml,g,f);if(c==-1){c=f-1}this.m_name=this.m_xml.substring(a,d);this._setContent(XMLP._CONT_XML,g,c+1);this.m_iP=f+2;return XMLP._PI};XMLP.prototype._parseText=function(b){var c,a;c=this.m_xml.indexOf("<",b);if(c==-1){c=this.m_xml.length}a=this.m_xml.indexOf("&",b);if((a!=-1)&&(a<=c)){c=a}this._setContent(XMLP._CONT_XML,b,c);this.m_iP=c;return XMLP._TEXT};XMLP.prototype._replaceEntities=function(g,b,d){if(SAXStrings.isEmpty(g)){return""}b=b||0;d=d||g.length;var c,a,f="";c=g.indexOf("&",b);a=b;while((c>0)&&(c<d)){f+=g.substring(a,c);a=g.indexOf(";",c)+1;if((a==0)||(a>d)){return this._setErr(XMLP.ERR_CLOSE_ENTITY)}iRet=this._replaceEntity(g,c+1,a-1);if(iRet==XMLP._ERROR){return iRet}f+=this.m_cAlt;c=g.indexOf("&",a)}if(a!=d){f+=g.substring(a,d)}this._setContent(XMLP._CONT_ALT,f);return XMLP._ENTITY};XMLP.prototype._replaceEntity=function(c,a,b){if(SAXStrings.isEmpty(c)){return -1}a=a||0;b=b||c.length;switch(c.substring(a,b)){case"amp":strEnt="&";break;case"lt":strEnt="<";break;case"gt":strEnt=">";break;case"apos":strEnt="'";break;case"quot":strEnt='"';break;default:if(c.charAt(a)=="#"){strEnt=String.fromCharCode(parseInt(c.substring(a+1,b)))}else{return this._setErr(XMLP.ERR_ENTITY_UNKNOWN)}break}this._setContent(XMLP._CONT_ALT,strEnt);return XMLP._ENTITY};XMLP.prototype._setContent=function(b){var a=arguments;if(XMLP._CONT_XML==b){this.m_cAlt=null;this.m_cB=a[1];this.m_cE=a[2]}else{this.m_cAlt=a[1];this.m_cB=0;this.m_cE=a[1].length}this.m_cSrc=b};XMLP.prototype._setErr=function(b){var a=XMLP._errs[b];this.m_cAlt=a;this.m_cB=0;this.m_cE=a.length;this.m_cSrc=XMLP._CONT_ALT;return XMLP._ERROR};SAXDriver=function(){this.m_hndDoc=null;this.m_hndErr=null;this.m_hndLex=null};SAXDriver.DOC_B=1;SAXDriver.DOC_E=2;SAXDriver.ELM_B=3;SAXDriver.ELM_E=4;SAXDriver.CHARS=5;SAXDriver.PI=6;SAXDriver.CD_B=7;SAXDriver.CD_E=8;SAXDriver.CMNT=9;SAXDriver.DTD_B=10;SAXDriver.DTD_E=11;SAXDriver.prototype.parse=function(b){var a=new XMLP(b);if(this.m_hndDoc&&this.m_hndDoc.setDocumentLocator){this.m_hndDoc.setDocumentLocator(this)}this.m_parser=a;this.m_bErr=false;if(!this.m_bErr){this._fireEvent(SAXDriver.DOC_B)}this._parseLoop();if(!this.m_bErr){this._fireEvent(SAXDriver.DOC_E)}this.m_xml=null;this.m_iP=0};SAXDriver.prototype.setDocumentHandler=function(a){this.m_hndDoc=a};SAXDriver.prototype.setErrorHandler=function(a){this.m_hndErr=a};SAXDriver.prototype.setLexicalHandler=function(a){this.m_hndLex=a};SAXDriver.prototype.getColumnNumber=function(){return this.m_parser.getColumnNumber()};SAXDriver.prototype.getLineNumber=function(){return this.m_parser.getLineNumber()};SAXDriver.prototype.getMessage=function(){return this.m_strErrMsg};SAXDriver.prototype.getPublicId=function(){return null};SAXDriver.prototype.getSystemId=function(){return null};SAXDriver.prototype.getLength=function(){return this.m_parser.getAttributeCount()};SAXDriver.prototype.getName=function(a){return this.m_parser.getAttributeName(a)};SAXDriver.prototype.getValue=function(a){return this.m_parser.getAttributeValue(a)};SAXDriver.prototype.getValueByName=function(a){return this.m_parser.getAttributeValueByName(a)};SAXDriver.prototype._fireError=function(a){this.m_strErrMsg=a;this.m_bErr=true;if(this.m_hndErr&&this.m_hndErr.fatalError){this.m_hndErr.fatalError(this)}};SAXDriver.prototype._fireEvent=function(c){var b,f,d=arguments,a=d.length-1;if(this.m_bErr){return}if(SAXDriver.DOC_B==c){f="startDocument";b=this.m_hndDoc}else{if(SAXDriver.DOC_E==c){f="endDocument";b=this.m_hndDoc}else{if(SAXDriver.ELM_B==c){f="startElement";b=this.m_hndDoc}else{if(SAXDriver.ELM_E==c){f="endElement";b=this.m_hndDoc}else{if(SAXDriver.CHARS==c){f="characters";b=this.m_hndDoc}else{if(SAXDriver.PI==c){f="processingInstruction";b=this.m_hndDoc}else{if(SAXDriver.CD_B==c){f="startCDATA";b=this.m_hndLex}else{if(SAXDriver.CD_E==c){f="endCDATA";b=this.m_hndLex}else{if(SAXDriver.CMNT==c){f="comment";b=this.m_hndLex}}}}}}}}}if(b&&b[f]){if(0==a){b[f]()}else{if(1==a){b[f](d[1])}else{if(2==a){b[f](d[1],d[2])}else{if(3==a){b[f](d[1],d[2],d[3])}}}}}};SAXDriver.prototype._parseLoop=function(b){var a,b;b=this.m_parser;while(!this.m_bErr){a=b.next();if(a==XMLP._ELM_B){this._fireEvent(SAXDriver.ELM_B,b.getName(),this)}else{if(a==XMLP._ELM_E){this._fireEvent(SAXDriver.ELM_E,b.getName())}else{if(a==XMLP._ELM_EMP){this._fireEvent(SAXDriver.ELM_B,b.getName(),this);this._fireEvent(SAXDriver.ELM_E,b.getName())}else{if(a==XMLP._TEXT){this._fireEvent(SAXDriver.CHARS,b.getContent(),b.getContentBegin(),b.getContentEnd()-b.getContentBegin())}else{if(a==XMLP._ENTITY){this._fireEvent(SAXDriver.CHARS,b.getContent(),b.getContentBegin(),b.getContentEnd()-b.getContentBegin())}else{if(a==XMLP._PI){this._fireEvent(SAXDriver.PI,b.getName(),b.getContent().substring(b.getContentBegin(),b.getContentEnd()))}else{if(a==XMLP._CDATA){this._fireEvent(SAXDriver.CD_B);this._fireEvent(SAXDriver.CHARS,b.getContent(),b.getContentBegin(),b.getContentEnd()-b.getContentBegin());this._fireEvent(SAXDriver.CD_E)}else{if(a==XMLP._COMMENT){this._fireEvent(SAXDriver.CMNT,b.getContent(),b.getContentBegin(),b.getContentEnd()-b.getContentBegin())}else{if(a==XMLP._DTD){}else{if(a==XMLP._ERROR){this._fireError(b.getContent())}else{if(a==XMLP._NONE){return}}}}}}}}}}}}};SAXStrings=function(){};SAXStrings.WHITESPACE=" \t\n\r";SAXStrings.QUOTES="\"'";SAXStrings.getColumnNumber=function(f,d){if(SAXStrings.isEmpty(f)){return -1}d=d||f.length;var b=f.substring(0,d).split("\n");var a=b[b.length-1];b.length--;var c=b.join("\n").length;return d-c};SAXStrings.getLineNumber=function(b,a){if(SAXStrings.isEmpty(b)){return -1}a=a||b.length;return b.substring(0,a).split("\n").length};SAXStrings.indexOfNonWhitespace=function(d,a,c){if(SAXStrings.isEmpty(d)){return -1}a=a||0;c=c||d.length;for(var b=a;b<c;b++){if(SAXStrings.WHITESPACE.indexOf(d.charAt(b))==-1){return b}}return -1};SAXStrings.indexOfWhitespace=function(d,a,c){if(SAXStrings.isEmpty(d)){return -1}a=a||0;c=c||d.length;for(var b=a;b<c;b++){if(SAXStrings.WHITESPACE.indexOf(d.charAt(b))!=-1){return b}}return -1};SAXStrings.isEmpty=function(a){return(a==null)||(a.length==0)};SAXStrings.lastIndexOfNonWhitespace=function(d,a,c){if(SAXStrings.isEmpty(d)){return -1}a=a||0;c=c||d.length;for(var b=c-1;b>=a;b--){if(SAXStrings.WHITESPACE.indexOf(d.charAt(b))==-1){return b}}return -1};SAXStrings.replace=function(f,a,d,c,b){if(SAXStrings.isEmpty(f)){return""}a=a||0;d=d||f.length;return f.substring(a,d).split(c).join(b)};Stack=function(){this.m_arr=new Array()};Stack.prototype.clear=function(){this.m_arr=new Array()};Stack.prototype.count=function(){return this.m_arr.length};Stack.prototype.destroy=function(){this.m_arr=null};Stack.prototype.peek=function(){if(this.m_arr.length==0){return null}return this.m_arr[this.m_arr.length-1]};Stack.prototype.pop=function(){if(this.m_arr.length==0){return null}var a=this.m_arr[this.m_arr.length-1];this.m_arr.length--;return a};Stack.prototype.push=function(a){this.m_arr[this.m_arr.length]=a};function isEmpty(a){return(a==null)||(a.length==0)}function trim(a,b,g){if(isEmpty(a)){return""}if(b==null){b=true}if(g==null){g=true}var h=0;var f=0;var d=0;var c=0;if(b==true){while((d<a.length)&&(whitespace.indexOf(a.charAt(d++))!=-1)){h++}}if(g==true){c=a.length-1;while((c>=h)&&(whitespace.indexOf(a.charAt(c--))!=-1)){f++}}return a.substring(h,a.length-f)}function __escapeString(f){var g=/&/g;var c=/</g;var a=/>/g;var b=/"/g;var d=/'/g;f=f.replace(g,"&amp;");f=f.replace(c,"&lt;");f=f.replace(a,"&gt;");f=f.replace(b,"&quot;");f=f.replace(d,"&apos;");return f}function __unescapeString(f){var g=/&amp;/g;var c=/&lt;/g;var a=/&gt;/g;var b=/&quot;/g;var d=/&apos;/g;f=f.replace(g,"&");f=f.replace(c,"<");f=f.replace(a,">");f=f.replace(b,'"');f=f.replace(d,"'");return f};