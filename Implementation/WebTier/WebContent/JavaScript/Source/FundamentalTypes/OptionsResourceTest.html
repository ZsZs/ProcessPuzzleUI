<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
   <title>Test page for OptionsResource.js</title>
   <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=8"/>
	
   <link rel="stylesheet" type="text/css" href="../JsUnit/css/jsUnitStyle.css">
   <script type="text/javascript" src="../JsUnit/app/jsUnitCore.js"></script>
	
   <script type="text/javascript" src="../../Libraries/JsHamcrest/jshamcrest.js"></script>
   <script type="text/javascript" src="../../Libraries/JsMockito/JsMockito.js"></script>
   <script type="text/javascript" src="../../Libraries/MooTools/mootools-core-1.4.0-full-compat.js"></script>
   <script type="text/javascript" src="../../Libraries/Sarissa/sarissa.js"></script>  
   <script type="text/javascript" src="../../Libraries/Sarissa/sarissa_ieemu_xpath.js"></script>
   <script type="text/javascript" src="../../Libraries/XMLforScript/xmlIO.js"></script>
   <script type="text/javascript" src="../../Libraries/XMLforScript/xmlEscape.js"></script>
   <script type="text/javascript" src="../../Libraries/XMLforScript/xmlsax.js"></script>
   <script type="text/javascript" src="../../Libraries/XMLforScript/preMadeSaxEventHandler.js"></script>
	
   <script type="text/javascript" src="../FundamentalTypes/WebUIException.js"></script>
   
   <script language="JavaScript" src="../FundamentalTypes/OptionsResource.js"></script>
   <script language="JavaScript" src="../FundamentalTypes/UndefinedXmlResourceException.js"></script>
   <script language="JavaScript" src="../FundamentalTypes/XmlResource.js"></script>
   <script language="JavaScript" src="../WebUIMessageBud/WebUIMessage.js"></script>
   <script language="JavaScript" src="../WebUIMessageBud/TestMessageOne.js"></script>
   <script language="JavaScript" src="../WebUIMessageBud/TestMessageTwo.js"></script>
	
   <script type="text/javascript">
      window.addEvent('domready', function() {
         runTestFunction();
      });
				
      JsHamcrest.Integration.JsUnit();
      JsMockito.Integration.JsUnit();
      
      var OPTIONS_ELEMENT_SELECTOR = "/sampleOptions/options";
      var OPTIONS_XML_URI = "../FundamentalTypes/Options.xml";
      var optionsElement;
      var optionsResource;
      var optionsXml;
      
      function setUp(){
         optionsXml = new XmlResource( OPTIONS_XML_URI );
         optionsElement = optionsXml.selectNode( OPTIONS_ELEMENT_SELECTOR );
         optionsResource = new OptionsResource( optionsElement );
      }

		function tearDown(){
		}
		
		function test_initialize() {
		   assertThat( optionsResource, not( nil() ));
		}
		
		function test_unmarshall_OptionsObject(){
		   optionsResource.unmarshall();
		   assertThat( optionsResource.getOptions(), not( nil() ));
		   assertThat( optionsResource.getOptions()['widgetContainerId'], equalTo( "HorizontalMenuBar" ));
		   assertThat( optionsResource.getOptions()['widgetDefinitionURI'], equalTo( "../HierarchicalMenuWidget/MenuDefinition.xml" ));
		   assertThat( optionsResource.getOptions()['arrayOfValues'].length, equalTo( 2 ));
		}
		
		
      //runs a test function during debugging
      function runTestFunction(){
         setUp();
         test_unmarshall_OptionsObject();
         tearDown();
      }
   </script>
</head>

<body>
	<h1>OptionsResource.js test page</H1>
	<p>This page contains tests for OptionsResource.js JavaScript class.</P>
</body>
</html>
